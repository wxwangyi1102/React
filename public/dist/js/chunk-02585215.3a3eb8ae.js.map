{"version":3,"sources":["webpack:///./src/views/bpm/execution-manage/Index.vue?9de8","webpack:///./src/views/bpm/execution-manage/ExecutionManageForm.vue?a0dc","webpack:///src/views/bpm/execution-manage/ExecutionManageForm.vue","webpack:///./src/views/bpm/execution-manage/ExecutionManageForm.vue?7f86","webpack:///./src/views/bpm/execution-manage/ExecutionManageForm.vue","webpack:///./src/views/bpm/execution-manage/Detail.vue?e2b5","webpack:///src/views/bpm/execution-manage/Detail.vue","webpack:///./src/views/bpm/execution-manage/Detail.vue?ae08","webpack:///./src/views/bpm/execution-manage/Detail.vue","webpack:///src/views/bpm/execution-manage/Index.vue","webpack:///./src/views/bpm/execution-manage/Index.vue?9c19","webpack:///./src/views/bpm/execution-manage/Index.vue","webpack:///./src/views/bpm/execution-manage/Detail.vue?69e6","webpack:///./src/views/bpm/execution-manage/Index.vue?6650","webpack:///./src/views/bpm/execution-manage/ExecutionManageForm.vue?0f24"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","_s","totalData","sumPlanTotalWeight","sumPlanInnerWeight","sumExportTotalWeight","sumPlanPlantArea","surplusPlanTotalWeight","surplusPlanInnerWeight","surplusExportTotalWeight","surplusPlanPlantArea","colCount","on","onQuery","onReset","model","value","queryItems","callback","$$v","$set","expression","_l","leafTypeEk","key","leafTypeCode","leafTypeName","onEdit","onAgree","onExport","busiYear","staticStyle","$event","handleUnitParse","weightUnit","weightUnitCd","weightUnitName","areaUnit","areaUnitCd","areaUnitName","ref","tableData","rows","loading","footerMethod","selectAllEvent","selectRowChange","scopedSlots","_u","fn","row","auditState","onDetail","staticRenderFns","staticClass","visible","onclose","nowYear","saving","trigger","mode","showStatus","validRules","handleValidData","onSave","name","data","surplusData","isEditor","isShowSaveAndAdd","oldDataRow","ruleForm","leafTypeList","planTotalWeight","required","message","planInnerWeight","planExportWeight","planPlantArea","methods","show","queryEditData","console","handleOlDataRow","obj","newTableData","saveTableData","$table","errMap","save","then","catch","handleBeforeSaveAdjustData","copyTableData","field","rowObj","itemObj","sumNum","list","count","columns","includes","column","component","_t","selectRow","orgName","leafTypeCd","orgCode","rowData","workAuditState","id","components","ExecutionManageForm","Detail","objectData","oldTotalData","isNullData","bizCode","workSubmitState","workOptType","weightUnitList","isSelected","areaUnitList","pagination","pageNumber","pageSize","total","computed","appConfig","created","mounted","handleOldTotalData","toFixed","handlePagination","handleGetLeafTypeList","res","orgObj","appCode","yearTypeCode","busiYearObj","pageNo","scope","query","finally","totalParams","title","content","onOk","idList","buPlanIds","leafTypeObj","weightUnitObj","areaUnitObj","selectedRows","totalDataObj","handleLeafTypeName","typeCd","checked","JSON"],"mappings":"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","file":"js/chunk-02585215.3a3eb8ae.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-container',{attrs:{\"height\":\"100%\"}},[_c('ec-container-header',[_c('ec-panel-item',[_c('ec-panel-item-left',[_c('ec-header',{attrs:{\"title\":\"收购计划执行量管理\",\"icon\":\"onetomany\",\"color-code\":\"008\"}})],1)],1)],1),_c('ec-container-body',[_c('ec-panel',{attrs:{\"auto\":false}},[_c('ec-panel-toolbar',[_c('ec-v-item',[_c('a-descriptions',{attrs:{\"bordered\":\"\",\"column\":4}},[_c('a-descriptions-item',{attrs:{\"label\":\"收购计划执行总量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.sumPlanTotalWeight)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"国内总量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.sumPlanInnerWeight))]),_c('a-descriptions-item',{attrs:{\"label\":\"出口备货总量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.sumExportTotalWeight)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"种植面积\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.sumPlanPlantArea)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"剩余收购计划执行总量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.surplusPlanTotalWeight)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"剩余国内总量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.surplusPlanInnerWeight)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"剩余出口备货总量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.surplusExportTotalWeight)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"剩余种植面积\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.surplusPlanPlantArea)+\" \")])],1)],1)],1),_c('ec-panel-toolbar',[_c('ec-query-panel',{attrs:{\"colCount\":_vm.colCount},on:{\"query\":_vm.onQuery,\"reset\":_vm.onReset}},[_c('ec-query-item',{attrs:{\"label\":\"烟叶类型\"}},[_c('ec-select',{attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.queryItems.leafTypeCode),callback:function ($$v) {_vm.$set(_vm.queryItems, \"leafTypeCode\", $$v)},expression:\"queryItems.leafTypeCode\"}},_vm._l((_vm.leafTypeList),function(leafTypeEk){return _c('a-select-option',{key:leafTypeEk.leafTypeCode},[_vm._v(\" \"+_vm._s(leafTypeEk.leafTypeName)+\" \")])}),1)],1)],1),_c('ec-divider')],1),_c('ec-panel-header',[_c('ec-v-item',[_c('ec-panel-item',[_c('ec-panel-item-left',[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onEdit}},[_vm._v(\"编辑\")]),_c('a-button',{on:{\"click\":_vm.onAgree}},[_vm._v(\"同意\")]),_c('a-button',{on:{\"click\":_vm.onExport}},[_vm._v(\"导出\")])],1),_c('ec-panel-item-right',[_c('a-space',{attrs:{\"size\":15}},[_c('span',[_vm._v(\"种植收购年度：\"+_vm._s(_vm.queryItems.busiYear)+\"年\")]),_c('span',[_vm._v(\"重量单位：\"),_c('ec-select',{staticStyle:{\"width\":\"150px\"},attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},on:{\"select\":function($event){return _vm.handleUnitParse()}},model:{value:(_vm.weightUnit),callback:function ($$v) {_vm.weightUnit=$$v},expression:\"weightUnit\"}},_vm._l((_vm.weightUnitList),function(weightUnit){return _c('a-select-option',{key:weightUnit.weightUnitCd},[_vm._v(\" \"+_vm._s(weightUnit.weightUnitName)+\" \")])}),1)],1),_c('span',[_vm._v(\"面积单位：\"),_c('ec-select',{staticStyle:{\"width\":\"150px\"},attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},on:{\"select\":function($event){return _vm.handleUnitParse()}},model:{value:(_vm.areaUnit),callback:function ($$v) {_vm.areaUnit=$$v},expression:\"areaUnit\"}},_vm._l((_vm.areaUnitList),function(areaUnit){return _c('a-select-option',{key:areaUnit.areaUnitCd},[_vm._v(\" \"+_vm._s(areaUnit.areaUnitName)+\" \")])}),1)],1)])],1)],1)],1)],1),_c('ec-panel-body',[_c('ec-table',{ref:\"table\",attrs:{\"border\":\"\",\"height\":\"100%\",\"auto\":false,\"data\":_vm.tableData.rows,\"loading\":_vm.loading,\"show-footer\":\"\",\"footer-method\":_vm.footerMethod,\"highlight-current-row\":\"\"},on:{\"checkbox-all\":_vm.selectAllEvent,\"checkbox-change\":_vm.selectRowChange}},[_c('ec-table-col',{attrs:{\"type\":\"checkbox\",\"width\":\"50\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"title\":\"序号\",\"type\":\"seq\",\"width\":\"70\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"field\":\"orgCode\",\"title\":\"单位代码\",\"align\":\"center\",\"width\":\"200\"}}),_c('ec-table-col',{attrs:{\"field\":\"orgName\",\"title\":\"单位名称\",\"align\":\"left\",\"min-width\":\"150\"}}),_c('ec-table-colgroup',{attrs:{\"title\":\"收购计划执行量\"}},[_c('ec-table-col',{attrs:{\"field\":\"planTotalWeight\",\"title\":\"合计\",\"align\":\"center\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"planInnerWeight\",\"title\":\"国内\",\"align\":\"center\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"planExportWeight\",\"title\":\"出口备货\",\"align\":\"center\",\"width\":\"150\"}})],1),_c('ec-table-col',{attrs:{\"field\":\"planPlantArea\",\"title\":\"种植面积\",\"align\":\"right\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"auditState\",\"title\":\"审核状态\",\"align\":\"left\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.auditState === '1')?_c('div',[_c('span',[_vm._v(\"处长审批\")])]):(row.auditState === '2')?_c('div',[_c('span',[_vm._v(\"副总经理审批\")])]):(row.auditState === '3')?_c('div',[_c('span',[_vm._v(\"完成\")])]):_c('div',[_c('span',[_vm._v(\"未审批\")])])]}}])}),_c('ec-table-col',{attrs:{\"title\":\"操作\",\"align\":\"center\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.onDetail(row)}}},[_vm._v(\"详细\")])]}}])})],1)],1)],1),_c('execution-manage-form',{ref:\"ExecutionManageForm\",on:{\"onQuery\":_vm.onQuery}}),_c('detail',{ref:\"Detail\"})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-drawer',{staticClass:\"ec-draw-form\",attrs:{\"title\":\"收购计划执行量录入\",\"visible\":_vm.visible,\"width\":\"80%\",\"is-confirm\":true},on:{\"close\":_vm.onclose}},[_c('ec-container',{attrs:{\"height\":\"100%\",\"fixed\":\"top bottom\",\"color-code\":\"007\"}},[_c('ec-container-header',[_c('ec-panel-item',[_c('ec-panel-item-left',[_c('ec-header',{attrs:{\"title\":\"收购计划执行量管理\",\"icon\":\"onetomany\",\"color-code\":\"008\"}})],1),_c('ec-panel-item-right',[_c('div',{staticClass:\"year\"},[_vm._v(\" 种植收购年度：\"+_vm._s(_vm.nowYear)+\"年;正在编辑的烟叶类型：\"+_vm._s(_vm.leafTypeName)+\"；单位：\"+_vm._s(_vm.weightUnitName)+\"、\"+_vm._s(_vm.areaUnitName)+\" \")])])],1)],1),_c('ec-container-body',[_c('ec-panel',{attrs:{\"auto\":false}},[_c('ec-panel-toolbar',[_c('a-descriptions',{attrs:{\"bordered\":\"\",\"column\":4}},[_c('a-descriptions-item',{attrs:{\"label\":\"收购计划执行总量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.sumPlanTotalWeight)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"国内总量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.sumPlanInnerWeight))]),_c('a-descriptions-item',{attrs:{\"label\":\"出口备货总量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.sumExportTotalWeight)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"种植面积\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.sumPlanPlantArea)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"剩余收购计划执行总量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.surplusPlanTotalWeight)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"剩余国内总量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.surplusPlanInnerWeight)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"剩余出口备货总量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.surplusExportTotalWeight)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"剩余种植面积\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.surplusPlanPlantArea)+\" \")])],1)],1),_c('ec-panel-body',[_c('ec-table',{ref:\"xTable\",staticClass:\"my-xtable-antd\",attrs:{\"border\":\"\",\"show-overflow\":\"\",\"height\":\"100%\",\"auto\":false,\"keep-source\":\"\",\"loading\":_vm.saving,\"data\":_vm.tableData,\"edit-config\":{ trigger: 'click', mode: 'row', showStatus: true },\"edit-rules\":_vm.validRules,\"show-footer\":\"\",\"footer-method\":_vm.footerMethod}},[_c('ec-table-col',{attrs:{\"title\":\"序号\",\"type\":\"seq\",\"width\":\"70\",\"fixed\":\"left\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"field\":\"orgCode\",\"title\":\"单位代码\",\"align\":\"left\",\"fixed\":\"left\",\"min-width\":\"180\"}}),_c('ec-table-col',{attrs:{\"field\":\"orgName\",\"title\":\"单位名称\",\"fixed\":\"left\",\"align\":\"left\",\"min-width\":\"200\"}}),_c('ec-table-colgroup',{attrs:{\"title\":\"收购计划执行量\"}},[_c('ec-table-col',{attrs:{\"field\":\"planTotalWeight\",\"title\":\"合计\",\"align\":\"center\",\"width\":\"150\",\"edit-render\":{}},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-input-number',{attrs:{\"min\":0,\"max\":100000,\"precision\":2},on:{\"blur\":function($event){return _vm.handleValidData(row, 'planTotalWeight')}},model:{value:(row.planTotalWeight),callback:function ($$v) {_vm.$set(row, \"planTotalWeight\", $$v)},expression:\"row.planTotalWeight\"}})]}}])}),_c('ec-table-col',{attrs:{\"field\":\"planInnerWeight\",\"title\":\"国内\",\"align\":\"center\",\"width\":\"150\",\"edit-render\":{}},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-input-number',{attrs:{\"min\":0,\"max\":100000,\"precision\":2},on:{\"blur\":function($event){return _vm.handleValidData(row, 'planInnerWeight')}},model:{value:(row.planInnerWeight),callback:function ($$v) {_vm.$set(row, \"planInnerWeight\", $$v)},expression:\"row.planInnerWeight\"}})]}}])}),_c('ec-table-col',{attrs:{\"field\":\"planExportWeight\",\"title\":\"出口备货\",\"width\":\"150\",\"align\":\"center\",\"edit-render\":{}},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-input-number',{attrs:{\"min\":0,\"max\":100000,\"precision\":2},on:{\"blur\":function($event){return _vm.handleValidData(row, 'planExportWeight')}},model:{value:(row.planExportWeight),callback:function ($$v) {_vm.$set(row, \"planExportWeight\", $$v)},expression:\"row.planExportWeight\"}})]}}])})],1),_c('ec-table-col',{attrs:{\"field\":\"planPlantArea\",\"title\":\"种植面积\",\"align\":\"right\",\"width\":\"150\",\"edit-render\":{}},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-input-number',{attrs:{\"min\":0,\"max\":100000,\"precision\":2},on:{\"blur\":function($event){return _vm.handleValidData(row, 'planPlantArea')}},model:{value:(row.planPlantArea),callback:function ($$v) {_vm.$set(row, \"planPlantArea\", $$v)},expression:\"row.planPlantArea\"}})]}}])}),_c('ec-table-colgroup',{attrs:{\"title\":\"下属单位已分解量\"}},[_c('ec-table-colgroup',{attrs:{\"title\":\"收购计划执行量\"}},[_c('ec-table-col',{attrs:{\"field\":\"childPlanTotalWeight\",\"title\":\"合计\",\"align\":\"left\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"childPlanInnerWeight\",\"title\":\"国内\",\"align\":\"left\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"childPlanExportWeight\",\"title\":\"出口备货\",\"align\":\"left\",\"width\":\"150\"}})],1)],1),_c('ec-table-col',{attrs:{\"field\":\"childPlanPlantArea\",\"title\":\"种植面积\",\"align\":\"left\",\"width\":\"150\"}})],1)],1)],1)],1),_c('ec-container-footer',{attrs:{\"fixed\":\"\"}},[_c('a-space',[_c('a-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.saving},on:{\"click\":_vm.onSave}},[_vm._v(\"保存\")]),_c('a-button',{on:{\"click\":_vm.onclose}},[_vm._v(\"取消\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ec-drawer\r\n    title=\"收购计划执行量录入\"\r\n    :visible=\"visible\"\r\n    width=\"80%\"\r\n    @close=\"onclose\"\r\n    class=\"ec-draw-form\"\r\n    :is-confirm=\"true\"\r\n  >\r\n    <ec-container height=\"100%\" fixed=\"top bottom\" color-code=\"007\">\r\n      <ec-container-header>\r\n        <ec-panel-item>\r\n          <ec-panel-item-left>\r\n            <ec-header title=\"收购计划执行量管理\" icon=\"onetomany\" color-code=\"008\" />\r\n          </ec-panel-item-left>\r\n          <ec-panel-item-right>\r\n            <div class=\"year\">\r\n              种植收购年度：{{ nowYear }}年;正在编辑的烟叶类型：{{ leafTypeName }}；单位：{{\r\n                weightUnitName\r\n              }}、{{ areaUnitName }}\r\n            </div>\r\n          </ec-panel-item-right>\r\n        </ec-panel-item>\r\n      </ec-container-header>\r\n      <ec-container-body>\r\n        <ec-panel :auto=\"false\">\r\n          <ec-panel-toolbar>\r\n            <a-descriptions bordered :column=\"4\">\r\n              <a-descriptions-item label=\"收购计划执行总量\">\r\n                {{ totalData.sumPlanTotalWeight }}\r\n              </a-descriptions-item>\r\n              <a-descriptions-item label=\"国内总量\">\r\n                {{ totalData.sumPlanInnerWeight }}</a-descriptions-item\r\n              >\r\n              <a-descriptions-item label=\"出口备货总量\">\r\n                {{ totalData.sumExportTotalWeight }}\r\n              </a-descriptions-item>\r\n              <a-descriptions-item label=\"种植面积\">\r\n                {{ totalData.sumPlanPlantArea }}\r\n              </a-descriptions-item>\r\n\r\n              <a-descriptions-item label=\"剩余收购计划执行总量\">\r\n                {{ totalData.surplusPlanTotalWeight }}\r\n              </a-descriptions-item>\r\n              <a-descriptions-item label=\"剩余国内总量\">\r\n                {{ totalData.surplusPlanInnerWeight }}\r\n              </a-descriptions-item>\r\n              <a-descriptions-item label=\"剩余出口备货总量\">\r\n                {{ totalData.surplusExportTotalWeight }}\r\n              </a-descriptions-item>\r\n              <a-descriptions-item label=\"剩余种植面积\">\r\n                {{ totalData.surplusPlanPlantArea }}\r\n              </a-descriptions-item>\r\n            </a-descriptions>\r\n          </ec-panel-toolbar>\r\n          <ec-panel-body>\r\n            <ec-table\r\n              border\r\n              show-overflow\r\n              height=\"100%\"\r\n              :auto=\"false\"\r\n              keep-source\r\n              ref=\"xTable\"\r\n              class=\"my-xtable-antd\"\r\n              :loading=\"saving\"\r\n              :data=\"tableData\"\r\n              :edit-config=\"{ trigger: 'click', mode: 'row', showStatus: true }\"\r\n              :edit-rules=\"validRules\"\r\n              show-footer\r\n              :footer-method=\"footerMethod\"\r\n            >\r\n              <ec-table-col title=\"序号\" type=\"seq\" width=\"70\" fixed=\"left\" align=\"center\" />\r\n              <ec-table-col\r\n                field=\"orgCode\"\r\n                title=\"单位代码\"\r\n                align=\"left\"\r\n                fixed=\"left\"\r\n                min-width=\"180\"\r\n              />\r\n              <ec-table-col\r\n                field=\"orgName\"\r\n                title=\"单位名称\"\r\n                fixed=\"left\"\r\n                align=\"left\"\r\n                min-width=\"200\"\r\n              />\r\n\r\n              <ec-table-colgroup title=\"收购计划执行量\">\r\n                <ec-table-col\r\n                  field=\"planTotalWeight\"\r\n                  title=\"合计\"\r\n                  align=\"center\"\r\n                  width=\"150\"\r\n                  :edit-render=\"{}\"\r\n                >\r\n                  <template #edit=\"{ row }\">\r\n                    <!--   :visible=\"row.planTotalWeight < row.childPlanTotalWeight ? true : false\" -->\r\n                    <a-input-number\r\n                      v-model=\"row.planTotalWeight\"\r\n                      :min=\"0\"\r\n                      :max=\"100000\"\r\n                      :precision=\"2\"\r\n                      @blur=\"handleValidData(row, 'planTotalWeight')\"\r\n                    ></a-input-number>\r\n                  </template>\r\n                </ec-table-col>\r\n\r\n                <ec-table-col\r\n                  field=\"planInnerWeight\"\r\n                  title=\"国内\"\r\n                  align=\"center\"\r\n                  width=\"150\"\r\n                  :edit-render=\"{}\"\r\n                >\r\n                  <template #edit=\"{ row }\">\r\n                    <a-input-number\r\n                      v-model=\"row.planInnerWeight\"\r\n                      :min=\"0\"\r\n                      :max=\"100000\"\r\n                      :precision=\"2\"\r\n                      @blur=\"handleValidData(row, 'planInnerWeight')\"\r\n                    ></a-input-number>\r\n                  </template>\r\n                </ec-table-col>\r\n                <ec-table-col\r\n                  field=\"planExportWeight\"\r\n                  title=\"出口备货\"\r\n                  width=\"150\"\r\n                  align=\"center\"\r\n                  :edit-render=\"{}\"\r\n                >\r\n                  <template #edit=\"{ row }\">\r\n                    <a-input-number\r\n                      v-model=\"row.planExportWeight\"\r\n                      :min=\"0\"\r\n                      :max=\"100000\"\r\n                      :precision=\"2\"\r\n                      @blur=\"handleValidData(row, 'planExportWeight')\"\r\n                    ></a-input-number>\r\n                  </template>\r\n                </ec-table-col>\r\n              </ec-table-colgroup>\r\n              <ec-table-col\r\n                field=\"planPlantArea\"\r\n                title=\"种植面积\"\r\n                align=\"right\"\r\n                width=\"150\"\r\n                :edit-render=\"{}\"\r\n              >\r\n                <template #edit=\"{ row }\">\r\n                  <a-input-number\r\n                    v-model=\"row.planPlantArea\"\r\n                    :min=\"0\"\r\n                    :max=\"100000\"\r\n                    :precision=\"2\"\r\n                    @blur=\"handleValidData(row, 'planPlantArea')\"\r\n                  ></a-input-number>\r\n                </template>\r\n              </ec-table-col>\r\n\r\n              <ec-table-colgroup title=\"下属单位已分解量\">\r\n                <ec-table-colgroup title=\"收购计划执行量\">\r\n                  <ec-table-col\r\n                    field=\"childPlanTotalWeight\"\r\n                    title=\"合计\"\r\n                    align=\"left\"\r\n                    width=\"150\"\r\n                  />\r\n                  <ec-table-col\r\n                    field=\"childPlanInnerWeight\"\r\n                    title=\"国内\"\r\n                    align=\"left\"\r\n                    width=\"150\"\r\n                  />\r\n\r\n                  <ec-table-col\r\n                    field=\"childPlanExportWeight\"\r\n                    title=\"出口备货\"\r\n                    align=\"left\"\r\n                    width=\"150\"\r\n                  />\r\n                </ec-table-colgroup>\r\n              </ec-table-colgroup>\r\n\r\n              <ec-table-col field=\"childPlanPlantArea\" title=\"种植面积\" align=\"left\" width=\"150\" />\r\n            </ec-table>\r\n          </ec-panel-body>\r\n        </ec-panel>\r\n      </ec-container-body>\r\n      <ec-container-footer fixed>\r\n        <a-space>\r\n          <a-button type=\"primary\" @click=\"onSave\" :loading=\"saving\">保存</a-button>\r\n          <a-button @click=\"onclose\">取消</a-button>\r\n        </a-space>\r\n      </ec-container-footer>\r\n    </ec-container>\r\n  </ec-drawer>\r\n</template>\r\n<script>\r\nimport _ from 'lodash';\r\n\r\nexport default {\r\n  name: 'ExecutionFormManage',\r\n  data() {\r\n    return {\r\n      surplusData: {},\r\n      totalData: {},\r\n      tableData: [],\r\n      data: {},\r\n      leafTypeName: '',\r\n      weightUnitName: '',\r\n      areaUnitName: '',\r\n      weightUnit: 1,\r\n      areaUnit: 1,\r\n      nowYear: '',\r\n      visible: false,\r\n      isEditor: false,\r\n      saving: false,\r\n      isShowSaveAndAdd: true,\r\n      oldDataRow: [],\r\n      ruleForm: {},\r\n      leafTypeCode: '',\r\n      leafTypeList: [],\r\n      validRules: {\r\n        planTotalWeight: [{ required: true, message: '请输入合计' }],\r\n        planInnerWeight: [{ required: true, message: '请输入国内执行量' }],\r\n        planExportWeight: [{ required: true, message: '请输入出口备货执行量' }],\r\n        planPlantArea: [{ required: true, message: '请输入种植面积' }],\r\n      },\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    // 显示推窗\r\n    async show(data) {\r\n      this.visible = true;\r\n      this.data = data;\r\n\r\n      this.totalData = data.totalDataObj;\r\n      this.leafTypeName = data.leafTypeObj.leafTypeName;\r\n      this.leafTypeCode = data.leafTypeObj.leafTypeCode;\r\n      this.weightUnitName = data.weightUnitObj.weightUnitName;\r\n      this.weightUnit = data.weightUnitObj.weightUnitCd;\r\n      this.areaUnit = data.areaUnitObj.areaUnitCd;\r\n      this.areaUnitName = data.areaUnitObj.areaUnitName;\r\n      this.nowYear = data.nowYear;\r\n      // 获取编辑的数据\r\n      await this.queryEditData();\r\n    },\r\n\r\n    async queryEditData() {\r\n      this.loading = true;\r\n      const data = {\r\n        leafTypeCode: this.leafTypeCode,\r\n        busiYear: this.nowYear,\r\n      };\r\n      console.log(data);\r\n      await this.$apis.bpm.executionManage.queryEditData(data).then((res) => {\r\n        const rows = res.rows || [];\r\n        this.tableData = rows;\r\n        this.saveTableData = _.cloneDeep(rows);\r\n      });\r\n      this.handleUnitParse();\r\n    },\r\n\r\n    // 处理单位转换\r\n    handleUnitParse() {\r\n      const newTableData = [];\r\n      //  列表的单位转换\r\n      const handleOlDataRow = JSON.parse(JSON.stringify(this.tableData));\r\n      handleOlDataRow.forEach((item) => {\r\n        const obj = item;\r\n        obj.leafTypeCode = this.leafTypeCode;\r\n        obj.busiYear = this.nowYear;\r\n        // 本级\r\n        obj.planTotalWeight = (obj.planTotalWeight / this.weightUnit).toFixed(2);\r\n        obj.planInnerWeight = (obj.planInnerWeight / this.weightUnit).toFixed(2);\r\n        obj.planExportWeight = (obj.planExportWeight / this.weightUnit).toFixed(2);\r\n        obj.planPlantArea = (obj.planPlantArea / this.areaUnit).toFixed(2);\r\n\r\n        // 下级数据\r\n        obj.childPlanTotalWeight = (obj.childPlanTotalWeight / this.weightUnit).toFixed(2);\r\n        obj.childPlanInnerWeight = (obj.childPlanInnerWeight / this.weightUnit).toFixed(2);\r\n        obj.childPlanExportWeight = (obj.childPlanExportWeight / this.weightUnit).toFixed(2);\r\n        obj.childPlanPlantArea = (obj.childPlanPlantArea / this.areaUnit).toFixed(2);\r\n        newTableData.push(obj);\r\n      });\r\n\r\n      this.tableData = newTableData;\r\n    },\r\n\r\n    // 保存\r\n    async onSave() {\r\n      const { saveTableData } = this;\r\n      console.log(saveTableData);\r\n      if (!saveTableData) {\r\n        this.$message.error('无数据，不能进行保存！');\r\n        return;\r\n      }\r\n\r\n      const $table = this.$refs.xTable;\r\n      const errMap = await $table.validate(true).catch((err) => err);\r\n      if (errMap) {\r\n        this.$message.error('校验不通过！');\r\n      } else {\r\n        this.saving = true;\r\n        this.$apis.bpm.executionManage\r\n          .save(saveTableData)\r\n          .then(() => {\r\n            this.saving = false;\r\n            this.$message.success('保存成功');\r\n            this.$emit('onQuery');\r\n            this.onclose();\r\n          })\r\n          .catch(() => {\r\n            this.saving = false;\r\n          });\r\n      }\r\n    },\r\n\r\n    // 保存之前处理本次调整的数据\r\n    handleBeforeSaveAdjustData() {\r\n      // 在保存之前先拷贝，避免保存不通过之后，导致数据变了。    乘法\r\n      console.log(`保存之前：${JSON.stringify(this.tableData)}`);\r\n      const copyTableData = JSON.parse(JSON.stringify(this.tableData));\r\n      const saveTableData = [];\r\n      console.log(`拷贝之后的数据${JSON.stringify(copyTableData)}----单位：${this.weightUnit}`);\r\n      copyTableData.forEach((item) => {\r\n        const obj = item;\r\n        obj.planTotalWeight = (obj.planTotalWeight * this.weightUnit).toFixed(2);\r\n        obj.planInnerWeight = (obj.planInnerWeight * this.weightUnit).toFixed(2);\r\n        obj.planExportWeight = (obj.planExportWeight * this.weightUnit).toFixed(2);\r\n        obj.planPlantArea = (obj.planPlantArea * this.areaUnit).toFixed(2);\r\n        saveTableData.push(obj);\r\n      });\r\n      return saveTableData;\r\n    },\r\n\r\n    // 处理保存数据的验证\r\n    handleValidData(row, field) {\r\n      const rowObj = row;\r\n      const planTotalWeight = row.planTotalWeight || 0;\r\n      const planExportWeight = row.planExportWeight || 0;\r\n      const planInnerWeight = row.planInnerWeight || 0;\r\n      const planPlantArea = row.planPlantArea || 0;\r\n\r\n      const childPlanTotalWeight = row.childPlanTotalWeight || 0;\r\n      const childPlanExportWeight = row.childPlanExportWeight || 0;\r\n      const childPlanInnerWeight = row.childPlanInnerWeight || 0;\r\n      const childPlanPlantArea = row.childPlanPlantArea || 0;\r\n      const innerAndExportValue = planInnerWeight + planExportWeight;\r\n\r\n      if (planTotalWeight < innerAndExportValue) {\r\n        this.$message.warn('[合计]不能小于国内跟出口备货的和');\r\n        rowObj[field] = '';\r\n        return;\r\n      }\r\n\r\n      if (field === 'planTotalWeight' && planTotalWeight < childPlanTotalWeight) {\r\n        this.$message.warn('[合计]不能小于下级单位已分解的[合计]');\r\n        rowObj.planTotalWeight = '';\r\n        return;\r\n      }\r\n      if (field === 'planExportWeight' && planExportWeight < childPlanExportWeight) {\r\n        this.$message.warn('[出口备货]不能小于下级单位已分解的[出口备货]');\r\n        rowObj.planExportWeight = '';\r\n        return;\r\n      }\r\n\r\n      if (field === 'planInnerWeight' && planInnerWeight < childPlanInnerWeight) {\r\n        this.$message.warn('[国内]不能小于下级单位已分解的[国内]');\r\n        rowObj.planInnerWeight = '';\r\n        return;\r\n      }\r\n      if (field === 'planPlantArea' && planPlantArea < childPlanPlantArea) {\r\n        this.$message.warn('[种植面积]不能小于下级单位已分解的[种植面积]');\r\n        rowObj.planPlantArea = '';\r\n      }\r\n\r\n      const value = rowObj[field];\r\n      if (!value) {\r\n        rowObj[field] = '0.00';\r\n      }\r\n      this.saveTableData.forEach((item) => {\r\n        if (item.buPlanId === rowObj.buPlanId) {\r\n          const itemObj = item;\r\n          if (field === 'planPlantArea') {\r\n            itemObj[field] = (Number(row[field]) * Number(this.areaUnit)).toFixed(2);\r\n          } else {\r\n            itemObj[field] = (Number(row[field]) * Number(this.weightUnit)).toFixed(2);\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    // 合计\r\n    sumNum(list, field) {\r\n      let count = 0;\r\n      list.forEach((item) => {\r\n        count += Number(item[field]);\r\n      });\r\n      return count.toFixed(2);\r\n    },\r\n    // 底部行\r\n    footerMethod({ columns, data }) {\r\n      return [\r\n        columns.map((column, columnIndex) => {\r\n          if (columnIndex === 0) {\r\n            return '合计';\r\n          }\r\n          if (\r\n            [\r\n              'planTotalWeight',\r\n              'planInnerWeight',\r\n              'planExportWeight',\r\n              'planPlantArea',\r\n              'childPlanTotalWeight',\r\n              'childPlanInnerWeight',\r\n              'childPlanExportWeight',\r\n              'childPlanPlantArea',\r\n            ].includes(column.property)\r\n          ) {\r\n            return this.sumNum(data, column.property);\r\n          }\r\n          return null;\r\n        }),\r\n      ];\r\n    },\r\n\r\n    // 取消\r\n    onclose() {\r\n      // this.$refs.modelRef.resetFields();\r\n      this.tableData = [];\r\n      this.visible = false;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.year {\r\n  font-size: 18px;\r\n  line-height: 22px;\r\n\r\n  color: #18191a;\r\n  font-weight: 700;\r\n  padding-top: 18px;\r\n  padding-right: 50px;\r\n  font-family: '微软雅黑 Bold', '微软雅黑', 'Microsoft YaHei', sans-serif;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExecutionManageForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExecutionManageForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExecutionManageForm.vue?vue&type=template&id=1272c28e&scoped=true&\"\nimport script from \"./ExecutionManageForm.vue?vue&type=script&lang=js&\"\nexport * from \"./ExecutionManageForm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ExecutionManageForm.vue?vue&type=style&index=0&id=1272c28e&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1272c28e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-drawer',{staticClass:\"ec-draw-form\",attrs:{\"title\":\"详情\",\"visible\":_vm.visible,\"size\":\"large\"},on:{\"close\":_vm.onclose}},[_c('ec-container',{attrs:{\"fixed\":\"top bottom\",\"height\":\"100%\",\"color-code\":\"007\"}},[_c('ec-container-body',[_c('ec-panel',{staticStyle:{\"height\":\"99%\"},attrs:{\"color-code\":\"002\",\"auto\":false}},[_c('ec-panel-header',[_vm._t(\"default\",null,{\"data\":_vm.data}),_c('ec-panel-item-left',{staticClass:\"ec-panel-item-left\"},[_c('div',{staticClass:\"ec-panel-title\"},[_c('div',{staticClass:\"ec-bar bg-color-1\"}),_c('div',{staticClass:\"ec-title\"},[_vm._v(\" 单位：\"+_vm._s(_vm.selectRow.orgName)+\"；烟叶类型：\"+_vm._s(_vm.leafTypeName)+\" \")])])]),_c('ec-panel-item-right',[_c('div',{staticStyle:{\"display\":\"inline-block\"}},[_c('span',{staticStyle:{\"margin-left\":\"14px\"}},[_vm._v(\"种植收购年度：\"+_vm._s(_vm.nowYear)+\"年;计量单位：\"+_vm._s(_vm.weightUnitName)+\"、\"+_vm._s(_vm.areaUnitName))])])])],2),_c('ec-panel-body',[_c('ec-table',{ref:\"xTable\",staticClass:\"my-xtable-antd\",attrs:{\"border\":\"\",\"show-overflow\":\"\",\"keep-source\":\"\",\"data\":_vm.tableData,\"show-footer\":\"\",\"footer-method\":_vm.footerMethod,\"auto\":false,\"height\":\"100%\"}},[_c('ec-table-col',{attrs:{\"type\":\"seq\",\"title\":\"序号\",\"align\":\"left\",\"width\":\"80\"}}),_c('ec-table-col',{attrs:{\"field\":\"recordDate\",\"title\":\"录入日期\",\"align\":\"left\",\"min-width\":\"150\"}}),_c('ec-table-colgroup',{attrs:{\"title\":\"收购计划执行量\"}},[_c('ec-table-col',{attrs:{\"field\":\"planTotalWeight\",\"title\":\"合计\",\"align\":\"center\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"planInnerWeight\",\"title\":\"国内\",\"align\":\"center\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"planExportWeight\",\"title\":\"出口备货\",\"align\":\"center\",\"width\":\"150\"}})],1),_c('ec-table-col',{attrs:{\"field\":\"planPlantArea\",\"title\":\"种植面积\",\"align\":\"right\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"auditState\",\"title\":\"审核状态\",\"align\":\"left\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.auditState === '1')?_c('div',[_c('span',[_vm._v(\"处长审批\")])]):(row.auditState === '2')?_c('div',[_c('span',[_vm._v(\"副总经理审批\")])]):(row.auditState === '3')?_c('div',[_c('span',[_vm._v(\"完成\")])]):_c('div',[_c('span',[_vm._v(\"未审批\")])])]}}])})],1)],1)],1)],1),_c('ec-container-footer',{attrs:{\"fixed\":\"\"}},[_c('a-space',[_c('a-button',{on:{\"click\":_vm.onclose}},[_vm._v(\"关闭\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ec-drawer title=\"详情\" :visible=\"visible\" size=\"large\" @close=\"onclose\" class=\"ec-draw-form\">\r\n    <ec-container fixed=\"top bottom\" height=\"100%\" color-code=\"007\">\r\n      <ec-container-body>\r\n        <ec-panel color-code=\"002\" :auto=\"false\" style=\"height: 99%\">\r\n          <ec-panel-header>\r\n            <slot :data=\"data\"></slot>\r\n            <!-- <slot name=\"two\"></slot>\r\n            <slot name=\"one\"></slot> -->\r\n            <ec-panel-item-left class=\"ec-panel-item-left\">\r\n              <div class=\"ec-panel-title\">\r\n                <div class=\"ec-bar bg-color-1\"></div>\r\n                <div class=\"ec-title\">\r\n                  单位：{{ selectRow.orgName }}；烟叶类型：{{ leafTypeName }}\r\n                </div>\r\n              </div>\r\n            </ec-panel-item-left>\r\n\r\n            <ec-panel-item-right>\r\n              <div style=\"display: inline-block\">\r\n                <span style=\"margin-left: 14px\"\r\n                  >种植收购年度：{{ nowYear }}年;计量单位：{{ weightUnitName }}、{{\r\n                    areaUnitName\r\n                  }}</span\r\n                >\r\n              </div>\r\n            </ec-panel-item-right>\r\n          </ec-panel-header>\r\n\r\n          <ec-panel-body>\r\n            <ec-table\r\n              border\r\n              show-overflow\r\n              keep-source\r\n              ref=\"xTable\"\r\n              class=\"my-xtable-antd\"\r\n              :data=\"tableData\"\r\n              show-footer\r\n              :footer-method=\"footerMethod\"\r\n              :auto=\"false\"\r\n              height=\"100%\"\r\n            >\r\n              <ec-table-col type=\"seq\" title=\"序号\" align=\"left\" width=\"80\" />\r\n              <ec-table-col field=\"recordDate\" title=\"录入日期\" align=\"left\" min-width=\"150\" />\r\n              <ec-table-colgroup title=\"收购计划执行量\">\r\n                <ec-table-col field=\"planTotalWeight\" title=\"合计\" align=\"center\" width=\"150\" />\r\n                <ec-table-col field=\"planInnerWeight\" title=\"国内\" align=\"center\" width=\"150\" />\r\n                <ec-table-col\r\n                  field=\"planExportWeight\"\r\n                  title=\"出口备货\"\r\n                  align=\"center\"\r\n                  width=\"150\"\r\n                />\r\n              </ec-table-colgroup>\r\n              <ec-table-col field=\"planPlantArea\" title=\"种植面积\" align=\"right\" width=\"150\" />\r\n              <ec-table-col field=\"auditState\" title=\"审核状态\" align=\"left\" width=\"150\">\r\n                <template #default=\"{ row }\">\r\n                  <div v-if=\"row.auditState === '1'\">\r\n                    <span>处长审批</span>\r\n                  </div>\r\n                  <div v-else-if=\"row.auditState === '2'\">\r\n                    <span>副总经理审批</span>\r\n                  </div>\r\n                  <div v-else-if=\"row.auditState === '3'\">\r\n                    <span>完成</span>\r\n                  </div>\r\n                  <div v-else>\r\n                    <span>未审批</span>\r\n                  </div>\r\n                </template>\r\n              </ec-table-col>\r\n            </ec-table>\r\n          </ec-panel-body>\r\n        </ec-panel>\r\n      </ec-container-body>\r\n      <ec-container-footer fixed>\r\n        <a-space>\r\n          <a-button @click=\"onclose\">关闭</a-button>\r\n        </a-space>\r\n      </ec-container-footer>\r\n    </ec-container>\r\n  </ec-drawer>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'ExecutionDtlManage',\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      data: {},\r\n      leafTypeName: '',\r\n      leafTypeCode: '',\r\n      leafTypeCd: '',\r\n      weightUnitName: '',\r\n      weightUnit: 1,\r\n      areaUnit: 1,\r\n      areaUnitName: '',\r\n      orgCode: '',\r\n      nowYear: '',\r\n      rowData: '',\r\n      visible: false,\r\n      selectRow: {},\r\n      leafTypeList: [],\r\n      workAuditState: [\r\n        { id: '', name: '全部' },\r\n        { id: '0', name: '未审批' },\r\n        { id: '1', name: '处长审批' },\r\n        { id: '2', name: '副总经理审批' },\r\n        { id: '3', name: '完成' },\r\n      ],\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    // 处理单位转换\r\n    handleUnitParse() {\r\n      //  列表的单位转换\r\n      this.tableData.forEach((item) => {\r\n        const obj = item;\r\n        obj.planTotalWeight = (obj.planTotalWeight / this.weightUnit).toFixed(2);\r\n        obj.planInnerWeight = (obj.planInnerWeight / this.weightUnit).toFixed(2);\r\n        obj.planExportWeight = (obj.planExportWeight / this.weightUnit).toFixed(2);\r\n        obj.planPlantArea = (obj.planPlantArea / this.areaUnit).toFixed(2);\r\n      });\r\n    },\r\n\r\n    // 显示推窗\r\n    async show(row) {\r\n      this.visible = true;\r\n\r\n      this.data = row;\r\n      const selectRow = row.selectedRows;\r\n      this.selectRow = selectRow;\r\n      this.orgCode = selectRow.orgCode;\r\n      this.leafTypeCode = selectRow.leafTypeCode;\r\n\r\n      this.leafTypeName = row.leafTypeObj.leafTypeName;\r\n      this.weightUnitName = row.weightUnitObj.weightUnitName;\r\n      this.weightUnit = row.weightUnitObj.weightUnitCd;\r\n      this.areaUnitName = row.areaUnitObj.areaUnitName;\r\n      this.areaUnit = row.areaUnitObj.areaUnitCd;\r\n      this.nowYear = row.nowYear;\r\n\r\n      const tableData = await this.$apis.bpm.executionManage.queryDetail({\r\n        leafTypeCode: this.leafTypeCode,\r\n        orgCode: this.orgCode,\r\n        busiYear: this.nowYear,\r\n      });\r\n\r\n      console.log(`详情返回的数据：${JSON.stringify(tableData)}`);\r\n      this.tableData = tableData?.rows;\r\n      this.handleUnitParse();\r\n    },\r\n\r\n    // 合计的数据\r\n    sumNum(list, field) {\r\n      let count = 0;\r\n      list.forEach((item) => {\r\n        const value = item;\r\n        value[field] = value[field] || 0;\r\n        count += Number(item[field]);\r\n      });\r\n      return count.toFixed(2);\r\n    },\r\n\r\n    // 合计行\r\n    footerMethod({ columns, data }) {\r\n      return [\r\n        columns.map((column, columnIndex) => {\r\n          if (columnIndex === 0) {\r\n            return '合计';\r\n          }\r\n          if (\r\n            ['planTotalWeight', 'planInnerWeight', 'planExportWeight'].includes(column.property)\r\n          ) {\r\n            return this.sumNum(data, column.property);\r\n          }\r\n          return null;\r\n        }),\r\n      ];\r\n    },\r\n\r\n    // 取消\r\n    onclose() {\r\n      this.visible = false;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.year {\r\n  font-size: 18px;\r\n  line-height: 22px;\r\n\r\n  color: #18191a;\r\n  font-weight: 700;\r\n  padding-top: 18px;\r\n  padding-right: 50px;\r\n  font-family: '微软雅黑 Bold', '微软雅黑', 'Microsoft YaHei', sans-serif;\r\n}\r\n.paddingTop {\r\n  padding-top: 15px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Detail.vue?vue&type=template&id=37b616f6&scoped=true&\"\nimport script from \"./Detail.vue?vue&type=script&lang=js&\"\nexport * from \"./Detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Detail.vue?vue&type=style&index=0&id=37b616f6&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"37b616f6\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <ec-container height=\"100%\">\r\n    <ec-container-header>\r\n      <ec-panel-item>\r\n        <ec-panel-item-left>\r\n          <ec-header title=\"收购计划执行量管理\" icon=\"onetomany\" color-code=\"008\" />\r\n        </ec-panel-item-left>\r\n      </ec-panel-item>\r\n    </ec-container-header>\r\n    <ec-container-body>\r\n      <ec-panel :auto=\"false\">\r\n        <ec-panel-toolbar>\r\n          <ec-v-item>\r\n            <a-descriptions bordered :column=\"4\">\r\n              <a-descriptions-item label=\"收购计划执行总量\">\r\n                {{ totalData.sumPlanTotalWeight }}\r\n              </a-descriptions-item>\r\n              <a-descriptions-item label=\"国内总量\">\r\n                {{ totalData.sumPlanInnerWeight }}</a-descriptions-item\r\n              >\r\n              <a-descriptions-item label=\"出口备货总量\">\r\n                {{ totalData.sumExportTotalWeight }}\r\n              </a-descriptions-item>\r\n              <a-descriptions-item label=\"种植面积\">\r\n                {{ totalData.sumPlanPlantArea }}\r\n              </a-descriptions-item>\r\n\r\n              <a-descriptions-item label=\"剩余收购计划执行总量\">\r\n                {{ totalData.surplusPlanTotalWeight }}\r\n              </a-descriptions-item>\r\n              <a-descriptions-item label=\"剩余国内总量\">\r\n                {{ totalData.surplusPlanInnerWeight }}\r\n              </a-descriptions-item>\r\n              <a-descriptions-item label=\"剩余出口备货总量\">\r\n                {{ totalData.surplusExportTotalWeight }}\r\n              </a-descriptions-item>\r\n              <a-descriptions-item label=\"剩余种植面积\">\r\n                {{ totalData.surplusPlanPlantArea }}\r\n              </a-descriptions-item>\r\n            </a-descriptions>\r\n          </ec-v-item>\r\n        </ec-panel-toolbar>\r\n        <ec-panel-toolbar>\r\n          <ec-query-panel :colCount=\"colCount\" @query=\"onQuery\" @reset=\"onReset\">\r\n            <ec-query-item label=\"烟叶类型\">\r\n              <ec-select\r\n                showSearch\r\n                allowClear\r\n                placeholder=\"请选择\"\r\n                v-model=\"queryItems.leafTypeCode\"\r\n              >\r\n                <a-select-option v-for=\"leafTypeEk in leafTypeList\" :key=\"leafTypeEk.leafTypeCode\">\r\n                  {{ leafTypeEk.leafTypeName }}\r\n                </a-select-option>\r\n              </ec-select>\r\n            </ec-query-item>\r\n          </ec-query-panel>\r\n          <ec-divider />\r\n        </ec-panel-toolbar>\r\n        <ec-panel-header>\r\n          <ec-v-item>\r\n            <ec-panel-item>\r\n              <ec-panel-item-left>\r\n                <a-button type=\"primary\" @click=\"onEdit\">编辑</a-button>\r\n                <a-button @click=\"onAgree\">同意</a-button>\r\n                <a-button @click=\"onExport\">导出</a-button>\r\n              </ec-panel-item-left>\r\n              <ec-panel-item-right>\r\n                <a-space :size=\"15\">\r\n                  <span>种植收购年度：{{ queryItems.busiYear }}年</span>\r\n                  <span\r\n                    >重量单位：<ec-select\r\n                      showSearch\r\n                      allowClear\r\n                      placeholder=\"请选择\"\r\n                      v-model=\"weightUnit\"\r\n                      @select=\"handleUnitParse()\"\r\n                      style=\"width: 150px\"\r\n                    >\r\n                      <a-select-option\r\n                        v-for=\"weightUnit in weightUnitList\"\r\n                        :key=\"weightUnit.weightUnitCd\"\r\n                      >\r\n                        {{ weightUnit.weightUnitName }}\r\n                      </a-select-option>\r\n                    </ec-select></span\r\n                  >\r\n                  <span\r\n                    >面积单位：<ec-select\r\n                      showSearch\r\n                      allowClear\r\n                      placeholder=\"请选择\"\r\n                      v-model=\"areaUnit\"\r\n                      @select=\"handleUnitParse()\"\r\n                      style=\"width: 150px\"\r\n                    >\r\n                      <a-select-option v-for=\"areaUnit in areaUnitList\" :key=\"areaUnit.areaUnitCd\">\r\n                        {{ areaUnit.areaUnitName }}\r\n                      </a-select-option>\r\n                    </ec-select></span\r\n                  >\r\n                </a-space>\r\n              </ec-panel-item-right>\r\n            </ec-panel-item>\r\n          </ec-v-item>\r\n        </ec-panel-header>\r\n\r\n        <ec-panel-body>\r\n          <ec-table\r\n            ref=\"table\"\r\n            border\r\n            height=\"100%\"\r\n            :auto=\"false\"\r\n            :data=\"tableData.rows\"\r\n            @checkbox-all=\"selectAllEvent\"\r\n            @checkbox-change=\"selectRowChange\"\r\n            :loading=\"loading\"\r\n            show-footer\r\n            :footer-method=\"footerMethod\"\r\n            highlight-current-row\r\n          >\r\n            <ec-table-col type=\"checkbox\" width=\"50\" align=\"center\"></ec-table-col>\r\n            <ec-table-col title=\"序号\" type=\"seq\" width=\"70\" align=\"center\" />\r\n            <ec-table-col field=\"orgCode\" title=\"单位代码\" align=\"center\" width=\"200\" />\r\n            <ec-table-col field=\"orgName\" title=\"单位名称\" align=\"left\" min-width=\"150\" />\r\n\r\n            <ec-table-colgroup title=\"收购计划执行量\">\r\n              <ec-table-col field=\"planTotalWeight\" title=\"合计\" align=\"center\" width=\"150\" />\r\n              <ec-table-col field=\"planInnerWeight\" title=\"国内\" align=\"center\" width=\"150\" />\r\n              <ec-table-col field=\"planExportWeight\" title=\"出口备货\" align=\"center\" width=\"150\" />\r\n            </ec-table-colgroup>\r\n            <ec-table-col field=\"planPlantArea\" title=\"种植面积\" align=\"right\" width=\"150\" />\r\n\r\n            <ec-table-col field=\"auditState\" title=\"审核状态\" align=\"left\" width=\"150\">\r\n              <template #default=\"{ row }\">\r\n                <div v-if=\"row.auditState === '1'\">\r\n                  <span>处长审批</span>\r\n                </div>\r\n                <div v-else-if=\"row.auditState === '2'\">\r\n                  <span>副总经理审批</span>\r\n                </div>\r\n                <div v-else-if=\"row.auditState === '3'\">\r\n                  <span>完成</span>\r\n                </div>\r\n                <div v-else>\r\n                  <span>未审批</span>\r\n                </div>\r\n              </template>\r\n            </ec-table-col>\r\n\r\n            <ec-table-col title=\"操作\" align=\"center\" width=\"150\">\r\n              <template #default=\"{ row }\">\r\n                <a-button type=\"link\" @click=\"onDetail(row)\">详细</a-button>\r\n              </template>\r\n            </ec-table-col>\r\n          </ec-table>\r\n        </ec-panel-body>\r\n      </ec-panel>\r\n\r\n      <execution-manage-form @onQuery=\"onQuery\" ref=\"ExecutionManageForm\"></execution-manage-form>\r\n      <detail ref=\"Detail\"> </detail>\r\n    </ec-container-body>\r\n  </ec-container>\r\n</template>\r\n\r\n<script>\r\nimport ExecutionManageForm from './ExecutionManageForm.vue';\r\nimport Detail from './Detail.vue';\r\nimport _ from 'lodash';\r\n\r\nexport default {\r\n  name: 'ExecutionManage',\r\n  components: {\r\n    ExecutionManageForm,\r\n    Detail,\r\n  },\r\n  data() {\r\n    return {\r\n      objectData: {},\r\n      busiYear: '',\r\n      queryItems: {\r\n        leafTypeCode: '',\r\n        busiYear: '',\r\n      },\r\n      weightUnit: 500000,\r\n      areaUnit: 10000,\r\n      colCount: 5,\r\n      nowYear: '',\r\n      loading: false,\r\n      leafTypeCd: '',\r\n      leafTypeList: [],\r\n      oldDataRow: [], // 拷贝的旧数据，单位切换的时候要在旧的数据上转换\r\n      oldTotalData: [], // 拷贝的旧上级数据，单位切换的时候要在旧的数据上转换\r\n      totalData: {}, // 合计的数据\r\n      isNullData: [],\r\n      bizCode: '',\r\n      workSubmitState: [\r\n        { id: '', name: '全部' },\r\n        { id: '0', name: '未提交' },\r\n        { id: '1', name: '已提交' },\r\n      ],\r\n      workAuditState: [\r\n        { id: '', name: '全部' },\r\n        { id: '0', name: '未审批' },\r\n        { id: '1', name: '处长审批' },\r\n        { id: '2', name: '副总经理审批' },\r\n        { id: '3', name: '完成' },\r\n      ],\r\n      workOptType: [\r\n        { id: '', name: '全部' },\r\n        { id: '0', name: '调减' },\r\n        { id: '1', name: '调增' },\r\n      ],\r\n      weightUnitList: [\r\n        { weightUnitCd: 1, weightUnitName: '公斤', isSelected: false },\r\n        { weightUnitCd: 50, weightUnitName: '担', isSelected: false },\r\n        { weightUnitCd: 500000, weightUnitName: '万担', isSelected: false },\r\n      ],\r\n      areaUnitList: [\r\n        { areaUnitCd: 10000, areaUnitName: '万亩' },\r\n        { areaUnitCd: 1, areaUnitName: '亩' },\r\n      ],\r\n      pagination: {\r\n        pageNumber: 1,\r\n        pageSize: 10,\r\n        total: 0,\r\n      },\r\n      tableData: {\r\n        // 数据表格\r\n        // totalRows: 0,\r\n        rows: [],\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    appConfig() {\r\n      return this.$store.getters.getAppConfig;\r\n    },\r\n  },\r\n  created() {\r\n    const { appCode } = this.$router.history.current.query;\r\n    this.appCode = appCode || 'CM'; // 获取当前登入信息\r\n  },\r\n  mounted() {\r\n    this.onQuery();\r\n  },\r\n  methods: {\r\n    // 处理单位转换\r\n    handleUnitParse() {\r\n      const newTableData = [];\r\n      console.log(`單位：${this.weightUnit}`);\r\n      //  列表的单位转换\r\n      const handleOlDataRow = _.cloneDeep(this.oldDataRow);\r\n      handleOlDataRow.forEach((item) => {\r\n        const obj = item;\r\n        // 本级\r\n        obj.planTotalWeight = (obj.planTotalWeight / this.weightUnit).toFixed(2);\r\n        obj.planInnerWeight = (obj.planInnerWeight / this.weightUnit).toFixed(2);\r\n        obj.planExportWeight = (obj.planExportWeight / this.weightUnit).toFixed(2);\r\n        obj.planPlantArea = (obj.planPlantArea / this.areaUnit).toFixed(2);\r\n\r\n        // 下级数据\r\n        obj.childPlanTotalWeight = (obj.childPlanTotalWeight / this.weightUnit).toFixed(2);\r\n        obj.childPlanInnerWeight = (obj.childPlanInnerWeight / this.weightUnit).toFixed(2);\r\n        obj.childPlanExportWeight = (obj.childPlanExportWeight / this.weightUnit).toFixed(2);\r\n        obj.childPlanPlantArea = (obj.childPlanPlantArea / this.areaUnit).toFixed(2);\r\n        newTableData.push(obj);\r\n      });\r\n\r\n      const handleOldTotalData = _.clonDeep(this.oldTotalData);\r\n\r\n      // 汇总数据\r\n      handleOldTotalData.sumPlanTotalWeight = (\r\n        handleOldTotalData.sumPlanTotalWeight / this.weightUnit\r\n      ).toFixed(2);\r\n      handleOldTotalData.sumPlanInnerWeight = (\r\n        handleOldTotalData.sumPlanInnerWeight / this.weightUnit\r\n      ).toFixed(2);\r\n      handleOldTotalData.sumExportTotalWeight = (\r\n        handleOldTotalData.sumExportTotalWeight / this.weightUnit\r\n      ).toFixed(2);\r\n      handleOldTotalData.sumPlanPlantArea = (\r\n        handleOldTotalData.sumPlanPlantArea / this.areaUnit\r\n      ).toFixed(2);\r\n      // 汇总数据的剩余数据\r\n      handleOldTotalData.surplusPlanTotalWeight = (\r\n        handleOldTotalData.surplusPlanTotalWeight / this.weightUnit\r\n      ).toFixed(2);\r\n      handleOldTotalData.surplusPlanInnerWeight = (\r\n        handleOldTotalData.surplusPlanInnerWeight / this.weightUnit\r\n      ).toFixed(2);\r\n      handleOldTotalData.surplusExportTotalWeight = (\r\n        handleOldTotalData.surplusExportTotalWeight / this.weightUnit\r\n      ).toFixed(2);\r\n      handleOldTotalData.surplusPlanPlantArea = (\r\n        handleOldTotalData.surplusPlanPlantArea / this.areaUnit\r\n      ).toFixed(2);\r\n      this.totalData = handleOldTotalData;\r\n      this.tableData.rows = newTableData;\r\n    },\r\n\r\n    async handlePagination(pageNumber, pageSize) {\r\n      this.pagination.pageNumber = pageNumber;\r\n      this.pagination.pageSize = pageSize;\r\n      await this.handleGetLeafTypeList();\r\n    },\r\n\r\n    // 获取烟叶类型数据\r\n    async handleGetLeafTypeList() {\r\n      if (!this.leafTypeList?.length) {\r\n        const res = await this.$apis.bpm.executionEnter.queryAllLeafType({});\r\n        this.leafTypeList = res?.rows || [];\r\n        this.leafTypeList.some((item) => {\r\n          if (item.leafTypeName === '烤烟') {\r\n            this.leafTypeCd = item.leafTypeCode;\r\n            this.queryItems.leafTypeCode = item.leafTypeCode;\r\n            return true;\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      if (!this.queryItems.leafTypeCode) {\r\n        const { leafTypeCode } = this.leafTypeList[0];\r\n        this.leafTypeCd = leafTypeCode;\r\n        this.queryItems.leafTypeCode = leafTypeCode;\r\n      }\r\n      if (!this.orgCode) {\r\n        const orgObj = await this.$apis.bim.curOrg.get({});\r\n        this.bizCode = orgObj?.bizCode;\r\n        this.orgCode = orgObj?.orgUniqueCode; // todo 写死数据\r\n      }\r\n      if (!this.queryItems.busiYear > 0) {\r\n        // 获取年度\r\n        const data = {\r\n          bizCode: this.appConfig.bizCode, // todo 写死的数据\r\n          appCode: this.appCode || 'CM',\r\n          yearTypeCode: 'BIZ_YEAR',\r\n        };\r\n        const busiYearObj = await this.$apis.bpm.executionEnter.getBuYear(data);\r\n        this.queryItems.busiYear = busiYearObj?.yearValue;\r\n        this.nowYear = busiYearObj?.yearValue;\r\n      }\r\n      // this.onQuery();\r\n    },\r\n\r\n    // 数据初始化\r\n    async onQuery() {\r\n      await this.handleGetLeafTypeList();\r\n      this.loading = true;\r\n      const data = {\r\n        pageNo: this.pagination.pageNumber,\r\n        pageSize: this.pagination.pageSize,\r\n        leafTypeCode: this.queryItems.leafTypeCode,\r\n        busiYear: this.queryItems.busiYear,\r\n        scope: '1',\r\n      };\r\n      await this.$apis.bpm.executionManage\r\n        .query(data)\r\n        .then((res) => {\r\n          const rows = res.rows || [];\r\n          this.pagination.total = res.totalRows;\r\n          this.oldDataRow = _.cloneDeep(rows);\r\n          this.tableData = rows;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        })\r\n        .finally(() => {\r\n          this.loading = false;\r\n          this.selectedRows = [];\r\n        });\r\n\r\n      const totalParams = {\r\n        leafTypeCode: this.queryItems.leafTypeCode,\r\n        busiYear: this.queryItems.busiYear,\r\n      };\r\n      const totalData = await this.$apis.bpm.executionManage.queryTotalData(totalParams);\r\n      this.oldTotalData = _.cloneDeep(totalData);\r\n      this.handleUnitParse();\r\n    },\r\n\r\n    // 同意\r\n    onAgree() {\r\n      if (!this.selectedRows || this.selectedRows.length <= 0) {\r\n        this.$message.error('请选择一条数据再同意');\r\n        return;\r\n      }\r\n\r\n      this.$confirm({\r\n        title: '是否执行该操作?',\r\n        content: () => (\r\n          <div style=\"color:red;\">\r\n            是否确认提交选中的数据，确认请点击'确认'按钮，取消点击'取消'按钮。\r\n          </div>\r\n        ),\r\n        onOk: () => {\r\n          this.loading = true;\r\n          const idList = [];\r\n          for (let i = 0; i < this.selectedRows.length; i++) {\r\n            idList.push(this.selectedRows[i].buPlanId);\r\n          }\r\n          this.$apis.bpm.executionManage.agree({ buPlanIds: idList }).then((res) => {\r\n            if (res.result) {\r\n              this.loading = false;\r\n              this.$message.success('操作成功');\r\n              this.onQuery();\r\n            } else {\r\n              this.$message.error('操作失败');\r\n            }\r\n          });\r\n        },\r\n      });\r\n    },\r\n    // 导出\r\n    onExport() {\r\n      // const data = this.handleData();\r\n      // data.type = 'add';\r\n      // this.$refs.ExecutionEnterAdjustForm.show(data);\r\n    },\r\n\r\n    // 详细\r\n    onDetail(row) {\r\n      const leafTypeObj = this.leafTypeList.find(\r\n        (res) => res.leafTypeCode === this.queryItems.leafTypeCode,\r\n      );\r\n      const weightUnitObj = this.weightUnitList.find((res) => res.weightUnitCd === this.weightUnit);\r\n      const areaUnitObj = this.areaUnitList.find((res) => res.areaUnitCd === this.areaUnit);\r\n      const selectedRows = _.cloneDeep(row); // 深拷贝\r\n\r\n      const data = {\r\n        leafTypeObj,\r\n        weightUnitObj,\r\n        areaUnitObj,\r\n        selectedRows,\r\n        nowYear: this.queryItems.busiYear,\r\n      };\r\n\r\n      this.$refs.Detail.show(data);\r\n    },\r\n\r\n    // 编辑\r\n    onEdit() {\r\n      const { name } = this.$route.query;\r\n      console.log(`xxxxxxxxxxxxx${name}`);\r\n      // 解析传到编辑页面的年度，单位等信息\r\n      const leafTypeObj = this.leafTypeList.find(\r\n        (res) => res.leafTypeCode === this.queryItems.leafTypeCode,\r\n      );\r\n      const weightUnitObj = this.weightUnitList.find((res) => res.weightUnitCd === this.weightUnit);\r\n      const areaUnitObj = this.areaUnitList.find((res) => res.areaUnitCd === this.areaUnit);\r\n      const totalDataObj = _.cloneDeep(this.totalData); // 深拷贝\r\n      const tableData = this.tableData.rows;\r\n      const selectedRows = _.cloneDeep(tableData); // 深拷贝\r\n      const data = {\r\n        leafTypeObj,\r\n        weightUnitObj,\r\n        areaUnitObj,\r\n        selectedRows,\r\n        totalDataObj,\r\n        nowYear: this.queryItems.busiYear,\r\n      };\r\n      this.$refs.ExecutionManageForm.show(data);\r\n    },\r\n\r\n    // 重置\r\n    onReset() {\r\n      this.queryItems.leafTypeCode = this.leafTypeCd;\r\n\r\n      this.queryItems.submitState = '';\r\n      this.queryItems.auditState = '';\r\n      this.queryItems.oprType = '';\r\n      this.queryItems.remark = '';\r\n      this.queryItems.orgName = '';\r\n\r\n      this.$refs.table.pageAction(1);\r\n    },\r\n\r\n    // 根据编码翻译对应的名称\r\n    handleLeafTypeName(typeCd) {\r\n      const leafType = this.leafTypeList.find((item) => item.leafTypeCode === typeCd);\r\n      return leafType?.leafTypeName;\r\n    },\r\n\r\n    sumNum(list, field) {\r\n      let count = 0;\r\n      list.forEach((item) => {\r\n        count += Number(item[field]);\r\n      });\r\n      return count.toFixed(2);\r\n    },\r\n\r\n    footerMethod({ columns, data }) {\r\n      return [\r\n        columns.map((column, columnIndex) => {\r\n          if (columnIndex === 0) {\r\n            return '合计';\r\n          }\r\n          if (\r\n            ['planTotalWeight', 'planInnerWeight', 'planExportWeight', 'planPlantArea'].includes(\r\n              column.property,\r\n            )\r\n          ) {\r\n            return this.sumNum(data, column.property);\r\n          }\r\n          return null;\r\n        }),\r\n      ];\r\n    },\r\n\r\n    // 选中所有列表\r\n    selectAllEvent({ checked, records }) {\r\n      console.log(`${checked}-选中所有records包含选中的所以对象----${JSON.stringify(records)}`);\r\n      this.selectedRows = records;\r\n    },\r\n\r\n    // 选中列表\r\n    selectRowChange({ checked, records }) {\r\n      console.log(\r\n        `${checked}-选择改变时会把records包含选中的所以对象----${JSON.stringify(records)}`,\r\n      );\r\n      this.selectedRows = records;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.year {\r\n  font-size: 18px;\r\n  line-height: 22px;\r\n\r\n  color: #18191a;\r\n  font-weight: 700;\r\n  padding-top: 18px;\r\n  padding-right: 50px;\r\n  font-family: '微软雅黑 Bold', '微软雅黑', 'Microsoft YaHei', sans-serif;\r\n}\r\n.paddingTop {\r\n  padding-top: 15px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=3108f7d4&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=3108f7d4&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3108f7d4\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&id=37b616f6&prod&lang=less&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&id=3108f7d4&prod&lang=less&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExecutionManageForm.vue?vue&type=style&index=0&id=1272c28e&prod&lang=less&scoped=true&\""],"sourceRoot":""}