{"version":3,"sources":["webpack:///./src/views/bpm/execution-issued-adjust/Index.vue?7101","webpack:///./src/views/bpm/execution-issued-adjust/Index.vue?27ea","webpack:///./src/views/bpm/execution-issued-adjust/Detail.vue?3bbf","webpack:///src/views/bpm/execution-issued-adjust/Detail.vue","webpack:///./src/views/bpm/execution-issued-adjust/Detail.vue?6c5c","webpack:///./src/views/bpm/execution-issued-adjust/Detail.vue","webpack:///src/views/bpm/execution-issued-adjust/Index.vue","webpack:///./src/views/bpm/execution-issued-adjust/Index.vue?cf63","webpack:///./src/views/bpm/execution-issued-adjust/Index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","colCount","on","$event","$refs","table","pageAction","onReset","model","value","queryItems","callback","$$v","$set","expression","_l","leafTypeEk","key","leafTypeCode","_v","_s","leafTypeName","item","id","name","onIssued","onExport","busiYear","staticStyle","handleUnitParse","weightUnit","weightUnitCd","weightUnitName","areaUnit","areaUnitCd","areaUnitName","ref","pagination","tableData","rows","loading","footerMethod","handlePagination","selectAllEvent","selectRowChange","scopedSlots","_u","fn","row","releaseState","onDetail","staticRenderFns","staticClass","visible","onclose","nowYear","formData","rules","recordDate","orgName","oprTypeName","remark","data","leafTypeCd","rowData","isShowSaveAndAdd","ruleForm","leafTypeList","workOptType","oprType","beforeAjustData","required","message","trigger","methods","handleGetBeforeAdjustData","orgCode","beforeData","handleDataParse","obj","handleCurrentDataChange","show","selectRow","leafTypeObj","oprTypeObj","currentAdjustData","planTotalWeight","planInnerWeight","planExportWeight","planPlantArea","sumNum","list","field","count","handleAfterAdjustData","columns","afterAdjustData","handleGetLeafTypeList","console","component","components","Detail","bizCode","oldDataRow","workIssuedState","weightUnitList","isSelected","areaUnitList","pageNumber","pageSize","total","computed","appConfig","created","handleOlDataRow","newTableData","res","orgObj","appCode","yearTypeCode","busiYearObj","onQuery","pageNo","queryAdjust","then","catch","finally","title","content","onOk","idList","oprRecordIds","handleData","weightUnitObj","areaUnitObj","handleLeafTypeName","typeCd","column","checked","JSON"],"mappings":"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","file":"js/chunk-65b28a5c.b08e0aa4.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&id=11326ee5&prod&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-container',{attrs:{\"height\":\"100%\"}},[_c('ec-container-header',[_c('ec-panel-item',[_c('ec-panel-item-left',[_c('ec-header',{attrs:{\"title\":\"收购计划执行量调整下达\",\"icon\":\"onetomany\",\"color-code\":\"008\"}})],1)],1)],1),_c('ec-container-body',[_c('ec-panel',{attrs:{\"auto\":false}},[_c('ec-panel-toolbar',[_c('ec-query-panel',{attrs:{\"colCount\":_vm.colCount},on:{\"query\":function($event){return _vm.$refs.table.pageAction(1)},\"reset\":_vm.onReset}},[_c('ec-query-item',{attrs:{\"label\":\"烟叶类型\"}},[_c('ec-select',{attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.queryItems.leafTypeCode),callback:function ($$v) {_vm.$set(_vm.queryItems, \"leafTypeCode\", $$v)},expression:\"queryItems.leafTypeCode\"}},_vm._l((_vm.leafTypeList),function(leafTypeEk){return _c('a-select-option',{key:leafTypeEk.leafTypeCode},[_vm._v(\" \"+_vm._s(leafTypeEk.leafTypeName)+\" \")])}),1)],1),_c('ec-query-item',{attrs:{\"label\":\"下达状态\"}},[_c('a-select',{attrs:{\"allow-clear\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.queryItems.releaseState),callback:function ($$v) {_vm.$set(_vm.queryItems, \"releaseState\", $$v)},expression:\"queryItems.releaseState\"}},_vm._l((_vm.workIssuedState),function(item){return _c('a-select-option',{key:item.id},[_vm._v(\" \"+_vm._s(item.name)+\" \")])}),1)],1),_c('ec-query-item',{attrs:{\"label\":\"操作类型\"}},[_c('a-select',{attrs:{\"allow-clear\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.queryItems.oprType),callback:function ($$v) {_vm.$set(_vm.queryItems, \"oprType\", $$v)},expression:\"queryItems.oprType\"}},_vm._l((_vm.workOptType),function(item){return _c('a-select-option',{key:item.id},[_vm._v(\" \"+_vm._s(item.name)+\" \")])}),1)],1)],1),_c('ec-divider')],1),_c('ec-panel-header',[_c('ec-panel-item',[_c('ec-panel-item-left',[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onIssued}},[_vm._v(\"下达\")]),_c('a-button',{on:{\"click\":_vm.onExport}},[_vm._v(\"导出\")])],1),_c('ec-panel-item-right',[_c('a-space',{attrs:{\"size\":15}},[_c('span',[_vm._v(\"种植收购年度：\"+_vm._s(_vm.queryItems.busiYear)+\"年\")]),_c('span',[_vm._v(\"重量单位：\"),_c('ec-select',{staticStyle:{\"width\":\"150px\"},attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},on:{\"select\":function($event){return _vm.handleUnitParse()}},model:{value:(_vm.weightUnit),callback:function ($$v) {_vm.weightUnit=$$v},expression:\"weightUnit\"}},_vm._l((_vm.weightUnitList),function(weightUnit){return _c('a-select-option',{key:weightUnit.weightUnitCd},[_vm._v(\" \"+_vm._s(weightUnit.weightUnitName)+\" \")])}),1)],1),_c('span',[_vm._v(\"面积单位：\"),_c('ec-select',{staticStyle:{\"width\":\"150px\"},attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},on:{\"select\":function($event){return _vm.handleUnitParse()}},model:{value:(_vm.areaUnit),callback:function ($$v) {_vm.areaUnit=$$v},expression:\"areaUnit\"}},_vm._l((_vm.areaUnitList),function(areaUnit){return _c('a-select-option',{key:areaUnit.areaUnitCd},[_vm._v(\" \"+_vm._s(areaUnit.areaUnitName)+\" \")])}),1)],1)])],1)],1)],1),_c('ec-panel-body',[_c('ec-table',{ref:\"table\",attrs:{\"border\":\"\",\"height\":\"100%\",\"auto\":false,\"pagination\":_vm.pagination,\"data\":_vm.tableData.rows,\"loading\":_vm.loading,\"show-footer\":\"\",\"footer-method\":_vm.footerMethod,\"highlight-current-row\":\"\"},on:{\"page-action\":_vm.handlePagination,\"checkbox-all\":_vm.selectAllEvent,\"checkbox-change\":_vm.selectRowChange}},[_c('ec-table-col',{attrs:{\"type\":\"checkbox\",\"width\":\"50\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"title\":\"序号\",\"type\":\"seq\",\"width\":\"70\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"field\":\"orgName\",\"title\":\"单位名称\",\"align\":\"left\",\"min-width\":\"200\"}}),_c('ec-table-col',{attrs:{\"field\":\"recordDate\",\"title\":\"调整日期\",\"align\":\"center\",\"width\":\"150\"}}),_c('ec-table-colgroup',{attrs:{\"title\":\"收购计划执行量\"}},[_c('ec-table-col',{attrs:{\"field\":\"aaPlanTotalWeight\",\"title\":\"合计\",\"align\":\"center\",\"width\":\"120\"}}),_c('ec-table-col',{attrs:{\"field\":\"aaPlanInnerWeight\",\"title\":\"国内\",\"align\":\"center\",\"width\":\"120\"}}),_c('ec-table-col',{attrs:{\"field\":\"aaPlanExportWeight\",\"title\":\"出口备货\",\"align\":\"center\",\"width\":\"100\"}})],1),_c('ec-table-col',{attrs:{\"field\":\"aaPlanPlantArea\",\"title\":\"种植面积\",\"align\":\"right\",\"width\":\"120\"}}),_c('ec-table-col',{attrs:{\"field\":\"remark\",\"title\":\"办理依据\",\"align\":\"left\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"releaseState\",\"title\":\"下达状态\",\"align\":\"center\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.releaseState === '1')?_c('div',[_c('span',[_vm._v(\"已下达\")])]):_c('div',[_c('span',[_vm._v(\"未下达\")])])]}}])}),_c('ec-table-col',{attrs:{\"field\":\"issuedTime\",\"title\":\"下达日期\",\"align\":\"center\",\"width\":\"130\"}}),_c('ec-table-col',{attrs:{\"title\":\"操作\",\"align\":\"center\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.onDetail(row)}}},[_vm._v(\"详细\")])]}}])})],1)],1)],1),_c('detail',{ref:\"Detail\"})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-drawer',{staticClass:\"ec-draw-form\",attrs:{\"title\":\"详细\",\"visible\":_vm.visible,\"size\":\"large\"},on:{\"close\":_vm.onclose}},[_c('ec-container',{attrs:{\"height\":\"auto\",\"fixed\":\"top bottom\",\"color-code\":\"007\"}},[_c('ec-container-body',[_c('ec-panel',{attrs:{\"color-code\":\"002\"}},[_c('ec-panel-header',[_c('ec-panel-item-left',{staticClass:\"ec-panel-item-left\"},[_c('div',{staticClass:\"ec-panel-title\"},[_c('div',{staticClass:\"ec-bar bg-color-1\"}),_c('div',{staticClass:\"ec-title\",staticStyle:{\"color\":\"rgb(24, 144, 255)\",\"font-weight\":\"700\"}},[_vm._v(\" 主信息 \")])])]),_c('ec-panel-item-right',[_c('div',{staticStyle:{\"display\":\"inline-block\"}},[_c('span',{staticStyle:{\"margin-left\":\"14px\"}},[_vm._v(\"种植收购年度：\"+_vm._s(_vm.nowYear)+\"年;单位：\"+_vm._s(_vm.weightUnitName)+\"、\"+_vm._s(_vm.areaUnitName))])])])],1),_c('ec-panel-item',[_c('ec-form',{ref:\"ruleForm1\",attrs:{\"model\":_vm.formData,\"rules\":_vm.rules}},[_c('a-row',{attrs:{\"type\":\"flex\",\"gutter\":12}},[_c('a-col',{attrs:{\"span\":8}},[_c('a-form-model-item',{attrs:{\"label\":\"调整日期\"}},[_vm._v(_vm._s(_vm.formData.recordDate || '--'))])],1),_c('a-col',{attrs:{\"span\":8}},[_c('a-form-model-item',{attrs:{\"label\":\"烟叶类型\"}},[_vm._v(_vm._s(_vm.formData.leafTypeName || '--'))])],1),_c('a-col',{attrs:{\"span\":8}},[_c('a-form-model-item',{attrs:{\"label\":\"单位名称\"}},[_vm._v(_vm._s(_vm.formData.orgName || '--'))])],1),_c('a-col',{attrs:{\"span\":8}},[_c('a-form-model-item',{attrs:{\"label\":\"操作类型\"}},[_vm._v(_vm._s(_vm.formData.oprTypeName || '--'))])],1),_c('a-col',{attrs:{\"span\":12}},[_c('a-form-model-item',{attrs:{\"label\":\"办理依据\"}},[_vm._v(_vm._s(_vm.formData.remark || '--'))])],1)],1)],1)],1)],1),_c('ec-panel',{attrs:{\"color-code\":\"002\"}},[_c('ec-panel-header',[_c('ec-panel-item-left',{staticClass:\"ec-panel-item-left\"},[_c('div',{staticClass:\"ec-panel-title\"},[_c('div',{staticClass:\"ec-bar bg-color-1\"}),_c('div',{staticClass:\"ec-title\",staticStyle:{\"color\":\"rgb(24, 144, 255)\",\"font-weight\":\"700\"}},[_vm._v(\" 明细信息 \")])])])],1),_c('ec-panel-body',[_c('ec-table',{ref:\"xTable\",staticClass:\"my-xtable-antd\",attrs:{\"border\":\"\",\"show-overflow\":\"\",\"keep-source\":\"\",\"data\":_vm.tableData}},[_c('ec-table-col',{attrs:{\"field\":\"name\",\"title\":\"\",\"align\":\"left\",\"min-width\":\"150\"}}),_c('ec-table-colgroup',{attrs:{\"title\":\"收购计划执行量\"}},[_c('ec-table-col',{attrs:{\"field\":\"planTotalWeight\",\"title\":\"合计\",\"align\":\"center\",\"width\":\"200\"}}),_c('ec-table-col',{attrs:{\"field\":\"planInnerWeight\",\"title\":\"国内\",\"align\":\"center\",\"width\":\"200\"}}),_c('ec-table-col',{attrs:{\"field\":\"planExportWeight\",\"title\":\"出口备货\",\"align\":\"center\",\"width\":\"200\"}})],1),_c('ec-table-col',{attrs:{\"field\":\"planPlantArea\",\"title\":\"种植面积\",\"align\":\"right\",\"width\":\"200\"}})],1)],1)],1)],1),_c('ec-container-footer',{attrs:{\"fixed\":\"\"}},[_c('a-space',[_c('a-button',{on:{\"click\":_vm.onclose}},[_vm._v(\"关闭\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ec-drawer title=\"详细\" :visible=\"visible\" size=\"large\" @close=\"onclose\" class=\"ec-draw-form\">\r\n    <ec-container height=\"auto\" fixed=\"top bottom\" color-code=\"007\">\r\n      <ec-container-body>\r\n        <ec-panel color-code=\"002\">\r\n          <ec-panel-header>\r\n            <ec-panel-item-left class=\"ec-panel-item-left\">\r\n              <div class=\"ec-panel-title\">\r\n                <div class=\"ec-bar bg-color-1\"></div>\r\n                <div class=\"ec-title\" style=\"color: rgb(24, 144, 255); font-weight: 700\">\r\n                  主信息\r\n                </div>\r\n              </div>\r\n            </ec-panel-item-left>\r\n\r\n            <ec-panel-item-right>\r\n              <div style=\"display: inline-block\">\r\n                <span style=\"margin-left: 14px\"\r\n                  >种植收购年度：{{ nowYear }}年;单位：{{ weightUnitName }}、{{\r\n                    areaUnitName\r\n                  }}</span\r\n                >\r\n              </div>\r\n            </ec-panel-item-right>\r\n          </ec-panel-header>\r\n          <ec-panel-item>\r\n            <ec-form ref=\"ruleForm1\" :model=\"formData\" :rules=\"rules\">\r\n              <a-row type=\"flex\" :gutter=\"12\">\r\n                <a-col :span=\"8\">\r\n                  <a-form-model-item label=\"调整日期\">{{\r\n                    formData.recordDate || '--'\r\n                  }}</a-form-model-item>\r\n                </a-col>\r\n                <a-col :span=\"8\">\r\n                  <a-form-model-item label=\"烟叶类型\">{{\r\n                    formData.leafTypeName || '--'\r\n                  }}</a-form-model-item>\r\n                </a-col>\r\n                <a-col :span=\"8\">\r\n                  <a-form-model-item label=\"单位名称\">{{\r\n                    formData.orgName || '--'\r\n                  }}</a-form-model-item>\r\n                </a-col>\r\n                <a-col :span=\"8\">\r\n                  <a-form-model-item label=\"操作类型\">{{\r\n                    formData.oprTypeName || '--'\r\n                  }}</a-form-model-item>\r\n                </a-col>\r\n                <a-col :span=\"12\">\r\n                  <a-form-model-item label=\"办理依据\">{{\r\n                    formData.remark || '--'\r\n                  }}</a-form-model-item>\r\n                </a-col>\r\n              </a-row>\r\n            </ec-form>\r\n          </ec-panel-item>\r\n        </ec-panel>\r\n\r\n        <ec-panel color-code=\"002\">\r\n          <ec-panel-header>\r\n            <ec-panel-item-left class=\"ec-panel-item-left\">\r\n              <div class=\"ec-panel-title\">\r\n                <div class=\"ec-bar bg-color-1\"></div>\r\n                <div class=\"ec-title\" style=\"color: rgb(24, 144, 255); font-weight: 700\">\r\n                  明细信息\r\n                </div>\r\n              </div>\r\n            </ec-panel-item-left>\r\n          </ec-panel-header>\r\n\r\n          <ec-panel-body>\r\n            <ec-table\r\n              border\r\n              show-overflow\r\n              keep-source\r\n              ref=\"xTable\"\r\n              class=\"my-xtable-antd\"\r\n              :data=\"tableData\"\r\n            >\r\n              <ec-table-col field=\"name\" title=\"\" align=\"left\" min-width=\"150\" />\r\n              <ec-table-colgroup title=\"收购计划执行量\">\r\n                <ec-table-col field=\"planTotalWeight\" title=\"合计\" align=\"center\" width=\"200\" />\r\n                <ec-table-col field=\"planInnerWeight\" title=\"国内\" align=\"center\" width=\"200\" />\r\n                <ec-table-col\r\n                  field=\"planExportWeight\"\r\n                  title=\"出口备货\"\r\n                  align=\"center\"\r\n                  width=\"200\"\r\n                />\r\n              </ec-table-colgroup>\r\n              <ec-table-col field=\"planPlantArea\" title=\"种植面积\" align=\"right\" width=\"200\" />\r\n            </ec-table>\r\n          </ec-panel-body>\r\n        </ec-panel>\r\n      </ec-container-body>\r\n      <ec-container-footer fixed>\r\n        <a-space>\r\n          <a-button @click=\"onclose\">关闭</a-button>\r\n        </a-space>\r\n      </ec-container-footer>\r\n    </ec-container>\r\n  </ec-drawer>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'ExecutionAuditAdjustDelManage',\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      data: {},\r\n      leafTypeName: '',\r\n      leafTypeCd: '',\r\n      weightUnitName: '',\r\n      areaUnitName: '',\r\n      nowYear: '',\r\n      rowData: '',\r\n      visible: false,\r\n      isShowSaveAndAdd: true,\r\n      ruleForm: {},\r\n      leafTypeList: [],\r\n      workOptType: [\r\n        { id: '0', name: '减量' },\r\n        { id: '1', name: '增量' },\r\n      ],\r\n      formData: {\r\n        leafTypeCode: '',\r\n        orgName: '',\r\n        oprType: '',\r\n        remark: '',\r\n      },\r\n      beforeAjustData: {},\r\n      rules: {\r\n        oprType: { required: true, message: '请选择操作类型', trigger: 'blur' },\r\n        orgName: { required: true, message: '请选择单位', trigger: 'blur' },\r\n        leafTypeCode: { required: true, message: '请选择烟叶类型', trigger: 'blur' },\r\n      },\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    // 获取调整前数据\r\n    async handleGetBeforeAdjustData() {\r\n      const beforeData = await this.$apis.bpm.executionAudit.beforeAdjust({\r\n        leafTypeCode: this.leafTypeCode,\r\n        orgCode: this.orgCode, // todo 写死的参数\r\n        busiYear: this.nowYear,\r\n      });\r\n      beforeData.name = '调整前';\r\n      this.beforeAjustData = beforeData;\r\n\r\n      //  将数据转化成对应的单位\r\n      this.beforeAjustData = this.handleDataParse();\r\n    },\r\n    //  将数据转化成对应的单位(获取到的数据都是基础单位，要转成对应的)\r\n    handleDataParse() {\r\n      const obj = this.beforeAjustData;\r\n      obj.planTotalWeight = (obj.aaPlanTotalWeight / this.weightUnit).toFixed(2);\r\n      obj.planInnerWeight = (obj.aaPlanInnerWeight / this.weightUnit).toFixed(2);\r\n      obj.planExportWeight = (obj.aaPlanExportWeight / this.weightUnit).toFixed(2);\r\n      obj.planPlantArea = (obj.aaPlanPlantArea / this.areaUnit).toFixed(2);\r\n      return obj;\r\n    },\r\n\r\n    // 本次调整数据改变\r\n    handleCurrentDataChange() {\r\n      this.tableData.splice(this.tableData.length - 1, 1);\r\n      this.handleAfterAdjustData();\r\n    },\r\n\r\n    // 显示推窗\r\n    async show(row) {\r\n      this.visible = true;\r\n\r\n      this.data = row;\r\n      const selectRow = row.selectedRows;\r\n      this.leafTypeCode = selectRow.leafTypeCode;\r\n      this.orgCode = selectRow.orgCode;\r\n\r\n      this.leafTypeName = row.leafTypeObj.leafTypeName;\r\n      this.weightUnitName = row.weightUnitObj.weightUnitName;\r\n      this.weightUnit = row.weightUnitObj.weightUnitCd;\r\n      this.areaUnitName = row.areaUnitObj.areaUnitName;\r\n      this.areaUnit = row.areaUnitObj.areaUnitCd;\r\n      this.nowYear = row.nowYear;\r\n\r\n      this.formData = selectRow;\r\n      const leafTypeObj = this.leafTypeList.find(\r\n        (item) => item.leafTypeCode === selectRow.leafTypeCode,\r\n      );\r\n      this.formData.leafTypeName = leafTypeObj?.leafTypeName;\r\n\r\n      const oprTypeObj = this.workOptType.find((item) => item.id === selectRow.oprType);\r\n      this.formData.oprTypeName = oprTypeObj?.name;\r\n\r\n      // 调整前数据\r\n      await this.handleGetBeforeAdjustData();\r\n      this.tableData.push(this.beforeAjustData);\r\n\r\n      // 本次调整的数据\r\n      const currentAdjustData = {\r\n        name: '本次调整',\r\n        planTotalWeight: selectRow.planTotalWeight || 0,\r\n        planInnerWeight: selectRow.planInnerWeight || 0,\r\n        planExportWeight: selectRow.planExportWeight || 0,\r\n        planPlantArea: selectRow.planPlantArea || 0,\r\n      };\r\n      this.tableData.push(currentAdjustData);\r\n\r\n      // 调整后数据\r\n\r\n      this.handleAfterAdjustData();\r\n    },\r\n    sumNum(list, field) {\r\n      let count = 0;\r\n      list.forEach((item) => {\r\n        const value = item;\r\n        value[field] = value[field] || 0;\r\n        count += Number(item[field]);\r\n      });\r\n      return count.toFixed(2);\r\n    },\r\n    handleAfterAdjustData() {\r\n      const columns = ['planTotalWeight', 'planInnerWeight', 'planExportWeight', 'planPlantArea'];\r\n      const afterAdjustData = {\r\n        name: '调整后',\r\n      };\r\n      columns.forEach((item) => {\r\n        afterAdjustData[item] = this.sumNum(this.tableData, item);\r\n      });\r\n      this.tableData.push(afterAdjustData);\r\n    },\r\n\r\n    // 获取烟叶类型数据\r\n    handleGetLeafTypeList() {\r\n      this.$apis.tbm.tabaccoType.query({}).then((res) => {\r\n        this.leafTypeList = res?.rows || [];\r\n        const { leafTypeList } = this;\r\n        if (leafTypeList && leafTypeList.length > 0) {\r\n          this.leafTypeCd = (\r\n            leafTypeList.find((item) => item.leafTypeName === '烤烟') || {}\r\n          ).leafTypeCode;\r\n          console.log(`0000000000000000000=${this.formData.leafTypeCode}`);\r\n          this.formData.leafTypeCode = this.leafTypeCd;\r\n        }\r\n      });\r\n    },\r\n\r\n    // 取消\r\n    onclose() {\r\n      this.$refs.ruleForm1.resetFields();\r\n      this.tableData = [];\r\n      this.beforeAjustData = {};\r\n      this.visible = false;\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Detail.vue?vue&type=template&id=fcefad38&\"\nimport script from \"./Detail.vue?vue&type=script&lang=js&\"\nexport * from \"./Detail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <ec-container height=\"100%\">\r\n    <ec-container-header>\r\n      <ec-panel-item>\r\n        <ec-panel-item-left>\r\n          <ec-header title=\"收购计划执行量调整下达\" icon=\"onetomany\" color-code=\"008\" />\r\n        </ec-panel-item-left>\r\n      </ec-panel-item>\r\n    </ec-container-header>\r\n    <ec-container-body>\r\n      <ec-panel :auto=\"false\">\r\n        <ec-panel-toolbar>\r\n          <ec-query-panel :colCount=\"colCount\" @query=\"$refs.table.pageAction(1)\" @reset=\"onReset\">\r\n            <ec-query-item label=\"烟叶类型\">\r\n              <ec-select\r\n                showSearch\r\n                allowClear\r\n                placeholder=\"请选择\"\r\n                v-model=\"queryItems.leafTypeCode\"\r\n              >\r\n                <a-select-option v-for=\"leafTypeEk in leafTypeList\" :key=\"leafTypeEk.leafTypeCode\">\r\n                  {{ leafTypeEk.leafTypeName }}\r\n                </a-select-option>\r\n              </ec-select>\r\n            </ec-query-item>\r\n\r\n            <ec-query-item label=\"下达状态\">\r\n              <a-select allow-clear placeholder=\"请选择\" v-model=\"queryItems.releaseState\">\r\n                <a-select-option v-for=\"item in workIssuedState\" :key=\"item.id\">\r\n                  {{ item.name }}\r\n                </a-select-option>\r\n              </a-select>\r\n            </ec-query-item>\r\n\r\n            <ec-query-item label=\"操作类型\">\r\n              <a-select allow-clear placeholder=\"请选择\" v-model=\"queryItems.oprType\">\r\n                <a-select-option v-for=\"item in workOptType\" :key=\"item.id\">\r\n                  {{ item.name }}\r\n                </a-select-option>\r\n              </a-select>\r\n            </ec-query-item>\r\n          </ec-query-panel>\r\n          <ec-divider />\r\n        </ec-panel-toolbar>\r\n        <ec-panel-header>\r\n          <ec-panel-item>\r\n            <ec-panel-item-left>\r\n              <a-button type=\"primary\" @click=\"onIssued\">下达</a-button>\r\n              <a-button @click=\"onExport\">导出</a-button>\r\n            </ec-panel-item-left>\r\n            <ec-panel-item-right>\r\n              <a-space :size=\"15\">\r\n                <span>种植收购年度：{{ queryItems.busiYear }}年</span>\r\n                <span\r\n                  >重量单位：<ec-select\r\n                    showSearch\r\n                    allowClear\r\n                    placeholder=\"请选择\"\r\n                    v-model=\"weightUnit\"\r\n                    @select=\"handleUnitParse()\"\r\n                    style=\"width: 150px\"\r\n                  >\r\n                    <a-select-option\r\n                      v-for=\"weightUnit in weightUnitList\"\r\n                      :key=\"weightUnit.weightUnitCd\"\r\n                    >\r\n                      {{ weightUnit.weightUnitName }}\r\n                    </a-select-option>\r\n                  </ec-select></span\r\n                >\r\n                <span\r\n                  >面积单位：<ec-select\r\n                    showSearch\r\n                    allowClear\r\n                    placeholder=\"请选择\"\r\n                    v-model=\"areaUnit\"\r\n                    @select=\"handleUnitParse()\"\r\n                    style=\"width: 150px\"\r\n                  >\r\n                    <a-select-option v-for=\"areaUnit in areaUnitList\" :key=\"areaUnit.areaUnitCd\">\r\n                      {{ areaUnit.areaUnitName }}\r\n                    </a-select-option>\r\n                  </ec-select></span\r\n                >\r\n              </a-space>\r\n            </ec-panel-item-right>\r\n          </ec-panel-item>\r\n        </ec-panel-header>\r\n        <ec-panel-body>\r\n          <ec-table\r\n            ref=\"table\"\r\n            border\r\n            height=\"100%\"\r\n            :auto=\"false\"\r\n            @page-action=\"handlePagination\"\r\n            :pagination=\"pagination\"\r\n            :data=\"tableData.rows\"\r\n            @checkbox-all=\"selectAllEvent\"\r\n            @checkbox-change=\"selectRowChange\"\r\n            :loading=\"loading\"\r\n            show-footer\r\n            :footer-method=\"footerMethod\"\r\n            highlight-current-row\r\n          >\r\n            <ec-table-col type=\"checkbox\" width=\"50\" align=\"center\"></ec-table-col>\r\n            <ec-table-col title=\"序号\" type=\"seq\" width=\"70\" align=\"center\" />\r\n            <ec-table-col field=\"orgName\" title=\"单位名称\" align=\"left\" min-width=\"200\" />\r\n            <ec-table-col field=\"recordDate\" title=\"调整日期\" align=\"center\" width=\"150\" />\r\n\r\n            <ec-table-colgroup title=\"收购计划执行量\">\r\n              <ec-table-col field=\"aaPlanTotalWeight\" title=\"合计\" align=\"center\" width=\"120\" />\r\n              <ec-table-col field=\"aaPlanInnerWeight\" title=\"国内\" align=\"center\" width=\"120\" />\r\n              <ec-table-col\r\n                field=\"aaPlanExportWeight\"\r\n                title=\"出口备货\"\r\n                align=\"center\"\r\n                width=\"100\"\r\n              />\r\n            </ec-table-colgroup>\r\n            <ec-table-col field=\"aaPlanPlantArea\" title=\"种植面积\" align=\"right\" width=\"120\" />\r\n            <ec-table-col field=\"remark\" title=\"办理依据\" align=\"left\" width=\"150\" />\r\n            <ec-table-col field=\"releaseState\" title=\"下达状态\" align=\"center\" width=\"100\">\r\n              <template #default=\"{ row }\">\r\n                <div v-if=\"row.releaseState === '1'\">\r\n                  <span>已下达</span>\r\n                </div>\r\n                <div v-else>\r\n                  <span>未下达</span>\r\n                </div>\r\n              </template>\r\n            </ec-table-col>\r\n            <ec-table-col field=\"issuedTime\" title=\"下达日期\" align=\"center\" width=\"130\" />\r\n\r\n            <ec-table-col title=\"操作\" align=\"center\" width=\"150\">\r\n              <template #default=\"{ row }\">\r\n                <a-button type=\"link\" @click=\"onDetail(row)\">详细</a-button>\r\n              </template>\r\n            </ec-table-col>\r\n          </ec-table>\r\n        </ec-panel-body>\r\n      </ec-panel>\r\n\r\n      <detail ref=\"Detail\"></detail>\r\n    </ec-container-body>\r\n  </ec-container>\r\n</template>\r\n\r\n<script>\r\nimport Detail from './Detail.vue';\r\n\r\nexport default {\r\n  name: 'ExecutionIssuedAdjustManage',\r\n  components: {\r\n    Detail,\r\n  },\r\n  data() {\r\n    return {\r\n      queryItems: {\r\n        busiYear: '',\r\n        leafTypeCode: '10',\r\n        releaseState: '0',\r\n        oprType: '',\r\n      },\r\n      bizCode: '',\r\n      weightUnit: 500000,\r\n      areaUnit: 10000,\r\n      colCount: 5,\r\n      nowYear: '',\r\n      loading: false,\r\n      leafTypeCd: '',\r\n      leafTypeList: [\r\n        { leafTypeCode: '10', leafTypeName: '烤烟' },\r\n        { leafTypeCode: '20', leafTypeName: '晾晒烟(全部)' },\r\n        { leafTypeCode: '2013', leafTypeName: '晾晒烟(雪茄烟叶)' },\r\n      ],\r\n      oldDataRow: [],\r\n\r\n      workIssuedState: [\r\n        { id: '0', name: '未下达' },\r\n        { id: '1', name: '已下达' },\r\n      ],\r\n      workOptType: [\r\n        { id: '', name: '全部' },\r\n        { id: '0', name: '调减' },\r\n        { id: '1', name: '调增' },\r\n      ],\r\n      weightUnitList: [\r\n        { weightUnitCd: 1, weightUnitName: '公斤', isSelected: false },\r\n        { weightUnitCd: 50, weightUnitName: '担', isSelected: false },\r\n        { weightUnitCd: 500000, weightUnitName: '万担', isSelected: false },\r\n      ],\r\n      areaUnitList: [\r\n        { areaUnitCd: 10000, areaUnitName: '万亩' },\r\n        { areaUnitCd: 1, areaUnitName: '亩' },\r\n      ],\r\n\r\n      pagination: {\r\n        pageNumber: 1,\r\n        pageSize: 10,\r\n        total: 0,\r\n      },\r\n      tableData: {\r\n        // 数据表格\r\n        // totalRows: 0,\r\n        rows: [],\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    appConfig() {\r\n      return this.$store.getters.getAppConfig;\r\n    },\r\n  },\r\n  created() {\r\n    const { appCode } = this.$router.history.current.query;\r\n    this.appCode = appCode || 'CM'; // 获取当前登入信息\r\n  },\r\n  methods: {\r\n    // 单位切换的处理\r\n    handleUnitParse() {\r\n      const newTableData = [];\r\n      console.log(`單位：${this.weightUnit}`);\r\n      const handleOlDataRow = JSON.parse(JSON.stringify(this.oldDataRow)) || [];\r\n\r\n      handleOlDataRow.forEach((item) => {\r\n        const obj = item;\r\n        obj.aaPlanTotalWeight = (obj.aaPlanTotalWeight / this.weightUnit).toFixed(2);\r\n        obj.aaPlanInnerWeight = (obj.aaPlanInnerWeight / this.weightUnit).toFixed(2);\r\n        obj.aaPlanExportWeight = (obj.aaPlanExportWeight / this.weightUnit).toFixed(2);\r\n        obj.aaPlanPlantArea = (obj.aaPlanPlantArea / this.areaUnit).toFixed(2);\r\n        newTableData.push(obj);\r\n      });\r\n      console.log(newTableData);\r\n      this.tableData.rows = newTableData;\r\n    },\r\n\r\n    async handlePagination(pageNumber, pageSize) {\r\n      this.pagination.pageNumber = pageNumber;\r\n      this.pagination.pageSize = pageSize;\r\n      await this.handleGetLeafTypeList();\r\n    },\r\n\r\n    // 获取烟叶类型数据\r\n    async handleGetLeafTypeList() {\r\n      if (!this.leafTypeList?.length) {\r\n        const res = await this.$apis.bpm.executionEnter.queryLeafType({});\r\n        this.leafTypeList = res?.rows || [];\r\n        this.leafTypeList.some((item) => {\r\n          if (item.leafTypeName === '烤烟') {\r\n            this.leafTypeCd = item.leafTypeCode;\r\n            this.queryItems.leafTypeCode = item.leafTypeCode;\r\n            return true;\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      if (!this.orgCode) {\r\n        const orgObj = await this.$apis.bim.curOrg.get({});\r\n        this.bizCode = orgObj?.bizCode;\r\n        this.orgCode = orgObj?.orgUniqueCode; // todo 写死数据\r\n      }\r\n      if (!this.queryItems.busiYear > 0) {\r\n        // 获取年度\r\n        const data = {\r\n          bizCode: this.appConfig.bizCode, // todo 写死的数据\r\n          appCode: this.appCode || 'CM',\r\n          yearTypeCode: 'BIZ_YEAR',\r\n        };\r\n        const busiYearObj = await this.$apis.bpm.executionEnter.getBuYear(data);\r\n        this.queryItems.busiYear = busiYearObj?.yearValue;\r\n        this.nowYear = busiYearObj?.yearValue;\r\n      }\r\n      this.onQuery();\r\n    },\r\n\r\n    // 数据初始化\r\n    onQuery() {\r\n      this.loading = true;\r\n      const data = {\r\n        pageNo: this.pagination.pageNumber,\r\n        pageSize: this.pagination.pageSize,\r\n        leafTypeCode: this.queryItems.leafTypeCode,\r\n        busiYear: this.queryItems.busiYear,\r\n        releaseState: this.queryItems.releaseState,\r\n        oprType: this.queryItems.oprType,\r\n      };\r\n      console.log(data);\r\n      this.$apis.bpm.executionIssued\r\n        .queryAdjust(data)\r\n        .then((res) => {\r\n          this.tableData = res;\r\n          const { rows } = this.tableData;\r\n          this.pagination.total = res.totalRows;\r\n          this.oldDataRow = JSON.parse(JSON.stringify(rows));\r\n          console.log(`66666${JSON.stringify(this.oldDataRow)}`);\r\n          // 对返回的数据处理，转成对应的单位数据\r\n          this.handleUnitParse();\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        })\r\n        .finally(() => {\r\n          this.loading = false;\r\n          this.selectedRows = [];\r\n        });\r\n    },\r\n\r\n    // 下达按钮\r\n    onIssued() {\r\n      if (!this.selectedRows || this.selectedRows.length <= 0) {\r\n        this.$message.error('请选择一条数据再下达');\r\n        return;\r\n      }\r\n      const issuedData = this.selectedRows.find(\r\n        (item) => !(item.auditState === '3' && item.releaseState === '0'),\r\n      );\r\n      console.log(`--${JSON.stringify(issuedData)}`);\r\n      if (issuedData) {\r\n        this.$message.error('存在已下达数据，请勿重复下达');\r\n        return;\r\n      }\r\n      this.$confirm({\r\n        title: '是否执行该操作?',\r\n        content: () => (\r\n          <div style=\"color:red;\">\r\n            是否确认下达选中的数据，确认请点击'确认'按钮，取消点击'取消'按钮。\r\n          </div>\r\n        ),\r\n        onOk: () => {\r\n          this.loading = true;\r\n          const idList = [];\r\n          for (let i = 0; i < this.selectedRows.length; i++) {\r\n            idList.push(this.selectedRows[i].oprRecordId);\r\n          }\r\n          console.log(`参数：${JSON.stringify(idList)}`);\r\n          this.$apis.bpm.executionIssued.issuedAdjust({ oprRecordIds: idList }).then((res) => {\r\n            console.log(JSON.stringify(res));\r\n            if (res.result) {\r\n              this.loading = false;\r\n              this.onQuery();\r\n              this.$message.success('操作成功');\r\n            } else {\r\n              this.$message.error('操作失败');\r\n            }\r\n          });\r\n        },\r\n      });\r\n    },\r\n\r\n    // 重置\r\n    onReset() {\r\n      this.queryItems.leafTypeCode = this.leafTypeCd;\r\n\r\n      this.queryItems.busiYear = this.nowYear;\r\n      this.queryItems.releaseState = '0';\r\n      this.queryItems.oprType = '';\r\n      this.$refs.table.pageAction(1);\r\n    },\r\n    // 导出\r\n    onExport() {\r\n      this.$message.error('模块开发中！');\r\n    },\r\n\r\n    // 详细\r\n    onDetail(row) {\r\n      const data = this.handleData();\r\n      const selectedRows = JSON.parse(JSON.stringify(row)); // 深拷贝\r\n      data.selectedRows = selectedRows;\r\n      this.$refs.Detail.show(data);\r\n    },\r\n\r\n    // 对下一个页面的数据进行处理\r\n    handleData() {\r\n      const leafTypeObj = this.leafTypeList.find(\r\n        (res) => res.leafTypeCode === this.queryItems.leafTypeCode,\r\n      );\r\n      const weightUnitObj = this.weightUnitList.find((res) => res.weightUnitCd === this.weightUnit);\r\n      const areaUnitObj = this.areaUnitList.find((res) => res.areaUnitCd === this.areaUnit);\r\n      const data = {\r\n        leafTypeObj,\r\n        weightUnitObj,\r\n        areaUnitObj,\r\n        nowYear: this.queryItems.busiYear,\r\n      };\r\n      return data;\r\n    },\r\n\r\n    // 根据编码翻译对应的名称\r\n    handleLeafTypeName(typeCd) {\r\n      const leafType = this.leafTypeList.find((item) => item.leafTypeCode === typeCd);\r\n      return leafType?.leafTypeName;\r\n    },\r\n\r\n    sumNum(list, field) {\r\n      let count = 0;\r\n      list.forEach((item) => {\r\n        count += Number(item[field]);\r\n      });\r\n      return count.toFixed(2);\r\n    },\r\n    footerMethod({ columns, data }) {\r\n      return [\r\n        columns.map((column, columnIndex) => {\r\n          if (columnIndex === 0) {\r\n            return '合计';\r\n          }\r\n          if (\r\n            ['planTotalWeight', 'planInnerWeight', 'planExportWeight', 'planPlantArea'].includes(\r\n              column.property,\r\n            )\r\n          ) {\r\n            return this.sumNum(data, column.property);\r\n          }\r\n          return null;\r\n        }),\r\n      ];\r\n    },\r\n\r\n    // 选中所有列表\r\n    selectAllEvent({ checked, records }) {\r\n      console.log(`${checked}-选中所有records包含选中的所以对象----${JSON.stringify(records)}`);\r\n      this.selectedRows = records;\r\n    },\r\n\r\n    // 选中列表\r\n    selectRowChange({ checked, records }) {\r\n      console.log(\r\n        `${checked}-选择改变时会把records包含选中的所以对象----${JSON.stringify(records)}`,\r\n      );\r\n      this.selectedRows = records;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.year {\r\n  font-size: 18px;\r\n  line-height: 22px;\r\n\r\n  color: #18191a;\r\n  font-weight: 700;\r\n  padding-top: 18px;\r\n  padding-right: 50px;\r\n  font-family: '微软雅黑 Bold', '微软雅黑', 'Microsoft YaHei', sans-serif;\r\n}\r\n.paddingTop {\r\n  padding-top: 15px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=11326ee5&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=11326ee5&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"11326ee5\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}