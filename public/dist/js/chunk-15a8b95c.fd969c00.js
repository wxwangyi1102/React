(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15a8b95c"],{4815:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ec-container",[a("ec-container-header",[a("ec-panel-item",[a("ec-panel-item-left",[a("ec-header",{attrs:{title:"收购升损审核",icon:"onetomany","color-code":"008"}})],1)],1)],1),a("ec-container-body",[a("ec-panel",[a("ec-panel-toolbar",[a("ec-query-panel",{on:{query:e.handleQuery,reset:e.handleReset},scopedSlots:e._u([{key:"inner",fn:function(){return[a("ec-query-item",{attrs:{label:"单位"}},[a("a-input",{attrs:{placeholder:"请输入单位"},model:{value:e.queryData.orgName,callback:function(t){e.$set(e.queryData,"orgName",t)},expression:"queryData.orgName"}})],1),a("ec-query-item",{attrs:{label:"单据日期范围"}},[a("a-range-picker",{model:{value:e.billDates,callback:function(t){e.billDates=t},expression:"billDates"}},[a("template",{slot:"renderExtraFooter"},[e._v(" extra footer ")])],2)],1),a("ec-query-item",{attrs:{label:"调拨年度"}},[a("a-input-number",{attrs:{disabled:e.disabled,placeholder:"请输入调拨年度"},model:{value:e.queryData.busiYear,callback:function(t){e.$set(e.queryData,"busiYear",t)},expression:"queryData.busiYear"}})],1)]},proxy:!0}])},[a("ec-query-item",{attrs:{label:"状态"}},[a("ec-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择"},model:{value:e.queryData.auditState,callback:function(t){e.$set(e.queryData,"auditState",t)},expression:"queryData.auditState"}},e._l(e.stateList,(function(t){return a("a-select-option",{key:t.auditStateCode},[e._v(" "+e._s(t.auditStateName)+" ")])})),1)],1),a("ec-query-item",{attrs:{label:"业务类型"}},[a("ec-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择"},model:{value:e.queryData.busiTypeCode,callback:function(t){e.$set(e.queryData,"busiTypeCode",t)},expression:"queryData.busiTypeCode"}},e._l(e.businessTypeList,(function(t){return a("a-select-option",{key:t.busiTypeCode,attrs:{value:t.busiTypeCode}},[e._v(" "+e._s(t.busiTypeName)+" ")])})),1)],1),a("ec-query-item",{attrs:{label:"烟叶类型"}},[a("ec-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择"},model:{value:e.queryData.leafTypeCode,callback:function(t){e.$set(e.queryData,"leafTypeCode",t)},expression:"queryData.leafTypeCode"}},e._l(e.leafTypeList,(function(t){return a("a-select-option",{key:t.leafTypeCode},[e._v(" "+e._s(t.leafTypeName)+" ")])})),1)],1)],1),a("ec-divider")],1),a("ec-panel-body",[a("ec-v-layout",[a("ec-v-item",[a("ec-panel-item",[a("ec-panel-item-left",[a("a-button",{attrs:{type:"primary"},on:{click:e.onAgree}},[e._v("同意")]),a("a-button",{on:{click:e.onBack}},[e._v("退回")])],1),a("ec-panel-item-right",[a("a-space",{attrs:{size:15}},[a("span",[e._v("业务年度："+e._s(e.busiYear)+"年")]),a("span",[e._v("重量单位："),a("ec-select",{staticStyle:{width:"150px"},attrs:{showSearch:"",allowClear:"",placeholder:"请选择"},on:{select:function(t){return e.handleUnitParse()}},model:{value:e.weightUnit,callback:function(t){e.weightUnit=t},expression:"weightUnit"}},e._l(e.weightUnitList,(function(t){return a("a-select-option",{key:t.weightUnitCd},[e._v(" "+e._s(t.weightUnitName)+" ")])})),1)],1)])],1)],1)],1),a("ec-v-item",[a("ec-table",{ref:"table",attrs:{"show-overflow":"",loading:e.loading,data:e.tableData,pagination:e.pagination,"checkbox-config":{trigger:"row",highlight:!0,range:!0}},on:{"page-action":e.pageAction,"checkbox-all":e.selectAllEvent,"checkbox-change":e.selectRowChange}},[a("ec-table-col",{attrs:{type:"checkbox",width:"50",align:"center"}}),a("ec-table-col",{attrs:{field:"billDate",title:"单据日期"}}),a("ec-table-col",{attrs:{field:"orgName",title:"单位",align:"left",width:"150"}}),a("ec-table-col",{attrs:{field:"busiTypeName",title:"业务类型",align:"center"}}),a("ec-table-col",{attrs:{field:"leafTypeName",title:"烟叶类型",align:"center"}}),a("ec-table-col",{attrs:{field:"leafFormName",title:"烟叶形态",align:"center"}}),a("ec-table-col",{attrs:{field:"confFlag",title:"罚没烟",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return["0"===l.confFlag?a("div",[a("span",[e._v("非罚没烟")])]):"1"===l.confFlag?a("div",[a("span",[e._v("罚没烟")])]):e._e()]}}])}),a("ec-table-col",{attrs:{field:"busiYear",title:"调拨年度",align:"center"}}),a("ec-table-col",{attrs:{field:"prodYear",title:"生产年度",align:"center"}}),a("ec-table-col",{attrs:{field:"totalWeight",title:"重量",align:"right"}}),a("ec-table-col",{attrs:{field:"auditState",title:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return["0"===l.auditState?a("div",[a("span",[e._v("未上报")])]):"1"===l.auditState?a("div",[a("span",[e._v("省公司待审核")])]):"2"===l.auditState?a("div",[a("span",[e._v("省公司退回")])]):a("div",[a("span",[e._v("完成")])])]}}])}),a("ec-table-col",{attrs:{field:"field",title:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.onDetail(l)}}},[e._v("详细")])]}}])})],1)],1)],1)],1)],1),a("detail-modal",{ref:"detailModalRef",on:{finish:e.handleReset}})],1)],1)},i=[],r=a("5530"),o=(a("e9c4"),a("d3b7"),a("159b"),a("b680"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ec-drawer",{staticClass:"ec-draw-form",attrs:{title:e.详细信息,visible:e.visible,size:"small","is-confirm":!0},on:{close:e.onclose}},[a("ec-container",{attrs:{height:"auto",fixed:"top bottom","color-code":"007"}},[a("ec-container-body",[a("ec-panel",{attrs:{"color-code":"001",title:"详细信息"}},[a("ec-panel-item",[a("ec-form",{ref:"formRef",attrs:{model:e.formData,rules:e.formRules}},[a("a-row",{attrs:{type:"flex",gutter:12}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"单据日期",prop:"billDate"}},[a("a-date-picker",{attrs:{format:e.dateFormat,disabled:!0},model:{value:e.formData.billDate,callback:function(t){e.$set(e.formData,"billDate",t)},expression:"formData.billDate"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"业务类型",prop:"busiTypeName"}},[a("ec-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择",disabled:!0},model:{value:e.formData.busiTypeName,callback:function(t){e.$set(e.formData,"busiTypeName",t)},expression:"formData.busiTypeName"}},e._l(e.businessTypeList,(function(t){return a("a-select-option",{key:t.busiTypeCode,attrs:{value:t.busiTypeName}},[e._v(" "+e._s(t.busiTypeName)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"烟叶类型",prop:"leafTypeCode"}},[a("ec-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择",disabled:!0},model:{value:e.formData.leafTypeName,callback:function(t){e.$set(e.formData,"leafTypeName",t)},expression:"formData.leafTypeName"}},e._l(e.leafTypeList,(function(t){return a("a-select-option",{key:t.leafTypeCode,attrs:{value:t.leafTypeName,disabled:!0}},[e._v(" "+e._s(t.leafTypeName)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"烟叶形态",prop:"leafFormCode"}},[a("ec-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择",disabled:!0},model:{value:e.formData.leafFormName,callback:function(t){e.$set(e.formData,"leafFormName",t)},expression:"formData.leafFormName"}},e._l(e.leafFormList,(function(t){return a("a-select-option",{key:t.leafFormCode,attrs:{value:t.leafFormCode}},[e._v(" "+e._s(t.leafFormName)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"罚没烟",prop:"confFlag"}},[a("ec-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择",disabled:!0},model:{value:e.formData.confFlag,callback:function(t){e.$set(e.formData,"confFlag",t)},expression:"formData.confFlag"}},e._l(e.confiscationSmokeList,(function(t){return a("a-select-option",{key:t.confFlag},[e._v(" "+e._s(t.confFlagName)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"生产年度",prop:"prodYear"}},[a("a-input",{attrs:{disabled:!0},model:{value:e.formData.prodYear,callback:function(t){e.$set(e.formData,"prodYear",t)},expression:"formData.prodYear"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"调拨年度",prop:"busiYear"}},[a("a-input",{attrs:{disabled:!0},model:{value:e.formData.busiYear,callback:function(t){e.$set(e.formData,"busiYear",t)},expression:"formData.busiYear"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"重量",prop:"totalWeight"}},[a("a-input-number",{attrs:{disabled:!0},model:{value:e.formData.totalWeight,callback:function(t){e.$set(e.formData,"totalWeight",t)},expression:"formData.totalWeight"}})],1)],1)],1)],1)],1)],1)],1),a("ec-container-footer",{attrs:{fixed:""}},[a("a-space",[a("a-button",{on:{click:e.onclose}},[e._v("关闭")])],1)],1)],1)],1)}),n=[],s=a("c5ed"),c={name:"EditModal",components:{OrgPicker:s["b"],OrgTree:s["c"],DivisionPicker:s["a"]},data:function(){return{value:"",businessTypeList:[{busiTypeCode:"",busiTypeName:"全部"},{busiTypeCode:"YW9401",busiTypeName:"升溢"},{busiTypeCode:"YW9402",busiTypeName:"损耗"}],leafTypeList:[{leafTypeCode:"10",leafTypeName:"烤烟"},{leafTypeCode:"20",leafTypeName:"晾晒烟"}],leafFormList:[{leafFormCode:"101",leafFormName:"原烟"}],confiscationSmokeList:[{confFlag:"0",confFlagName:"非罚没烟"}],prodYear:"",busiYear:"",userInfo:{},dateFormat:"YYYY-MM-DD HH:mm:ss",visible:!1,loading:!1,formData:{orgCode:"",orgName:"",bizCode:"",levelCode:"",billDate:"",busiTypeCode:"",leafTypeCode:"",leafFormName:"",leafFormCode:"",confFlag:"",prodYear:"",busiYear:"",totalWeight:""},formRules:{billDate:{required:!0,message:"请选择单据日期",trigger:"blur"},busiTypeName:{required:!0,message:"请选择业务类型",trigger:"blur"},leafTypeCode:{required:!0,message:"请选择烟叶类型",trigger:"blur"},leafFormCode:{required:!0,message:"请选择烟叶形态",trigger:"blur"},confFlag:{required:!0,message:"请选择",trigger:"blur"},prodYear:{required:!0,message:"请选择生产年度",trigger:"blur"},busiYear:{required:!0,message:"请选择调拨年度",trigger:"blur"},totalWeight:{required:!0,message:"请输入重量",trigger:"blur"}}}},created:function(){this.getUserInfoHandler()},methods:{show:function(e){this.visible=!0,this.formData=e||{busiYear:this.busiYear},this.prodYear=e.prodYear,this.busiYear=e.busiYear},getUserInfoHandler:function(){var e=this;this.$apis.common.user.get({}).then((function(t){e.userInfo=t||{},e.formData.orgCode=t.orgCode,e.formData.orgName=t.orgName,e.formData.bizCode=t.bizCode,e.formData.levelCode=t.cmTOrgMain.levelCode}))},onclose:function(){this.$refs.formRef.resetFields(),this.formData={},this.visible=!1}}},u=c,d=a("2877"),f=Object(d["a"])(u,o,n,!1,null,"6bc51b54",null),p=f.exports,m=a("2ef0"),h=a.n(m),y={components:{DetailModal:p},data:function(){return{tableData:[],billDates:"",queryData:{busiYear:""},leafTypeList:[{leafTypeCode:"",leafTypeName:"全部"},{leafTypeCode:"10",leafTypeName:"烤烟"},{leafTypeCode:"20",leafTypeName:"晾晒烟"}],businessTypeList:[{busiTypeCode:"YW9401",busiTypeName:"升溢"},{busiTypeCode:"YW9402",busiTypeName:"损耗"}],stateList:[{auditStateCode:"",auditStateName:"全部"},{auditStateCode:"0",auditStateName:"未上报"},{auditStateCode:"1",auditStateName:"省公司待审核"},{auditStateCode:"2",auditStateName:"省公司退回"},{auditStateCode:"5",auditStateName:"完成"}],weightList:[{name:"万担",id:"万担"},{name:"担",id:"担"},{name:"公斤",id:"公斤"}],weightUnitList:[{weightUnitCd:5e5,weightUnitName:"万担",isSelected:!1},{weightUnitCd:50,weightUnitName:"担",isSelected:!1},{weightUnitCd:1,weightUnitName:"公斤",isSelected:!1}],weightUnit:50,oldDataRow:[],levelCode:"",busiYear:"",prodYear:"",userInfo:{},pagination:{pageNumber:1,pageSize:10,total:0},selectedRows:[]}},created:function(){this.onQuery(),this.getUserInfoHandler()},methods:{handleReset:function(){this.queryData={},this.billDates="",this.onQuery()},onQuery:function(){var e=this;this.$apis.bpm.lossReportApply.query({}).then((function(t){e.tableData=t.rows,e.pagination.total=t.rows.length,e.busiYear=t.rows[0].busiYear,e.prodYear=t.rows[0].prodYear,e.oldDataRow=JSON.parse(JSON.stringify(t.rows)),e.handleUnitParse()}))},handleUnitParse:function(){var e=this,t=[],a=JSON.parse(JSON.stringify(this.oldDataRow))||[];a.forEach((function(a){var l=a;l.totalWeight=(l.totalWeight/e.weightUnit).toFixed(2),t.push(l)})),this.tableData=t},handleQuery:function(){var e=this;console.log(this.queryData);var t=Object(r["a"])(Object(r["a"])({},this.queryData),{},{billBeginDate:this.billDates[0],billEndDate:this.billDates[1]});this.$apis.bpm.lossReportApply.query(t).then((function(t){e.tableData=t.rows,e.pagination.total=t.rows.length,e.loading=!1,e.handleUnitParse()}))},onDetail:function(e){this.$refs.detailModalRef.show(h.a.cloneDeep(e))},selectAllEvent:function(e){var t=e.records;this.selectedRows=t},selectRowChange:function(e){var t=e.records;this.selectedRows=t},isSelectTableData:function(e){return(0===(null===e||void 0===e?void 0:e.length)||!e)&&(this.$message.error("请选择一条数据再操作"),!0)},getUserInfoHandler:function(){var e=this;this.$apis.common.user.get({}).then((function(t){e.userInfo=t}))},onAgree:function(){var e=this,t=this.$createElement;!this.selectedRows||this.selectedRows.length<=0?this.$message.error("请选择一条数据再同意"):this.$confirm({title:"是否执行该操作?",content:function(){return t("div",{style:"color:red;"},["是否确认同意选中的数据，确认请点击'确认'按钮，取消点击'取消'按钮。"])},onOk:function(){e.loading=!0;for(var t=[],a=0;a<e.selectedRows.length;a++)t.push(e.selectedRows[a].lossReportQtyId);var l={lossReportQtyIds:t,levelCode:e.levelCode,busiYear:e.busiYear};e.$apis.bpm.lossReportApply.onAgree(l).then((function(t){t.result?(e.loading=!1,e.$message.success("操作成功"),e.onQuery()):e.$message.error("操作失败，仅待审核状态可操作")}))}})},onBack:function(){var e=this,t=this.$createElement;!this.selectedRows||this.selectedRows.length<=0?this.$message.error("请选择一条数据再退回"):this.$confirm({title:"是否执行该操作?",content:function(){return t("div",{style:"color:red;"},["是否确认退回选中的数据，确认请点击'确认'按钮，取消点击'取消'按钮。"])},onOk:function(){e.loading=!0;for(var t=[],a=0;a<e.selectedRows.length;a++)t.push(e.selectedRows[a].lossReportQtyId);e.$apis.bpm.lossReportApply.onBack({lossReportQtyIds:t}).then((function(t){console.log(JSON.stringify(t)),t.result?(e.loading=!1,e.$message.success("操作成功"),e.onQuery()):e.$message.error("仅待审核的状态可以退回")})).catch((function(t){e.loading=!1,t?e.$message.error(t.message||"操作失败"):e.$message.error("操作失败")}))}})}}},b=y,g=Object(d["a"])(b,l,i,!1,null,null,null);t["default"]=g.exports},c5ed:function(e,t,a){"use strict";a.d(t,"b",(function(){return r["a"]})),a.d(t,"c",(function(){return m})),a.d(t,"a",(function(){return D}));var l=a("24f1"),i=a("9d27"),r=a("6486"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("TreeSearch",e._g(e._b({ref:"org",attrs:{lazy:e.lazy,join:e.join,search:e.search,activeFirst:e.activeFirst,initLevel:e.initLevel,fetchData:e.fetchGetTree,fetchDataById:e.fetchGetTreeById,fetchDataByName:e.fetchGetTreeByName,replaceFields:e.replaceFields,valueField:e.valueField,isShowParent:e.isShowParent},on:{select:e.onSelectTreeData}},"TreeSearch",e.$attrs,!1),e.$listeners),[a("template",{slot:"title"},[e._t("title")],2)],2)},n=[],s=a("5530"),c=(a("a9e3"),a("d3b7"),a("ac16"),a("f8c9"),a("b0c0"),a("f2be")),u={inheritAttrs:!1,name:"OrgTree",components:{TreeSearch:l["a"]},props:{baseUrl:{type:String,default:"/dts/bim"},treeApi:{type:String,default:"/q/cmTOrgMain/getCmTOrgMainTreeDataList/v1"},treeApiById:{type:String,default:"/q/cmTOrgMain/getCmTOrgMainTreeParentByOrgUniqueCode/v1"},treeApiByName:{type:String,default:"/q/cmTOrgMain/getCmTOrgMainTreeParentByOrgName/v1"},placeholder:{type:String,default:"请选择关键词搜索"},multiple:{type:Boolean,default:!1},isShowParent:{type:Boolean,default:!1},activeFirst:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},initLevel:{type:[Number,null],default:2},limitLevel:{type:[Number,String,null],default:null},replaceFields:{type:Object,default:function(){return{pkey:"pkey",title:"title",key:"key",children:"children"}}},valueField:{type:String,default:"key"},join:{type:Boolean,default:!1},search:{type:Boolean,default:!0},lazy:{type:Boolean,default:!0}},data:function(){return{otherParams:{}}},methods:{fetchGetTree:function(e){var t=this;return new Promise((function(a,l){var i=null===e||void 0===e?void 0:e.code;i&&Reflect.deleteProperty(e,"code"),$ec.http.send(t.baseUrl+t.treeApi,Object(s["a"])(Object(s["a"])({orgLevelNum:t.limitLevel,orgUniqueCode:i},e),t.otherParams)).then((function(e){var l=e.rows,i=Object(c["g"])(l,t.replaceFields);a(i)})).catch((function(e){l(e)})).finally((function(){console.log("finally")}))}))},fetchGetTreeById:function(e){var t=this;return new Promise((function(a,l){var i=null===e||void 0===e?void 0:e.code;i&&Reflect.deleteProperty(e,"code"),$ec.http.send(t.baseUrl+t.treeApiById,Object(s["a"])(Object(s["a"])({orgLevelNum:t.limitLevel,orgUniqueCode:i},e),t.otherParams)).then((function(e){var l=e.rows,i=Object(c["g"])(l,t.replaceFields);a(i)})).catch((function(e){l(e)})).finally((function(){console.log("finally")}))}))},fetchGetTreeByName:function(e){var t=this;return new Promise((function(a,l){var i=null===e||void 0===e?void 0:e.name;i&&Reflect.deleteProperty(e,"name"),$ec.http.send(t.baseUrl+t.treeApiByName,Object(s["a"])(Object(s["a"])({orgLevelNum:t.limitLevel,orgName:i},e),t.otherParams)).then((function(e){var l=e.rows,i=Object(c["g"])(l,t.replaceFields);a(i)})).catch((function(e){l(e)})).finally((function(){console.log("finally")}))}))},onSelectTreeData:function(e){var t=e.treeSelectedKeys,a=e.treeData,l=e.selectOption;Object.assign(this,{selectedKeys:t,selectOption:l,treeData:a})},onRefreshTree:function(e){this.otherParams=e,this.$refs.org&&this.$refs.org.handleTreeData(e)},onSelectTreeFn:function(e){this.$refs.org&&this.$refs.org.onSelectTreeFn(e)}}},d=u,f=a("2877"),p=Object(f["a"])(d,o,n,!1,null,null,null),m=p.exports,h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("SelectPicker",e._g(e._b({attrs:{title:e.title,value:e.value,search:e.search,"allow-clear":e.allowClear,placeholder:e.placeholder,multiple:e.multiple,disabled:e.disabled,valueField:e.valueField,fetchData:e.fetchGetTree,fetchDataById:e.fetchGetTreeById,fetchDataByName:e.fetchGetTreeByName}},"SelectPicker",e.$attrs,!1),e.$listeners))},y=[],b={inheritAttrs:!1,name:"DivisionPicker",components:{SelectPicker:i["a"]},model:{prop:"value",event:"change"},props:{value:{type:[String,Array,null],default:null},baseUrl:{type:String,default:"/dts/bim"},treeApi:{type:String,default:"/q/cmOmDivision/getCmOmDivisionTreeDataList/v1"},treeApiById:{type:String,default:"/q/cmOmDivision/getCmOmDivisionTreeParentById/v1"},treeApiByName:{type:String,default:"/q/cmOmDivision/getCmOmDivisionTreeParentByIName/v1"},placeholder:{type:String,default:"请选择关键词搜索"},multiple:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},title:{type:String,default:"行政区域选择器"},search:{type:Boolean,default:!0},width:{type:[String,Number],default:"425px"},height:{type:[String,Number],default:"370px"},top:{type:[String,Number],default:"100px"},centered:{type:Boolean,default:!1},initLevel:{type:[Number,null],default:2},limitLevel:{type:[Number,null],default:null},replaceFields:{type:Object,default:function(){return{pkey:"pkey",title:"title",key:"key",children:"children"}}},valueField:{type:String,default:"key"},join:{type:Boolean,default:!1},lazy:{type:Boolean,default:!0}},methods:{fetchGetTree:function(e){var t=this;return new Promise((function(a,l){var i=null===e||void 0===e?void 0:e.code;i&&Reflect.deleteProperty(e,"code"),$ec.http.send(t.baseUrl+t.treeApi,Object(s["a"])({divisionLevelNum:t.limitLevel,divisionUniqueCode:i},e)).then((function(e){var l=e.rows,i=Object(c["g"])(l,t.replaceFields);a(i)})).catch((function(e){l(e)})).finally((function(){console.log("finally")}))}))},fetchGetTreeById:function(e){var t=this;return new Promise((function(a,l){var i=null===e||void 0===e?void 0:e.code;i&&Reflect.deleteProperty(e,"code"),$ec.http.send(t.baseUrl+t.treeApiById,Object(s["a"])({divisionLevelNum:t.limitLevel,divisionUniqueCode:i},e)).then((function(e){var l=e.rows,i=Object(c["g"])(l,t.replaceFields);a(i)})).catch((function(e){l(e)})).finally((function(){console.log("finally")}))}))},fetchGetTreeByName:function(e){var t=this;return new Promise((function(a,l){var i=null===e||void 0===e?void 0:e.name;i&&Reflect.deleteProperty(e,"name"),$ec.http.send(t.baseUrl+t.treeApiByName,Object(s["a"])({divisionLevelNum:t.limitLevel,divisionName:i},e)).then((function(e){var l=e.rows,i=Object(c["g"])(l,t.replaceFields);a(i)})).catch((function(e){l(e)})).finally((function(){console.log("finally")}))}))}}},g=b,v=Object(f["a"])(g,h,y,!1,null,null,null),D=v.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("TreeSearch",e._g(e._b({ref:"division",attrs:{lazy:e.lazy,join:e.join,search:e.search,activeFirst:e.activeFirst,initLevel:e.initLevel,fetchData:e.fetchGetTree,fetchDataById:e.fetchGetTreeById,fetchDataByName:e.fetchGetTreeByName,replaceFields:e.replaceFields,valueField:e.valueField,isShowParent:e.isShowParent},on:{select:e.onSelectTreeData}},"TreeSearch",e.$attrs,!1),e.$listeners),[a("template",{slot:"title"},[e._t("title")],2)],2)},w=[],N={inheritAttrs:!1,name:"DivisionTree",components:{TreeSearch:l["a"]},props:{baseUrl:{type:String,default:"/dts/bim"},treeApi:{type:String,default:"/q/cmOmDivision/getCmOmDivisionTreeDataList/v1"},treeApiById:{type:String,default:"/q/cmOmDivision/getCmOmDivisionTreeParentById/v1"},treeApiByName:{type:String,default:"/q/cmOmDivision/getCmOmDivisionTreeParentByIName/v1"},placeholder:{type:String,default:"请选择关键词搜索"},multiple:{type:Boolean,default:!1},isShowParent:{type:Boolean,default:!0},activeFirst:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},initLevel:{type:[Number,null],default:2},limitLevel:{type:[Number,String,null],default:null},replaceFields:{type:Object,default:function(){return{pkey:"pkey",title:"title",key:"key",children:"children"}}},valueField:{type:String,default:"key"},join:{type:Boolean,default:!1},search:{type:Boolean,default:!0},lazy:{type:Boolean,default:!0}},data:function(){return{otherParams:{}}},methods:{fetchGetTree:function(e){var t=this;return new Promise((function(a,l){var i=null===e||void 0===e?void 0:e.code;i&&Reflect.deleteProperty(e,"code"),$ec.http.send(t.baseUrl+t.treeApi,Object(s["a"])(Object(s["a"])({divisionLevelNum:t.limitLevel,divisionUniqueCode:i},e),t.otherParams)).then((function(e){var l=e.rows,i=Object(c["g"])(l,t.replaceFields);a(i)})).catch((function(e){l(e)})).finally((function(){console.log("finally")}))}))},fetchGetTreeById:function(e){var t=this;return new Promise((function(a,l){var i=null===e||void 0===e?void 0:e.code;i&&Reflect.deleteProperty(e,"code"),$ec.http.send(t.baseUrl+t.treeApiById,Object(s["a"])(Object(s["a"])({divisionLevelNum:t.limitLevel,divisionUniqueCode:i},e),t.otherParams)).then((function(e){var l=e.rows,i=Object(c["g"])(l,t.replaceFields);a(i)})).catch((function(e){l(e)})).finally((function(){console.log("finally")}))}))},fetchGetTreeByName:function(e){var t=this;return new Promise((function(a,l){var i=null===e||void 0===e?void 0:e.name;i&&Reflect.deleteProperty(e,"name"),$ec.http.send(t.baseUrl+t.treeApiByName,Object(s["a"])(Object(s["a"])({divisionLevelNum:t.limitLevel,divisionName:i},e),t.otherParams)).then((function(e){var l=e.rows,i=Object(c["g"])(l,t.replaceFields);a(i)})).catch((function(e){l(e)})).finally((function(){console.log("finally")}))}))},onSelectTreeData:function(e){var t=e.treeSelectedKeys,a=e.treeData,l=e.selectOption;Object.assign(this,{selectedKeys:t,selectOption:l,treeData:a})},onRefreshTree:function(e){this.otherParams=e,this.$refs.division&&this.$refs.division.handleTreeData(e)},onSelectTreeFn:function(e){this.$refs.division&&this.$refs.division.onSelectTreeFn(e)}}},S=N,C=Object(f["a"])(S,T,w,!1,null,null,null);C.exports}}]);
//# sourceMappingURL=chunk-15a8b95c.fd969c00.js.map