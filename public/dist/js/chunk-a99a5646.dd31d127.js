(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a99a5646"],{"23ee":function(e,t,a){var n=a("7ec2").default,i=a("c973").default,r=a("9523").default,l=a("ded3").default;a("99af"),a("b0c0"),a("b64b"),a("4de4"),a("d3b7"),a("d81d"),a("ac1f"),a("1276"),function(){"use strict";var t={483:function(e,t,a){function n(e,t,a,n,i,r,l,s){var o,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),n&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),l?(o=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},c._ssrRegister=o):i&&(o=s?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),o)if(c.functional){c._injectStyles=o;var u=c.render;c.render=function(e,t){return o.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,o):[o]}return{exports:e,options:c}}a.d(t,{Z:function(){return n}})},51:function(e,t,a){a.d(t,{H_:function(){return r},Qb:function(){return s}});var n="Ecm",i="$ecm",r=function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.componentPrefix)&&void 0!==t?t:n},s=function(e,t){var a,n=e;t&&t.classPrefix&&(n.prototype[i]=l(l({},null!==(a=n.prototype[i])&&void 0!==a?a:{}),{},{classPrefix:t.classPrefix}))}},632:function(e){e.exports=a("6ea6")},142:function(e){e.exports=a("f23d")}},s={};function o(e){var a=s[e];if(void 0!==a)return a.exports;var n=s[e]={exports:{}};return t[e](n,n.exports,o),n.exports}!function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}();var c={};!function(){o.d(c,{default:function(){return h}});var e=function(){var e=this,t=e._self._c;return t("a-select",e._g(e._b({staticClass:"enum-select",attrs:{value:e.value,placeholder:e.placeholder}},"a-select",e.$attrs,!1),e.new$listeners),[Array.isArray(e.listData)?e._l(e.listData,(function(a){return t("a-select-option",{key:a.key,attrs:{value:a.key}},[e._v(e._s(a.label))])})):e._l(e.listData,(function(a,n){return t("a-select-opt-group",{key:n,attrs:{label:n}},e._l(e.listData[n],(function(a){return t("a-select-option",{key:"".concat(n,"/").concat(a.key),attrs:{value:"".concat(n,"/").concat(a.key)}},[e._v(e._s(a.label))])})),1)}))],2)},t=[],a=o(142),s=o(632),u={inheritAttrs:!1,name:"EnumSelect",components:r({},a.Select.name,a.Select),model:{prop:"value",event:"change"},props:{value:{type:[String,Array],default:void 0},baseUrl:{type:String,default:"/dts/bim"},listApi:{type:String,default:"/q/cmTEnumType/listCmTEnumTypeByCodes/v1"},placeholder:{type:String,default:"请选择"},enumTypeCodes:{type:Array,required:!0,default:function(){return["NATION_EK"]}},replaceFields:{type:Object,default:function(){return{label:"name",key:"enumKey"}}},params:{type:Object,default:function(){return{}}}},data:function(){return{listData:null}},computed:{new$listeners:function(){return Object.assign(this.$listeners,{change:this.onChange})},param:function(){var e=this.enumTypeCodes;return l({enumTypeCodes:e},this.params)}},watch:{param:{handler:function(e,t){(0,s.isRefEqual)(e,t)||this.fetchGetList(e)},deep:!0,immediate:!0}},methods:{fetchGetList:function(e){var t=this;return i(n().mark((function a(){var i,r,o,c,u;return n().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,$ec.http.send(t.baseUrl+t.listApi,l({enumTypeCodes:t.enumTypeCodes},e));case 2:if(i=a.sent,i.enumMap&&1===Object.keys(i.enumMap).length){for(o in r=[],i.enumMap)i.enumMap[o]&&(r=(0,s.replaceFields)(i.enumMap[o],t.replaceFields));t.listData=r}else{for(u in c={},i.enumMap)i.enumMap[u]&&(c[u]=(0,s.replaceFields)(i.enumMap[u],t.replaceFields));t.listData=c}case 4:case"end":return a.stop()}}),a)})))()},onChange:function(e,t){var a,n,i,r=this;if(Array.isArray(e))a=e.map((function(t){if(t){if(r.enumTypeCodes.length>1){var a=(t||"").split("/");i=a[1],n=a[0]}var o=r.listData[n]||r.listData,c=i||e,u=(0,s.getNodeBy)(o,c);return l({text:u.label},u)}return null})).filter((function(e){return e}));else{if(this.enumTypeCodes.length>1&&!Array.isArray(e)){var o=(e||"").split("/");i=o[1],n=o[0]}var c=this.listData[n]||this.listData,u=i||e,d=(0,s.getNodeBy)(c,u);a=l({text:d.label},d)}this.$emit("change",e,t,a,(0,s.cloneDeep)(this.listData))}}},d=u,f=o(483),p=(0,f.Z)(d,e,t,!1,null,null,null),y=p.exports,m=o(51);y.install=function(e,t){(0,m.Qb)(e,t);var a=(0,m.H_)(t);e.component(a+y.name,y)};var h=y}(),e.exports=c["default"]}()},"391e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ec-container",{attrs:{height:"100%"}},[a("ec-container-header",[a("ec-panel-toolbar",[a("ec-header",{attrs:{title:"基地单元日常交易计划量维护",icon:"onetomany","color-code":"003"}})],1)],1),a("ec-container-body",[a("ec-panel",{attrs:{auto:!1}},[a("ec-panel-toolbar",[a("ec-query-panel",{attrs:{defaultFold:!0},on:{query:e.onQuery,reset:e.onReset},scopedSlots:e._u([{key:"inner",fn:function(){return[a("ec-query-item",{attrs:{label:"烟叶类型"}},[a("leaf-select",{attrs:{useType:"TYPE"},model:{value:e.queryItems.leafTypeCode,callback:function(t){e.$set(e.queryItems,"leafTypeCode",t)},expression:"queryItems.leafTypeCode"}})],1),a("ec-query-item",{attrs:{label:"基地单元名称"}},[a("a-input",{attrs:{placeholder:"",autocomplete:"off"},model:{value:e.queryItems.baseCellName,callback:function(t){e.$set(e.queryItems,"baseCellName",t)},expression:"queryItems.baseCellName"}})],1)]},proxy:!0}])},[a("ec-query-item",{attrs:{label:"发送状态"}},[a("a-select",{attrs:{showSearch:"","allow-clear":"",placeholder:"请选择"},model:{value:e.queryItems.transStates,callback:function(t){e.$set(e.queryItems,"transStates",t)},expression:"queryItems.transStates"}},e._l(e.sendStateOptions,(function(t){return a("a-select-option",{key:t.id},[e._v(" "+e._s(t.label)+" ")])})),1)],1),a("ec-query-item",{attrs:{label:"商业单位"}},[a("select-picker",{attrs:{title:"选择商业单位",lazy:!1,search:!1,fetchData:e.onFetchBusinessOrgList},model:{value:e.queryItems.provOrgCode,callback:function(t){e.$set(e.queryItems,"provOrgCode",t)},expression:"queryItems.provOrgCode"}})],1),a("ec-query-item",{attrs:{label:"对口工业企业"}},[a("select-picker",{attrs:{placeholder:"请选择对口工业企业",lazy:!1,search:!1,fetchData:e.onFetchIndustryOrgList},model:{value:e.queryItems.linkInduOrgCode,callback:function(t){e.$set(e.queryItems,"linkInduOrgCode","string"===typeof t?t.trim():t)},expression:"queryItems.linkInduOrgCode"}})],1)],1),a("ec-divider")],1),a("ec-panel-item",[a("ec-panel-item-left",[a("a-button",{attrs:{type:"primary"},on:{click:e.onGenerate}},[e._v("生成")]),a("a-button",{on:{click:e.onAdd}},[e._v("新增")]),a("a-button",{on:{click:e.onDelete}},[e._v("删除")]),a("a-button",{on:{click:e.onSend}},[e._v("发送")]),a("a-button",[e._v("导出")])],1),a("ec-panel-item-right",[a("div",{staticClass:"unit-box"},[a("span",[e._v("业务年度："+e._s(e.busiYear)+"年")]),a("div",{staticClass:"select"},[e._v(" 重量单位： "),a("enum-select",{attrs:{enumTypeCodes:["WEIGHT_UNIT"]},model:{value:e.weightUnit,callback:function(t){e.weightUnit=t},expression:"weightUnit"}})],1)])])],1),a("ec-panel-body",[a("ec-table",{ref:"tableRef",attrs:{"show-overflow":"",height:"100%",auto:!1,data:e.tableData},on:{"checkbox-all":e.onSelAllTableData,"checkbox-change":e.onSelTableData}},[a("ec-table-col",{attrs:{type:"checkbox",align:"center"}}),a("ec-table-col",{attrs:{type:"seq",title:"序号",width:"60"}}),a("ec-table-col",{attrs:{field:"createTime",title:"调整日期",align:"center",width:"120"}}),a("ec-table-col",{attrs:{field:"provOrgName",title:"省公司",align:"left","min-width":"150"}}),a("ec-table-col",{attrs:{field:"cityOrgName",title:"市公司",align:"left","min-width":"150"}}),a("ec-table-col",{attrs:{field:"linkInduProvOrgName",title:"省级工业公司",align:"left","min-width":"150"}}),a("ec-table-col",{attrs:{field:"linkInduOrgName",title:"对口工业企业",align:"left","min-width":"150"}}),a("ec-table-col",{attrs:{field:"baseCellName",title:"基地单元",align:"left","min-width":"150"}}),a("ec-table-col",{attrs:{field:"leafTypeCode",title:"烟叶类型",align:"left","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",[e._v(" "+e._s(e._f("getNameBy")(n.leafTypeCode,e.leafTypeList,{key:"leafTypeCode",label:"leafTypeName"}))+" ")])]}}])}),a("ec-table-col",{attrs:{field:"baApprWeight",title:"调整前",align:"right","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",[e._v(e._s(e._f("amountFormat")(n.baApprWeight,e.weightUnit)))])]}}])}),a("ec-table-col",{attrs:{field:"apprWeightTrans",title:"本次调整",align:"right","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",[e._v(e._s(e._f("amountFormat")(n.apprWeightTrans,e.weightUnit)))])]}}])}),a("ec-table-col",{attrs:{field:"aaApprWeight",title:"调整后",align:"right","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",[e._v(e._s(e._f("amountFormat")(n.aaApprWeight,e.weightUnit)))])]}}])}),a("ec-table-col",{attrs:{field:"remark",title:"办理依据",align:"left","min-width":"150"}}),a("ec-table-col",{attrs:{field:"transStates",title:"发送状态",align:"left",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return["1"===n.transStates?a("div",[a("span",{staticStyle:{color:"#409eff","margin-right":"4px"}},[e._v("●")]),a("span",[e._v("已发送")])]):a("div",{staticStyle:{color:"rgba(0, 0, 0, 0.447)"}},[a("span",{staticStyle:{"margin-right":"4px"}},[e._v("●")]),a("span",[e._v("未发送")])])]}}])})],1)],1)],1),a("edit-modal",{ref:"editModalRef",attrs:{industryOrgList:e.industryOrgList,replaceFields:e.replaceFields,leafTypeList:e.leafTypeList},on:{saved:e.onQuery}})],1)],1)},i=[],r=a("5530"),l=a("c7eb"),s=a("1da1"),o=(a("6198"),a("6fc0")),c=a.n(o),u=(a("8563"),a("46d9")),d=a.n(u),f=(a("f162"),a("23ee")),p=a.n(f),y=(a("d3b7"),a("d81d"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ec-drawer",{attrs:{title:"新增",visible:e.visible,size:"large","is-confirm":!0},on:{close:e.onCancel}},[a("ec-container",{attrs:{height:"100%"}},[a("ec-container-body",[a("ec-panel",{attrs:{auto:!1}},[a("ec-panel-toolbar",[a("ec-query-panel",{attrs:{defaultFold:!0},on:{query:e.onQuery,reset:e.onReset}},[a("ec-query-item",{attrs:{label:"基地单元名称"}},[a("a-input",{attrs:{placeholder:"请输入"},model:{value:e.query.baseCellName,callback:function(t){e.$set(e.query,"baseCellName","string"===typeof t?t.trim():t)},expression:"query.baseCellName"}})],1),a("ec-query-item",{attrs:{label:"对口工业企业"}},[a("select-picker",{attrs:{placeholder:"请选择对口工业企业",lazy:!1,search:!1,fetchData:e.onFetchIndustryOrgList},model:{value:e.query.linkInduOrgCode,callback:function(t){e.$set(e.query,"linkInduOrgCode","string"===typeof t?t.trim():t)},expression:"query.linkInduOrgCode"}})],1)],1),a("ec-divider")],1),a("ec-panel-body",[a("ec-v-layout",{attrs:{auto:!1}},[a("ec-v-item",{attrs:{height:"auto"}},[a("ec-panel-toolbar",[a("ec-panel-item-left",[a("span",[e._v("操作类型：")]),a("ec-select",{attrs:{placeholder:"请选择"},model:{value:e.operateType,callback:function(t){e.operateType=t},expression:"operateType"}},e._l(e.operateTypeList,(function(t){return a("a-select-option",{key:t.enumKey},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("ec-panel-item-right",[a("div",{staticClass:"unit-box"},[a("span",[e._v("业务年度："+e._s(e.busiYear)+"年")]),a("div",{staticClass:"select"},[e._v(" 重量单位： "),a("enum-select",{attrs:{enumTypeCodes:["WEIGHT_UNIT"]},model:{value:e.weightUnit,callback:function(t){e.weightUnit=t},expression:"weightUnit"}})],1)])])],1)],1),a("ec-v-item",[a("ec-table",{ref:"tableRef",attrs:{"show-overflow":"",height:"100%",auto:!1,data:e.tableData,"edit-config":{trigger:"click",mode:"row"}}},[a("ec-table-col",{attrs:{type:"seq",title:"序号",width:"50"}}),a("ec-table-col",{attrs:{field:"baseCellName",title:"基地单元名称",align:"center","min-width":"150"}}),a("ec-table-col",{attrs:{field:"leafTypeCode",title:"烟叶类型",align:"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",[e._v(" "+e._s(e._f("getNameBy")(n.leafTypeCode,e.leafTypeList,{key:"leafTypeCode",label:"leafTypeName"}))+" ")])]}}])}),a("ec-table-col",{attrs:{field:"provOrgName",title:"省公司",align:"center","min-width":"150"}}),a("ec-table-col",{attrs:{field:"cityOrgName",title:"市公司",align:"center","min-width":"150"}}),a("ec-table-col",{attrs:{field:"linkInduProvOrgName",title:"省级工业公司",align:"center","min-width":"150"}}),a("ec-table-col",{attrs:{field:"linkInduOrgName",title:"对口工业企业",align:"center","min-width":"150"}}),a("ec-table-col",{attrs:{field:"baApprWeight",title:"调整前",align:"right","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",[e._v(e._s(e._f("amountFormat")(n.baApprWeight,e.weightUnit)))])]}}])}),a("ec-table-col",{attrs:{field:"apprWeightTrans",title:"本次调整",align:"right","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",[e._v(e._s(e._f("amountFormat")(n.apprWeightTrans,e.weightUnit)))])]}}])}),a("ec-table-col",{attrs:{field:"aaApprWeight",title:"调整后",align:"right","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("div",[e._v(e._s(e._f("amountFormat")(n.aaApprWeight,e.weightUnit)))])]}}])}),a("ec-table-col",{attrs:{field:"remark",title:"办理依据",align:"left","min-width":"150"}})],1)],1)],1)],1),a("ec-panel-footer",[a("ec-panel-item-right",[a("a-button",{attrs:{type:"primary"},on:{click:e.onSave}},[e._v("保存")]),a("a-button",{attrs:{type:"default"},on:{click:e.onCancel}},[e._v("关闭")])],1)],1)],1)],1)],1)],1)],1)}),m=[],h=a("6ea6"),b={name:"AddModal",components:{EnumSelect:p.a,SelectPicker:c.a},props:{leafTypeList:{type:Array,default:function(){return[]}},industryOrgList:{type:Array,default:function(){return[]}},replaceFields:{type:Object,default:function(){}}},computed:{busiYear:function(){var e,t;return null===(e=this.$store.getters.getAppConfig)||void 0===e||null===(t=e.yearValueMap)||void 0===t?void 0:t.CENTER_YEAR}},data:function(){return{visible:!1,query:{},tableData:[],operateTypeList:[{enumKey:"0",name:"正常"},{enumKey:"1",name:"增量"},{enumKey:"2",name:"减量"}],operateType:"0",weightUnit:"500000"}},methods:{show:function(){this.visible=!0,this.onQuery()},onFetchIndustryOrgList:function(){var e=this;return new Promise((function(t){var a=Object(h["treeFormatList"])(e.industryOrgList,e.replaceFields);t(a)}))},onQuery:function(){var e=this,t=Object(r["a"])({operateType:this.operateType,busiYear:this.busiYear},this.query);$ec.showLoading(),this.$apis.apm.baseDailyMaintain.addQuery(t).then((function(t){$ec.hideLoading(),e.tableData=(null===t||void 0===t?void 0:t.rows)||[]})).catch((function(){e.loading=!1}))},onReset:function(){this.query={},this.onQuery()},onCancel:function(){this.visible=!1},onSave:function(){var e=this,t={busiYear:this.busiYear,operatorType:this.operateType,pcTBmUnitApprQtyDTOList:this.tableData};$ec.showLoading(),this.$apis.apm.baseDailyMaintain.save(t).then((function(){$ec.hideLoading(),e.$message.error("保存成功"),e.$emit("saved"),e.visible=!1}))}}},v=b,g=(a("d997"),a("2877")),_=Object(g["a"])(v,y,m,!1,null,"5b7c3c03",null),T=_.exports,C={name:"BaseDailyMaintain",components:{EditModal:T,EnumSelect:p.a,LeafSelect:d.a,SelectPicker:c.a},data:function(){return{businessOrgList:[],industryOrgList:[],replaceFields:{pkey:"parentBizCode",title:"orgName",key:"bizCode",children:"children"},weightUnit:"500000",sendStateOptions:[{id:"0",label:"未发送"},{id:"1",label:"已发送"}],queryItems:{},tableData:[],selTableData:[],leafTypeList:[]}},computed:{busiYear:function(){var e,t;return null===(e=this.$store.getters.getAppConfig)||void 0===e||null===(t=e.yearValueMap)||void 0===t?void 0:t.DAILY_YEAR},bizCode:function(){var e;return null===(e=this.$store.getters.getAppConfig)||void 0===e?void 0:e.bizCode}},created:function(){this.handleQueryBusinessOrgList(),this.handleQueryIndustryOrgList(),this.handleQueryLeafTypeList(),this.onQuery()},methods:{handleQueryLeafTypeList:function(){var e=this;this.$apis.bim.leafType.query({}).then((function(t){e.leafTypeList=(null===t||void 0===t?void 0:t.rows)||[]}))},handleQueryBusinessOrgList:function(){var e=this;return Object(s["a"])(Object(l["a"])().mark((function t(){var a,n;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={busiYear:e.busiYear,orgTypeEk:"TOBACCO",parentBizCode:e.bizCode,orgLevelEk:"2"},t.next=3,e.$apis.bim.org.queryBy(a);case 3:n=t.sent,e.businessOrgList=n.rows||[];case 5:case"end":return t.stop()}}),t)})))()},onFetchBusinessOrgList:function(){var e=this;return new Promise((function(t){var a=Object(h["treeFormatList"])(e.businessOrgList,e.replaceFields);t(a)}))},handleQueryIndustryOrgList:function(){var e=this;return Object(s["a"])(Object(l["a"])().mark((function t(){var a,n;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={busiYear:e.busiYear,orgTypeEk:"INDUSTRY",parentBizCode:e.bizCode},t.next=3,e.$apis.bim.org.queryBy(a);case 3:n=t.sent,e.industryOrgList=n.rows||[];case 5:case"end":return t.stop()}}),t)})))()},onFetchIndustryOrgList:function(){var e=this;return new Promise((function(t){var a=Object(h["treeFormatList"])(e.industryOrgList,e.replaceFields);t(a)}))},onQuery:function(){var e=this,t=Object(r["a"])({busiYear:this.busiYear},this.queryItems);$ec.showLoading(),this.$apis.apm.baseDailyMaintain.query(t).then((function(t){$ec.hideLoading(),e.tableData=(null===t||void 0===t?void 0:t.rows)||[]})).catch((function(){$ec.hideLoading()}))},onReset:function(){this.queryItems={},this.onQuery()},onGenerate:function(){var e=this,t=this.$createElement,a={busiYear:this.busiYear},n=function(){return t("div",{style:"color:red;"},["是否确定生成？，确认请点击'确认'按钮，取消点击'取消'按钮"])};this.$confirm({title:"是否执行该操作?",content:n,onOk:function(){$ec.showLoading(),e.$apis.apm.baseDailyMaintain.generate(a).then((function(t){t.result?e.$message.success("生成成功"):e.$message.error("生成失败"),$ec.hideLoading(),e.onQuery()}))}})},onAdd:function(){this.$refs.editModalRef.show()},onDelete:function(){var e=this,t=this.$createElement;this.selTableData.length?this.$confirm({title:"是否执行该操作?",content:function(){return t("div",{style:"color:red;"},["是否确认删除选中的数据，确认请点击'确认'按钮，取消点击'取消'按钮。"])},onOk:function(){e.loading=!0;var t={bmUnitApprQtyIds:e.selTableData.map((function(e){return e.bmUnitApprQtyId}))};e.$apis.apm.baseDailyMaintain.delete(t).then((function(){e.$message.success("删除成功"),$ec.hideLoading(),e.onQuery()}))}}):this.$message.error("请选择一条数据再删除")},onSend:function(){var e=this,t=this.$createElement;this.selTableData.length?this.selTableData.some((function(e){return"1"===e.transStates}))?this.$message.error("未发送的数据才可进行操作"):this.$confirm({title:"是否执行该操作?",content:function(){return t("div",{style:"color:red;"},["是否确认发送选中的数据，确认请点击'确认'按钮，取消点击'取消'按钮。"])},onOk:function(){e.loading=!0;var t={busiYear:e.busiYear,pcTBmUnitApprQtyList:e.selTableData};e.$apis.apm.baseDailyMaintain.send(t).then((function(){e.$message.success("发送成功"),$ec.hideLoading(),e.onQuery()}))}}):this.$message.error("请选择一条数据再发送")},onEdit:function(e){console.log("data",e)},onSelTableData:function(e){var t=e.records;this.selTableData=t},onSelAllTableData:function(e){var t=e.records;this.selTableData=t}}},O=C,w=(a("c90b"),Object(g["a"])(O,n,i,!1,null,"40fc620f",null));t["default"]=w.exports},"46d9":function(e,t,a){var n=a("9523").default,i=a("ded3").default;a("99af"),a("b0c0"),a("caad"),a("d3b7"),a("4ec9"),a("4de4"),a("d81d"),function(){"use strict";var t={483:function(e,t,a){function n(e,t,a,n,i,r,l,s){var o,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),n&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),l?(o=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},c._ssrRegister=o):i&&(o=s?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),o)if(c.functional){c._injectStyles=o;var u=c.render;c.render=function(e,t){return o.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,o):[o]}return{exports:e,options:c}}a.d(t,{Z:function(){return n}})},51:function(e,t,a){a.d(t,{H_:function(){return l},Qb:function(){return s}});var n="Ecm",r="$ecm",l=function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.componentPrefix)&&void 0!==t?t:n},s=function(e,t){var a,n=e;t&&t.classPrefix&&(n.prototype[r]=i(i({},null!==(a=n.prototype[r])&&void 0!==a?a:{}),{},{classPrefix:t.classPrefix}))}},632:function(e){e.exports=a("6ea6")},142:function(e){e.exports=a("f23d")}},r={};function l(e){var a=r[e];if(void 0!==a)return a.exports;var n=r[e]={exports:{}};return t[e](n,n.exports,l),n.exports}!function(){l.d=function(e,t){for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}();var s={};!function(){l.d(s,{default:function(){return y}});var e=function(){var e=this,t=e._self._c;return t("a-select",e._g(e._b({staticClass:"leaf-selcet",attrs:{value:e.value,placeholder:e.placeholder}},"a-select",e.$attrs,!1),e.new$listeners),e._l(e.listData,(function(a){return t("a-select-option",{key:a.key},[e._v(e._s(a.label))])})),1)},t=[],a=l(142),r=l(632),o={inheritAttrs:!1,name:"LeafSelect",components:n({},a.Select.name,a.Select),model:{prop:"value",event:"change"},props:{value:{type:[String,Array],default:void 0},baseUrl:{type:String,default:"/dts/bim"},useType:{type:String,validator:function(e){return["TYPE","FORM","LEVEL","RANK","VARIETY","COLOR","PART","GRADE","COUNTRY"].includes(e)},default:"TYPE"},placeholder:{type:String,default:"请选择"},params:{type:Object,default:function(){return{}}},replaceFields:{type:Object,default:function(){}}},data:function(){return{listData:[],apis:{TYPE:{params:{leafTypeName:null,leafTypeCode:null,lastLevelFlag:1},replaceFields:{label:"leafTypeName",key:"leafTypeCode"},listApi:"/c/cmTLeafType/spinnerLeafTypeEx/v1"},FORM:{params:{leafFormName:null,leafFormCode:null},replaceFields:{label:"leafFormName",key:"leafFormCode"},listApi:"/q/cmTLeafForm/spinnerLeafFormEx/v1"},LEVEL:{params:{leafLevelName:null,leafLevelCode:null},replaceFields:{label:"leafLevelNo",key:"leafLevelCode"},listApi:"/c/cmTLeafLevel/spinnerLeafLevelEx/v1"},RANK:{params:{leafRankName:null,leafRankCode:null,leafTypeCodes:null},replaceFields:{label:"leafRankName",key:"leafRankCode"},listApi:"/q/cmTLeafRank/spinnerLeafRankEx/v1"},VARIETY:{params:{leafVarietyName:null,leafVarietyCode:null,leafTypeCodes:null},replaceFields:{label:"leafVarietyName",key:"leafVarietyCode"},listApi:"/q/cmTLeafVariety/spinnerLeafVarietyEx/v1"},COLOR:{params:{leafTypeCode:null},replaceFields:{label:"leafColorName",key:"leafColorCode"},listApi:"/q/cmTbLeafColor/listQueryCmTbLeafColor/v1"},PART:{params:{leafTypeCode:null},replaceFields:{label:"leafPositionName",key:"leafPositionCode"},listApi:"/q/cmTbLeafPosition/listQueryCmTbLeafPosition/v1"},GRADE:{params:{leafTypeCode:null},replaceFields:{label:"leafGradeName",key:"leafGradeCode"},listApi:"/q/cmTLeafGrade/listQueryCmTLeafGrade/v1"},COUNTRY:{params:{},replaceFields:{label:"leafCountryName",key:"leafCountryCode"},listApi:"/q/cmTLeafCountry/listQueryCmTLeafCountry/v1"}}}},computed:{new$listeners:function(){return Object.assign(this.$listeners,{change:this.onChange})},param:function(){return i({useType:this.useType},this.params)}},watch:{param:{handler:function(e,t){(0,r.isRefEqual)(e,t)||this.fetchGetList(e)},deep:!0,immediate:!0}},methods:{fetchGetList:function(e){var t=this;$ec.http.send(this.baseUrl+this.apis[this.useType].listApi,i(i({},this.apis[this.useType].params),e)).then((function(e){var a=e.rows,n=(0,r.replaceFields)(a,i(i({},t.apis[t.useType].replaceFields),t.replaceFields));t.listData=(0,r.uniqueBy)(n)})).finally((function(){}))},onChange:function(e,t){var a,n=this;if(Array.isArray(e))a=e.map((function(e){if(e){var t=(0,r.getNodeBy)(n.listData,e);return i({text:t.label},t)}return null})).filter((function(e){return e}));else{var l=(0,r.getNodeBy)(this.listData,e);a=i({text:l.label},l)}this.$emit("change",e,t,a,(0,r.cloneDeep)(this.listData))}}},c=o,u=l(483),d=(0,u.Z)(c,e,t,!1,null,null,null),f=d.exports,p=l(51);f.install=function(e,t){(0,p.Qb)(e,t);var a=(0,p.H_)(t);e.component(a+f.name,f)};var y=f}(),e.exports=s["default"]}()},5530:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("b64b"),a("a4d3"),a("4de4"),a("d3b7"),a("e439"),a("159b"),a("dbb4");function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},8563:function(e,t,a){},b4c7:function(e,t,a){},c90b:function(e,t,a){"use strict";a("b4c7")},ccd7:function(e,t,a){},d997:function(e,t,a){"use strict";a("ccd7")},f162:function(e,t,a){}}]);
//# sourceMappingURL=chunk-a99a5646.dd31d127.js.map