{"version":3,"sources":["webpack:///./src/views/apm/daily/apply/Index.vue?f55a","webpack:///./src/views/apm/daily/apply/BaseUnitModel.vue?0e8e","webpack:///src/views/apm/daily/apply/BaseUnitModel.vue","webpack:///./src/views/apm/daily/apply/BaseUnitModel.vue?2c34","webpack:///./src/views/apm/daily/apply/BaseUnitModel.vue","webpack:///src/views/apm/daily/apply/Index.vue","webpack:///./src/views/apm/daily/apply/Index.vue?568c","webpack:///./src/views/apm/daily/apply/Index.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack:///./src/views/apm/daily/apply/BaseUnitModel.vue?83ca","webpack:///./src/views/apm/daily/apply/Index.vue?c8de"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","_v","staticStyle","_s","busiYear","ref","ruleForm","rules","model","value","callback","$$v","$set","expression","apprTypeCodeList","on","handlerApprTypeChange","isapprTypeCodeOk","_l","item","key","enumKey","name","getfetchData","$event","handlerGetparentbizCode","trim","_e","storeId","storeName","tableData","cellStyle","validRules","footerMethod","trigger","mode","scopedSlots","_u","fn","row","isLeafTypeEnable","onSelectChange","leafTypeCode","leafTypeName","leafFormCode","leafFormName","Norepetition","fileList","fileParams","handleRemoveFile","beforeUpload","handlerResfiled","uploading","saveloading","handleSave","handleReset","baseSelect","staticRenderFns","visible","baseCellName","queryList","loading","pagination","queryPagination","selectcolumn","handlerOK","onclose","data","records","queryItems","pageNumber","pageSize","orgTypeEk","bizCode","total","computed","_apis","methods","show","props","params","queryBaseState","then","finally","component","components","SelectPicker","BaseModel","UPLOAD_RESTRICT","PresupplyOrgCode","PredemandOrgCode","isAawSmokeCanShow","isWarehouseShow","isCanEdit2","StateFromSupplyorg","addfilestatus","uploadIds","treeData","totalLeafNum","billNo","applyDate","apprTypeCode","demandOrgCode","supplyOrgCode","newOrOldLeaf","operateType","isCheckBusi","required","message","apprWeight","apprTypeCodeListed","isCheckBusiList","id","label","newOrOldLeafList","operateTypeList","leafTypeCodeList","leafFormCodeList","demandWarehouseList","appConfig","created","getTableData","supplyOrgCode1","supplyOrgCode2","chooseList","bizYear","e","field","industryOrgCode","initBillNo","getfileparams","moduleCode","moduleName","orgCode","relBillNo","file","newFileList","fullRuleForm","ispass","datalist","asynclist","resolve","$table","console","reject","list","Promise","valid","paramListPcTAsDailyDealDetls","saveMasAndDetail","saveBefore","applyReasion","title","content","onOk","getfilterParams","contTypeName","getfilterEdTable","filter","map","ele","init","getEnumType","enumTypeCodes","res","querySpinnerLeafType","querySpinnerLeafForm","querygetBusinessType","contTypeCode","rows","getTree","pid","children","root","treeGetlist","yearValue","utils","api","treeParams","orgLevelEk","paramMap","isCorporation","fields","pkey","$ec","JSON","response","localStorage","sumNum","count","columns","handleTime","textAlign","getFormAndTypeName","Formlist","Typelist","column","_X_ID","initBtnShow","_defineProperty","obj","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties"],"mappings":"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","file":"js/chunk-2fc9b88a.b455120e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-container',{attrs:{\"height\":\"100%\",\"title\":\"交易衔接量申请\",\"icon\":\"onetomany\",\"color-code\":\"001\"}},[_c('ec-container-body',[_c('ec-panel',{attrs:{\"auto\":false}},[_c('ec-panel-header',[_c('ec-panel-item-left',{staticClass:\"title\"},[_vm._v(\"主信息\")]),_c('ec-panel-item-right',{staticStyle:{\"font-size\":\"16px\"}},[_c('span',{staticClass:\"topSpan\"},[_vm._v(\"业务年度: \"+_vm._s(_vm.busiYear))]),_c('span',{staticClass:\"topSpan\"},[_vm._v(\"计量单位: 担\")])])],1),_c('ec-panel-toolbar',[_c('ec-panel-item',[_c('ec-form',{ref:\"modelAddForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules}},[_c('a-row',{attrs:{\"type\":\"flex\",\"gutter\":12}},[_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"申请日期\",\"prop\":\"applyDate\"}},[_c('a-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.ruleForm.applyDate),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"applyDate\", $$v)},expression:\"ruleForm.applyDate\"}})],1)],1),_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"业务类型\",\"prop\":\"apprTypeCode\"}},[_c('a-cascader',{attrs:{\"options\":_vm.apprTypeCodeList,\"placeholder\":\"请选择\"},on:{\"change\":_vm.handlerApprTypeChange},model:{value:(_vm.ruleForm.apprTypeCode),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"apprTypeCode\", $$v)},expression:\"ruleForm.apprTypeCode\"}})],1)],1),_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"新烟/陈烟\",\"prop\":\"newOrOldLeaf\"}},[_c('ec-select',{attrs:{\"allowClear\":\"\",\"disabled\":_vm.isapprTypeCodeOk},model:{value:(_vm.ruleForm.newOrOldLeaf),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"newOrOldLeaf\", $$v)},expression:\"ruleForm.newOrOldLeaf\"}},_vm._l((_vm.newOrOldLeafList),function(item){return _c('a-select-option',{key:item.enumKey},[_vm._v(\" \"+_vm._s(item.name)+\" \")])}),1)],1)],1),_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"操作类型\",\"prop\":\"operateType\"}},[_c('ec-select',{attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.ruleForm.operateType),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"operateType\", $$v)},expression:\"ruleForm.operateType\"}},_vm._l((_vm.operateTypeList),function(item){return _c('a-select-option',{key:item.enumKey},[_vm._v(\" \"+_vm._s(item.name)+\" \")])}),1)],1)],1),_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"是否转为结转业务\",\"prop\":\"isCheckBusi\"}},[_c('a-radio-group',{attrs:{\"name\":\"radioGroup\"},model:{value:(_vm.ruleForm.isCheckBusi),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"isCheckBusi\", $$v)},expression:\"ruleForm.isCheckBusi\"}},[_c('a-radio',{attrs:{\"value\":\"0\"}},[_vm._v(\" 否 \")]),_c('a-radio',{attrs:{\"value\":\"1\"}},[_vm._v(\" 是 \")])],1)],1)],1),_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"供方单位\",\"prop\":\"supplyOrgCode\"}},[_c('SelectPicker',{attrs:{\"title\":\"选择单位\",\"lazy\":false,\"search\":false,\"disabled\":_vm.isapprTypeCodeOk,\"fetchData\":_vm.getfetchData},on:{\"ok\":function($event){return _vm.handlerGetparentbizCode($event, 'PresupplyOrgCode')}},model:{value:(_vm.ruleForm.supplyOrgCode),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"supplyOrgCode\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"ruleForm.supplyOrgCode\"}})],1)],1),(_vm.isapprTypeCodeOk)?_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"-\",\"prop\":\"baseCellName\"}},[_c('a-input',{attrs:{\"type\":\"text\",\"disabled\":\"\"},model:{value:(_vm.ruleForm.baseCellName),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"baseCellName\", $$v)},expression:\"ruleForm.baseCellName\"}})],1)],1):_vm._e(),(_vm.isWarehouseShow)?_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"供方单位仓库\",\"prop\":\"supplyOrgCode1\"}},[_c('ec-select',{attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.ruleForm.supplyOrgCode1),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"supplyOrgCode1\", $$v)},expression:\"ruleForm.supplyOrgCode1\"}},_vm._l((_vm.demandWarehouseList),function(item){return _c('a-select-option',{key:item.storeId},[_vm._v(\" \"+_vm._s(item.storeName)+\" \")])}),1)],1)],1):_vm._e(),_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"需方单位\",\"prop\":\"demandOrgCode\"}},[_c('SelectPicker',{attrs:{\"title\":\"选择单位\",\"lazy\":false,\"search\":false,\"disabled\":_vm.isapprTypeCodeOk,\"fetchData\":_vm.getfetchData},on:{\"ok\":function($event){return _vm.handlerGetparentbizCode($event, 'PredemandOrgCode')}},model:{value:(_vm.ruleForm.demandOrgCode),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"demandOrgCode\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"ruleForm.demandOrgCode\"}})],1)],1),(_vm.isWarehouseShow)?_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"需方单位仓库\",\"prop\":\"supplyOrgCode2\"}},[_c('ec-select',{attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.ruleForm.supplyOrgCode2),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"supplyOrgCode2\", $$v)},expression:\"ruleForm.supplyOrgCode2\"}},_vm._l((_vm.demandWarehouseList),function(item){return _c('a-select-option',{key:item.storeId},[_vm._v(\" \"+_vm._s(item.storeName)+\" \")])}),1)],1)],1):_vm._e(),(_vm.isAawSmokeCanShow)?_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"原烟量\",\"prop\":\"crudeWeight\"}},[_c('a-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.ruleForm.crudeWeight),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"crudeWeight\", $$v)},expression:\"ruleForm.crudeWeight\"}})],1)],1):_vm._e(),(_vm.isCanEdit2)?_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"成品返回量\",\"prop\":\"productReturnWeight\"}},[_c('a-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.ruleForm.productReturnWeight),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"productReturnWeight\", $$v)},expression:\"ruleForm.productReturnWeight\"}})],1)],1):_vm._e()],1)],1)],1)],1),_c('ec-panel-body',[_c('a-row',{staticStyle:{\"margin\":\"0 0 6px 0\"}},[_c('a-col',{attrs:{\"span\":12}},[_c('span',{staticClass:\"middle-title\"},[_vm._v(\"明细信息\")])]),_c('a-col',{attrs:{\"span\":12}},[_c('span',{staticClass:\"middle-title\"},[_vm._v(\"申请原因\")])])],1),_c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"table-container\"},[_c('div',{staticClass:\"col\"},[_c('ec-table',{ref:\"xTable\",attrs:{\"border\":\"\",\"auto\":false,\"show-overflow\":\"\",\"show-footer\":\"\",\"height\":\"100%\",\"data\":_vm.tableData,\"cell-style\":_vm.cellStyle,\"edit-rules\":_vm.validRules,\"footer-method\":_vm.footerMethod,\"edit-config\":{ trigger: 'click', mode: 'cell' }}},[_c('ec-table-col',{attrs:{\"title\":\"序号\",\"width\":\"80\",\"type\":\"seq\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"title\":\"烟叶类型\",\"field\":\"leafTypeName\",\"align\":\"center\",\"edit-render\":{\n                    name: 'leafTypeName',\n                  }},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\n                  var row = ref.row;\nreturn [_c('a-select',{attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"disabled\":_vm.isLeafTypeEnable},on:{\"select\":function($event){return _vm.onSelectChange(row)}},model:{value:(row.leafTypeName),callback:function ($$v) {_vm.$set(row, \"leafTypeName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"row.leafTypeName\"}},_vm._l((_vm.leafTypeCodeList),function(item){return _c('a-select-option',{key:item.leafTypeCode,attrs:{\"value\":item.leafTypeName}},[_vm._v(\" \"+_vm._s(item.leafTypeName)+\" \")])}),1)]}}])}),_c('ec-table-col',{attrs:{\"title\":\"烟叶形态\",\"field\":\"leafFormName\",\"align\":\"center\",\"edit-render\":{\n                    name: 'leafFormName',\n                  }},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\n                  var row = ref.row;\nreturn [_c('ec-select',{attrs:{\"showSearch\":\"\",\"allowClear\":\"\"},on:{\"select\":function($event){return _vm.onSelectChange(row)}},model:{value:(row.leafFormName),callback:function ($$v) {_vm.$set(row, \"leafFormName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"row.leafFormName\"}},_vm._l((_vm.leafFormCodeList),function(item){return _c('a-select-option',{key:item.leafFormCode,attrs:{\"value\":item.leafFormName}},[_vm._v(\" \"+_vm._s(item.leafFormName)+\" \")])}),1)]}}])}),_c('ec-table-col',{attrs:{\"title\":\"交易衔接量\",\"field\":\"apprWeight\",\"edit-render\":{ name: 'apprWeight' }},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\n                  var row = ref.row;\nreturn [_c('a-input',{on:{\"blur\":function($event){return _vm.Norepetition(row)}},model:{value:(row.apprWeight),callback:function ($$v) {_vm.$set(row, \"apprWeight\", $$v)},expression:\"row.apprWeight\"}})]}}])})],1)],1),_c('div',{staticClass:\"upload-slot\"},[_c('span',{staticClass:\"middle-title\"},[_vm._v(\"申请凭据附件: \")]),_c('a-upload',{attrs:{\"action\":\"/dts/plm/c/file/uploadPcTAsAttachFile/v1\",\"file-list\":_vm.fileList,\"data\":_vm.fileParams,\"size\":5210,\"remove\":_vm.handleRemoveFile,\"before-upload\":_vm.beforeUpload},on:{\"change\":_vm.handlerResfiled},model:{value:(_vm.ruleForm.file),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"file\", $$v)},expression:\"ruleForm.file\"}},[_c('a-button',{attrs:{\"icon\":\"upload\",\"loading\":_vm.uploading}},[_vm._v(\"上传文件\")])],1),_c('p',{staticClass:\"tips\"},[_vm._v(\" 支持扩展名：.doc, .docx. xls, .xlsx, .pdf, .zip, .rar 文件大小不超过50M \")])],1)]),_c('div',{staticClass:\"upload-container\"},[_c('div',{staticClass:\"main\"},[_c('a-textarea',{attrs:{\"rows\":19},model:{value:(_vm.ruleForm.applyReasion),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"applyReasion\", $$v)},expression:\"ruleForm.applyReasion\"}})],1),_c('div',{staticClass:\"footer\"},[_c('a-space',[(!_vm.saveloading)?_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSave}},[_vm._v(\"保存\")]):_c('a-button',{attrs:{\"type\":\"primary\",\"loading\":\"\"}},[_vm._v(\"保存中...\")]),_c('a-button',{on:{\"click\":_vm.handleReset}},[_vm._v(\"重置\")])],1)],1)])]),_c('BaseModel',{ref:\"basemodelRef\",on:{\"select\":_vm.baseSelect}})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-modal',{staticClass:\"ec-draw-form\",attrs:{\"title\":\"选择基地单元\",\"width\":\"80%\",\"footer\":null,\"visible\":_vm.visible}},[_c('ec-container',{attrs:{\"height\":\"auto\",\"fixed\":\"top bottom\",\"color-code\":\"007\"}},[_c('ec-container-body',[_c('ec-panel',{attrs:{\"auto\":false}},[_c('ec-panel-item',[_c('ec-panel-item-right',[_c('ec-query-item',{attrs:{\"label\":\"基地单元名称\"}},[_c('a-input',{attrs:{\"type\":\"text\"},model:{value:(_vm.baseCellName),callback:function ($$v) {_vm.baseCellName=$$v},expression:\"baseCellName\"}})],1),_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.queryList}},[_vm._v(\"查询\")])],1)],1)],1),_c('ec-table',{ref:\"xTable\",attrs:{\"border\":\"\",\"show-overflow\":\"\",\"highlight-hover-row\":\"\",\"height\":\"300\",\"loading\":_vm.loading,\"header-align\":\"center\",\"align\":\"center\",\"data\":_vm.tableData,\"pagination\":_vm.pagination},on:{\"page-action\":_vm.queryPagination,\"radio-change\":_vm.selectcolumn}},[_c('ec-table-col',{attrs:{\"type\":\"radio\",\"width\":\"60\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"type\":\"seq\",\"width\":\"60\",\"align\":\"center\",\"title\":\"序号\"}}),_c('ec-table-col',{attrs:{\"title\":\"省公司\",\"field\":\"provOrgName\"}}),_c('ec-table-col',{attrs:{\"title\":\"市公司\",\"field\":\"cityOrgName\"}}),_c('ec-table-col',{attrs:{\"title\":\"基地单元编码\",\"field\":\"baseCellCode\"}}),_c('ec-table-col',{attrs:{\"title\":\"基地单元名称\",\"field\":\"baseCellName\"}}),_c('ec-table-col',{attrs:{\"title\":\"工业单位\",\"field\":\"linkInduOrgName\"}}),_c('ec-table-col',{attrs:{\"title\":\"烟叶类型\",\"field\":\"leafTypeCode\"}}),_c('ec-table-col',{attrs:{\"title\":\"计划核定量(担)\",\"field\":\"apprWeight\"}})],1)],1),_c('ec-container-footer',{attrs:{\"fixed\":\"\"}},[_c('a-space',[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handlerOK}},[_vm._v(\"确定\")]),_c('a-button',{on:{\"click\":_vm.onclose}},[_vm._v(\"关闭\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <a-modal title=\"选择基地单元\" width=\"80%\" :footer=\"null\" :visible=\"visible\" class=\"ec-draw-form\">\r\n    <ec-container height=\"auto\" fixed=\"top bottom\" color-code=\"007\">\r\n      <ec-container-body>\r\n        <ec-panel :auto=\"false\">\r\n          <ec-panel-item>\r\n            <ec-panel-item-right>\r\n              <ec-query-item label=\"基地单元名称\">\r\n                <a-input type=\"text\" v-model=\"baseCellName\"></a-input>\r\n              </ec-query-item>\r\n              <a-button type=\"primary\" @click=\"queryList\">查询</a-button>\r\n            </ec-panel-item-right>\r\n          </ec-panel-item>\r\n        </ec-panel>\r\n        <ec-table\r\n          ref=\"xTable\"\r\n          border\r\n          show-overflow\r\n          highlight-hover-row\r\n          height=\"300\"\r\n          :loading=\"loading\"\r\n          header-align=\"center\"\r\n          align=\"center\"\r\n          :data=\"tableData\"\r\n          :pagination=\"pagination\"\r\n          @page-action=\"queryPagination\"\r\n          @radio-change=\"selectcolumn\"\r\n        >\r\n          <ec-table-col type=\"radio\" width=\"60\" align=\"center\" />\r\n          <ec-table-col type=\"seq\" width=\"60\" align=\"center\" title=\"序号\" />\r\n          <ec-table-col title=\"省公司\" field=\"provOrgName\" />\r\n          <ec-table-col title=\"市公司\" field=\"cityOrgName\" />\r\n          <ec-table-col title=\"基地单元编码\" field=\"baseCellCode\" />\r\n          <ec-table-col title=\"基地单元名称\" field=\"baseCellName\" />\r\n          <ec-table-col title=\"工业单位\" field=\"linkInduOrgName\" />\r\n          <ec-table-col title=\"烟叶类型\" field=\"leafTypeCode\" />\r\n          <ec-table-col title=\"计划核定量(担)\" field=\"apprWeight\" />\r\n        </ec-table>\r\n      </ec-container-body>\r\n      <ec-container-footer fixed>\r\n        <a-space>\r\n          <a-button type=\"primary\" @click=\"handlerOK\">确定</a-button>\r\n          <a-button @click=\"onclose\">关闭</a-button>\r\n        </a-space>\r\n      </ec-container-footer>\r\n    </ec-container>\r\n  </a-modal>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'BaseModel',\r\n  data() {\r\n    return {\r\n      records: [],\r\n      tableData: [],\r\n      queryItems: {\r\n        pageNumber: 1,\r\n        pageSize: 10,\r\n      },\r\n      baseCellName: '',\r\n      orgTypeEk: '',\r\n      busiYear: null,\r\n      bizCode: null,\r\n      pagination: {\r\n        pageNumber: 1,\r\n        pageSize: 10,\r\n        total: 0,\r\n      },\r\n      visible: false,\r\n      loading: false,\r\n    };\r\n  },\r\n  computed: {\r\n    _apis() {\r\n      return this.$apis.apm.dailyApply;\r\n    },\r\n  },\r\n  methods: {\r\n    // 数据初始化\r\n    // 显示推窗\r\n    show(props) {\r\n      this.orgTypeEk = props.orgTypeEk;\r\n      this.busiYear = props.bizYear;\r\n      this.bizCode = props.bizCode;\r\n      this.queryList();\r\n      this.visible = true;\r\n    },\r\n    queryList() {\r\n      if (!this.bizCode) return;\r\n      this.loading = true;\r\n      const params = {\r\n        ...this.queryItems,\r\n        baseCellName: this.baseCellName,\r\n        busiYear: this.busiYear,\r\n      };\r\n      if (this.orgTypeEk === 'INDUSTRY') {\r\n        params.linkInduOrgCode = this.bizCode;\r\n      } else {\r\n        params.cityOrgCode = this.bizCode;\r\n      }\r\n      !params.baseCellName && delete params.baseCellName;\r\n      this._apis\r\n        .queryBaseState(params)\r\n        .then((res) => {\r\n          this.tableData = res.rows;\r\n          this.pagination.total = res.totalRows;\r\n        })\r\n        .finally(() => {\r\n          this.loading = false;\r\n        });\r\n    },\r\n    handlerOK() {\r\n      if (!this.records.length) {\r\n        this.$message.error('请先选择数据！');\r\n        return;\r\n      }\r\n      this.$emit('select', this.records[0]);\r\n      this.onclose();\r\n    },\r\n    selectcolumn({ newValue }) {\r\n      this.records = [newValue];\r\n    },\r\n    queryPagination(pageNumber, pageSize) {\r\n      this.queryItems.pageNumber = pageNumber;\r\n      this.queryItems.pageSize = pageSize;\r\n      this.queryList();\r\n    },\r\n    // 关闭\r\n    onclose() {\r\n      this.tableData = [];\r\n      this.visible = false;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n/deep/.ant-modal-header {\r\n  padding: 8px 24px;\r\n}\r\n/deep/.ant-modal-body {\r\n  padding: 0;\r\n}\r\n.ec-container .ec-container-body {\r\n  background-color: transparent;\r\n}\r\n.ant-descriptions:not(:last-child) {\r\n  margin-bottom: 15px;\r\n}\r\n/deep/.ant-descriptions-title {\r\n  margin-bottom: 20px;\r\n  color: rgba(24, 144, 255, 1);\r\n  font-weight: bold;\r\n  font-size: 14px;\r\n  line-height: 1;\r\n}\r\n/deep/.ec-container .ec-container-body {\r\n  padding-top: 6px;\r\n}\r\n/deep/.ec-panel {\r\n  padding-top: 2px;\r\n  padding-bottom: 2px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BaseUnitModel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BaseUnitModel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BaseUnitModel.vue?vue&type=template&id=13020e95&scoped=true&\"\nimport script from \"./BaseUnitModel.vue?vue&type=script&lang=js&\"\nexport * from \"./BaseUnitModel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BaseUnitModel.vue?vue&type=style&index=0&id=13020e95&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"13020e95\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <ec-container height=\"100%\" title=\"交易衔接量申请\" icon=\"onetomany\" color-code=\"001\">\r\n    <ec-container-body>\r\n      <ec-panel :auto=\"false\">\r\n        <ec-panel-header>\r\n          <ec-panel-item-left class=\"title\">主信息</ec-panel-item-left>\r\n          <ec-panel-item-right style=\"font-size: 16px\">\r\n            <span class=\"topSpan\">业务年度: {{ busiYear }}</span>\r\n            <span class=\"topSpan\">计量单位: 担</span>\r\n          </ec-panel-item-right>\r\n        </ec-panel-header>\r\n        <ec-panel-toolbar>\r\n          <ec-panel-item>\r\n            <ec-form ref=\"modelAddForm\" :model=\"ruleForm\" :rules=\"rules\">\r\n              <a-row type=\"flex\" :gutter=\"12\">\r\n                <a-col :span=\"6\">\r\n                  <a-form-model-item label=\"申请日期\" prop=\"applyDate\">\r\n                    <a-input v-model=\"ruleForm.applyDate\" disabled />\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col :span=\"6\">\r\n                  <a-form-model-item label=\"业务类型\" prop=\"apprTypeCode\">\r\n                    <a-cascader\r\n                      v-model=\"ruleForm.apprTypeCode\"\r\n                      :options=\"apprTypeCodeList\"\r\n                      placeholder=\"请选择\"\r\n                      @change=\"handlerApprTypeChange\"\r\n                    />\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col :span=\"6\">\r\n                  <a-form-model-item label=\"新烟/陈烟\" prop=\"newOrOldLeaf\">\r\n                    <ec-select\r\n                      allowClear\r\n                      :disabled=\"isapprTypeCodeOk\"\r\n                      v-model=\"ruleForm.newOrOldLeaf\"\r\n                    >\r\n                      <a-select-option v-for=\"item in newOrOldLeafList\" :key=\"item.enumKey\">\r\n                        {{ item.name }}\r\n                      </a-select-option>\r\n                    </ec-select>\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col :span=\"6\">\r\n                  <a-form-model-item label=\"操作类型\" prop=\"operateType\">\r\n                    <ec-select\r\n                      showSearch\r\n                      allowClear\r\n                      placeholder=\"请选择\"\r\n                      v-model=\"ruleForm.operateType\"\r\n                    >\r\n                      <a-select-option v-for=\"item in operateTypeList\" :key=\"item.enumKey\">\r\n                        {{ item.name }}\r\n                      </a-select-option>\r\n                    </ec-select>\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col :span=\"6\">\r\n                  <a-form-model-item label=\"是否转为结转业务\" prop=\"isCheckBusi\">\r\n                    <a-radio-group name=\"radioGroup\" v-model=\"ruleForm.isCheckBusi\">\r\n                      <a-radio value=\"0\"> 否 </a-radio>\r\n                      <a-radio value=\"1\"> 是 </a-radio>\r\n                    </a-radio-group>\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col :span=\"6\">\r\n                  <a-form-model-item label=\"供方单位\" prop=\"supplyOrgCode\">\r\n                    <SelectPicker\r\n                      title=\"选择单位\"\r\n                      :lazy=\"false\"\r\n                      :search=\"false\"\r\n                      :disabled=\"isapprTypeCodeOk\"\r\n                      v-model.trim=\"ruleForm.supplyOrgCode\"\r\n                      :fetchData=\"getfetchData\"\r\n                      @ok=\"handlerGetparentbizCode($event, 'PresupplyOrgCode')\"\r\n                    />\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col v-if=\"isapprTypeCodeOk\" :span=\"6\">\r\n                  <a-form-model-item label=\"-\" prop=\"baseCellName\">\r\n                    <a-input type=\"text\" disabled v-model=\"ruleForm.baseCellName\"></a-input>\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col v-if=\"isWarehouseShow\" :span=\"6\">\r\n                  <a-form-model-item label=\"供方单位仓库\" prop=\"supplyOrgCode1\">\r\n                    <ec-select\r\n                      showSearch\r\n                      allowClear\r\n                      placeholder=\"请选择\"\r\n                      v-model=\"ruleForm.supplyOrgCode1\"\r\n                    >\r\n                      <a-select-option v-for=\"item in demandWarehouseList\" :key=\"item.storeId\">\r\n                        {{ item.storeName }}\r\n                      </a-select-option>\r\n                    </ec-select>\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col :span=\"6\">\r\n                  <a-form-model-item label=\"需方单位\" prop=\"demandOrgCode\">\r\n                    <!-- <OrgPicker\r\n                      v-model.trim=\"ruleForm.demandOrgCode\"\r\n                      :disabled=\"isapprTypeCodeOk\"\r\n                    ></OrgPicker> -->\r\n                    <SelectPicker\r\n                      title=\"选择单位\"\r\n                      :lazy=\"false\"\r\n                      :search=\"false\"\r\n                      :disabled=\"isapprTypeCodeOk\"\r\n                      v-model.trim=\"ruleForm.demandOrgCode\"\r\n                      :fetchData=\"getfetchData\"\r\n                      @ok=\"handlerGetparentbizCode($event, 'PredemandOrgCode')\"\r\n                    />\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col v-if=\"isWarehouseShow\" :span=\"6\">\r\n                  <a-form-model-item label=\"需方单位仓库\" prop=\"supplyOrgCode2\">\r\n                    <ec-select\r\n                      showSearch\r\n                      allowClear\r\n                      placeholder=\"请选择\"\r\n                      v-model=\"ruleForm.supplyOrgCode2\"\r\n                    >\r\n                      <a-select-option v-for=\"item in demandWarehouseList\" :key=\"item.storeId\">\r\n                        {{ item.storeName }}\r\n                      </a-select-option>\r\n                    </ec-select>\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col v-if=\"isAawSmokeCanShow\" :span=\"6\">\r\n                  <a-form-model-item label=\"原烟量\" prop=\"crudeWeight\">\r\n                    <a-input type=\"text\" v-model=\"ruleForm.crudeWeight\"></a-input>\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col v-if=\"isCanEdit2\" :span=\"6\">\r\n                  <a-form-model-item label=\"成品返回量\" prop=\"productReturnWeight\">\r\n                    <a-input type=\"text\" v-model=\"ruleForm.productReturnWeight\"></a-input>\r\n                  </a-form-model-item>\r\n                </a-col>\r\n              </a-row>\r\n            </ec-form>\r\n          </ec-panel-item>\r\n        </ec-panel-toolbar>\r\n        <ec-panel-body>\r\n          <a-row style=\"margin: 0 0 6px 0\">\r\n            <a-col :span=\"12\"><span class=\"middle-title\">明细信息</span></a-col>\r\n            <a-col :span=\"12\"><span class=\"middle-title\">申请原因</span></a-col>\r\n          </a-row>\r\n          <div class=\"flex\">\r\n            <div class=\"table-container\">\r\n              <div class=\"col\">\r\n                <ec-table\r\n                  ref=\"xTable\"\r\n                  border\r\n                  :auto=\"false\"\r\n                  show-overflow\r\n                  show-footer\r\n                  height=\"100%\"\r\n                  :data=\"tableData\"\r\n                  :cell-style=\"cellStyle\"\r\n                  :edit-rules=\"validRules\"\r\n                  :footer-method=\"footerMethod\"\r\n                  :edit-config=\"{ trigger: 'click', mode: 'cell' }\"\r\n                >\r\n                  <ec-table-col title=\"序号\" width=\"80\" type=\"seq\" align=\"center\"></ec-table-col>\r\n                  <ec-table-col\r\n                    title=\"烟叶类型\"\r\n                    field=\"leafTypeName\"\r\n                    align=\"center\"\r\n                    :edit-render=\"{\r\n                      name: 'leafTypeName',\r\n                    }\"\r\n                  >\r\n                    <template #edit=\"{ row }\">\r\n                      <a-select\r\n                        showSearch\r\n                        allowClear\r\n                        :disabled=\"isLeafTypeEnable\"\r\n                        v-model.trim=\"row.leafTypeName\"\r\n                        @select=\"onSelectChange(row)\"\r\n                      >\r\n                        <a-select-option\r\n                          v-for=\"item in leafTypeCodeList\"\r\n                          :key=\"item.leafTypeCode\"\r\n                          :value=\"item.leafTypeName\"\r\n                        >\r\n                          {{ item.leafTypeName }}\r\n                        </a-select-option>\r\n                      </a-select>\r\n                    </template>\r\n                  </ec-table-col>\r\n                  <ec-table-col\r\n                    title=\"烟叶形态\"\r\n                    field=\"leafFormName\"\r\n                    align=\"center\"\r\n                    :edit-render=\"{\r\n                      name: 'leafFormName',\r\n                    }\"\r\n                  >\r\n                    <template #edit=\"{ row }\">\r\n                      <ec-select\r\n                        showSearch\r\n                        allowClear\r\n                        v-model.trim=\"row.leafFormName\"\r\n                        @select=\"onSelectChange(row)\"\r\n                      >\r\n                        <a-select-option\r\n                          v-for=\"item in leafFormCodeList\"\r\n                          :key=\"item.leafFormCode\"\r\n                          :value=\"item.leafFormName\"\r\n                        >\r\n                          {{ item.leafFormName }}\r\n                        </a-select-option>\r\n                      </ec-select>\r\n                    </template></ec-table-col\r\n                  >\r\n                  <ec-table-col\r\n                    title=\"交易衔接量\"\r\n                    field=\"apprWeight\"\r\n                    :edit-render=\"{ name: 'apprWeight' }\"\r\n                  >\r\n                    <template #edit=\"{ row }\">\r\n                      <a-input v-model=\"row.apprWeight\" @blur=\"Norepetition(row)\"></a-input>\r\n                    </template>\r\n                  </ec-table-col>\r\n                </ec-table>\r\n              </div>\r\n              <div class=\"upload-slot\">\r\n                <span class=\"middle-title\">申请凭据附件: </span>\r\n                <a-upload\r\n                  action=\"/dts/plm/c/file/uploadPcTAsAttachFile/v1\"\r\n                  v-model=\"ruleForm.file\"\r\n                  :file-list=\"fileList\"\r\n                  :data=\"fileParams\"\r\n                  :size=\"5210\"\r\n                  :remove=\"handleRemoveFile\"\r\n                  @change=\"handlerResfiled\"\r\n                  :before-upload=\"beforeUpload\"\r\n                >\r\n                  <a-button icon=\"upload\" :loading=\"uploading\">上传文件</a-button>\r\n                </a-upload>\r\n                <p class=\"tips\">\r\n                  支持扩展名：.doc, .docx. xls, .xlsx, .pdf, .zip, .rar 文件大小不超过50M\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <div class=\"upload-container\">\r\n              <div class=\"main\">\r\n                <a-textarea v-model=\"ruleForm.applyReasion\" :rows=\"19\" />\r\n              </div>\r\n              <div class=\"footer\">\r\n                <a-space>\r\n                  <a-button v-if=\"!saveloading\" type=\"primary\" @click=\"handleSave\">保存</a-button>\r\n                  <a-button v-else type=\"primary\" loading>保存中...</a-button>\r\n                  <a-button @click=\"handleReset\">重置</a-button>\r\n                </a-space>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <BaseModel ref=\"basemodelRef\" @select=\"baseSelect\" />\r\n        </ec-panel-body>\r\n      </ec-panel>\r\n    </ec-container-body>\r\n  </ec-container>\r\n</template>\r\n\r\n<script>\r\nimport { treeFormatList, cloneDeep } from '@euler-material/ecm-utils';\r\nimport { SelectPicker } from '@euler-material/ecm-ui';\r\nimport BaseModel from './BaseUnitModel.vue';\r\n\r\nexport default {\r\n  name: 'dailyImport',\r\n  components: {\r\n    SelectPicker,\r\n    BaseModel,\r\n  },\r\n  data() {\r\n    return {\r\n      UPLOAD_RESTRICT: 1024 * 50,\r\n      // 单位省级\r\n      PresupplyOrgCode: '',\r\n      PredemandOrgCode: '',\r\n      // 原烟\r\n      isAawSmokeCanShow: false,\r\n      saveloading: false,\r\n      isapprTypeCodeOk: false,\r\n      isWarehouseShow: false,\r\n      isCanEdit2: false,\r\n      isLeafTypeEnable: false, // 盐业类型\r\n      // 供方单位choose数据\r\n      StateFromSupplyorg: null,\r\n\r\n      uploading: false,\r\n      addfilestatus: true,\r\n      // 附件上传携带参数\r\n      fileParams: {},\r\n      uploadIds: [],\r\n      fileList: [],\r\n\r\n      treeData: [],\r\n      tableData: [],\r\n      totalLeafNum: 0,\r\n      billNo: '',\r\n      ruleForm: {\r\n        applyDate: new Date().getFullYear(),\r\n        apprTypeCode: null,\r\n        demandOrgCode: null,\r\n        supplyOrgCode: null,\r\n        newOrOldLeaf: null,\r\n        operateType: null,\r\n        isCheckBusi: '0',\r\n      },\r\n      rules: {\r\n        apprTypeCode: [{ required: true, message: '请选择业务类型' }],\r\n        newOrOldLeaf: [{ required: true, message: '请选择' }],\r\n        operateType: [{ required: true, message: '请选择操作类型' }],\r\n        isCheckBusi: [{ required: true, message: '请选择是否为结转业务' }],\r\n        supplyOrgCode: [{ required: true, message: '请选择供方单位' }],\r\n        demandOrgCode: [{ required: true, message: '请选择需方单位' }],\r\n      },\r\n      validRules: {\r\n        leafFormName: [{ required: true, message: '请选择烟叶类型' }],\r\n        leafTypeName: [{ required: true, message: '请选择烟叶形态' }],\r\n        apprWeight: [{ required: true, message: '请输入交易衔接量' }],\r\n      },\r\n      apprTypeCodeList: [],\r\n      apprTypeCodeListed: [],\r\n      isCheckBusiList: [\r\n        { id: '0', label: '否' },\r\n        { id: '1', label: '是' },\r\n      ],\r\n      newOrOldLeafList: [],\r\n      operateTypeList: [],\r\n      leafTypeCodeList: [],\r\n      leafFormCodeList: [],\r\n      demandWarehouseList: [],\r\n      loading: false,\r\n    };\r\n  },\r\n  computed: {\r\n    _apis() {\r\n      return this.$apis.apm.dailyApply;\r\n    },\r\n    appConfig() {\r\n      return this.$store.getters.getAppConfig;\r\n    },\r\n    busiYear() {\r\n      return this.$store.getters.getAppConfig?.yearValueMap?.DAILY_YEAR;\r\n    },\r\n    orgTypeEk() {\r\n      return this.$store.getters.getAppConfig?.orgTypeEk;\r\n    },\r\n  },\r\n  created() {\r\n    this.initBillNo();\r\n    this.init();\r\n    this.getTableData();\r\n    this.fullRuleForm();\r\n  },\r\n  methods: {\r\n    // 初始化\r\n    getTableData() {\r\n      this.tableData = [];\r\n      for (let i = 0; i < 8; i++) {\r\n        this.tableData.push({});\r\n      }\r\n    },\r\n    // 重置\r\n    handleReset() {\r\n      this.fileList = [];\r\n      this.uploadIds = [];\r\n      this.isWarehouseShow = false;\r\n      this.isapprTypeCodeOk = false;\r\n      this.isCanEdit2 = false;\r\n      this.ruleForm = {\r\n        applyDate: new Date().getFullYear(),\r\n        apprTypeCode: null,\r\n        demandOrgCode: null,\r\n        supplyOrgCode: null,\r\n        newOrOldLeaf: null,\r\n        supplyOrgCode1: null,\r\n        supplyOrgCode2: null,\r\n        operateType: null,\r\n        isCheckBusi: '0',\r\n      };\r\n      // 刷新单据号\r\n      this.initBillNo();\r\n      // table初始化\r\n      this.getTableData();\r\n      // 时间初始化\r\n      this.fullRuleForm();\r\n    },\r\n    // /业务类型\r\n    handlerApprTypeChange(chooseList) {\r\n      // 初始\r\n      const id = [...chooseList]?.reverse()[0];\r\n      this.isWarehouseShow = false;\r\n      this.isapprTypeCodeOk = false;\r\n      this.isLeafTypeEnable = false;\r\n      this.isCanEdit2 = false;\r\n      this.ruleForm.baseCellName = '';\r\n      this.ruleForm.newOrOldLeaf = '';\r\n      this.ruleForm.supplyOrgCode = '';\r\n      this.ruleForm.demandOrgCode = '';\r\n      this.ruleForm.supplyOrgCode1 = '';\r\n      this.ruleForm.supplyOrgCode2 = '';\r\n      this.getTableData();\r\n      if (!id) return;\r\n      if (chooseList.indexOf('HT15') !== -1) {\r\n        //  2业务类型为 进口购销 的核定量不在此模块进行申请\r\n        this.ruleForm.apprTypeCode = [''];\r\n        this.$message.error('业务类型为进口购销的核定量不在此模块进行申请！');\r\n        //  1选择基地烟 新烟/陈烟 固定为新烟，烟叶形态固定为原烟\r\n      } else if (chooseList.indexOf('HT1104') !== -1) {\r\n        this.tableData = [];\r\n        this.ruleForm.newOrOldLeaf = '1';\r\n        this.ruleForm.demandOrgCode = null; // 清空\r\n        this.ruleForm.supplyOrgCode = null;\r\n        this.isapprTypeCodeOk = true; // 基地烟选中\r\n        const { orgTypeEk, bizCode } = this.appConfig;\r\n        this.$refs.basemodelRef.show({ bizYear: this.busiYear, orgTypeEk, bizCode });\r\n      } else if (id === 'HT3104' || id === 'HT3105') {\r\n        //  3当业务类型选择 工商企业内部调运 和 进出口企业内部调运 时，供需方单位需明确到具体的仓库\r\n        this._apis.queryOrgWarehouseLise({ busiYear: this.busiYear }).then(({ rows }) => {\r\n          this.demandWarehouseList = rows || [];\r\n          this.ruleForm.supplyOrgCode = this.appConfig.bizCode;\r\n          this.ruleForm.demandOrgCode = this.appConfig.bizCode;\r\n          this.isWarehouseShow = true; // 打开仓库\r\n        });\r\n        // 薄片供需方不等 则成品返回量show\r\n      } else if (id === 'HT2201') {\r\n        const { supplyOrgCode, demandOrgCode } = this.ruleForm;\r\n        this.isCanEdit2 = supplyOrgCode === demandOrgCode;\r\n      }\r\n    },\r\n    // 选中基地数据\r\n    baseSelect(item) {\r\n      this.ruleForm.baseCellName = item.baseCellName;\r\n      this.ruleForm.supplyOrgCode = item.cityOrgCode;\r\n      this.ruleForm.demandOrgCode = item.linkInduOrgCode;\r\n      let leafTypeName = '';\r\n      if (item.leafTypeCode !== '20') {\r\n        leafTypeName = '晾晒烟';\r\n        this.isLeafTypeEnable = false;\r\n      }\r\n      const row = {\r\n        leafTypeName,\r\n        leafFormName: '原烟',\r\n        apprWeight: item.apprWeight,\r\n      };\r\n      this.tableData.push(row);\r\n    },\r\n    // 获取省级\r\n    handlerGetparentbizCode(e, field) {\r\n      const { pkey, key, orgTypeEk } = e.selectOption;\r\n      const { apprTypeCode } = this.ruleForm;\r\n      this[field] = pkey;\r\n      this.StateFromSupplyorg = [];\r\n      if (field === 'PresupplyOrgCode') {\r\n        if (!apprTypeCode?.length) return;\r\n        if (!key) {\r\n          // 清空需方仓库\r\n          this.ruleForm.supplyOrgCode2 = '';\r\n          if (apprTypeCode.includes('HT3104') || apprTypeCode.includes('HT3105')) {\r\n            this.ruleForm.demandOrgCode = '';\r\n          }\r\n          return;\r\n        }\r\n        const list = ['HT1301', 'HT1101'];\r\n        // const list = ['HT1301', 'HT1303'];\r\n        const isok = list.some((item) => apprTypeCode.includes(item));\r\n        // 需要取得工业单位所在同一个行政区划的省级商业公司组织单位;\r\n        if (isok && orgTypeEk === 'INDUSTRY') {\r\n          this._apis.getStateFromSupplyorg({ industryOrgCode: key }).then(({ rows }) => {\r\n            this.StateFromSupplyorg = rows;\r\n          });\r\n        }\r\n      }\r\n    },\r\n    // 获取单据号\r\n    initBillNo() {\r\n      this._apis.getBillNo({}).then((res) => {\r\n        this.billNo = res;\r\n      });\r\n    },\r\n    // 附件额外参数\r\n    getfileparams(bizYear, bizCode) {\r\n      const { permission, title } = this.$route.meta;\r\n      const fileParams = {\r\n        moduleCode: permission,\r\n        moduleName: title,\r\n        busiYear: bizYear,\r\n        orgCode: bizCode,\r\n        relBillNo: this.billNo,\r\n      };\r\n      this.fileParams = fileParams;\r\n    },\r\n    // 附件返回id\r\n    handlerResfiled({ file, fileList }) {\r\n      if (this.addfilestatus) {\r\n        this.fileList = fileList;\r\n      }\r\n      if (file.status === 'done') {\r\n        const { code, data, message } = file.response;\r\n        if (code === '200') {\r\n          this.uploading = false;\r\n          this.fileList = fileList;\r\n          this.uploadIds.push([data.fileId, file]);\r\n          this.$message.success(data.fileName);\r\n        } else {\r\n          this.$message.error(message);\r\n        }\r\n      }\r\n    },\r\n    // 上传前\r\n    beforeUpload(file) {\r\n      this.uploading = true;\r\n      this.addfilestatus = true;\r\n      const ismaxSize = this.fileList?.reduce((pre, cur) => pre + cur.size, 0);\r\n      if (ismaxSize > this.UPLOAD_RESTRICT) {\r\n        this.uploading = false;\r\n        this.addfilestatus = false;\r\n        this.$message.error('总文件大小不能超过50MB');\r\n        return false;\r\n      }\r\n      const { name } = file;\r\n      const reglist = ['doc', 'docx', 'xls', 'xlsx', 'pdf', 'zip', 'rar'];\r\n      const isok = reglist.some((reg) => new RegExp(`${reg}$`, 'i').test(name));\r\n      if (!isok) {\r\n        this.uploading = false;\r\n        this.addfilestatus = false;\r\n        this.$message.error(`不支持.${name?.split('.')[1]}模式`);\r\n      }\r\n      return isok;\r\n    },\r\n    // 删除文件\r\n    handleRemoveFile(file) {\r\n      const index = this.fileList.indexOf(file);\r\n      if (index === -1) return;\r\n      const newFileList = this.fileList.slice();\r\n      newFileList.splice(index, 1);\r\n      this.fileList = newFileList;\r\n      // 删除所在id\r\n      const node2 = this.uploadIds.findIndex((item) => item[1].uid === file.uid);\r\n      this.uploadIds.splice(node2, 1);\r\n    },\r\n    // form 初始化\r\n    fullRuleForm() {\r\n      this.ruleForm.applyDate = this.handleTime();\r\n    },\r\n    // 保存 提交\r\n    async handleSave() {\r\n      const ispass = this.saveBefore();\r\n      if (!ispass) return;\r\n      const datalist = this.getfilterEdTable();\r\n      const asynclist = () =>\r\n        new Promise((resolve, reject) => {\r\n          if (!datalist.length) {\r\n            const $table = this.$refs.xTable;\r\n            // 使用错误定位\r\n            $table.validate(true).catch((err) => {\r\n              console.log(err);\r\n            });\r\n            this.$message.error('无法保存，明细数据不能为空,请至少保证一条数据');\r\n            reject();\r\n          } else {\r\n            resolve();\r\n          }\r\n        });\r\n      const list = [this.$refs.modelAddForm.validate(), asynclist()];\r\n      try {\r\n        const valid = await Promise.all(list);\r\n        if (!valid) return;\r\n        const params = this.getfilterParams({\r\n          ...this.ruleForm,\r\n          billNo: this.billNo,\r\n          busiYear: this.busiYear,\r\n          paramListPcTAsDailyDealDetls: datalist,\r\n        });\r\n        this.saveloading = true;\r\n        this._apis\r\n          .saveMasAndDetail(params)\r\n          .then((res) => {\r\n            if (res) {\r\n              this.$message.success('保存成功');\r\n              this.handleReset();\r\n            } else {\r\n              this.$message.error('操作失败');\r\n            }\r\n          })\r\n          .finally(() => {\r\n            this.saveloading = false;\r\n          });\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    },\r\n    // utils\r\n    // 保存按钮前 各条件\r\n    saveBefore() {\r\n      const {\r\n        supplyOrgCode,\r\n        demandOrgCode,\r\n        apprTypeCode,\r\n        applyReasion,\r\n        supplyOrgCode1,\r\n        supplyOrgCode2,\r\n      } = this.ruleForm;\r\n      const { bizCode, orgTypeEk } = this.appConfig;\r\n      const specialfirms = [\r\n        'BA11000001000000000171',\r\n        'BA11000001000000000156',\r\n        'BA11000001000000000184',\r\n      ];\r\n      // 当业务类型选择基地烟相关类型时\r\n      if (apprTypeCode.indexOf('HT1104') !== -1) {\r\n        if (!this.ruleForm.baseCellName) {\r\n          this.$message.error('当前基地单元信息为空,请选择基地单元信息！');\r\n          this.$confirm({\r\n            title: '操作提示?',\r\n            content: () => (\r\n              <div style=\"color:red;\">\r\n                是否打开基地单元信息',确认请点击确认'按钮，取消点击'取消'按钮\r\n              </div>\r\n            ),\r\n            onOk: () => {\r\n              this.$refs.basemodelRef.show({ bizYear: this.busiYear, orgTypeEk, bizCode });\r\n            },\r\n          });\r\n          return;\r\n        }\r\n      }\r\n      // 当供方单位选择具有商业经营性质的特殊复烤企业（云南烟叶公司、华环国际、天昌国际）时，\r\n      // 还需录入原烟量,则需要控制明细中类型为烤烟且烟叶形态为片烟的量总和不能超过这个量\r\n      // 只有工商普通购销需要录入原烟量  陈烟不用判断原烟量\r\n      const code1 = Array.isArray(supplyOrgCode) ? [...supplyOrgCode].reverse()[0] : supplyOrgCode;\r\n      if (specialfirms.includes(code1) && apprTypeCode.indexOf('HT1101') !== -1) {\r\n        // weightUnit\r\n        const weightConvertRate = 1;\r\n        const crudeWeightNum = this.ruleForm.crudeWeight * weightConvertRate;\r\n        if (this.totalLeafNum > crudeWeightNum) {\r\n          this.$message.error('烤烟片烟量不能超过原烟量！');\r\n          return;\r\n        }\r\n      }\r\n      if (!applyReasion) {\r\n        this.$message.error('申请原因不能为空！');\r\n        return;\r\n      } else if (applyReasion.length > 1000) {\r\n        this.$message.error('不能超过1000个字节！');\r\n        return;\r\n      }\r\n      // 非基地\r\n      if (\r\n        supplyOrgCode !== bizCode &&\r\n        demandOrgCode !== bizCode &&\r\n        supplyOrgCode[0] !== bizCode &&\r\n        demandOrgCode[0] !== bizCode &&\r\n        apprTypeCode.indexOf('HT1104') === -1\r\n      ) {\r\n        this.$message.error('供方单位与需方单位必须至少有一个是当前单位！');\r\n        return;\r\n      }\r\n      // 非内部调运\r\n      if (\r\n        apprTypeCode.indexOf('HT3104') === -1 &&\r\n        apprTypeCode.indexOf('HT3105') === -1 &&\r\n        apprTypeCode.indexOf('HT22') === -1\r\n      ) {\r\n        if (supplyOrgCode === demandOrgCode) {\r\n          this.$message.error('供方单位不能与需方单位相同！');\r\n          return;\r\n        }\r\n        // 内部调运 仓库不能相同\r\n      } else if (apprTypeCode.indexOf('HT3104') !== -1 && apprTypeCode.indexOf('HT3105') !== -1) {\r\n        if (supplyOrgCode !== demandOrgCode) {\r\n          this.$message.error('业务类型为内部调运时供方单位必须与需方单位相同！');\r\n          return;\r\n        }\r\n        if (!supplyOrgCode2) {\r\n          this.$message.error('调入仓库不能为空！');\r\n          return;\r\n        }\r\n        if (!supplyOrgCode1) {\r\n          this.$message.error('调出仓库不能为空！');\r\n          return;\r\n        }\r\n        if (supplyOrgCode1 === supplyOrgCode2) {\r\n          this.$message.error('调入仓库不能与调出仓库相同！');\r\n          return;\r\n        }\r\n      }\r\n\r\n      return true;\r\n    },\r\n    // 过滤 params\r\n    getfilterParams(data) {\r\n      const params = cloneDeep(data);\r\n      // if (params.supplyOrgCode && params.supplyOrgCode.length) {\r\n      //   params.supplyOrgCode = params.supplyOrgCode[0];\r\n      // }\r\n      // if (params.demandOrgCode && params.demandOrgCode.length) {\r\n      //   params.demandOrgCode = params.demandOrgCode[0];\r\n      // }\r\n      if (params.apprTypeCode && params.apprTypeCode.length) {\r\n        params.apprTypeCode = [...params.apprTypeCode].reverse()[0];\r\n      }\r\n      // params.PredemandOrgCode\r\n      // 新烟/旧烟\r\n      params.newOrOldLeafName =\r\n        this.newOrOldLeafList.find((item) => item.enumKey === params.newOrOldLeaf)?.name || '';\r\n      // 业务类型名称\r\n      params.apprTypeName =\r\n        this.apprTypeCodeListed.find((item) => item.contTypeCode === params.apprTypeCode)\r\n          ?.contTypeName || '';\r\n      // 同一个行政区划的省级商业公司组织单位\r\n      if (this.StateFromSupplyorg?.length) {\r\n        params.StateFromSupplyorg = this.StateFromSupplyorg;\r\n      }\r\n      // 上传附件\r\n      if (this.uploadIds.length) params.fileIds = this.uploadIds?.map((item) => item[0]);\r\n      return params;\r\n    },\r\n    // 过滤 明细table\r\n    getfilterEdTable() {\r\n      const list =\r\n        this.tableData\r\n          .filter((item) => item.leafTypeName && item.leafFormName && item.apprWeight)\r\n          .map((item) => {\r\n            item.leafFormCode = this.leafFormCodeList.find(\r\n              (it) => it.leafFormName === item.leafFormName,\r\n            )?.leafFormCode;\r\n            item.leafTypeCode = this.leafTypeCodeList.find(\r\n              (it) => it.leafTypeName === item.leafTypeName,\r\n            )?.leafTypeCode;\r\n            delete item._X_ID;\r\n            return item;\r\n          }) || [];\r\n      // table 验证\r\n      return list.filter((ele) => {\r\n        if (\r\n          (ele.leafFormCode === '201' || ele.leafFormCode === '202') &&\r\n          ele.leafTypeCode === '10'\r\n        ) {\r\n          this.totalLeafNum += ele.apprWeight;\r\n          // 如果选择的是烟叶类型是薄片，烟叶形态只能是薄片\r\n        } else if (ele.leafTypeCode === '801') {\r\n          // 801\r\n          if (\r\n            ele.leafFormCode !== 'X1' &&\r\n            ele.leafFormCode !== '505' &&\r\n            ele.leafFormCode !== '506'\r\n          ) {\r\n            this.$message.error(\r\n              '明细数据中，烟叶类型选择薄片时，烟叶形态只能选择薄片（片）或者薄片丝或者再造梗丝！',\r\n            );\r\n            return false;\r\n          }\r\n        }\r\n        // 第二个条件\r\n        // 烟叶类型选择 非薄片时候，烟叶形态不能选择薄片\r\n        if (ele.leafTypeCode === '801') {\r\n          if (\r\n            ele.leafFormCode === 'X1' ||\r\n            ele.leafFormCode === '505' ||\r\n            ele.leafFormCode === '506'\r\n          ) {\r\n            this.$message.error(\r\n              '明细数据中，烟叶类型选择非薄片时，烟叶形态不能选择薄片（片）或者薄片丝或者再造梗丝！',\r\n            );\r\n            return false;\r\n          }\r\n        }\r\n        // 第三个条件\r\n        // 烟叶形态为混配片烟 只有香料烟B型和香料烟S型才能选择\r\n        if (ele.leafFormCode === '203') {\r\n          if (ele.leafTypeCode !== '20211' && ele.leafTypeCode !== '20212') {\r\n            this.$message.error(\r\n              '明细数据中，烟叶形态为混配片烟时，烟叶类型只能选择香料烟B型和香料烟S型！',\r\n            );\r\n            return false;\r\n          }\r\n        }\r\n        // 第四个条件\r\n        // TLIM-2388--日常交易核定量申请模块需限制当烟叶类型为香料烟B型或S型时，烟叶形态不可以选择到混打片烟。\r\n        if (ele.leafFormCode === '202') {\r\n          if (ele.leafTypeCode === '20211' || ele.leafTypeCode === '20212') {\r\n            this.$message.error(\r\n              '明细数据中，烟叶形态为混打片烟时，烟叶类型不能选择香料烟B型和香料烟S型！',\r\n            );\r\n            return false;\r\n          }\r\n        }\r\n        return true;\r\n      });\r\n    },\r\n    // 初始化\r\n    init() {\r\n      // 获取树\r\n      this.treeGetlist(this.busiYear, treeFormatList, this.$apis.centre.apply);\r\n      // file 参数\r\n      this.getfileparams(this.busiYear, this.appConfig.bizCode);\r\n      // 枚举数据获取\r\n      this.getEnumType();\r\n      this.querySpinnerLeafType();\r\n      this.querySpinnerLeafForm();\r\n      this.querygetBusinessType();\r\n    },\r\n    async getEnumType() {\r\n      const params = {\r\n        enumTypeCodes: ['OPERATE_TYPE', 'NEW_OR_OLD_LEAF'],\r\n      };\r\n      const res = await this.$apis.enum.index.getEnumType(params);\r\n      if (res) {\r\n        this.operateTypeList = res.enumMap.OPERATE_TYPE;\r\n        this.newOrOldLeafList = res.enumMap.NEW_OR_OLD_LEAF;\r\n      }\r\n    },\r\n    querySpinnerLeafType() {\r\n      this._apis.querySpinnerLeafType({}).then((res) => {\r\n        this.leafTypeCodeList = res.rows;\r\n      });\r\n    },\r\n    querySpinnerLeafForm() {\r\n      this._apis.querySpinnerLeafForm({}).then((res) => {\r\n        this.leafFormCodeList = res.rows;\r\n      });\r\n    },\r\n    querygetBusinessType() {\r\n      // 业务类型\r\n      this.$apis.common.index.queryContType({ contTypeCode: '2' }).then(({ rows }) => {\r\n        this.apprTypeCodeListed = rows;\r\n        this.apprTypeCodeList = this.getTree(\r\n          rows,\r\n          'higherContTypeCode',\r\n          'contTypeCode',\r\n          'contTypeName',\r\n          'children',\r\n          '0',\r\n        );\r\n      });\r\n    },\r\n    // 获取业务类型\r\n    getTree(rows, pid, id, title, children, root) {\r\n      // 递归 161202 次 5ms左右时间\r\n      console.time();\r\n      const list2tree1 = (list, topid) => {\r\n        return list.filter((item) => {\r\n          if (item[pid] === topid) {\r\n            (item.value = item[id])((item.label = item[title]))(\r\n              (item[children] = list2tree1(list, item[id])),\r\n            );\r\n            return true;\r\n          }\r\n          return false;\r\n        });\r\n      };\r\n      const tree = list2tree1(rows, root);\r\n      console.timeEnd();\r\n      return tree;\r\n    },\r\n    // 获取树\r\n    async treeGetlist(yearValue, utils, api) {\r\n      const treeParams = {\r\n        bizYear: yearValue,\r\n        bizCode: 'BA20111000001000000000000',\r\n        orgTypeEk: 'EXPORT,INDUSTRY,TOBACCO',\r\n        orgLevelEk: '3',\r\n        paramMap: {\r\n          isCorporation: '1',\r\n        },\r\n      };\r\n      const fields = {\r\n        pkey: 'parentBizCode',\r\n        title: 'orgName',\r\n        key: 'bizCode',\r\n        children: 'children',\r\n      };\r\n      $ec.showLoading();\r\n      const rows = JSON.parse(localStorage.getItem('apprlist')) || [];\r\n      if (rows.length) {\r\n        $ec.showLoading();\r\n        this.treeData = utils(rows, fields);\r\n      } else {\r\n        const response = await api.getreeDate(treeParams);\r\n        localStorage.setItem('apprlist', JSON.stringify(response.rows));\r\n        $ec.showLoading();\r\n        this.treeData = utils(response?.rows, fields);\r\n      }\r\n    },\r\n    // 渲染树\r\n    getfetchData() {\r\n      return new Promise((resolve) => {\r\n        const list = cloneDeep(this.treeData);\r\n        resolve(list);\r\n      });\r\n    },\r\n    // 计算合计的数据\r\n    sumNum(list, field) {\r\n      let count = 0;\r\n      list.forEach((item) => {\r\n        count += Number(item[field]);\r\n      });\r\n      return count ? count.toFixed(2) : 0;\r\n    },\r\n    // 底部的合计\r\n    footerMethod({ columns, data }) {\r\n      return [\r\n        columns.map((column, columnIndex) => {\r\n          if (columnIndex === 0) {\r\n            return '合计';\r\n          }\r\n          if (['apprWeight'].includes(column.property)) {\r\n            return this.sumNum(data, column.property);\r\n          }\r\n          return null;\r\n        }),\r\n      ];\r\n    },\r\n    // 手动获取年月日\r\n    handleTime() {\r\n      const date = new Date();\r\n      const year = date.getFullYear();\r\n      const month = date.getMonth();\r\n      const m = month < 10 ? `0${month + 1}` : month + 1;\r\n      const day = date.getDate();\r\n      const d = day < 10 ? `0${day}` : day;\r\n      return `${year}-${m}-${d}`;\r\n    },\r\n    // table 内部样式\r\n    cellStyle({ $columnIndex }) {\r\n      if ($columnIndex === 3) {\r\n        return { textAlign: 'right' };\r\n      }\r\n    },\r\n    getFormAndTypeName(Formlist, Typelist, leafFormName, leafTypeName) {\r\n      const leafFormCode = Formlist.find((it) => it.leafFormName === leafFormName)?.leafFormCode;\r\n      const leafTypeCode = Typelist.find((it) => it.leafTypeName === leafTypeName)?.leafTypeCode;\r\n      return { leafFormCode, leafTypeCode };\r\n    },\r\n    // 明细选中\r\n    onSelectChange(column) {\r\n      this.Norepetition(column);\r\n      const { leafTypeName, leafFormName } = column; // 获取当前值\r\n      // 获取当前Code\r\n      const { leafFormCode, leafTypeCode } = this.getFormAndTypeName(\r\n        this.leafFormCodeList,\r\n        this.leafTypeCodeList,\r\n        leafFormName,\r\n        leafTypeName,\r\n      );\r\n      this.isAawSmokeCanShow = false;\r\n      if (leafFormCode && leafTypeCode) {\r\n        if (leafTypeCode === '10') {\r\n          if (leafFormCode === '201' || leafFormCode === '202') {\r\n            this.initBtnShow();\r\n          }\r\n        }\r\n      }\r\n    },\r\n    // 组合无重复\r\n    Norepetition({ _X_ID }) {\r\n      const okfilter = (item) => item.leafTypeName && item.leafFormName && item.apprWeight;\r\n      const table = this.tableData.filter(okfilter); // 三者为true 过滤\r\n      if (table.length > 1) {\r\n        const str = table[0]?.leafTypeName + table[0]?.leafFormName; // 拼接 a+b\r\n        // 判断 A+B || B+A === a+b\r\n        const isokCombination = (item) =>\r\n          item.leafTypeName + item.leafFormName === str ||\r\n          item.leafFormName + item.leafTypeName === str;\r\n\r\n        const newTable = table.slice(1, table.length);\r\n        const isok = newTable.some(isokCombination);\r\n        if (isok) {\r\n          this.$message.error('明细中的烟叶类型与烟叶形态的组合不能重复！');\r\n          this.tableData = this.tableData.map((it) => {\r\n            let cur = { ...it };\r\n            if (cur._X_ID === _X_ID) cur = { _X_ID };\r\n            return cur;\r\n          });\r\n        }\r\n      }\r\n    },\r\n    // 权限按钮\r\n    initBtnShow() {\r\n      this.ruleForm.crudeWeight = '';\r\n      const { supplyOrgCode, apprTypeCode } = this.ruleForm;\r\n      // 当供方单位选择具有 商业经营性质的 特殊复烤企业（云南烟叶公司、华环国际、天昌国际）时\r\n      // ，明细中有单打片烟或者混打片烟时，需要录入原烟数量，只有工商普通购销需要录入原烟量\r\n      const isok =\r\n        true ||\r\n        supplyOrgCode === 'BA11000001000000000171' ||\r\n        supplyOrgCode === 'BA11000001000000000156' ||\r\n        supplyOrgCode === 'BA11000001000000000184';\r\n      this.isAawSmokeCanShow = isok && apprTypeCode.indexOf('HT1101') !== '-1';\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.middle-title {\r\n  color: blue;\r\n}\r\n.tips {\r\n  color: rgba(100, 100, 100, 1);\r\n}\r\n.flex {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  height: 92%;\r\n  > div {\r\n    width: 50%;\r\n  }\r\n  > .table-container {\r\n    height: 100%;\r\n    > .col {\r\n      height: 82%;\r\n    }\r\n  }\r\n  .upload-container {\r\n    height: 100%;\r\n    > .main {\r\n      height: 80%;\r\n    }\r\n    > .footer {\r\n      height: 20%;\r\n      position: relative;\r\n      > div {\r\n        position: absolute;\r\n        right: 20px;\r\n        bottom: 20px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=5b33981a&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=5b33981a&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5b33981a\",\n  null\n  \n)\n\nexport default component.exports","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BaseUnitModel.vue?vue&type=style&index=0&id=13020e95&prod&lang=less&scoped=true&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&id=5b33981a&prod&lang=less&scoped=true&\""],"sourceRoot":""}