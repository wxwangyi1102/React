(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c42de348"],{"059f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ec-container",{attrs:{height:"auto"}},[a("ec-container-header",[a("ec-panel-toolbar",[a("ec-panel-item-left",[a("ec-header",{attrs:{title:"交易衔接量审核",icon:"onetomany","color-code":"003"}})],1),a("ec-panel-item-right",[a("div",[e._v("集中交易年度："+e._s(e.busiYear)+"年")])])],1)],1),a("ec-container-body",[a("ec-panel",[a("ec-panel-toolbar",[a("ec-query-panel",{attrs:{defaultFold:!0},on:{query:e.init,reset:e.resetHandle},scopedSlots:e._u([{key:"inner",fn:function(){return[a("ec-query-item",{attrs:{label:"单据编号"}},[a("a-input",{attrs:{placeholder:""},model:{value:e.queryItems.billNo,callback:function(t){e.$set(e.queryItems,"billNo",t)},expression:"queryItems.billNo"}})],1),a("ec-query-item",{attrs:{label:"供方单位"}},[a("select-picker",{attrs:{title:"选择单位",lazy:!1,search:!1,fetchData:e.getfetchData},on:{ok:function(t){return e.handlepickerValue(t,"supplyOrgCode")}},model:{value:e.supplyOrgCode_temporary,callback:function(t){e.supplyOrgCode_temporary=t},expression:"supplyOrgCode_temporary"}})],1),a("ec-query-item",{attrs:{label:"需方单位"}},[a("select-picker",{attrs:{title:"选择单位",lazy:!1,search:!1,fetchData:e.getfetchData},on:{ok:function(t){return e.handlepickerValue(t,"demandOrgCode")}},model:{value:e.demandOrgCode_temporary,callback:function(t){e.demandOrgCode_temporary=t},expression:"demandOrgCode_temporary"}})],1),a("ec-query-item",{attrs:{label:"烟叶类型"}},[a("a-cascader",{attrs:{options:e.statusValOptions,"change-on-select":"",placeholder:""},model:{value:e.queryItems.leafTypeCode,callback:function(t){e.$set(e.queryItems,"leafTypeCode",t)},expression:"queryItems.leafTypeCode"}})],1)]},proxy:!0}])},[a("ec-query-item",{attrs:{label:"业务类型"}},[a("a-cascader",{attrs:{options:e.businessTypeOptions,placeholder:"请选择"},model:{value:e.queryItems.apprTypeCode,callback:function(t){e.$set(e.queryItems,"apprTypeCode",t)},expression:"queryItems.apprTypeCode"}})],1),a("ec-query-item",{attrs:{label:"状态"}},[a("a-select",{attrs:{showSearch:"","allow-clear":"",placeholder:"请选择"},model:{value:e.queryItems.circleSate,callback:function(t){e.$set(e.queryItems,"circleSate",t)},expression:"queryItems.circleSate"}},e._l(e.statusList,(function(t){return a("a-select-option",{key:t.id},[e._v(" "+e._s(t.label)+" ")])})),1)],1),a("ec-query-item",{staticClass:"org",attrs:{label:"计量单位"}},[a("a-select",{attrs:{"allow-clear":"",placeholder:"请选择"},model:{value:e.unitstr,callback:function(t){e.unitstr=t},expression:"unitstr"}},e._l(e.unitstrOptions,(function(t){return a("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1),a("ec-divider")],1),a("ec-panel-item",[e.islock?a("ec-panel-item-left",[e.auditLoading?a("a-button",{attrs:{type:"primary"},on:{click:e.handleraudit}},[e._v("同意")]):a("a-button",{attrs:{type:"primary",loading:""}},[e._v("审核中")]),a("a-button",{on:{click:function(t){return e.handlerreject("rejectSupply")}}},[e._v("退回供方")]),a("a-button",{on:{click:function(t){return e.handlerreject("rejectDemand")}}},[e._v("退回需方")])],1):e._e()],1),a("ec-panel-body",[a("ec-v-layout",[a("ec-v-item",[a("ec-table",{ref:"xTable1",attrs:{"show-overflow":"","header-align":"center",align:"center",height:e.height?"300":"200",data:e.tableData,pagination:e.pagination},on:{"page-action":e.queryPagination,"checkbox-all":e.handlerSelectRow,"checkbox-change":e.handlerSelectRow,"cell-click":e.handlerRowlist}},[a("ec-table-col",{attrs:{type:"checkbox",width:"60",align:"center"}}),a("ec-table-col",{attrs:{type:"seq",title:"序号",width:"50"}}),a("ec-table-col",{attrs:{field:"billNo",title:"单据编号",width:"150"}}),a("ec-table-col",{attrs:{field:"supplyOrgName",title:"供方单位"}}),a("ec-table-col",{attrs:{field:"demandOrgName",title:"需方单位"}}),a("ec-table-col",{attrs:{field:"supplyStates",title:"供方状态"}}),a("ec-table-col",{attrs:{field:"demandStates",title:"需方状态"}}),a("ec-table-col",{attrs:{title:"操作",width:"190",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("a-button",{attrs:{type:"link"},on:{click:function(t){return t.stopPropagation(),e.handleDetails(r,"update")}}},[e._v("编辑")]),a("a-button",{attrs:{type:"link"},on:{click:function(t){return t.stopPropagation(),e.handleDetails(r,"main")}}},[e._v("详细")])]}}])})],1)],1),a("ec-v-item",[a("h2",{staticClass:"details-bg"},[e._v("详细")]),a("ec-table",{ref:"xTable2",attrs:{"show-overflow":"",height:"216",data:e.FocusDealDetailData,"header-align":"center",align:"center","show-footer":"","cell-style":e.cellStyle,"footer-method":e.footerMethod}},[a("ec-table-col",{attrs:{type:"seq",title:"序号",width:"50"}}),a("ec-table-col",{attrs:{field:"apprTypeCode",title:"业务类型"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.findlabel(a.apprTypeCode,e.businessTypeOptions)))]}}])}),a("ec-table-col",{attrs:{field:"leafTypeCode",title:"烟叶类型"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.findlabel(a.leafTypeCode,e.statusValOptions)))]}}])}),a("ec-table-col",{attrs:{field:"leafFormName",title:"烟叶形态"}}),a("ec-table-col",{attrs:{field:"supplyWeight",title:"供方提报量"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.handlerWeightcalculate(a.supplyWeight,e.unitstr)))]}}])}),a("ec-table-col",{attrs:{field:"demandWeight",title:"需方提报量"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.handlerWeightcalculate(a.demandWeight,e.unitstr)))]}}])}),a("ec-table-col",{attrs:{field:"finalWeight",title:"总公司审核量"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s(e.handlerWeightcalculate(a.finalWeight,e.unitstr)))]}}])}),a("ec-table-col",{attrs:{title:"操作",width:"190"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return["HT1104"===r.apprTypeCode?a("a-button",{attrs:{type:"link"},on:{click:function(t){return t.stopPropagation(),e.handleDetails(r,"basedetails")}}},[e._v("详细")]):e._e()]}}])})],1)],1)],1)],1)],1),a("Details",{ref:"detailsRef"})],1)],1)},n=[],i=a("c7eb"),l=a("1da1"),o=a("5530"),s=(a("6198"),a("6fc0")),c=a.n(s),u=(a("d3b7"),a("d81d"),a("159b"),a("caad"),a("a9e3"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ec-drawer",{staticClass:"ec-draw-form",attrs:{title:"update"===e.modeltag?"编辑":"详细",visible:e.visible,size:"large"},on:{close:e.cancel}},[a("ec-container",{attrs:{height:"auto",fixed:"top bottom","color-code":"007"}},[a("ec-container-body",[e.istabletotabs?[a("a-descriptions",{attrs:{bordered:"",size:"small",title:"主信息",column:2}},[a("a-descriptions-item",{attrs:{label:"单据编号"}},[e._v(" "+e._s(e.state.billNo)+" ")]),a("a-descriptions-item",{attrs:{label:"交易集中年度"}},[e._v(" "+e._s(e.busiYear)+" ")])],1),a("a-descriptions",{attrs:{bordered:"",size:"small",title:"供方资料区"}},[a("a-descriptions-item",{attrs:{label:"供方市"}},[e._v(" "+e._s(e.useGetname(e.state.supplyOrgCode))+" ")]),a("a-descriptions-item",{attrs:{label:"供方省"}},[e._v(" "+e._s(e.useGetname(e.state.supplyProvOrgCode))+" ")]),a("a-descriptions-item",{attrs:{label:"录入日期"}},[e._v(e._s(e.state.supplyCreateDate)+" ")]),a("a-descriptions-item",{attrs:{label:"上报日期"}},[e._v(" "+e._s(e.state.supplyUploadTime)+" ")]),a("a-descriptions-item",{attrs:{label:"确认日期"}},[e._v(" "+e._s(e.state.supplyProvAuditTime)+" ")]),a("a-descriptions-item",{attrs:{label:"确认状态"}},[e._v(" "+e._s("0"===e.state.supplyProvAuditState?"未确认":"1"===e.state.supplyProvAuditState?"已确认":"")+" ")])],1),a("a-descriptions",{attrs:{bordered:"",size:"small",title:"需方资料区"}},[a("a-descriptions-item",{attrs:{label:"需方市"}},[e._v(" "+e._s(e.useGetname(e.state.demandOrgCode))+" ")]),a("a-descriptions-item",{attrs:{label:"需方省"}},[e._v(" "+e._s(e.useGetname(e.state.demandProvOrgCode))+" ")]),a("a-descriptions-item",{attrs:{label:"录入日期"}},[e._v(" "+e._s(e.state.demandCreateDate)+" ")]),a("a-descriptions-item",{attrs:{label:"上报日期"}},[e._v(" "+e._s(e.state.demandUploadTime)+" ")]),a("a-descriptions-item",{attrs:{label:"确认日期"}},[e._v(" "+e._s(e.state.demandProvAuditTime)+" ")]),a("a-descriptions-item",{attrs:{label:"确认状态"}},[e._v(" "+e._s("0"===e.state.demandProvAuditState?"未确认":"1"===e.state.demandProvAuditState?"已确认":"")+" ")])],1),a("a-descriptions",{attrs:{bordered:"",size:"small",title:"总公司资料区"}},[a("a-descriptions-item",{attrs:{label:"总公司"}},[e._v(" 中国烟叶公司")]),a("a-descriptions-item",{attrs:{label:"审核日期"}},[e._v(" "+e._s(e.state.finalAuditTime)+" ")]),a("a-descriptions-item",{attrs:{label:"审核状态"}},[e._v(" "+e._s("0"===e.state.finalAuditState?"未审核":"1"===e.state.finalAuditState?"已审核":"")+" ")])],1)]:e._e(),a("ec-panel-toolbar",[a("ec-panel-item-left",[a("span",{class:{"vxetable-title":e.istabletotabs}},[e._v("明细信息")])]),a("ec-panel-item-right",[e.istabletotabs?a("span",{staticClass:"vxetable-title"},[e._v("计量单位："+e._s("50"===e.unitstr?"担":"万担"))]):a("span",[e._v("集中交易年度:"+e._s(e.busiYear)+" 计量单位："+e._s("50"===e.unitstr?"担":"万担"))])])],1),a("vxe-table",{ref:"xTable",staticClass:"editable-footer",attrs:{border:"","show-footer":"","show-overflow":"","highlight-hover-row":"",height:"300","header-align":"center",align:"center","cell-style":e.cellStyle,"footer-method":e.footerMethod,data:e.tableData,"edit-config":"update"===e.modeltag?{trigger:"click",mode:"row"}:{}}},[a("vxe-column",{attrs:{width:"60",type:"seq",title:"序号",align:"center"}}),a("vxe-column",{attrs:{title:"业务类型",field:"apprTypeCode"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.onGetapprTypeCode(a.apprTypeCode)))]}}])}),a("vxe-column",{attrs:{title:"基地单元名称",field:"baseCellName"}}),a("vxe-column",{attrs:{title:"烟叶类型",field:"leafTypeCode"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(e._s("20"===a.leafTypeCode?"晾晒烟":"10"===a.leafTypeCode?"烤烟":"雪茄烟叶"))]}}])}),a("vxe-column",{attrs:{title:"烟叶形态",field:"leafFormName"}}),a("vxe-column",{attrs:{title:"供方提报量",field:"supplyWeight","edit-render":{name:"input",immediate:!0}},scopedSlots:e._u([{key:"edit",fn:function(t){var r=t.row;return[a("a-input-number",{attrs:{type:"text",min:0},model:{value:r.supplyWeight,callback:function(t){e.$set(r,"supplyWeight",t)},expression:"row.supplyWeight"}})]}},{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.supplyWeight)+" ")]}}])}),a("vxe-column",{attrs:{title:"需方提报量",field:"demandWeight","edit-render":{name:"input",immediate:!0}},scopedSlots:e._u([{key:"edit",fn:function(t){var r=t.row;return[a("a-input-number",{attrs:{type:"text",min:0},model:{value:r.demandWeight,callback:function(t){e.$set(r,"demandWeight",t)},expression:"row.demandWeight"}})]}},{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.demandWeight)+" ")]}}])}),a("vxe-column",{attrs:{title:"总公司审核量",field:"finalWeight"}})],1)],2),a("ec-container-footer",{attrs:{fixed:""}},[a("a-space",["update"===e.modeltag&&e.loading?a("a-button",{attrs:{loading:""}},[e._v("保存中")]):e._e(),"update"!==e.modeltag||e.loading?e._e():a("a-button",{on:{click:e.handleSubmit}},[e._v("保存")]),a("a-button",{on:{click:e.cancel}},[e._v("关闭")])],1)],1)],1)],1)}),d=[],p=a("2909"),f=(a("7db0"),a("fa7d")),h={name:"AuditDetail",data:function(){return{modeltag:"",istabletotabs:null,unitstr:null,busiYear:null,tableData:[],visible:!1,loading:!1,state:null,businessTypeOptions:[{label:"工商普通购销",value:"HT1101"},{label:"出口备货普通购销",value:"HT1201"},{label:"基地烟",value:"HT1104"},{label:"国内合计",value:"HT11"}]}},computed:{_api:function(){return this.$apis.centre.audit}},methods:{show:function(e,t){var a=[];"basedetails"===t?(a=Object(p["a"])(e.rows),this.istabletotabs=!1):(this.istabletotabs=!0,this.state=e,a=null===e||void 0===e?void 0:e.pcTAsFocusDealDetlDTOList),this.tableData=Object(f["c"])(["supplyWeight","demandWeight","finalWeight"],a,e.unitstr,"/"),this.modeltag=t,this.busiYear=e.busiYear,this.unitstr=e.unitstr,this.visible=!0},cancel:function(){this.tableData=[],this.visible=!1},handleSubmit:function(){var e=this;this.loading=!0;var t=Object(f["c"])(["supplyWeight","demandWeight","finalWeight"],this.tableData,this.unitstr,"*"),a={pcAsFocusDealDetailList:t,busiYear:this.busiYear,asFocusDealMasId:this.state.asFocusDealMasId};this._api.updateButton(a).then((function(t){t.ifCanSave?(e.visible=!1,e.$message.success("保存成功")):e.$message.error(t.returnMessage)})).finally((function(){e.loading=!1}))},onGetapprTypeCode:function(e){var t,a=Object(p["a"])(this.businessTypeOptions);return null===(t=a.find((function(t){return t.value===e})))||void 0===t?void 0:t.label},sumNum:function(e,t){var a=0;return e.forEach((function(e){a+=Number(e[t])})),a},footerMethod:function(e){var t=this,a=e.columns,r=e.data;return[a.map((function(e,a){return 2===a?"合计":["finalWeight","supplyWeight","demandWeight"].includes(e.property)?t.sumNum(r,e.property):null}))]},useGetname:function(e){var t,a=this.state.treeData;return(null===(t=a.find((function(t){return t.key===e})))||void 0===t?void 0:t.title)||""},handlerWeightcalculate:function(e,t){return e/t},cellStyle:function(e){var t=e.$columnIndex;if(7===t||5===t||6===t)return{textAlign:"right"}}}},y=h,b=(a("edbc"),a("2877")),v=Object(b["a"])(y,u,d,!1,null,"79279373",null),g=v.exports,m=a("6ea6"),_={name:"Audit",components:{Details:g,SelectPicker:c.a},data:function(){return{demandOrgCode_temporary:"",supplyOrgCode_temporary:"",bizCode:"",orgType:"I",demandOrgCode:"",supplyOrgCode:"",asFocusDealMasId:"",orgCode:"",height:!0,islock:!0,auditLoading:!0,name:"",code:"",records:[],statusValOptions:[{value:"10",label:"烤烟"},{value:"20",label:"晾晒烟",children:[{value:"2013",label:"雪茄烟叶"}]}],unitstr:"50",unitstrOptions:[{name:"担",id:"50"},{name:"万担",id:"500000"}],brandId:void 0,statusVal:void 0,treeData:null,treeParams:{bizCode:"11000001000000000000",orgTypeEk:"EXPORT,INDUSTRY,TOBACCO",orgLevelEk:"3",paramMap:{isCorporation:"1"}},statusList:[{id:"1",label:"供方省公司待确认"},{id:"2",label:"需方省公司待确认"},{id:"8",label:"供方省公司已确认"},{id:"9",label:"需方省公司已确认"},{id:"3",label:"双方省公司待确认"},{id:"4",label:"总公司待审核"},{id:"5",label:"总公司已审核"},{id:"6",label:"总公司退回供方"},{id:"7",label:"总公司退回需方"}],businessTypeOptions:[{value:"0",label:"业务类型",children:[{value:"1",label:"购销",children:[{value:"1-1",label:"工商购销",children:[{value:"HT1101",label:"工商普通购销"},{value:"HT1104",label:"基地烟"}]},{value:"1-2",label:"出口备货购销",children:[{value:"HT1201",label:"出口备货普通购销"}]}]}]}],leafTypeCode:["10"],queryItems:{searchType:"gjjType"},rules:{},tableData:[],FocusDealDetailData:[],pagination:{pageNumber:1,pageSize:10,total:0}}},computed:{_apply:function(){return this.$apis.centre.apply},_confirm:function(){return this.$apis.centre.confirm},_audit:function(){return this.$apis.centre.audit},appConfig:function(){return this.$store.getters.getAppConfig},busiYear:function(){var e,t;return null===(e=this.$store.getters.getAppConfig)||void 0===e||null===(t=e.yearValueMap)||void 0===t?void 0:t.CENTER_YEAR}},created:function(){this.onInfo()},methods:{init:function(){var e,t,a=this;$ec.showLoading(),this.records=[],this.FocusDealDetailData=[];var r=Object(o["a"])({},this.queryItems);r.orgCode=this.orgCode,r.busiYear=this.busiYear,r.apprTypeCode&&0!==(null===(e=r.apprTypeCode)||void 0===e?void 0:e.length)&&(r.apprTypeCode=r.apprTypeCode.reverse()[0]),r.leafTypeCode&&0!==(null===(t=r.leafTypeCode)||void 0===t?void 0:t.length)&&(r.leafTypeCode=r.leafTypeCode.reverse()[0]),this._audit.query(r).then((function(e){a.tableData=e.rows,a.pagination.total=e.totalRows})).finally((function(){$ec.hideLoading()}))},resetHandle:function(){this.queryItems={searchType:"gjjType"},this.init()},handlerSelectleafType:function(e){this.statusVal=e},handlepickerValue:function(e,t){var a=e.selectOption.val;this.queryItems[t]=a},handleraudit:function(){var e=this;if(0===this.records.length)return this.$message.error("请选中数据后再进行操作!"),!1;var t=this.records.some((function(e){return"4"===e.circleSate}));if(t){this.auditLoading=!1;var a={operateType:"audit",busiYear:this.busiYear,asFocusDealMasIds:this.records.map((function(e){return e.asFocusDealMasId}))||[]};this._audit.getPass(a).then((function(){e.init(),e.$message.success("审核成功")})).finally((function(){e.auditLoading=!0}))}else this.$message.warning("下级单位还未审核，不允许审核！")},handlerreject:function(e){var t=this;if(0===this.records.length)return this.$message.error("请选中数据后再进行操作!"),!1;$ec.showLoading();var a={operateType:e,busiYear:this.busiYear,asFocusDealMasIds:this.records.map((function(e){return e.asFocusDealMasId}))||[]};this._audit.getPass(a).then((function(){t.init(),t.$message.success("退回成功")})).finally((function(){$ec.hideLoading()}))},handleDetails:function(e,t){var a=this;if($ec.showLoading(),"basedetails"===t){var r={orgType:"gjj",busiYear:this.busiYear};this._audit.queryRowBaseDetails(r).then((function(e){var r=Object(o["a"])(Object(o["a"])({},e),{},{busiYear:a.busiYear,unitstr:a.unitstr,treeData:a.treeData});a.$refs.detailsRef.show(r,t)})).finally((function(){$ec.hideLoading()}))}else{var n=e.demandOrgCode,i=e.supplyOrgCode,l={demandOrgCode:n,supplyOrgCode:i,orgType:"gjj",asFocusDealMasId:e.asFocusDealMasId};this._audit.getDetails(l).then((function(e){var r=Object(o["a"])(Object(o["a"])({},e),{},{treeData:a.treeData,unitstr:a.unitstr,busiYear:a.busiYear});a.$refs.detailsRef.show(r,t)})).finally((function(){$ec.hideLoading()}))}},queryPagination:function(e,t){this.queryItems.pageNumber=e,this.queryItems.pageSize=t,this.init()},handlerorgValueChange:function(e){this.queryItems.orgCode=e},treeGetlist:function(){var e=this;return Object(l["a"])(Object(i["a"])().mark((function t(){var a,r,n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={pkey:"parentOrgUniqueCode",title:"orgName",key:"orgUniqueCode",children:"children"},e.treeParams.bizCode=null===(a=e.appConfig)||void 0===a?void 0:a.bizCode,t.next=4,e._apply.getreeDate(e.treeParams);case 4:n=t.sent,e.treeData=Object(m["treeFormatList"])(null===n||void 0===n?void 0:n.rows,r);case 6:case"end":return t.stop()}}),t)})))()},getfetchData:function(){var e=this;return new Promise((function(t){var a=Object(m["cloneDeep"])(e.treeData);t(a)}))},onInfo:function(){var e=this;return Object(l["a"])(Object(i["a"])().mark((function t(){var a,r,n,l;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$apis.bpm.executionEnter.getOrgCode({});case 2:return a=t.sent,r=a.orgCode,n=a.orgTypeEk,l=a.bizCode,e.orgCode=r,e.bizCode=l,e.orgType="TOBACCO"===n?"O":"I",e.treeParams.bizYear=e.busiYear,t.next=12,e.treeGetlist();case 12:e.init();case 13:case"end":return t.stop()}}),t)})))()},handlerRowlist:function(e){var t=this,a=e.row;$ec.showLoading(),this.asFocusDealMasId=a.asFocusDealMasId;var r={orgType:"gjj",supplyOrgCode:a.supplyOrgCode,asFocusDealMasId:a.asFocusDealMasId};this._audit.queryRowlist(r).then((function(e){t.FocusDealDetailData=e.rows||[]})).finally((function(){$ec.hideLoading()}))},handlerSelectRow:function(e){var t=e.records;this.records=t},findlabel:function(e,t){var a;function r(e,t){e.forEach((function(e){return e.value===t?(a=e.label,!1):"children"in e&&void r(e.children,t)}))}return r(t,e),a},footerMethod:function(e){var t=this,a=e.columns,r=e.data;return[a.map((function(e,a){return 1===a?"合计":["demandWeight","supplyWeight","finalWeight"].includes(e.property)?t.sumNum(r,e.property):null}))]},sumNum:function(e,t){var a=0;return e.forEach((function(e){a+=Number(e[t])})),a},handlerWeightcalculate:function(e,t){return e/t},cellStyle:function(e){var t=e.$columnIndex;if(4===t||5===t||6===t)return{textAlign:"right"}}}},k=_,O=(a("ece0"),Object(b["a"])(k,r,n,!1,null,"90bb5c28",null));t["default"]=O.exports},5530:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("b64b"),a("a4d3"),a("4de4"),a("d3b7"),a("e439"),a("159b"),a("dbb4");function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},"5f8c":function(e,t,a){},a43b:function(e,t,a){},ece0:function(e,t,a){"use strict";a("a43b")},edbc:function(e,t,a){"use strict";a("5f8c")},f2be:function(e,t,a){"use strict";a.d(t,"f",(function(){return s})),a.d(t,"g",(function(){return c})),a.d(t,"a",(function(){return u})),a.d(t,"h",(function(){return d})),a.d(t,"b",(function(){return p})),a.d(t,"e",(function(){return f})),a.d(t,"d",(function(){return h})),a.d(t,"c",(function(){return y}));var r=a("2909"),n=(a("d3b7"),a("159b"),a("ac16"),a("f8c9"),a("4de4"),a("4ec9"),a("3ca3"),a("ddb0"),a("d9e2"),a("a630"),a("6062"),a("0644")),i=a.n(n),l=a("60ed"),o=a.n(l);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{pkey:"pkey",key:"key",title:"title",children:"children"},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pkey:"pkey",children:"children"};if(!Array.isArray(e))return console.error("请传入一个list数组");e.forEach((function(r){var n=r[a.pkey];n&&e.forEach((function(e){var l=e;if(t)for(var o in t)String(o)!==String(t[o])&&(Array.isArray(l[t[o]])||l[t[o]]instanceof Object?l[o]=i()(l[t[o]]):l[o]=l[t[o]],Reflect.deleteProperty(l,t[o]));l&&l.key===n&&(l[a.children]=l[a.children]||[],l[a.children].push(r))}))}));var r=e.every((function(e){return e[t.pkey]}));return r?console.error("至少有一个根节点pid为null数组或传入一个空数组",e):e.filter((function(e){return!e[a.pkey]}))}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{pkey:"pkey",key:"key",title:"title"},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children";if(!Array.isArray(e))return console.error("请传入一个tree数组");var n=[],l=i()(e),o=Object(r["a"])(l);while(o.length){var s=o.shift(),c=s[a];if(c&&o.push.apply(o,Object(r["a"])(c)),t)for(var u in t)String(u)!==String(t[u])&&(Array.isArray(s[t[u]])||s[t[u]]instanceof Object?s[u]=i()(s[t[u]]):s[u]=s[t[u]],Reflect.deleteProperty(s,t[u]));Reflect.deleteProperty(s,a),n.push(s)}return 0===n.length?e:n}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pkey:"pkey",key:"key",title:"title"};if(!Array.isArray(e))return console.error("请传入一个tree数组");var r=i()(e),n=c(r,a);return n.filter((function(e){return!!t(e)}))}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key";if(!Array.isArray(e))return console.error("请传入一个数组");if(!e||0===e.length||!o()(e[0]))return Array.from(new Set(e));var a=new Map;return e.forEach((function(e){if(!e[t])throw new Error("prop参数不匹配，在节点找不到对应的值");a.set(e[t],e)})),0!==a.size?Array.from(a.values()):void 0}function p(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pkey:"pkey",key:"key",title:"title"},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{pkey:"pkey",key:"key"};if(!Array.isArray(e))return console.error("请传入一个tree数组");var n=new Set,i=c(e,a);function l(e,t){e.forEach((function(a){String(a[r.key])===String(t)&&(n.add(a[r.key]),a.isLeaf&&n.delete(a[r.key]),l(e,a[r.pkey]))}))}return l(i,t),Array.from(n).reverse().filter((function(e){return e!==t}))}function f(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"key",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{pkey:"pkey",key:"key",title:"title"},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{pkey:"pkey",key:"key"};if(!Array.isArray(e))return console.error("请传入一个tree数组");var i=new Set,l=c(e,r);function o(e,t){e.forEach((function(r){String(r[n.key])===String(t)&&(i.add(r[a]),o(e,r[n.pkey]))}))}return o(l,t),Array.from(i).reverse()}function h(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"key",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{pkey:"pkey",key:"key",title:"title"};if(!Array.isArray(e))return console.error("请传入一个tree数组");var n=c(e,r),i=n.filter((function(e){return String(e[a])===String(t)}));return Array.isArray(i)&&1===i.length?i[0]:null}function y(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{key:"key",label:"title"};if(!Array.isArray(e))return console.error("请传入一个字典数组");var r=e.filter((function(e){return String(e[a.key])===String(t)}));return r&&0!==r.length?r[0][a.label]:""}},fa7d:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return l}));var r=a("5530"),n=(a("2909"),a("d3b7"),a("b64b"),a("ddb0"),a("13d5"),a("4ec9"),a("3ca3"),a("2b3d"),a("9861"),a("d81d"),a("caad"),a("2532"),a("a9e3"),a("f2be"));a.d(t,"b",(function(){return n["c"]}));Object.prototype.toString,function(){document.addEventListener}(),function(){document.removeEventListener}();var i=function(e,t,a,n){return null===t||void 0===t?void 0:t.map((function(t){var i=Object(r["a"])({},t);for(var l in t)e.includes(l)&&("/"===n?i[l]/=a:i[l]*=a);return i}))},l=function(e,t){if(e){var a=document.createElement("a");a.style.display="none",a.href=e,a.setAttribute("download",t),document.body.appendChild(a),a.click(),document.body.removeChild(a)}}}}]);
//# sourceMappingURL=chunk-c42de348.9f1e0243.js.map