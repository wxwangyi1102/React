{"version":3,"sources":["webpack:///./src/views/pcm/buy/receive/Index.vue?c610","webpack:///./src/views/pcm/buy/receive/Index.vue?6c1c","webpack:///./src/views/pcm/buy/receive/ReceiveDetail.vue?6eee","webpack:///src/views/pcm/buy/receive/ReceiveDetail.vue","webpack:///./src/views/pcm/buy/receive/ReceiveDetail.vue?4867","webpack:///./src/views/pcm/buy/receive/ReceiveDetail.vue","webpack:///src/views/pcm/buy/receive/Index.vue","webpack:///./src/views/pcm/buy/receive/Index.vue?e243","webpack:///./src/views/pcm/buy/receive/Index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","_s","nowYear","leafTypeName","totalData","planTotalWeight","leftWeight","applyNum","allotNum","collectNum","on","$event","$refs","table","pageAction","onReset","onFetchBusinessOrgList","handleLevelEk","model","value","queryItems","callback","$$v","$set","expression","handleVisibleTypeName","_l","leafTypeEk","key","leafTypeCode","staticStyle","handleUnitParse","weightUnit","weightUnitCd","weightUnitName","ref","pagination","tableData","rows","loading","handlePagination","selectAllEvent","selectRowChange","scopedSlots","_u","fn","row","handleDrillData","applyOrgName","onDetail","staticRenderFns","staticClass","visible","onclose","footerMethod","packTypeObj","enumKey","packType","name","_e","components","data","submitStateFlag","busiYear","leafTypeCd","leafTypeList","oldDataRow","orgCode","weightUnitList","isSelected","packTypeList","created","methods","show","sumNum","list","field","count","columns","component","ReceiveDetail","SelectPicker","objectData","flag","applyOrgCode","spec","applyState","isVisible","oldLeafTypeList","oldTotalData","beforeLeafTypeName","businesOrgCodeTemp","levelCodeObj","orgLevelEk","isDrill","defaultOrgLevelEk","changeTreeOrgLevelEk","orgCodeList","businessOrgList","replaceFields","pkey","title","children","userInfo","params","bizCode","pageNumber","pageSize","total","computed","appConfig","appCode","enumTypeCodes","res","enumMap","handleQueryBusinessOrgList","orgTypeEk","parentBizCode","resolve","console","handleOlDataRow","itemObj","handleOldTotalData","toFixed","handleGetLeafTypeList","option","onQuery","levelCode","pageNo","tranYear","applyType","leafFormCode","query","then","catch","finally","totalParams","fieldList","detailData","handleLeafTypeName","typeCd","checked","JSON"],"mappings":"kHAAA,W,kECAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,eAAe,CAACE,MAAM,CAAC,OAAS,SAAS,CAACF,EAAG,sBAAsB,CAACA,EAAG,gBAAgB,CAACA,EAAG,qBAAqB,CAACA,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQ,WAAW,KAAO,YAAY,aAAa,UAAU,IAAI,IAAI,GAAGF,EAAG,oBAAoB,CAACA,EAAG,WAAW,CAACE,MAAM,CAAC,MAAO,IAAQ,CAACF,EAAG,mBAAmB,CAACA,EAAG,iBAAiB,CAACE,MAAM,CAAC,SAAW,GAAG,OAAS,IAAI,CAACF,EAAG,sBAAsB,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACN,EAAIO,GAAG,IAAIP,EAAIQ,GAAGP,KAAKQ,SAAS,OAAOL,EAAG,sBAAsB,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACN,EAAIO,GAAG,IAAIP,EAAIQ,GAAGP,KAAKS,iBAAiBN,EAAG,sBAAsB,CAACE,MAAM,CAAC,MAAQ,UAAU,CAACN,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIW,UAAUC,iBAAiB,OAAOR,EAAG,sBAAsB,CAACE,MAAM,CAAC,MAAQ,YAAY,CAACN,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIW,UAAUE,YAAY,OAAOT,EAAG,sBAAsB,CAACE,MAAM,CAAC,MAAQ,YAAY,CAACN,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIW,UAAUG,UAAU,OAAOV,EAAG,sBAAsB,CAACE,MAAM,CAAC,MAAQ,YAAY,CAACN,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIW,UAAUI,UAAU,OAAOX,EAAG,sBAAsB,CAACE,MAAM,CAAC,MAAQ,YAAY,CAACN,EAAIO,GAAG,IAAIP,EAAIQ,GAAGR,EAAIW,UAAUK,YAAY,OAAOZ,EAAG,sBAAsB,CAACE,MAAM,CAAC,MAAQ,OAAO,IAAI,GAAGF,EAAG,mBAAmB,CAACA,EAAG,iBAAiB,CAACE,MAAM,CAAC,aAAc,GAAMW,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAImB,MAAMC,MAAMC,WAAW,IAAI,MAAQrB,EAAIsB,UAAU,CAAClB,EAAG,gBAAgB,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACF,EAAG,gBAAgB,CAACE,MAAM,CAAC,MAAQ,SAAS,MAAO,EAAM,QAAS,EAAM,UAAYN,EAAIuB,wBAAwBN,GAAG,CAAC,GAAKjB,EAAIwB,eAAeC,MAAM,CAACC,MAAO1B,EAAI2B,WAAuB,aAAEC,SAAS,SAAUC,GAAM7B,EAAI8B,KAAK9B,EAAI2B,WAAY,eAAgBE,IAAME,WAAW,8BAA8B,GAAG3B,EAAG,gBAAgB,CAACE,MAAM,CAAC,MAAQ,SAAS,CAACF,EAAG,YAAY,CAACE,MAAM,CAAC,WAAa,GAAG,WAAa,GAAG,YAAc,OAAOW,GAAG,CAAC,OAASjB,EAAIgC,uBAAuBP,MAAM,CAACC,MAAO1B,EAAI2B,WAAuB,aAAEC,SAAS,SAAUC,GAAM7B,EAAI8B,KAAK9B,EAAI2B,WAAY,eAAgBE,IAAME,WAAW,4BAA4B/B,EAAIiC,GAAIjC,EAAgB,cAAE,SAASkC,GAAY,OAAO9B,EAAG,kBAAkB,CAAC+B,IAAID,EAAWE,cAAc,CAACpC,EAAIO,GAAG,IAAIP,EAAIQ,GAAG0B,EAAWxB,cAAc,UAAS,IAAI,IAAI,GAAGN,EAAG,eAAe,GAAGA,EAAG,kBAAkB,CAACA,EAAG,gBAAgB,CAACA,EAAG,sBAAsB,CAACA,EAAG,UAAU,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,OAAO,CAACJ,EAAIO,GAAG,SAASH,EAAG,YAAY,CAACiC,YAAY,CAAC,MAAQ,SAAS/B,MAAM,CAAC,WAAa,GAAG,WAAa,GAAG,YAAc,OAAOW,GAAG,CAAC,OAASjB,EAAIsC,iBAAiBb,MAAM,CAACC,MAAO1B,EAAc,WAAE4B,SAAS,SAAUC,GAAM7B,EAAIuC,WAAWV,GAAKE,WAAW,eAAe/B,EAAIiC,GAAIjC,EAAkB,gBAAE,SAASuC,GAAY,OAAOnC,EAAG,kBAAkB,CAAC+B,IAAII,EAAWC,cAAc,CAACxC,EAAIO,GAAG,IAAIP,EAAIQ,GAAG+B,EAAWE,gBAAgB,UAAS,IAAI,MAAM,IAAI,IAAI,GAAGrC,EAAG,gBAAgB,CAACA,EAAG,WAAW,CAACsC,IAAI,QAAQpC,MAAM,CAAC,OAAS,GAAG,OAAS,OAAO,MAAO,EAAM,WAAaN,EAAI2C,WAAW,KAAO3C,EAAI4C,UAAUC,KAAK,QAAU7C,EAAI8C,QAAQ,wBAAwB,IAAI7B,GAAG,CAAC,cAAcjB,EAAI+C,iBAAiB,eAAe/C,EAAIgD,eAAe,kBAAkBhD,EAAIiD,kBAAkB,CAAC7C,EAAG,eAAe,CAACE,MAAM,CAAC,KAAO,WAAW,MAAQ,KAAK,MAAQ,YAAYF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,KAAK,KAAO,MAAM,MAAQ,KAAK,MAAQ,YAAYF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,eAAe,MAAQ,OAAO,MAAQ,OAAO,YAAY,OAAO4C,YAAYlD,EAAImD,GAAG,CAAC,CAAChB,IAAI,UAAUiB,GAAG,SAASV,GAC/zG,IAAIW,EAAMX,EAAIW,IACd,MAAO,CAACjD,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,QAAQW,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAIsD,gBAAgBD,MAAQ,CAACrD,EAAIO,GAAGP,EAAIQ,GAAG6C,EAAIE,wBAAwBnD,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,kBAAkB,MAAQ,MAAM,MAAQ,QAAQ,YAAY,SAASF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,aAAa,MAAQ,QAAQ,MAAQ,QAAQ,YAAY,SAASF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,WAAW,MAAQ,SAAS,MAAQ,QAAQ,YAAY,SAASF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,WAAW,MAAQ,SAAS,MAAQ,QAAQ,YAAY,SAASF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,aAAa,MAAQ,SAAS,MAAQ,QAAQ,YAAY,SAASF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,KAAK,MAAQ,SAAS,MAAQ,MAAM,MAAQ,SAAS4C,YAAYlD,EAAImD,GAAG,CAAC,CAAChB,IAAI,UAAUiB,GAAG,SAASV,GACpxB,IAAIW,EAAMX,EAAIW,IACd,MAAO,CAACjD,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,QAAQW,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOlB,EAAIwD,SAASH,MAAQ,CAACrD,EAAIO,GAAG,gBAAgB,IAAI,IAAI,GAAGH,EAAG,iBAAiB,CAACsC,IAAI,mBAAmB,IAAI,IACrLe,EAAkB,G,yDCLlB,G,sEAAS,WAAa,IAAIzD,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,YAAY,CAACsD,YAAY,eAAepD,MAAM,CAAC,MAAQ,KAAK,QAAUN,EAAI2D,QAAQ,KAAO,SAAS1C,GAAG,CAAC,MAAQjB,EAAI4D,UAAU,CAACxD,EAAG,eAAe,CAACE,MAAM,CAAC,OAAS,SAAS,CAACF,EAAG,sBAAsB,CAACA,EAAG,gBAAgB,CAACA,EAAG,qBAAqB,CAACA,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQ,OAAO,KAAO,YAAY,aAAa,UAAU,IAAI,IAAI,GAAGF,EAAG,oBAAoB,CAACA,EAAG,WAAW,CAACA,EAAG,gBAAgB,CAACA,EAAG,cAAc,CAACA,EAAG,YAAY,CAACA,EAAG,WAAW,CAACsC,IAAI,QAAQpC,MAAM,CAAC,OAAS,GAAG,KAAON,EAAI4C,UAAU,QAAU5C,EAAI8C,QAAQ,aAAa,GAAG,cAAc,GAAG,gBAAgB9C,EAAI6D,eAAe,CAACzD,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,KAAK,KAAO,MAAM,MAAQ,KAAK,MAAQ,YAAYF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,eAAe,MAAQ,OAAO,MAAQ,OAAO,YAAY,SAASF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,eAAe,MAAQ,OAAO,MAAQ,QAAQ,YAAY,SAASF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,WAAW,MAAQ,OAAO,MAAQ,OAAO,MAAQ,OAAO4C,YAAYlD,EAAImD,GAAG,CAAC,CAAChB,IAAI,UAAUiB,GAAG,SAASV,GACjlC,IAAIW,EAAMX,EAAIW,IACd,OAAOrD,EAAIiC,GAAIjC,EAAgB,cAAE,SAAS8D,GAAa,OAAO1D,EAAG,MAAM,CAAC+B,IAAI2B,EAAYC,SAAS,CAAEV,EAAIW,WAAaF,EAAYC,QAAS3D,EAAG,OAAO,CAACJ,EAAIO,GAAG,IAAIP,EAAIQ,GAAGsD,EAAYG,SAASjE,EAAIkE,gBAAe9D,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,OAAO,MAAQ,aAAa,MAAQ,QAAQ,MAAQ,SAASF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,aAAa,MAAQ,SAAS,MAAQ,QAAQ,MAAQ,UAAU,IAAI,IAAI,IAAI,IAAI,IAAI,GAAGF,EAAG,sBAAsB,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACF,EAAG,UAAU,CAACA,EAAG,WAAW,CAACa,GAAG,CAAC,MAAQjB,EAAI4D,UAAU,CAAC5D,EAAIO,GAAG,SAAS,IAAI,IAAI,IAAI,KACriB,EAAkB,GC+DP,G,oBAAA,CACf0D,4BACAE,cACAC,KAHA,WAIA,OACAT,WACAhC,YACAS,kBACAiC,mBACAC,aAGA7D,WACAqC,WACAyB,cACAC,cACA,CAAApC,kBAAA1B,mBACA,CAAA0B,kBAAA1B,wBACA,CAAA0B,oBAAA1B,2BAEA+D,cACAC,WACAC,gBACA,CAAAnC,eAAAC,oBAAAmC,eACA,CAAApC,gBAAAC,mBAAAmC,eACA,CAAApC,iBAAAC,oBAAAmC,gBAGAC,gBACAjC,WAGAC,WAKAiC,QArCA,WAsCA,iDACA,sBAGAC,SAGAC,KAHA,SAGAZ,GACA,gBACA,sBACA,iBACA,sCAIAa,OAXA,SAWAC,EAAAC,GACA,QAIA,OAHAD,uBACAE,mBAEA,cAGAvB,aAnBA,YAmBA,uBAAI,EAAJ,OACA,OACAwB,qBACA,aACA,KAEA,oCACA,uBAEA,UAMAzB,QAlCA,WAmCA,kBACA,oBChJua,I,YCOna0B,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,yCC8HA,GACfrB,uBACAE,YACAoB,gBACAC,kBAEApB,KANA,WAOA,OACAqB,cACAnB,YACAoB,QACA/D,YACAgE,oBACAvD,gBACA4B,YACA4B,QACAC,eAEAC,aACAvD,aACA9B,WACAqC,WACAyB,cACAC,gBACAuB,mBACAtB,cACAuB,gBACArF,aACAD,gBACAuF,sBACAC,0BACAC,cACA,YACA,SACA,SACA,SACA,SACA,UAEAxB,gBACA,CAAAnC,eAAAC,oBAAAmC,eACA,CAAApC,gBAAAC,mBAAAmC,gBAGAwB,cACAC,WACAC,qBACAC,wBACAC,eACA3B,gBAEA4B,mBAEAC,eACAC,qBACAC,gBACAzE,cACA0E,qBAGAC,YACApC,WACAqC,UACAC,WACArE,YACAsE,aACAC,YACAC,SAEAvE,WAGAC,WAIAuE,UACAC,UADA,WAEA,0CAGAvC,QAjFA,WAiFA,6LACAwC,EAAA,gCAAAA,QACA,kBACAC,EAAA,iBACAnD,EAAA,CACAmD,iBALA,SAOA,kCAPA,cAOAC,EAPA,OAQAC,GAAA,2CACA5C,GAAA,gDACA,iBAGA,8DACA,8DACA,8DACA,iHACA,qGACA,6GAlBA,UAoBA,+BApBA,QAsBA,oCAtBA,+CAyBAE,SAEA2C,2BAFA,WAEA,mKACAX,EAAA,CACAzC,mBACAqD,oBACAvB,eACAwB,yBALA,SAOA,wCAPA,OAOAJ,EAPA,OAQA,6BARA,8CAWAjG,uBAbA,WAaA,WACA,gCACA,qEACAsG,SAKAvE,gBArBA,SAqBAD,GACA,sBACA,gBACA,gCACA,kBACAyE,mDACA,sCACAA,mDACA,gBACA,oBAEA,kCAIA9F,sBApCA,WAqCA,+EAGAM,gBAxCA,WAwCA,WAEA,8CACAyF,uBACA,QACAC,8DACAA,uDAGA,oDAGAC,mBACAA,mCACAC,QAAA,GACAD,uDAEA,iBACA,uBAGAlF,iBA7DA,SA6DAkE,EAAAC,GAAA,2JACA,0BACA,wBACA,oCAHA,SAIA,0BAJA,8CAQAiB,sBArEA,WAqEA,6KACA,sBADA,OACA,SADA,gCAEA,uCAFA,OAEAX,EAFA,OAGA3E,GAAA,wCACA,mCACA,eACAA,WAAAnC,kBAAA0B,kBAEA,iBACA,iCACA,8BACA,4BACA,yCACA,qBACA,MAdA,OAoBA,4BACAA,EAAA,kBAAAA,aACA,eACA,4BACA,+CA6BA,YArDA,+CAwDAZ,cA7HA,SA6HA4G,GACA,6DACA,4BACAN,sCAGAO,QAnIA,WAmIA,6KACA,oDACA,aAEAjC,EAAA,8CAEA,oBACA0B,yBACAQ,EAAA,kBACA5C,EAAAU,QACAhC,EAAA,CACAmE,+BACArB,+BACA9E,uCACAuD,qEACA6C,mBACAC,kBACAC,mBACAhD,OACA4C,aAEAR,8EArBA,UAsBA,4BACAa,MAAAvE,GACAwE,MAAA,YACA,iBACA,+BACA,8CAGAC,OAAA,YACAf,kBAEAgB,SAAA,WACA,aACA,qBAnCA,eAsCAC,EAAA,CACA3G,uCACAuD,qEACA+C,mBACAF,mBACAC,kBACA/C,OACA4C,aAEA,WA/CA,UAgDA,8CAhDA,QAgDA3H,EAhDA,OAiDA,aACA,uBACAmH,+CACA,6CACA,oBACAkB,EAAA,uDACA,mBACAA,uBACA,+DAGAA,uBACA,+DA7DA,+CAmEAxF,SAtMA,SAsMAH,GAAA,qKACA0D,EAAA,EAAAA,OACAA,8BAFA,SAGA,2CAHA,OAGAkC,EAHA,OAIAnB,eACA1D,EAAA,CACAxB,YACAiC,6BAEA,8BATA,8CAaAvD,QAnNA,WAoNA,6CACA,0CACA,+BACA,8BACA,2BACA,0BACA,2BAEA,6BACA,6DACA,uCACA,0CACAwG,4DACA,gCAIAoB,mBArOA,SAqOAC,GACA,uEACA,mDAIAnG,eA3OA,YA2OA,gBAAI,EAAJ,UACA8E,gFACA,qBAIA7E,gBAjPA,YAiPA,gBAAI,EAAJ,UACA6E,sBACAsB,EADA,uCACAC,oBAEA,uBC/e+Z,ICQ3Z,G,UAAY,eACd,EACAtJ,EACA0D,GACA,EACA,KACA,WACA,OAIa,e","file":"js/chunk-1615cf38.c0b25cf8.js","sourcesContent":["export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&id=72f57876&prod&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-container',{attrs:{\"height\":\"100%\"}},[_c('ec-container-header',[_c('ec-panel-item',[_c('ec-panel-item-left',[_c('ec-header',{attrs:{\"title\":\"收购码包分配领用\",\"icon\":\"onetomany\",\"color-code\":\"008\"}})],1)],1)],1),_c('ec-container-body',[_c('ec-panel',{attrs:{\"auto\":false}},[_c('ec-panel-toolbar',[_c('a-descriptions',{attrs:{\"bordered\":\"\",\"column\":4}},[_c('a-descriptions-item',{attrs:{\"label\":\"调拨年度\"}},[_vm._v(\" \"+_vm._s(this.nowYear)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"烟叶类型\"}},[_vm._v(\" \"+_vm._s(this.leafTypeName))]),_c('a-descriptions-item',{attrs:{\"label\":\"省计划总量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.planTotalWeight)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"省剩余计划总量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.leftWeight)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"省申请码包数量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.applyNum)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"省分配码包数量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.allotNum)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"省领用码包数量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.collectNum)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"\"}})],1)],1),_c('ec-panel-toolbar',[_c('ec-query-panel',{attrs:{\"defaultFold\":true},on:{\"query\":function($event){return _vm.$refs.table.pageAction(1)},\"reset\":_vm.onReset}},[_c('ec-query-item',{attrs:{\"label\":\"领用单位\"}},[_c('select-picker',{attrs:{\"title\":\"选择领用单位\",\"lazy\":false,\"search\":false,\"fetchData\":_vm.onFetchBusinessOrgList},on:{\"ok\":_vm.handleLevelEk},model:{value:(_vm.queryItems.applyOrgCode),callback:function ($$v) {_vm.$set(_vm.queryItems, \"applyOrgCode\", $$v)},expression:\"queryItems.applyOrgCode\"}})],1),_c('ec-query-item',{attrs:{\"label\":\"烟叶类型\"}},[_c('ec-select',{attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},on:{\"select\":_vm.handleVisibleTypeName},model:{value:(_vm.queryItems.leafTypeCode),callback:function ($$v) {_vm.$set(_vm.queryItems, \"leafTypeCode\", $$v)},expression:\"queryItems.leafTypeCode\"}},_vm._l((_vm.leafTypeList),function(leafTypeEk){return _c('a-select-option',{key:leafTypeEk.leafTypeCode},[_vm._v(\" \"+_vm._s(leafTypeEk.leafTypeName)+\" \")])}),1)],1)],1),_c('ec-divider')],1),_c('ec-panel-header',[_c('ec-panel-item',[_c('ec-panel-item-right',[_c('a-space',{attrs:{\"size\":15}},[_c('span',[_vm._v(\"重量单位：\"),_c('ec-select',{staticStyle:{\"width\":\"150px\"},attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},on:{\"select\":_vm.handleUnitParse},model:{value:(_vm.weightUnit),callback:function ($$v) {_vm.weightUnit=$$v},expression:\"weightUnit\"}},_vm._l((_vm.weightUnitList),function(weightUnit){return _c('a-select-option',{key:weightUnit.weightUnitCd},[_vm._v(\" \"+_vm._s(weightUnit.weightUnitName)+\" \")])}),1)],1)])],1)],1)],1),_c('ec-panel-body',[_c('ec-table',{ref:\"table\",attrs:{\"border\":\"\",\"height\":\"100%\",\"auto\":false,\"pagination\":_vm.pagination,\"data\":_vm.tableData.rows,\"loading\":_vm.loading,\"highlight-current-row\":\"\"},on:{\"page-action\":_vm.handlePagination,\"checkbox-all\":_vm.selectAllEvent,\"checkbox-change\":_vm.selectRowChange}},[_c('ec-table-col',{attrs:{\"type\":\"checkbox\",\"width\":\"50\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"title\":\"序号\",\"type\":\"seq\",\"width\":\"70\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"field\":\"applyOrgName\",\"title\":\"领用单位\",\"align\":\"left\",\"min-width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.handleDrillData(row)}}},[_vm._v(_vm._s(row.applyOrgName))])]}}])}),_c('ec-table-col',{attrs:{\"field\":\"planTotalWeight\",\"title\":\"计划量\",\"align\":\"right\",\"min-width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"leftWeight\",\"title\":\"剩余计划量\",\"align\":\"right\",\"min-width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"applyNum\",\"title\":\"申请码包数量\",\"align\":\"right\",\"min-width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"allotNum\",\"title\":\"分配码包数量\",\"align\":\"right\",\"min-width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"collectNum\",\"title\":\"领用码包数量\",\"align\":\"right\",\"min-width\":\"150\"}}),_c('ec-table-col',{attrs:{\"title\":\"操作\",\"align\":\"center\",\"width\":\"150\",\"fixed\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.onDetail(row)}}},[_vm._v(\"详细\")])]}}])})],1)],1)],1),_c('receive-detail',{ref:\"ReceiveDetail\"})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-drawer',{staticClass:\"ec-draw-form\",attrs:{\"title\":\"详细\",\"visible\":_vm.visible,\"size\":\"large\"},on:{\"close\":_vm.onclose}},[_c('ec-container',{attrs:{\"height\":\"100%\"}},[_c('ec-container-header',[_c('ec-panel-item',[_c('ec-panel-item-left',[_c('ec-header',{attrs:{\"title\":\"明细信息\",\"icon\":\"onetomany\",\"color-code\":\"008\"}})],1)],1)],1),_c('ec-container-body',[_c('ec-panel',[_c('ec-panel-body',[_c('ec-v-layout',[_c('ec-v-item',[_c('ec-table',{ref:\"table\",attrs:{\"border\":\"\",\"data\":_vm.tableData,\"loading\":_vm.loading,\"row-select\":\"\",\"show-footer\":\"\",\"footer-method\":_vm.footerMethod}},[_c('ec-table-col',{attrs:{\"title\":\"序号\",\"type\":\"seq\",\"width\":\"70\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"field\":\"applyOrgName\",\"title\":\"领用单位\",\"align\":\"left\",\"min-width\":\"180\"}}),_c('ec-table-col',{attrs:{\"field\":\"leafTypeName\",\"title\":\"烟叶类型\",\"align\":\"right\",\"min-width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"packType\",\"title\":\"包装类型\",\"align\":\"left\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn _vm._l((_vm.packTypeList),function(packTypeObj){return _c('div',{key:packTypeObj.enumKey},[(row.packType === packTypeObj.enumKey)?_c('span',[_vm._v(\" \"+_vm._s(packTypeObj.name))]):_vm._e()])})}}])}),_c('ec-table-col',{attrs:{\"field\":\"spec\",\"title\":\"包装规格（KG/件）\",\"align\":\"right\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"collectNum\",\"title\":\"领用码包数量\",\"align\":\"right\",\"width\":\"150\"}})],1)],1)],1)],1)],1)],1),_c('ec-container-footer',{attrs:{\"fixed\":\"\"}},[_c('a-space',[_c('a-button',{on:{\"click\":_vm.onclose}},[_vm._v(\"关闭\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ec-drawer title=\"详细\" :visible=\"visible\" size=\"large\" @close=\"onclose\" class=\"ec-draw-form\">\r\n    <ec-container height=\"100%\">\r\n      <ec-container-header>\r\n        <ec-panel-item>\r\n          <ec-panel-item-left>\r\n            <ec-header title=\"明细信息\" icon=\"onetomany\" color-code=\"008\" />\r\n          </ec-panel-item-left>\r\n        </ec-panel-item>\r\n      </ec-container-header>\r\n      <ec-container-body>\r\n        <ec-panel>\r\n          <ec-panel-body>\r\n            <ec-v-layout>\r\n              <ec-v-item>\r\n                <ec-table\r\n                  ref=\"table\"\r\n                  border\r\n                  :data=\"tableData\"\r\n                  :loading=\"loading\"\r\n                  row-select\r\n                  show-footer\r\n                  :footer-method=\"footerMethod\"\r\n                >\r\n                  <ec-table-col title=\"序号\" type=\"seq\" width=\"70\" align=\"center\" />\r\n                  <ec-table-col\r\n                    field=\"applyOrgName\"\r\n                    title=\"领用单位\"\r\n                    align=\"left\"\r\n                    min-width=\"180\"\r\n                  />\r\n\r\n                  <ec-table-col\r\n                    field=\"leafTypeName\"\r\n                    title=\"烟叶类型\"\r\n                    align=\"right\"\r\n                    min-width=\"150\"\r\n                  />\r\n                  <ec-table-col field=\"packType\" title=\"包装类型\" align=\"left\" width=\"150\">\r\n                    <template #default=\"{ row }\">\r\n                      <div v-for=\"packTypeObj in packTypeList\" :key=\"packTypeObj.enumKey\">\r\n                        <span v-if=\"row.packType === packTypeObj.enumKey\">\r\n                          {{ packTypeObj.name }}</span\r\n                        >\r\n                      </div>\r\n                    </template>\r\n                  </ec-table-col>\r\n                  <ec-table-col field=\"spec\" title=\"包装规格（KG/件）\" align=\"right\" width=\"150\" />\r\n\r\n                  <ec-table-col field=\"collectNum\" title=\"领用码包数量\" align=\"right\" width=\"150\" />\r\n                </ec-table>\r\n              </ec-v-item>\r\n            </ec-v-layout>\r\n          </ec-panel-body>\r\n        </ec-panel>\r\n      </ec-container-body>\r\n      <ec-container-footer fixed>\r\n        <a-space>\r\n          <a-button @click=\"onclose\">关闭</a-button>\r\n        </a-space>\r\n      </ec-container-footer>\r\n    </ec-container>\r\n  </ec-drawer>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ExecutionEnterManage',\r\n  components: {},\r\n  data() {\r\n    return {\r\n      visible: false,\r\n      queryItems: {\r\n        leafTypeCode: '10',\r\n        submitStateFlag: true,\r\n        busiYear: '',\r\n      },\r\n\r\n      nowYear: '',\r\n      loading: false,\r\n      leafTypeCd: '',\r\n      leafTypeList: [\r\n        { leafTypeCode: '10', leafTypeName: '烤烟' },\r\n        { leafTypeCode: '20', leafTypeName: '晾晒烟(全部)' },\r\n        { leafTypeCode: '2013', leafTypeName: '晾晒烟(雪茄烟叶)' },\r\n      ],\r\n      oldDataRow: [],\r\n      orgCode: '',\r\n      weightUnitList: [\r\n        { weightUnitCd: 1, weightUnitName: '公斤', isSelected: false },\r\n        { weightUnitCd: 50, weightUnitName: '担', isSelected: false },\r\n        { weightUnitCd: 500000, weightUnitName: '万担', isSelected: false },\r\n      ],\r\n\r\n      packTypeList: [],\r\n      tableData: {\r\n        // 数据表格\r\n        // totalRows: 0,\r\n        rows: [],\r\n      },\r\n    };\r\n  },\r\n\r\n  created() {\r\n    const { appCode } = this.$router.history.current.query;\r\n    this.appCode = appCode || 'CM'; // 获取当前登入信息\r\n  },\r\n\r\n  methods: {\r\n    // 数据初始化\r\n    // 显示推窗\r\n    show(data) {\r\n      this.visible = true;\r\n      const tableData = data.tableData || [];\r\n      this.tableData = tableData;\r\n      this.packTypeList = data.packTypeList || [];\r\n    },\r\n\r\n    // 合计数据的处理\r\n    sumNum(list, field) {\r\n      let count = 0;\r\n      list.forEach((item) => {\r\n        count += Number(item[field]);\r\n      });\r\n      return count.toFixed(2);\r\n    },\r\n    // 底部合计行\r\n    footerMethod({ columns, data }) {\r\n      return [\r\n        columns.map((column, columnIndex) => {\r\n          if (columnIndex === 0) {\r\n            return '合计';\r\n          }\r\n          if (['collectNum'].includes(column.property)) {\r\n            return this.sumNum(data, column.property);\r\n          }\r\n          return null;\r\n        }),\r\n      ];\r\n    },\r\n\r\n    // 取消\r\n    onclose() {\r\n      this.tableData = [];\r\n      this.visible = false;\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReceiveDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ReceiveDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ReceiveDetail.vue?vue&type=template&id=7801bc3e&\"\nimport script from \"./ReceiveDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./ReceiveDetail.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <ec-container height=\"100%\">\r\n    <ec-container-header>\r\n      <ec-panel-item>\r\n        <ec-panel-item-left>\r\n          <ec-header title=\"收购码包分配领用\" icon=\"onetomany\" color-code=\"008\" />\r\n        </ec-panel-item-left>\r\n      </ec-panel-item>\r\n    </ec-container-header>\r\n    <ec-container-body>\r\n      <ec-panel :auto=\"false\">\r\n        <ec-panel-toolbar>\r\n          <a-descriptions bordered :column=\"4\">\r\n            <a-descriptions-item label=\"调拨年度\">\r\n              {{ this.nowYear }}\r\n            </a-descriptions-item>\r\n            <a-descriptions-item label=\"烟叶类型\"> {{ this.leafTypeName }}</a-descriptions-item>\r\n            <a-descriptions-item label=\"省计划总量\">\r\n              {{ totalData.planTotalWeight }}\r\n            </a-descriptions-item>\r\n\r\n            <a-descriptions-item label=\"省剩余计划总量\">\r\n              {{ totalData.leftWeight }}\r\n            </a-descriptions-item>\r\n            <a-descriptions-item label=\"省申请码包数量\">\r\n              {{ totalData.applyNum }}\r\n            </a-descriptions-item>\r\n            <a-descriptions-item label=\"省分配码包数量\">\r\n              {{ totalData.allotNum }}\r\n            </a-descriptions-item>\r\n            <a-descriptions-item label=\"省领用码包数量\">\r\n              {{ totalData.collectNum }}\r\n            </a-descriptions-item>\r\n            <a-descriptions-item label=\"\"> </a-descriptions-item>\r\n          </a-descriptions>\r\n        </ec-panel-toolbar>\r\n\r\n        <ec-panel-toolbar>\r\n          <ec-query-panel :defaultFold=\"true\" @query=\"$refs.table.pageAction(1)\" @reset=\"onReset\">\r\n            <!-- 本级及下级单位 -->\r\n            <ec-query-item label=\"领用单位\">\r\n              <select-picker\r\n                title=\"选择领用单位\"\r\n                :lazy=\"false\"\r\n                :search=\"false\"\r\n                :fetchData=\"onFetchBusinessOrgList\"\r\n                v-model=\"queryItems.applyOrgCode\"\r\n                @ok=\"handleLevelEk\"\r\n              />\r\n            </ec-query-item>\r\n\r\n            <ec-query-item label=\"烟叶类型\">\r\n              <ec-select\r\n                showSearch\r\n                allowClear\r\n                placeholder=\"请选择\"\r\n                v-model=\"queryItems.leafTypeCode\"\r\n                @select=\"handleVisibleTypeName\"\r\n              >\r\n                <a-select-option v-for=\"leafTypeEk in leafTypeList\" :key=\"leafTypeEk.leafTypeCode\">\r\n                  {{ leafTypeEk.leafTypeName }}\r\n                </a-select-option>\r\n              </ec-select>\r\n            </ec-query-item>\r\n          </ec-query-panel>\r\n          <ec-divider />\r\n        </ec-panel-toolbar>\r\n        <ec-panel-header>\r\n          <ec-panel-item>\r\n            <ec-panel-item-right>\r\n              <a-space :size=\"15\">\r\n                <span\r\n                  >重量单位：<ec-select\r\n                    showSearch\r\n                    allowClear\r\n                    placeholder=\"请选择\"\r\n                    v-model=\"weightUnit\"\r\n                    @select=\"handleUnitParse\"\r\n                    style=\"width: 150px\"\r\n                  >\r\n                    <a-select-option\r\n                      v-for=\"weightUnit in weightUnitList\"\r\n                      :key=\"weightUnit.weightUnitCd\"\r\n                    >\r\n                      {{ weightUnit.weightUnitName }}\r\n                    </a-select-option>\r\n                  </ec-select></span\r\n                >\r\n              </a-space>\r\n            </ec-panel-item-right>\r\n          </ec-panel-item>\r\n        </ec-panel-header>\r\n\r\n        <ec-panel-body>\r\n          <ec-table\r\n            ref=\"table\"\r\n            border\r\n            height=\"100%\"\r\n            :auto=\"false\"\r\n            @page-action=\"handlePagination\"\r\n            :pagination=\"pagination\"\r\n            :data=\"tableData.rows\"\r\n            @checkbox-all=\"selectAllEvent\"\r\n            @checkbox-change=\"selectRowChange\"\r\n            :loading=\"loading\"\r\n            highlight-current-row\r\n          >\r\n            <ec-table-col type=\"checkbox\" width=\"50\" align=\"center\"></ec-table-col>\r\n            <ec-table-col title=\"序号\" type=\"seq\" width=\"70\" align=\"center\" />\r\n            <ec-table-col field=\"applyOrgName\" title=\"领用单位\" align=\"left\" min-width=\"150\">\r\n              <template #default=\"{ row }\">\r\n                <a-button type=\"link\" @click=\"handleDrillData(row)\">{{\r\n                  row.applyOrgName\r\n                }}</a-button>\r\n              </template>\r\n            </ec-table-col>\r\n\r\n            <ec-table-col field=\"planTotalWeight\" title=\"计划量\" align=\"right\" min-width=\"150\" />\r\n\r\n            <ec-table-col field=\"leftWeight\" title=\"剩余计划量\" align=\"right\" min-width=\"150\" />\r\n            <ec-table-col field=\"applyNum\" title=\"申请码包数量\" align=\"right\" min-width=\"150\" />\r\n            <ec-table-col field=\"allotNum\" title=\"分配码包数量\" align=\"right\" min-width=\"150\" />\r\n            <ec-table-col field=\"collectNum\" title=\"领用码包数量\" align=\"right\" min-width=\"150\" />\r\n\r\n            <ec-table-col title=\"操作\" align=\"center\" width=\"150\" fixed=\"right\">\r\n              <template #default=\"{ row }\">\r\n                <a-button type=\"link\" @click=\"onDetail(row)\">详细</a-button>\r\n              </template>\r\n            </ec-table-col>\r\n          </ec-table>\r\n        </ec-panel-body>\r\n      </ec-panel>\r\n\r\n      <receive-detail ref=\"ReceiveDetail\"></receive-detail>\r\n    </ec-container-body>\r\n  </ec-container>\r\n</template>\r\n\r\n<script>\r\nimport ReceiveDetail from './ReceiveDetail.vue';\r\nimport { SelectPicker } from '@euler-material/ecm-ui';\r\nimport { treeFormatList } from '@euler-material/ecm-utils';\r\nimport _ from 'lodash';\r\n\r\nexport default {\r\n  name: 'ExecutionManage',\r\n  components: {\r\n    ReceiveDetail,\r\n    SelectPicker,\r\n  },\r\n  data() {\r\n    return {\r\n      objectData: {},\r\n      busiYear: '',\r\n      flag: false,\r\n      queryItems: {\r\n        applyOrgCode: undefined,\r\n        leafTypeCode: '',\r\n        packType: '',\r\n        spec: '',\r\n        applyState: '',\r\n      },\r\n      isVisible: true,\r\n      weightUnit: 1,\r\n      nowYear: '',\r\n      loading: false,\r\n      leafTypeCd: '',\r\n      leafTypeList: [],\r\n      oldLeafTypeList: [],\r\n      oldDataRow: [], // 拷贝的旧数据，单位切换的时候要在旧的数据上转换\r\n      oldTotalData: [], // 拷贝的旧上级数据，单位切换的时候要在旧的数据上转换\r\n      totalData: {}, // 合计的数据\r\n      leafTypeName: '',\r\n      beforeLeafTypeName: '',\r\n      businesOrgCodeTemp: undefined,\r\n      levelCodeObj: {\r\n        1: 'country',\r\n        2: 'prov',\r\n        3: 'citc',\r\n        4: 'couc',\r\n        5: 'stac',\r\n        6: 'sstc',\r\n      },\r\n      weightUnitList: [\r\n        { weightUnitCd: 1, weightUnitName: '公斤', isSelected: false },\r\n        { weightUnitCd: 50, weightUnitName: '担', isSelected: false },\r\n        // { weightUnitCd: 500000, weightUnitName: '万担', isSelected: false },\r\n      ],\r\n      orgLevelEk: '',\r\n      isDrill: false,\r\n      defaultOrgLevelEk: '',\r\n      changeTreeOrgLevelEk: '',\r\n      orgCodeList: [],\r\n      packTypeList: [],\r\n      // 商业单位\r\n      businessOrgList: [],\r\n      // 组织字段重置\r\n      replaceFields: {\r\n        pkey: 'parentBizCode',\r\n        title: 'orgName',\r\n        key: 'bizCode',\r\n        children: 'children',\r\n      },\r\n      // 用户信息\r\n      userInfo: {},\r\n      orgCode: '',\r\n      params: {},\r\n      bizCode: '',\r\n      pagination: {\r\n        pageNumber: 1,\r\n        pageSize: 10,\r\n        total: 0,\r\n      },\r\n      tableData: {\r\n        // 数据表格\r\n        // totalRows: 0,\r\n        rows: [],\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    appConfig() {\r\n      return this.$store.getters.getAppConfig;\r\n    },\r\n  },\r\n  async created() {\r\n    const { appCode } = this.$router.history.current.query;\r\n    this.appCode = appCode || 'CM'; // 获取当前登入信息\r\n    const enumTypeCodes = ['PC_PACK_TYPE'];\r\n    const data = {\r\n      enumTypeCodes,\r\n    };\r\n    const res = await this.$apis.enum.index.getEnumType(data);\r\n    const enumMap = res?.enumMap || {};\r\n    const packTypeList = enumMap?.PC_PACK_TYPE || [];\r\n    this.packTypeList = packTypeList;\r\n    // await this.handleQueryBusinessOrgList();\r\n\r\n    this.bizCode = this.appConfig?.bizCode;\r\n    this.orgCode = this.appConfig?.orgCode; // todo 写死数据\r\n    this.orgName = this.appConfig?.orgName;\r\n    this.queryItems.tranYear = this.appConfig?.yearValueMap?.SM_YEAR;\r\n    this.nowYear = this.appConfig?.yearValueMap?.SM_YEAR;\r\n    this.visibleTranYear = this.appConfig?.yearValueMap?.SM_YEAR;\r\n\r\n    await this.handleQueryBusinessOrgList();\r\n\r\n    this.queryItems.applyOrgCode = this.bizCode;\r\n    // this.handleStore();\r\n  },\r\n  methods: {\r\n    // 查询商业单位\r\n    async handleQueryBusinessOrgList() {\r\n      const params = {\r\n        busiYear: this.nowYear,\r\n        orgTypeEk: 'TOBACCO',\r\n        orgLevelEk: '6',\r\n        parentBizCode: this.bizCode,\r\n      };\r\n      const res = await this.$apis.common.index.queryTreeByCode(params);\r\n      this.businessOrgList = res.rows || [];\r\n    },\r\n    // 更新商业单位\r\n    onFetchBusinessOrgList() {\r\n      return new Promise((resolve) => {\r\n        const data = treeFormatList(this.businessOrgList, this.replaceFields);\r\n        resolve(data);\r\n      });\r\n    },\r\n\r\n    // 处理钻取事件\r\n    handleDrillData(row) {\r\n      const { orgLevelEk } = this;\r\n      if (Number(orgLevelEk) < 6) {\r\n        const drillOrgLevel = Number(this.orgLevelEk) + 1;\r\n        this.orgLevelEk = drillOrgLevel;\r\n        console.log(`钻取前：${this.drillApplyOrgCode}`);\r\n        this.drillApplyOrgCode = row.applyOrgCode;\r\n        console.log(`钻取后：${this.drillApplyOrgCode}`);\r\n        this.isDrill = true;\r\n        this.onQuery();\r\n      } else {\r\n        this.$message.error('末级无法继续钻取！');\r\n      }\r\n    },\r\n\r\n    handleVisibleTypeName() {\r\n      this.beforeLeafTypeName = this.handleLeafTypeName(this.queryItems.leafTypeCode);\r\n    },\r\n    // 处理单位转换\r\n    handleUnitParse() {\r\n      //  列表的单位转换\r\n      const handleOlDataRow = JSON.parse(JSON.stringify(this.oldDataRow));\r\n      handleOlDataRow.forEach((item) => {\r\n        const itemObj = item;\r\n        itemObj.planTotalWeight = (item.planTotalWeight / this.weightUnit).toFixed(2);\r\n        itemObj.leftWeight = (item.leftWeight / this.weightUnit).toFixed(2);\r\n      });\r\n\r\n      const handleOldTotalData = JSON.parse(JSON.stringify(this.oldTotalData));\r\n\r\n      // 汇总数据   planTotalWeight   leftWeight\r\n      handleOldTotalData.planTotalWeight = (\r\n        handleOldTotalData.planTotalWeight / this.weightUnit\r\n      ).toFixed(2);\r\n      handleOldTotalData.leftWeight = (handleOldTotalData.leftWeight / this.weightUnit).toFixed(2);\r\n\r\n      this.totalData = handleOldTotalData;\r\n      this.tableData.rows = handleOlDataRow;\r\n    },\r\n\r\n    async handlePagination(pageNumber, pageSize) {\r\n      this.pagination.pageNumber = pageNumber;\r\n      this.pagination.pageSize = pageSize;\r\n      this.orgLevelEk = this.changeTreeOrgLevelEk;\r\n      await this.handleGetLeafTypeList();\r\n    },\r\n\r\n    // 获取烟叶类型数据\r\n    async handleGetLeafTypeList() {\r\n      if (!this.leafTypeList?.length) {\r\n        const res = await this.$apis.common.index.queryLeafType({});\r\n        const rows = res?.rows || [];\r\n        this.oldLeafTypeList = _.cloneDeep(rows);\r\n        if (rows && rows.length > 0) {\r\n          rows.unshift({ leafTypeName: '全部', leafTypeCode: '' });\r\n        }\r\n        this.leafTypeList = rows;\r\n        this.leafTypeList.some((item) => {\r\n          if (item.leafTypeName === '烤烟') {\r\n            this.leafTypeCd = item.leafTypeCode;\r\n            this.queryItems.leafTypeCode = item.leafTypeCode;\r\n            this.leafTypeName = '烤烟';\r\n            return true;\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      if (!this.queryItems.leafTypeCode) {\r\n        const { leafTypeCode } = this.leafTypeList[0];\r\n        this.leafTypeCd = leafTypeCode;\r\n        this.queryItems.leafTypeCode = leafTypeCode;\r\n        this.leafTypeName = this.leafTypeList[0].leafTypeName;\r\n      }\r\n      // if (!this.orgCode) {\r\n      //   const orgObj = await this.$apis.bim.curOrg.get({});\r\n      //   console.log(`当前用户信息：${JSON.stringify(orgObj)}`);\r\n      //   this.bizCode = orgObj?.bizCode;\r\n      //   this.orgCode = orgObj?.orgUniqueCode; // todo 写死数据\r\n      //   this.orgLevelEk = orgObj?.orgLevelEk;\r\n      //   console.log(`orgLevelEk:${this.orgLevelEk}`);\r\n      //   this.defaultOrgLevelEk = orgObj?.orgLevelEk;\r\n      //   this.changeTreeOrgLevelEk = orgObj?.orgLevelEk;\r\n      //   this.queryItems.applyOrgCode = this.bizCode;\r\n      //   // this.orgCodeList = [this.orgCode];\r\n      // }\r\n      // if (!this.queryItems.busiYear > 0) {\r\n      //   // 获取年度\r\n      //   const data = {\r\n      //     bizCode: this.appConfig.bizCode, // todo 写死的数据\r\n      //     appCode: this.appCode || 'CM',\r\n      //     yearTypeCode: 'SM_YEAR',\r\n      //   };\r\n      //   const busiYearObj = await this.$apis.bpm.executionEnter.getBuYear(data);\r\n      //   this.queryItems.busiYear = busiYearObj?.yearValue;\r\n      //   this.nowYear = busiYearObj?.yearValue;\r\n      // }\r\n\r\n      // if (!this.businessOrgList?.length) {\r\n      //   await this.handleQueryBusinessOrgList();\r\n      // }\r\n      this.onQuery();\r\n    },\r\n    // 点击领用单位，处理levelEk\r\n    handleLevelEk(option) {\r\n      const orgLevelEk = option?.selectOption[0].orgLevel;\r\n      this.changeTreeOrgLevelEk = orgLevelEk;\r\n      console.log(`orgLevelEk:${orgLevelEk}`);\r\n    },\r\n    // 数据初始化\r\n    async onQuery() {\r\n      this.leafTypeName = this.beforeLeafTypeName || this.leafTypeName;\r\n      this.loading = true;\r\n\r\n      const orgLevelEk = this.isDrill ? this.orgLevelEk : this.changeTreeOrgLevelEk;\r\n\r\n      this.isVisible = orgLevelEk === '1';\r\n      console.log(this.isVisible);\r\n      const levelCode = this.levelCodeObj[orgLevelEk];\r\n      const flag = orgLevelEk === '1';\r\n      const data = {\r\n        pageNo: this.pagination.pageNumber,\r\n        pageSize: this.pagination.pageSize,\r\n        leafTypeCode: this.queryItems.leafTypeCode,\r\n        applyOrgCode: this.isDrill ? this.drillApplyOrgCode : this.queryItems.applyOrgCode,\r\n        tranYear: this.nowYear,\r\n        applyType: 'BU_CP',\r\n        leafFormCode: '101',\r\n        flag,\r\n        levelCode,\r\n      };\r\n      console.log(`${JSON.stringify(data)};orgLevelEk:${this.orgLevelEk}`);\r\n      await this.$apis.pcm.buy.packReceive\r\n        .query(data)\r\n        .then((res) => {\r\n          const rows = res.rows || [];\r\n          this.pagination.total = res.totalRows;\r\n          this.oldDataRow = JSON.parse(JSON.stringify(rows));\r\n          // this.tableData.rows = rows;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        })\r\n        .finally(() => {\r\n          this.loading = false;\r\n          this.selectedRows = [];\r\n        });\r\n\r\n      const totalParams = {\r\n        leafTypeCode: this.queryItems.leafTypeCode,\r\n        applyOrgCode: this.isDrill ? this.drillApplyOrgCode : this.queryItems.applyOrgCode,\r\n        leafFormCode: '101',\r\n        tranYear: this.nowYear,\r\n        applyType: 'BU_CP',\r\n        flag,\r\n        levelCode,\r\n      };\r\n      this.params = totalParams;\r\n      const totalData = await this.$apis.pcm.buy.packReceive.queryTotalData(totalParams);\r\n      this.isDrill = false;\r\n      this.drillApplyOrgCode = '';\r\n      console.log(`汇总数据：${JSON.stringify(totalData)}`);\r\n      this.oldTotalData = JSON.parse(JSON.stringify(totalData));\r\n      this.handleUnitParse();\r\n      const fieldList = ['planTotalWeight', 'leftWeight', 'applyNum', 'allotNum'];\r\n      if (this.orgLevelEk === '1') {\r\n        fieldList.forEach((item) => {\r\n          this.$refs.table.showColumn(this.$refs.table.getColumnByField(item));\r\n        });\r\n      } else {\r\n        fieldList.forEach((item) => {\r\n          this.$refs.table.hideColumn(this.$refs.table.getColumnByField(item));\r\n        });\r\n      }\r\n    },\r\n\r\n    // 详细\r\n    async onDetail(row) {\r\n      const { params } = this;\r\n      params.applyOrgCode = row.applyOrgCode;\r\n      const detailData = await this.$apis.pcm.buy.packReceive.queryDetail(params);\r\n      console.log(params);\r\n      const data = {\r\n        tableData: detailData,\r\n        packTypeList: this.packTypeList,\r\n      };\r\n      this.$refs.ReceiveDetail.show(data);\r\n    },\r\n\r\n    // 重置\r\n    onReset() {\r\n      this.queryItems.leafTypeCode = this.leafTypeCd;\r\n      this.queryItems.applyOrgCode = this.orgCode;\r\n      this.queryItems.submitState = '';\r\n      this.queryItems.auditState = '';\r\n      this.queryItems.oprType = '';\r\n      this.queryItems.remark = '';\r\n      this.queryItems.orgName = '';\r\n\r\n      this.handleVisibleTypeName();\r\n      this.leafTypeName = this.beforeLeafTypeName || this.leafTypeName;\r\n      this.orgLevelEk = this.defaultOrgLevelEk;\r\n      this.changeTreeOrgLevelEk = this.orgLevelEk;\r\n      console.log(`----${JSON.stringify(this.orgLevelEk)}`);\r\n      this.$refs.table.pageAction(1);\r\n    },\r\n\r\n    // 根据编码翻译对应的名称\r\n    handleLeafTypeName(typeCd) {\r\n      const leafType = this.leafTypeList.find((item) => item.leafTypeCode === typeCd);\r\n      return leafType?.leafTypeName;\r\n    },\r\n\r\n    // 选中所有列表\r\n    selectAllEvent({ checked, records }) {\r\n      console.log(`${checked}-选中所有records包含选中的所以对象----${JSON.stringify(records)}`);\r\n      this.selectedRows = records;\r\n    },\r\n\r\n    // 选中列表\r\n    selectRowChange({ checked, records }) {\r\n      console.log(\r\n        `${checked}-选择改变时会把records包含选中的所以对象----${JSON.stringify(records)}`,\r\n      );\r\n      this.selectedRows = records;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.year {\r\n  font-size: 18px;\r\n  line-height: 22px;\r\n\r\n  color: #18191a;\r\n  font-weight: 700;\r\n  padding-top: 18px;\r\n  padding-right: 50px;\r\n  font-family: '微软雅黑 Bold', '微软雅黑', 'Microsoft YaHei', sans-serif;\r\n}\r\n.paddingTop {\r\n  padding-top: 15px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=72f57876&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=72f57876&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"72f57876\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}