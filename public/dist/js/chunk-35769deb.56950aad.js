(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35769deb"],{1408:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ec-container",{staticClass:"info",attrs:{height:"100%","color-code":"001",title:"基地单元衔接审核","show-title":""}},[a("ec-container-body",[a("ec-panel",{attrs:{auto:!1}},[a("ec-panel-toolbar",[a("ec-query-panel",{attrs:{defaultFold:!0},on:{query:e.onQuery,reset:e.resetHandle}},[a("ec-query-item",{attrs:{label:"基地单元名称"}},[a("a-input",{attrs:{placeholder:"请输入基地单元名称"},model:{value:e.query.baseCellName,callback:function(t){e.$set(e.query,"baseCellName","string"===typeof t?t.trim():t)},expression:"query.baseCellName"}})],1),a("ec-query-item",{attrs:{label:"审核状态"}},[a("ec-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择审核状态"},model:{value:e.query.aduitState,callback:function(t){e.$set(e.query,"aduitState","string"===typeof t?t.trim():t)},expression:"query.aduitState"}},[a("a-select-option",{key:"1"},[e._v("已审核")]),a("a-select-option",{key:"0"},[e._v("未审核")])],1)],1)],1),a("ec-divider")],1),a("ec-panel-body",[a("ec-v-layout",{attrs:{auto:!1}},[a("ec-v-item",{attrs:{height:"auto"}},[a("ec-panel-toolbar",[a("ec-panel-item-left",[a("a-button",{attrs:{type:"primary"},on:{click:e.onAgree}},[e._v("同意")]),a("a-button",{attrs:{type:"primary",ghost:""},on:{click:e.onReturn}},[e._v("回退")])],1),a("ec-panel-item-right",[a("div",{staticClass:"unit-box"},[a("div",{staticClass:"select"},[e._v(" 重量单位： "),a("ec-select",{attrs:{showSearch:""},model:{value:e.weightUnit,callback:function(t){e.weightUnit="string"===typeof t?t.trim():t},expression:"weightUnit"}},e._l(e.weightUnitList,(function(t){return a("a-select-option",{key:t.enumKey},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("div",{staticClass:"select"},[e._v(" 面积单位： "),a("ec-select",{attrs:{showSearch:""},model:{value:e.areaUnit,callback:function(t){e.areaUnit="string"===typeof t?t.trim():t},expression:"areaUnit"}},e._l(e.areaUnitList,(function(t){return a("a-select-option",{key:t.enumKey},[e._v(" "+e._s(t.name)+" ")])})),1)],1)])])],1)],1),a("ec-v-item",[a("ec-table",{ref:"tableRef",attrs:{loading:e.loading,"show-overflow":"",height:"100%",auto:!1,pagination:e.pagination,data:e.tableData},on:{"page-action":e.queryHandle,"checkbox-all":e.onSelAllTableData,"checkbox-change":e.onSelTableData}},[a("ec-table-col",{attrs:{type:"checkbox",width:"60",align:"center"}}),a("ec-table-col",{attrs:{type:"seq",title:"序号",width:"50",align:"center"}}),a("ec-table-col",{attrs:{field:"linkInduProvOrgName",title:"省级工业公司","min-width":"150",align:"left"}}),a("ec-table-col",{attrs:{field:"linkInduOrgName",title:"对口工业企业","min-width":"150",align:"left"}}),a("ec-table-col",{attrs:{field:"provOrgName",title:"省公司","min-width":"150",align:"left"}}),a("ec-table-col",{attrs:{field:"cityOrgName",title:"市公司","min-width":"150",align:"left"}}),a("ec-table-col",{attrs:{field:"provDivisionName",title:"省","min-width":"150",align:"left"}}),a("ec-table-col",{attrs:{field:"cityDivisionName",title:"地(州、市)","min-width":"150",align:"left"}}),a("ec-table-col",{attrs:{field:"counDivisionName",title:"县(区、市)","min-width":"150",align:"left"}}),a("ec-table-col",{attrs:{field:"baseCellCode",title:"基地单元编码","min-width":"150",align:"left"}}),a("ec-table-col",{attrs:{field:"baseCellName",title:"基地单元名称","min-width":"150",align:"left"}}),a("ec-table-col",{attrs:{field:"brandName",title:"品牌","min-width":"150",align:"left"}}),a("ec-table-col",{attrs:{field:"leafTypeCode",title:"烟叶类型","min-width":"150",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",[e._v(" "+e._s(e._f("getNameBy")(i.leafTypeCode,e.leafTypeObj))+" ")])]}}])}),a("ec-table-col",{attrs:{field:"leafVarietyName",title:"烟叶品种","min-width":"150",align:"left"}}),a("ec-table-col",{attrs:{field:"fieldArea",title:"基本烟田面积","min-width":"150",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",[e._v(e._s(e._f("amountFormat")(i.fieldArea,e.areaUnit)))])]}}])}),a("ec-table-col",{attrs:{field:"plantArea",title:"种植面积","min-width":"150",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",[e._v(e._s(e._f("amountFormat")(i.plantArea,e.areaUnit)))])]}}])}),a("ec-table-col",{attrs:{field:"buyWeight",title:"收购量","min-width":"150",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",[e._v(e._s(e._f("amountFormat")(i.buyWeight,e.weightUnit)))])]}}])}),a("ec-table-col",{attrs:{field:"techSuppOrg",title:"技术依托单位","min-width":"150",align:"left"}}),a("ec-table-col",{attrs:{field:"unitProp",title:"单元属性","min-width":"150",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",[e._v(" "+e._s(e._f("getNameBy")(i.unitProp,e.unitPropList,{key:"enumKey",label:"name"}))+" ")])]}}])}),a("ec-table-col",{attrs:{field:"billState",title:"状态",width:"100",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("div",[e._v(" "+e._s(e._f("getNameBy")(i.billState,e.billStateObj))+" ")])]}}])})],1)],1)],1)],1)],1)],1)],1)},n=[],l=a("5530"),r=a("c7eb"),o=a("1da1"),c=(a("d81d"),a("b0c0"),a("d3b7"),{name:"PanelSupple",data:function(){return{loading:!1,title:"",query:{},weightUnitList:[],areaUnitList:[],unitPropList:[],leafTypeList:[],leafVarietyList:[],weightUnit:"500000",areaUnit:"10000",tableData:[],pagination:{pageNumber:1,pageSize:10,total:0},selTableData:[]}},computed:{leafTypeObj:function(){return this.leafTypeList.map((function(e){return{key:e.leafTypeCode,title:e.leafTypeName}}))},billStateObj:function(){return this.billStateList.map((function(e){return{key:e.enumKey,title:e.name}}))},busiYear:function(){var e,t;return null===(e=this.$store.getters.getAppConfig)||void 0===e||null===(t=e.yearValueMap)||void 0===t?void 0:t.CENTER_YEAR}},created:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.$router.history.current.query.appCode,e.appCode=a||"CM",e.query.busiYear=e.busiYear,e.handleGetEnum(),e.handleQueryLeafTypeList();case 5:case"end":return t.stop()}}),t)})))()},methods:{handleGetEnum:function(){var e=this,t={enumTypeCodes:["WEIGHT_UNIT","AREA_UNIT","BASE_UNIT_NATURE","BILL_STATE"]};this.$apis.bim.enumType.query(t).then((function(t){var a=(null===t||void 0===t?void 0:t.enumMap)||{};e.weightUnitList=a.WEIGHT_UNIT||[],e.areaUnitList=a.AREA_UNIT||[],e.unitPropList=a.BASE_UNIT_NATURE||[],e.billStateList=a.BILL_STATE||[]}))},handleQueryLeafTypeList:function(){var e=this;this.$apis.bim.leafType.query({}).then((function(t){e.leafTypeList=(null===t||void 0===t?void 0:t.rows)||[]}))},resetHandle:function(){this.query={busiYear:this.busiYear},this.onQuery()},onQuery:function(){this.$refs.tableRef.pageAction(1,10)},queryHandle:function(e,t){var a=this,i=Object(l["a"])({pageNo:e,pageSize:t},this.query);this.loading=!0,this.$apis.apm.baseAudit.query(i).then((function(e){a.loading=!1,a.tableData=(null===e||void 0===e?void 0:e.rows)||[],a.pagination.total=null===e||void 0===e?void 0:e.totalRows})).catch((function(){a.loading=!1}))},onSelTableData:function(e){var t=e.records;this.selTableData=t},onSelAllTableData:function(e){var t=e.records;this.selTableData=t},onAgree:function(){var e=this,t=this.$createElement;if(this.selTableData.length){var a=this.selTableData.some((function(e){return"6"===e.billState}));a?this.$message.error("已审核的基地单元无法再操作,请重新选择！"):this.$confirm({title:"是否执行该操作?",content:function(){return t("div",{style:"color:red;"},["是否确认同意选中数据，确认请点击'确认'按钮，取消点击'取消'按钮"])},onOk:function(){var t={bmUnitLinkRecIds:e.selTableData.map((function(e){return e.bmUnitLinkRecId})),actionType:"6"};e.$apis.apm.baseAudit.agree(t).then((function(){e.$message.success("同意成功"),e.onQuery()}))}})}else this.$message.error("请选择一条数据再操作")},onReturn:function(e){var t=this,a=this.$createElement;this.selTableData.length?this.$confirm({title:"是否执行该操作?",content:function(){return a("div",{style:"color:red;"},["是否回退选中数据，确认请点击'确认'按钮，取消点击'取消'按钮"])},onOk:function(){var a={bmUnitLinkRecIds:t.selTableData.map((function(e){return e.bmUnitLinkRecId})),actionType:"5"===e};t.$apis.apm.baseAudit.agree(a).then((function(){t.$message.success("回退成功"),t.onQuery()}))}}):this.$message.error("请选择一条数据再操作")}}}),s=c,u=(a("c0d3"),a("2877")),f=Object(u["a"])(s,i,n,!1,null,"23deed84",null);t["default"]=f.exports},"49ec":function(e,t,a){},5530:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a("b64b"),a("a4d3"),a("4de4"),a("d3b7"),a("e439"),a("159b"),a("dbb4");function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},c0d3:function(e,t,a){"use strict";a("49ec")}}]);
//# sourceMappingURL=chunk-35769deb.56950aad.js.map