{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack:///./src/views/bpm/execution-issued/Index.vue?70d3","webpack:///src/views/bpm/execution-issued/Index.vue","webpack:///./src/views/bpm/execution-issued/Index.vue?48be","webpack:///./src/views/bpm/execution-issued/Index.vue","webpack:///./src/views/bpm/execution-issued/Index.vue?77e5"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","render","_vm","this","_h","$createElement","_c","_self","attrs","on","$event","$refs","table","pageAction","onReset","model","queryItems","callback","$$v","$set","expression","_l","leafTypeEk","leafTypeCode","_v","_s","leafTypeName","item","id","name","onIssued","onExport","busiYear","staticStyle","handleUnitParse","weightUnit","weightUnitCd","weightUnitName","areaUnit","areaUnitCd","areaUnitName","ref","pagination","tableData","rows","loading","footerMethod","handlePagination","selectAllEvent","selectRowChange","scopedSlots","_u","fn","row","releaseState","staticRenderFns","components","data","nowYear","leafTypeCd","leafTypeList","oldDataRow","workIssuedState","weightUnitList","isSelected","areaUnitList","bizCode","pageNumber","pageSize","total","computed","appConfig","created","methods","console","handleOlDataRow","newTableData","onQuery","pageNo","query","then","catch","finally","handleGetLeafTypeList","res","orgObj","appCode","yearTypeCode","busiYearObj","params","title","content","onOk","idList","oprRecordIds","handleData","leafTypeObj","weightUnitObj","areaUnitObj","handleLeafTypeName","typeCd","sumNum","list","field","count","columns","column","checked","JSON","component"],"mappings":"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","file":"js/chunk-5c952b6a.4889c748.js","sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-container',{attrs:{\"height\":\"100%\"}},[_c('ec-container-header',[_c('ec-panel-item',[_c('ec-panel-item-left',[_c('ec-header',{attrs:{\"title\":\"收购计划执行量下达\",\"icon\":\"onetomany\",\"color-code\":\"008\"}})],1)],1)],1),_c('ec-container-body',[_c('ec-panel',{attrs:{\"auto\":false}},[_c('ec-panel-toolbar',[_c('ec-query-panel',{on:{\"query\":function($event){return _vm.$refs.table.pageAction(1)},\"reset\":_vm.onReset}},[_c('ec-query-item',{attrs:{\"label\":\"烟叶类型\"}},[_c('ec-select',{attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.queryItems.leafTypeCode),callback:function ($$v) {_vm.$set(_vm.queryItems, \"leafTypeCode\", $$v)},expression:\"queryItems.leafTypeCode\"}},_vm._l((_vm.leafTypeList),function(leafTypeEk){return _c('a-select-option',{key:leafTypeEk.leafTypeCode},[_vm._v(\" \"+_vm._s(leafTypeEk.leafTypeName)+\" \")])}),1)],1),_c('ec-query-item',{attrs:{\"label\":\"下达状态\"}},[_c('a-select',{attrs:{\"allow-clear\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.queryItems.releaseState),callback:function ($$v) {_vm.$set(_vm.queryItems, \"releaseState\", $$v)},expression:\"queryItems.releaseState\"}},_vm._l((_vm.workIssuedState),function(item){return _c('a-select-option',{key:item.id},[_vm._v(\" \"+_vm._s(item.name)+\" \")])}),1)],1)],1),_c('ec-divider')],1),_c('ec-panel-header',[_c('ec-panel-item',[_c('ec-panel-item-left',[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onIssued}},[_vm._v(\"下达\")]),_c('a-button',{on:{\"click\":_vm.onExport}},[_vm._v(\"导出\")])],1),_c('ec-panel-item-right',[_c('a-space',{attrs:{\"size\":15}},[_c('span',[_vm._v(\"种植收购年度：\"+_vm._s(_vm.queryItems.busiYear)+\"年\")]),_c('span',[_vm._v(\"重量单位：\"),_c('ec-select',{staticStyle:{\"width\":\"150px\"},attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},on:{\"select\":function($event){return _vm.handleUnitParse()}},model:{value:(_vm.weightUnit),callback:function ($$v) {_vm.weightUnit=$$v},expression:\"weightUnit\"}},_vm._l((_vm.weightUnitList),function(weightUnit){return _c('a-select-option',{key:weightUnit.weightUnitCd},[_vm._v(\" \"+_vm._s(weightUnit.weightUnitName)+\" \")])}),1)],1),_c('span',[_vm._v(\"面积单位：\"),_c('ec-select',{staticStyle:{\"width\":\"150px\"},attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},on:{\"select\":function($event){return _vm.handleUnitParse()}},model:{value:(_vm.areaUnit),callback:function ($$v) {_vm.areaUnit=$$v},expression:\"areaUnit\"}},_vm._l((_vm.areaUnitList),function(areaUnit){return _c('a-select-option',{key:areaUnit.areaUnitCd},[_vm._v(\" \"+_vm._s(areaUnit.areaUnitName)+\" \")])}),1)],1)])],1)],1)],1),_c('ec-panel-body',[_c('ec-table',{ref:\"table\",attrs:{\"border\":\"\",\"height\":\"100%\",\"auto\":false,\"pagination\":_vm.pagination,\"data\":_vm.tableData.rows,\"loading\":_vm.loading,\"show-footer\":\"\",\"footer-method\":_vm.footerMethod,\"highlight-current-row\":\"\"},on:{\"page-action\":_vm.handlePagination,\"checkbox-all\":_vm.selectAllEvent,\"checkbox-change\":_vm.selectRowChange}},[_c('ec-table-col',{attrs:{\"type\":\"checkbox\",\"width\":\"50\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"title\":\"序号\",\"type\":\"seq\",\"width\":\"70\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"field\":\"orgName\",\"title\":\"单位名称\",\"align\":\"left\",\"min-width\":\"200\"}}),_c('ec-table-colgroup',{attrs:{\"title\":\"收购计划执行量\"}},[_c('ec-table-col',{attrs:{\"field\":\"planTotalWeight\",\"title\":\"合计\",\"align\":\"center\",\"width\":\"130\"}}),_c('ec-table-col',{attrs:{\"field\":\"planInnerWeight\",\"title\":\"国内\",\"align\":\"center\",\"width\":\"130\"}}),_c('ec-table-col',{attrs:{\"field\":\"planExportWeight\",\"title\":\"出口备货\",\"align\":\"center\",\"width\":\"130\"}})],1),_c('ec-table-col',{attrs:{\"field\":\"planPlantArea\",\"title\":\"种植面积\",\"align\":\"right\",\"width\":\"130\"}}),_c('ec-table-col',{attrs:{\"field\":\"remark\",\"title\":\"办理依据\",\"align\":\"left\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"releaseState\",\"title\":\"下达状态\",\"align\":\"center\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.releaseState === '1')?_c('div',[_c('span',[_vm._v(\"已下达\")])]):_c('div',[_c('span',[_vm._v(\"未下达\")])])]}}])}),_c('ec-table-col',{attrs:{\"field\":\"releaseTime\",\"title\":\"下达日期\",\"align\":\"center\",\"width\":\"160\"}})],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ec-container height=\"100%\">\r\n    <!-- height=\"auto\" title=\"收购计划执行量录入审核\" icon=\"onetomany\" color-code=\"008\" -->\r\n    <ec-container-header>\r\n      <ec-panel-item>\r\n        <ec-panel-item-left>\r\n          <ec-header title=\"收购计划执行量下达\" icon=\"onetomany\" color-code=\"008\" />\r\n        </ec-panel-item-left>\r\n      </ec-panel-item>\r\n    </ec-container-header>\r\n    <ec-container-body>\r\n      <ec-panel :auto=\"false\">\r\n        <ec-panel-toolbar>\r\n          <ec-query-panel @query=\"$refs.table.pageAction(1)\" @reset=\"onReset\">\r\n            <ec-query-item label=\"烟叶类型\">\r\n              <ec-select\r\n                showSearch\r\n                allowClear\r\n                placeholder=\"请选择\"\r\n                v-model=\"queryItems.leafTypeCode\"\r\n              >\r\n                <a-select-option v-for=\"leafTypeEk in leafTypeList\" :key=\"leafTypeEk.leafTypeCode\">\r\n                  {{ leafTypeEk.leafTypeName }}\r\n                </a-select-option>\r\n              </ec-select>\r\n            </ec-query-item>\r\n\r\n            <ec-query-item label=\"下达状态\">\r\n              <a-select allow-clear placeholder=\"请选择\" v-model=\"queryItems.releaseState\">\r\n                <a-select-option v-for=\"item in workIssuedState\" :key=\"item.id\">\r\n                  {{ item.name }}\r\n                </a-select-option>\r\n              </a-select>\r\n            </ec-query-item>\r\n          </ec-query-panel>\r\n          <ec-divider />\r\n        </ec-panel-toolbar>\r\n        <ec-panel-header>\r\n          <ec-panel-item>\r\n            <ec-panel-item-left>\r\n              <a-button type=\"primary\" @click=\"onIssued\">下达</a-button>\r\n              <a-button @click=\"onExport\">导出</a-button>\r\n            </ec-panel-item-left>\r\n            <ec-panel-item-right>\r\n              <a-space :size=\"15\">\r\n                <span>种植收购年度：{{ queryItems.busiYear }}年</span>\r\n                <span\r\n                  >重量单位：<ec-select\r\n                    showSearch\r\n                    allowClear\r\n                    placeholder=\"请选择\"\r\n                    v-model=\"weightUnit\"\r\n                    @select=\"handleUnitParse()\"\r\n                    style=\"width: 150px\"\r\n                  >\r\n                    <a-select-option\r\n                      v-for=\"weightUnit in weightUnitList\"\r\n                      :key=\"weightUnit.weightUnitCd\"\r\n                    >\r\n                      {{ weightUnit.weightUnitName }}\r\n                    </a-select-option>\r\n                  </ec-select></span\r\n                >\r\n                <span\r\n                  >面积单位：<ec-select\r\n                    showSearch\r\n                    allowClear\r\n                    placeholder=\"请选择\"\r\n                    v-model=\"areaUnit\"\r\n                    @select=\"handleUnitParse()\"\r\n                    style=\"width: 150px\"\r\n                  >\r\n                    <a-select-option v-for=\"areaUnit in areaUnitList\" :key=\"areaUnit.areaUnitCd\">\r\n                      {{ areaUnit.areaUnitName }}\r\n                    </a-select-option>\r\n                  </ec-select></span\r\n                >\r\n              </a-space>\r\n            </ec-panel-item-right>\r\n          </ec-panel-item>\r\n        </ec-panel-header>\r\n        <ec-panel-body>\r\n          <ec-table\r\n            ref=\"table\"\r\n            border\r\n            height=\"100%\"\r\n            :auto=\"false\"\r\n            @page-action=\"handlePagination\"\r\n            :pagination=\"pagination\"\r\n            :data=\"tableData.rows\"\r\n            @checkbox-all=\"selectAllEvent\"\r\n            @checkbox-change=\"selectRowChange\"\r\n            :loading=\"loading\"\r\n            show-footer\r\n            :footer-method=\"footerMethod\"\r\n            highlight-current-row\r\n          >\r\n            <ec-table-col type=\"checkbox\" width=\"50\" align=\"center\"></ec-table-col>\r\n            <ec-table-col title=\"序号\" type=\"seq\" width=\"70\" align=\"center\" />\r\n            <ec-table-col field=\"orgName\" title=\"单位名称\" align=\"left\" min-width=\"200\" />\r\n            <ec-table-colgroup title=\"收购计划执行量\">\r\n              <ec-table-col field=\"planTotalWeight\" title=\"合计\" align=\"center\" width=\"130\" />\r\n              <ec-table-col field=\"planInnerWeight\" title=\"国内\" align=\"center\" width=\"130\" />\r\n              <ec-table-col field=\"planExportWeight\" title=\"出口备货\" align=\"center\" width=\"130\" />\r\n            </ec-table-colgroup>\r\n            <ec-table-col field=\"planPlantArea\" title=\"种植面积\" align=\"right\" width=\"130\" />\r\n            <ec-table-col field=\"remark\" title=\"办理依据\" align=\"left\" width=\"150\" />\r\n            <ec-table-col field=\"releaseState\" title=\"下达状态\" align=\"center\" width=\"100\">\r\n              <template #default=\"{ row }\">\r\n                <div v-if=\"row.releaseState === '1'\">\r\n                  <span>已下达</span>\r\n                </div>\r\n                <div v-else>\r\n                  <span>未下达</span>\r\n                </div>\r\n              </template>\r\n            </ec-table-col>\r\n            <ec-table-col field=\"releaseTime\" title=\"下达日期\" align=\"center\" width=\"160\" />\r\n          </ec-table>\r\n        </ec-panel-body>\r\n      </ec-panel>\r\n    </ec-container-body>\r\n  </ec-container>\r\n</template>\r\n\r\n<script>\r\n// import ExecutionEnterAdjustForm from './ExecutionEnterAdjustForm.vue';\r\n// import Detail from './Detail.vue';\r\n\r\nexport default {\r\n  name: 'ExecutionAuditManage',\r\n  components: {\r\n    // ExecutionEnterAdjustForm,\r\n    // Detail,\r\n  },\r\n  data() {\r\n    return {\r\n      queryItems: {\r\n        busiYear: '',\r\n        leafTypeCode: '10',\r\n        releaseState: '0',\r\n      },\r\n      weightUnit: 500000,\r\n      areaUnit: 10000,\r\n      nowYear: '',\r\n      loading: false,\r\n      leafTypeCd: '',\r\n      leafTypeList: [\r\n        { leafTypeCode: '10', leafTypeName: '烤烟' },\r\n        { leafTypeCode: '20', leafTypeName: '晾晒烟(全部)' },\r\n        { leafTypeCode: '2013', leafTypeName: '晾晒烟(雪茄烟叶)' },\r\n      ],\r\n      oldDataRow: [],\r\n      workIssuedState: [\r\n        { id: '0', name: '未下达' },\r\n        { id: '1', name: '已下达' },\r\n      ],\r\n\r\n      weightUnitList: [\r\n        { weightUnitCd: 1, weightUnitName: '公斤', isSelected: false },\r\n        { weightUnitCd: 50, weightUnitName: '担', isSelected: false },\r\n        { weightUnitCd: 500000, weightUnitName: '万担', isSelected: false },\r\n      ],\r\n      areaUnitList: [\r\n        { areaUnitCd: 10000, areaUnitName: '万亩' },\r\n        { areaUnitCd: 1, areaUnitName: '亩' },\r\n      ],\r\n      bizCode: '',\r\n      pagination: {\r\n        pageNumber: 1,\r\n        pageSize: 10,\r\n        total: 0,\r\n      },\r\n      tableData: {\r\n        // 数据表格\r\n        // totalRows: 0,\r\n        rows: [],\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    appConfig() {\r\n      return this.$store.getters.getAppConfig;\r\n    },\r\n  },\r\n  created() {\r\n    const { appCode } = this.$router.history.current.query;\r\n    this.appCode = appCode || 'CM'; // 获取当前登入信息\r\n  },\r\n  methods: {\r\n    // 单位切换的数据进行处理\r\n    handleUnitParse() {\r\n      const newTableData = [];\r\n      console.log(`單位：${this.weightUnit}`);\r\n      const handleOlDataRow = JSON.parse(JSON.stringify(this.oldDataRow)) || [];\r\n\r\n      handleOlDataRow.forEach((item) => {\r\n        const obj = item;\r\n        obj.planTotalWeight = (obj.planTotalWeight / this.weightUnit).toFixed(2);\r\n        obj.planInnerWeight = (obj.planInnerWeight / this.weightUnit).toFixed(2);\r\n        obj.planExportWeight = (obj.planExportWeight / this.weightUnit).toFixed(2);\r\n        obj.planPlantArea = (obj.planPlantArea / this.areaUnit).toFixed(2);\r\n        newTableData.push(obj);\r\n      });\r\n      console.log(newTableData);\r\n      this.tableData.rows = newTableData;\r\n    },\r\n\r\n    // 数据初始化\r\n    onQuery() {\r\n      this.loading = true;\r\n      const data = {\r\n        pageNo: this.pagination.pageNumber,\r\n        pageSize: this.pagination.pageSize,\r\n        leafTypeCode: this.queryItems.leafTypeCode,\r\n        releaseState: this.queryItems.releaseState,\r\n        busiYear: this.queryItems.busiYear,\r\n      };\r\n      console.log(data);\r\n      this.$apis.bpm.executionIssued\r\n        .query(data)\r\n        .then((res) => {\r\n          this.tableData = res;\r\n          const { rows } = this.tableData;\r\n          this.pagination.total = res.totalRows;\r\n          this.oldDataRow = JSON.parse(JSON.stringify(rows));\r\n          console.log(`66666${JSON.stringify(this.oldDataRow)}`);\r\n          // 对返回的数据处理，转成对应的单位数据\r\n          this.handleUnitParse();\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        })\r\n        .finally(() => {\r\n          this.loading = false;\r\n          this.selectedRows = [];\r\n        });\r\n    },\r\n\r\n    async handlePagination(pageNumber, pageSize) {\r\n      this.pagination.pageNumber = pageNumber;\r\n      this.pagination.pageSize = pageSize;\r\n      await this.handleGetLeafTypeList();\r\n    },\r\n\r\n    // 获取烟叶类型数据\r\n    async handleGetLeafTypeList() {\r\n      if (!this.leafTypeList?.length) {\r\n        const res = await this.$apis.bpm.executionEnter.queryLeafType({});\r\n        this.leafTypeList = res?.rows || [];\r\n        this.leafTypeList.some((item) => {\r\n          if (item.leafTypeName === '烤烟') {\r\n            this.leafTypeCd = item.leafTypeCode;\r\n            this.queryItems.leafTypeCode = item.leafTypeCode;\r\n            return true;\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      if (!this.orgCode) {\r\n        const orgObj = await this.$apis.bim.curOrg.get({});\r\n        this.bizCode = orgObj?.bizCode;\r\n        this.orgCode = orgObj?.orgUniqueCode; // todo 写死数据\r\n      }\r\n      if (!this.queryItems.busiYear > 0) {\r\n        // 获取年度\r\n        const data = {\r\n          bizCode: this.appConfig.bizCode, // todo 写死的数据\r\n          appCode: this.appCode || 'CM',\r\n          yearTypeCode: 'BIZ_YEAR',\r\n        };\r\n        const busiYearObj = await this.$apis.bpm.executionEnter.getBuYear(data);\r\n        this.queryItems.busiYear = busiYearObj?.yearValue;\r\n        this.nowYear = busiYearObj?.yearValue;\r\n      }\r\n\r\n      this.onQuery();\r\n    },\r\n\r\n    // 导出\r\n    onExport() {\r\n      const params = { ...this.queryItems };\r\n      switch (this.weightUnit) {\r\n        case 1:\r\n          params.weightUnit = '1';\r\n          break;\r\n        case 50:\r\n          params.weightUnit = '2';\r\n          break;\r\n\r\n        default:\r\n          params.weightUnit = '3';\r\n          break;\r\n      }\r\n      params.areaUnit = this.areaUnit === 1 ? '1' : '2';\r\n      params.leafTypeName =\r\n        this.leafTypeList?.find((item) => item.leafTypeCode === params.leafTypeCode)\r\n          ?.leafTypeName || '';\r\n      this.$apis.bpm.executionIssued.Export(params).then((res) => {\r\n        const blob = new Blob([res]);\r\n        console.log(res, blob, '/////////////////////////////');\r\n      });\r\n    },\r\n\r\n    // 下达按钮\r\n    onIssued() {\r\n      if (!this.selectedRows || this.selectedRows.length <= 0) {\r\n        this.$message.error('请选择一条数据再下达');\r\n        return;\r\n      }\r\n      const issuedData = this.selectedRows.find((item) => item.releaseState === '1');\r\n      if (issuedData) {\r\n        this.$message.error('存在已下达数据，请勿重复下达');\r\n        return;\r\n      }\r\n      this.$confirm({\r\n        title: '是否执行该操作?',\r\n        content: () => (\r\n          <div style=\"color:red;\">\r\n            是否确认下达选中的数据，确认请点击'确认'按钮，取消点击'取消'按钮。\r\n          </div>\r\n        ),\r\n        onOk: () => {\r\n          this.loading = true;\r\n          const idList = [];\r\n          for (let i = 0; i < this.selectedRows.length; i++) {\r\n            idList.push(this.selectedRows[i].oprRecordId);\r\n          }\r\n          const data = {\r\n            leafTypeCode: this.queryItems.leafTypeCode,\r\n            busiYear: this.nowYear,\r\n            oprRecordIds: idList,\r\n          };\r\n          console.log(`参数：${JSON.stringify(idList)}`);\r\n          this.$apis.bpm.executionIssued.issued(data).then((res) => {\r\n            console.log(JSON.stringify(res));\r\n            if (res.result) {\r\n              this.loading = false;\r\n              this.onQuery();\r\n              this.$message.success('操作成功');\r\n            } else {\r\n              this.$message.error('操作失败');\r\n            }\r\n          });\r\n        },\r\n      });\r\n    },\r\n\r\n    // 重置\r\n    onReset() {\r\n      this.queryItems.leafTypeCode = this.leafTypeCd;\r\n\r\n      this.queryItems.busiYear = this.nowYear;\r\n      this.queryItems.releaseState = '0';\r\n      this.$refs.table.pageAction(1);\r\n    },\r\n\r\n    // 对传入到下一个页面的数据进行处理\r\n    handleData() {\r\n      const leafTypeObj = this.leafTypeList.find(\r\n        (res) => res.leafTypeCode === this.queryItems.leafTypeCode,\r\n      );\r\n      const weightUnitObj = this.weightUnitList.find((res) => res.weightUnitCd === this.weightUnit);\r\n\r\n      const areaUnitObj = this.areaUnitList.find((res) => res.areaUnitCd === this.areaUnit);\r\n\r\n      const data = {\r\n        leafTypeObj,\r\n        weightUnitObj,\r\n        areaUnitObj,\r\n        nowYear: this.queryItems.busiYear,\r\n      };\r\n      return data;\r\n    },\r\n\r\n    // 根据编码翻译对应的名称\r\n    handleLeafTypeName(typeCd) {\r\n      const leafType = this.leafTypeList.find((item) => item.leafTypeCode === typeCd);\r\n      return leafType?.leafTypeName;\r\n    },\r\n\r\n    // 合计的数据\r\n    sumNum(list, field) {\r\n      let count = 0;\r\n      list.forEach((item) => {\r\n        count += Number(item[field]);\r\n      });\r\n      return count.toFixed(2);\r\n    },\r\n\r\n    // 底部的合计行\r\n    footerMethod({ columns, data }) {\r\n      return [\r\n        columns.map((column, columnIndex) => {\r\n          if (columnIndex === 0) {\r\n            return '合计';\r\n          }\r\n          if (\r\n            ['planTotalWeight', 'planInnerWeight', 'planExportWeight', 'planPlantArea'].includes(\r\n              column.property,\r\n            )\r\n          ) {\r\n            return this.sumNum(data, column.property);\r\n          }\r\n          return null;\r\n        }),\r\n      ];\r\n    },\r\n\r\n    // 选中所有列表\r\n    selectAllEvent({ checked, records }) {\r\n      console.log(`${checked}-选中所有records包含选中的所以对象----${JSON.stringify(records)}`);\r\n      this.selectedRows = records;\r\n    },\r\n\r\n    // 选中列表\r\n    selectRowChange({ checked, records }) {\r\n      console.log(\r\n        `${checked}-选择改变时会把records包含选中的所以对象----${JSON.stringify(records)}`,\r\n      );\r\n      this.selectedRows = records;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.year {\r\n  font-size: 18px;\r\n  line-height: 22px;\r\n\r\n  color: #18191a;\r\n  font-weight: 700;\r\n  padding-top: 18px;\r\n  padding-right: 50px;\r\n  font-family: '微软雅黑 Bold', '微软雅黑', 'Microsoft YaHei', sans-serif;\r\n}\r\n.paddingTop {\r\n  padding-top: 15px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=472ebf01&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=472ebf01&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"472ebf01\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&id=472ebf01&prod&lang=less&scoped=true&\""],"sourceRoot":""}