(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d953ca38"],{"0676":function(e,t,r){function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}r("d9e2"),e.exports=a,e.exports.__esModule=!0,e.exports["default"]=e.exports},"06e6":function(e,t,r){"use strict";r("4d3a")},"11b0":function(e,t,r){function a(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("a630"),e.exports=a,e.exports.__esModule=!0,e.exports["default"]=e.exports},2236:function(e,t,r){var a=r("5a43");function n(e){if(Array.isArray(e))return a(e)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},"278c":function(e,t,r){var a=r("c135"),n=r("9b42"),o=r("6613"),i=r("c240");function l(e,t){return a(e)||n(e,t)||o(e,t)||i()}e.exports=l,e.exports.__esModule=!0,e.exports["default"]=e.exports},"448a":function(e,t,r){var a=r("2236"),n=r("11b0"),o=r("6613"),i=r("0676");function l(e){return a(e)||n(e)||o(e)||i()}e.exports=l,e.exports.__esModule=!0,e.exports["default"]=e.exports},"4d3a":function(e,t,r){},5530:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("b64b"),r("a4d3"),r("4de4"),r("d3b7"),r("e439"),r("159b"),r("dbb4");function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},"5a43":function(e,t){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},63748:function(e,t,r){r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("d9e2");var a=r("6613");function n(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=a(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==r["return"]||r["return"]()}finally{if(s)throw i}}}}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},6613:function(e,t,r){r("fb6a"),r("d3b7"),r("b0c0"),r("a630"),r("3ca3"),r("ac1f"),r("00b4");var a=r("5a43");function n(e,t){if(e){if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},9523:function(e,t){function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},"9b42":function(e,t,r){function a(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(a=r.next()).done);i=!0)if(o.push(a.value),t&&o.length===t)break}catch(s){l=!0,n=s}finally{try{i||null==r["return"]||r["return"]()}finally{if(l)throw n}}return o}}r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),e.exports=a,e.exports.__esModule=!0,e.exports["default"]=e.exports},"9eef":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ec-container",{attrs:{height:"100%"}},[r("ec-container-header",[r("ec-panel-item",[r("ec-panel-item-left",[r("ec-header",{attrs:{title:"罚没烟码包分配领用",icon:"onetomany","color-code":"008"}})],1)],1)],1),r("ec-container-body",{attrs:{auto:!1}},[r("ec-v-layout",[r("ec-v-item",[r("ec-panel",[r("ec-panel-body",[r("a-descriptions",{attrs:{bordered:"",column:4}},[r("a-descriptions-item",{attrs:{label:"调拨年度"}},[e._v(" "+e._s(e.queryItems.tranYear)+" ")]),r("a-descriptions-item",{attrs:{label:"烟叶类型"}},[e._v(" "+e._s(e.getLabelName(e.queryItems.leafTypeCode,this.leafTypeList,"leafTypeCode","leafTypeName")))]),r("a-descriptions-item",{attrs:{label:"烟叶形态"}},[e._v(" "+e._s(e.getLabelName(e.queryItems.leafFormCode,this.leafFormList,"leafFormCode","leafFormName"))+" ")]),r("a-descriptions-item",{attrs:{label:"申请码包数量"}},[e._v(" "+e._s(e.totalData.realApplyNum)+" ")]),r("a-descriptions-item",{attrs:{label:"申请量"}},[e._v(" "+e._s(e.totalData.applyNum)+" ")]),r("a-descriptions-item",{attrs:{label:"分配码包数量"}}),r("a-descriptions-item",{attrs:{label:"领用码包数量"}}),r("a-descriptions-item",{attrs:{label:""}})],1)],1)],1),r("ec-panel",[r("ec-panel-toolbar",[r("ec-query-panel",{attrs:{colCount:e.colCount,defaultFold:!0},on:{query:e.onQuery,reset:e.onReset},scopedSlots:e._u([{key:"inner",fn:function(){return[r("ec-query-item",{attrs:{label:"烟叶类型"}},[r("ec-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择"},on:{select:e.leafTypeChange},model:{value:e.queryItems.leafTypeCode,callback:function(t){e.$set(e.queryItems,"leafTypeCode",t)},expression:"queryItems.leafTypeCode"}},e._l(e.leafTypeList,(function(t){return r("a-select-option",{key:t.leafTypeCode},[e._v(" "+e._s(t.leafTypeName)+" ")])})),1)],1),r("ec-query-item",{attrs:{label:"烟叶形态"}},[r("ec-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择"},model:{value:e.queryItems.leafFormCode,callback:function(t){e.$set(e.queryItems,"leafFormCode",t)},expression:"queryItems.leafFormCode"}},e._l(e.leafFormList,(function(t){return r("a-select-option",{key:t.leafFormCode,attrs:{value:t.leafFormCode}},[e._v(e._s(t.leafFormName))])})),1)],1)]},proxy:!0}])},[r("ec-query-item",{attrs:{label:"调拨年度"}},[r("a-input-number",{attrs:{placeholder:"请输入"},model:{value:e.queryItems.tranYear,callback:function(t){e.$set(e.queryItems,"tranYear",t)},expression:"queryItems.tranYear"}})],1),r("ec-query-item",{attrs:{label:"领用单位"}},[r("org-picker",{attrs:{placeholder:"请选择"},on:{ok:e.selectOrg},model:{value:e.queryItems.applyOrgCodes,callback:function(t){e.$set(e.queryItems,"applyOrgCodes",t)},expression:"queryItems.applyOrgCodes"}})],1),r("ec-query-item",{attrs:{label:"仓库"}},[r("a-select",{attrs:{allowClear:"",placeholder:"请选择"},model:{value:e.queryItems.storeCode,callback:function(t){e.$set(e.queryItems,"storeCode",t)},expression:"queryItems.storeCode"}},e._l(e.storesList,(function(t){return r("a-select-option",{key:t.storeCode,attrs:{value:t.storeCode}},[e._v(e._s(t.storeName))])})),1)],1)],1),r("ec-divider")],1),r("ec-panel-body",{attrs:{height:"100%"}},[r("ec-v-layout",[r("ec-v-item",[r("ec-panel-item",[r("ec-panel-item-left"),r("ec-panel-item-right",[r("a-space",{attrs:{size:15}},[r("span",[e._v("重量单位："),r("ec-select",{staticStyle:{width:"150px"},attrs:{showSearch:"",allowClear:"",placeholder:"请选择"},model:{value:e.weightUnit,callback:function(t){e.weightUnit=t},expression:"weightUnit"}},e._l(e.weightUnitList,(function(t){return r("a-select-option",{key:t.weightUnitCd,attrs:{value:t.weightUnitCd}},[e._v(" "+e._s(t.weightUnitName)+" ")])})),1)],1)])],1)],1)],1),r("ec-v-item"),r("ec-v-item",[r("ec-table",{ref:"table",attrs:{border:"",pagination:Object.keys(e.orgInfo).length?e.pagination:{},data:e.tableData,loading:e.loading,"highlight-current-row":""},on:{"page-action":e.handlePagination}},[r("ec-table-col",{attrs:{type:"checkbox",width:"50",align:"center"}}),r("ec-table-col",{attrs:{title:"序号",type:"seq",width:"70",align:"center"}}),r("ec-table-col",{attrs:{field:"tranYear",title:"调拨年度",align:"left",width:"200"}}),r("ec-table-col",{attrs:{field:"applyOrgName",title:"领用单位",align:"left",width:"200"}}),r("ec-table-col",{attrs:{field:"storeName",title:"仓库",align:"left",width:"200"}}),r("ec-table-col",{attrs:{field:"leafTypeName",title:"烟叶类型",align:"left","min-width":"150"}}),r("ec-table-col",{attrs:{field:"leafFormName",title:"烟叶形态",align:"left","min-width":"150"}}),r("ec-table-col",{attrs:{field:"applyNum",title:"申请码包数",align:"left","min-width":"150"}}),r("ec-table-col",{attrs:{field:"applyNum",title:"申请量",align:"left","min-width":"150"}}),r("ec-table-col",{attrs:{title:"操作",fixed:"right",scopedSlots:"",align:"center","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("a-button",{attrs:{type:"link"},on:{click:function(t){return e.onDetails(a)}}},[e._v("详细")])]}}])})],1)],1)],1)],1)],1)],1)],1),r("ec-drawer",{attrs:{title:"详细","is-confirm":!0,size:"small",visible:e.visible},on:{close:function(t){e.visible=!1}}},[r("ec-container",{attrs:{height:"auto",fixed:"top bottom","color-code":"007"}},[r("ec-container-body",[r("ec-panel",{staticClass:"prodDrawer",attrs:{"color-code":"001",title:"分配明细"}},[r("ec-panel-item",[r("ec-panel-item-right",[r("a-space",{staticStyle:{"margin-right":"15px"},attrs:{size:15}},[e._v("调拨年度: "+e._s(e.queryItems.tranYear))]),r("a-space",{attrs:{size:15}},[e._v("重量单位: "+e._s("担"))])],1)],1),r("ec-panel-item",[r("ec-table",{ref:"table",attrs:{border:"",data:e.detailsTableData,loading:e.detailsLoading}},[r("ec-table-col",{attrs:{title:"序号",type:"seq",width:"70",align:"center"}}),r("ec-table-col",{attrs:{"min-width":"150",field:"leafTypeName",title:"烟叶类型",align:"left"}}),r("ec-table-col",{attrs:{"min-width":"150",field:"leafFormName",title:"烟叶形态",align:"left"}}),r("ec-table-col",{attrs:{"min-width":"150",field:"packType",title:"包装类型",align:"left"}}),r("ec-table-col",{attrs:{field:"spec",title:"规格 (KG/件)",align:"left","min-width":"150"}}),r("ec-table-col",{attrs:{field:"allotNum",title:"分配码包数量",align:"left","min-width":"150"}}),r("ec-table-col",{attrs:{field:"collectNum",title:"领用码包数量",align:"left","min-width":"150"}})],1)],1)],1)],1),r("ec-container-footer",{attrs:{fixed:""}},[r("a-space",[r("a-button",{on:{click:function(t){e.visible=!1}}},[e._v("关闭")])],1)],1)],1)],1)],1)],1)},n=[],o=r("5530"),i=r("c7eb"),l=r("1da1"),s=(r("e906"),r("dd14")),c=r.n(s),u=(r("7db0"),r("d3b7"),r("a15b"),r("e9c4"),{name:"penaltyReceive",components:{OrgPicker:c.a},computed:{_api:function(){return this.$apis.pcm.penatly.apply}},data:function(){return{visible:!1,applyOrgCode:"",topInfo:{},orgInfo:{},storesList:[],objectData:{},leafFormList:[],busiYear:"",detailsTableData:[],detailsLoading:!1,queryItems:{applyOrgCodes:[],storeCode:"",tranYear:void 0,leafTypeCode:void 0,busiYear:void 0,leafFormCode:void 0},weightUnit:50,areaUnit:1,colCount:5,nowYear:"",loading:!1,leafTypeCd:"",leafTypeList:[],oldDataRow:[],oldTotalData:[],totalData:{},isNullData:[],workSubmitState:[{id:"",name:"全部"},{id:"0",name:"未提交"},{id:"1",name:"已提交"}],workAuditState:[{id:"",name:"全部"},{id:"0",name:"未审批"},{id:"1",name:"处长审批"},{id:"2",name:"副总经理审批"},{id:"3",name:"完成"}],workOptType:[{id:"",name:"全部"},{id:"0",name:"调减"},{id:"1",name:"调增"}],weightUnitList:[{weightUnitCd:50,weightUnitName:"担",isSelected:!1}],orgCodeList:[],pagination:{pageNumber:1,pageSize:10,total:0},tableData:[]}},created:function(){var e=this;return Object(l["a"])(Object(i["a"])().mark((function t(){var r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$router.history.current.query.appCode,e.appCode=r||"CM",t.next=4,e.getCurrentUserOrg();case 4:return t.next=6,e.handleGetLeafTypeList();case 6:return t.next=8,e.leafTypeChange(e.queryItems.leafTypeCode);case 8:return t.next=10,e.onQuery();case 10:case"end":return t.stop()}}),t)})))()},methods:{selectOrg:function(e){var t=e.selectOption;console.log(this.queryItems.applyOrgCode),this.getCmTStoreByOrgCode(this.queryItems.applyOrgCode),this.queryItems.orgName=t.title},getLabelName:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;if(!e||!t.length)return"";var n=t.find((function(t){return t[r]===e}));return n[a]||""},onDetails:function(e){var t=this;this.detailsLoading=!0,this.queryItems.applyOrgCode=this.queryItems.applyOrgCodes.length?this.queryItems.applyOrgCodes.join(""):"";var r=Object(o["a"])({applyType:"CONF_CP",barcodeApplyId:e.barcodeApplyId},this.queryItems);this._api.queryDetail(r).then((function(e){t.detailsTableData=e||[]})).finally((function(){t.detailsLoading=!1})),this.visible=!0},handlePagination:function(e,t){var r=this;return Object(l["a"])(Object(i["a"])().mark((function a(){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.pagination.pageNumber=e,r.pagination.pageSize=t,r.onQuery();case 3:case"end":return a.stop()}}),a)})))()},getCurrentUserOrg:function(){var e=this;this._api.getCurrentUserOrg({dataState:1}).then((function(t){e.orgInfo=t||{},e.queryItems.applyOrgCodes=t?[t.orgUniqueCode]:void 0,e.queryItems.applyOrgCode=e.queryItems.applyOrgCodes.length?e.queryItems.applyOrgCodes.join(""):"",e.getCmTStoreByOrgCode(e.queryItems.applyOrgCode)}))},getCmTStoreByOrgCode:function(){var e=arguments,t=this;return Object(l["a"])(Object(i["a"])().mark((function r(){var a;return Object(i["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=e.length>0&&void 0!==e[0]?e[0]:void 0,t._api.getCmTStoreByOrgCode({dataState:1,orgCode:a}).then((function(e){t.storesList=e.rows||[]})).finally((function(){t.storesList.unshift({storeName:"全部",storeCode:""}),t.queryItems.storeCode=""}));case 2:case"end":return r.stop()}}),r)})))()},handleGetLeafTypeList:function(){var e=this;return Object(l["a"])(Object(i["a"])().mark((function t(){var r,a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.queryItems.tranYear=(new Date).getFullYear(),null!==(r=e.leafTypeList)&&void 0!==r&&r.length){t.next=7;break}return t.next=4,e.$apis.bpm.executionEnter.queryLeafType({});case 4:a=t.sent,e.leafTypeList=(null===a||void 0===a?void 0:a.rows)||[],e.leafTypeList.some((function(t){return"烤烟"===t.leafTypeName&&(e.leafTypeCd=t.leafTypeCode,e.queryItems.leafTypeCode=t.leafTypeCode,!0)}));case 7:case"end":return t.stop()}}),t)})))()},leafTypeChange:function(e){var t=this;return Object(l["a"])(Object(i["a"])().mark((function r(){return Object(i["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t._api.spinnerLeafForm({leafTypeCodes:[e]}).then((function(e){t.leafFormList=null===e||void 0===e?void 0:e.rows,t.leafFormList.some((function(e){return"101"===e.leafFormCode&&(t.queryItems.leafFormCode=e.leafFormCode,console.log(t.queryItems.leafFormCode),!0)}))}));case 2:case"end":return r.stop()}}),r)})))()},onQuery:function(){var e=this;return Object(l["a"])(Object(i["a"])().mark((function t(){var r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,e.queryItems.applyOrgCode=e.queryItems.applyOrgCodes.length?e.queryItems.applyOrgCodes.join(""):"",r=Object(o["a"])({applyType:"CONF_CP",pageNo:e.pagination.pageNumber,pageSize:e.pagination.pageSize},e.queryItems),console.log(r),e._api.pageConfCp(r).then((function(t){var r=t.rows||[];e.pagination.total=t.totalRows,e.oldDataRow=JSON.parse(JSON.stringify(r)),e.tableData=r,console.log("列表的数据：".concat(JSON.stringify(e.tableData)))})).finally((function(){e.loading=!1,e.selectedRows=[]})),e._api.queryHead(r).then((function(t){e.topInfo=Object(o["a"])({},t)}));case 6:case"end":return t.stop()}}),t)})))()},onExport:function(){},onReset:function(){var e=this;return Object(l["a"])(Object(i["a"])().mark((function t(){var r;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.leafTypeList.some((function(t){return"烤烟"===t.leafTypeName&&(e.leafTypeCd=t.leafTypeCode,r=t.leafTypeCode,!0)})),e.queryItems={applyOrgCodes:e.orgInfo?[e.orgInfo.orgUniqueCode]:void 0,applyOrgCode:e.queryItems.applyOrgCodes.length?e.queryItems.applyOrgCodes.join(""):"",storeCode:"",tranYear:(new Date).getFullYear(),leafTypeCode:r,leafFormCode:void 0},e.queryItems.leafTypeCode=e.leafTypeList.length?e.leafTypeList[0].leafTypeCode:"",t.next=5,e.leafTypeChange(e.queryItems.leafTypeCode);case 5:e.queryItems.submitState="",e.queryItems.auditState="",e.queryItems.oprType="",e.queryItems.orgName="",e.$refs.table.pageAction(1);case 10:case"end":return t.stop()}}),t)})))()}}}),p=u,d=(r("06e6"),r("2877")),f=Object(d["a"])(p,a,n,!1,null,"576da4c2",null);t["default"]=f.exports},c135:function(e,t){function r(e){if(Array.isArray(e))return e}e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},c240:function(e,t,r){function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}r("d9e2"),e.exports=a,e.exports.__esModule=!0,e.exports["default"]=e.exports},c973:function(e,t,r){function a(e,t,r,a,n,o,i){try{var l=e[o](i),s=l.value}catch(c){return void r(c)}l.done?t(s):Promise.resolve(s).then(a,n)}function n(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function l(e){a(i,n,o,l,s,"next",e)}function s(e){a(i,n,o,l,s,"throw",e)}l(void 0)}))}}r("d3b7"),e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},ded3:function(e,t,r){r("b64b"),r("a4d3"),r("4de4"),r("d3b7"),r("e439"),r("159b"),r("dbb4");var a=r("9523");function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports}}]);
//# sourceMappingURL=chunk-d953ca38.e74366c1.js.map