(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bd0446c"],{"0676":function(e,t,a){function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}a("d9e2"),e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},"11b0":function(e,t,a){function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630"),e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},2236:function(e,t,a){var r=a("5a43");function n(e){if(Array.isArray(e))return r(e)}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},"276b":function(e,t,a){},"278c":function(e,t,a){var r=a("c135"),n=a("9b42"),o=a("6613"),i=a("c240");function l(e,t){return r(e)||n(e,t)||o(e,t)||i()}e.exports=l,e.exports.__esModule=!0,e.exports["default"]=e.exports},"2a05":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ec-container",{attrs:{height:"100%"}},[a("ec-container-header",[a("ec-panel-item",[a("ec-panel-item-left",[a("ec-header",{attrs:{title:"收购码包申请",icon:"onetomany","color-code":"008"}})],1)],1)],1),a("ec-container-body",[a("ec-panel",{attrs:{auto:!1}},[a("ec-panel-toolbar",[a("ec-v-item",[a("a-descriptions",{attrs:{bordered:"",column:4}},[a("a-descriptions-item",{attrs:{label:"调拨年度"}},[e._v(" "+e._s(this.nowYear)+" ")]),a("a-descriptions-item",{attrs:{label:"烟叶类型"}},[e._v(" "+e._s(this.leafTypeName))]),a("a-descriptions-item",{attrs:{label:"计划量"}},[e._v(" "+e._s(e.totalData.planTotalWeight)+" ")]),a("a-descriptions-item",{attrs:{label:"剩余计划量"}},[e._v(" "+e._s(e.totalData.leftWeight)+" ")]),a("a-descriptions-item",{attrs:{label:"申请码包数量"}},[e._v(" "+e._s(e.totalData.applyNum)+" ")]),a("a-descriptions-item",{attrs:{label:"申请量"}},[e._v(" "+e._s(e.totalData.applyWeight)+" ")]),a("a-descriptions-item",{attrs:{label:""}}),a("a-descriptions-item",{attrs:{label:""}})],1)],1)],1),a("ec-panel-toolbar",[a("ec-v-item",[a("ec-query-panel",{attrs:{defaultFold:!0},on:{query:function(t){return e.$refs.table.pageAction(1)},reset:e.onReset},scopedSlots:e._u([{key:"inner",fn:function(){return[a("ec-query-item",{attrs:{label:"规格"}},[a("ec-select",{attrs:{placeholder:"请选择"},model:{value:e.queryItems.spec,callback:function(t){e.$set(e.queryItems,"spec",t)},expression:"queryItems.spec"}},e._l(e.specList,(function(t){return a("a-select-option",{key:t.spec},[e._v(" "+e._s(t.spec)+" ")])})),1)],1),a("ec-query-item",{attrs:{label:"状态"}},[a("ec-select",{attrs:{placeholder:"请选择"},model:{value:e.queryItems.applyState,callback:function(t){e.$set(e.queryItems,"applyState",t)},expression:"queryItems.applyState"}},e._l(e.applyStateList,(function(t){return a("a-select-option",{key:t.enumKey},[e._v(" "+e._s(t.name)+" ")])})),1)],1)]},proxy:!0}])},[a("ec-query-item",{attrs:{label:"申请单位"}},[a("org-picker",{attrs:{disabled:!0,placeholder:"请选择"},model:{value:e.queryItems.applyOrgCode,callback:function(t){e.$set(e.queryItems,"applyOrgCode",t)},expression:"queryItems.applyOrgCode"}})],1),a("ec-query-item",{attrs:{label:"烟叶类型"}},[a("ec-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择"},on:{select:e.handleSpec},model:{value:e.queryItems.leafTypeCode,callback:function(t){e.$set(e.queryItems,"leafTypeCode",t)},expression:"queryItems.leafTypeCode"}},e._l(e.leafTypeList,(function(t){return a("a-select-option",{key:t.leafTypeCode},[e._v(" "+e._s(t.leafTypeName)+" ")])})),1)],1),a("ec-query-item",{attrs:{label:"包装类型"}},[a("ec-select",{attrs:{placeholder:"请选择"},on:{select:e.handleSpec},model:{value:e.queryItems.packType,callback:function(t){e.$set(e.queryItems,"packType",t)},expression:"queryItems.packType"}},e._l(e.packTypeList,(function(t){return a("a-select-option",{key:t.enumKey},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1),a("ec-divider")],1)],1),a("ec-panel-header",[a("ec-v-item",[a("ec-panel-item",[a("ec-panel-item-left",[a("a-button",{attrs:{type:"primary"},on:{click:e.onAdd}},[e._v("新增")]),a("a-button",{on:{click:e.onDelete}},[e._v("删除")]),a("a-button",{on:{click:e.onConfirm}},[e._v("确认")])],1),a("ec-panel-item-right",[a("a-space",{attrs:{size:15}},[a("span",[e._v("重量单位："),a("ec-select",{staticStyle:{width:"150px"},attrs:{showSearch:"",allowClear:"",placeholder:"请选择"},on:{select:e.handleUnitParse},model:{value:e.weightUnit,callback:function(t){e.weightUnit=t},expression:"weightUnit"}},e._l(e.weightUnitList,(function(t){return a("a-select-option",{key:t.weightUnitCd},[e._v(" "+e._s(t.weightUnitName)+" ")])})),1)],1)])],1)],1)],1)],1),a("ec-panel-body",{attrs:{height:"100%"}},[a("ec-table",{ref:"table",attrs:{border:"",height:"100%",auto:!1,pagination:e.pagination,data:e.tableData.rows,loading:e.loading,"highlight-current-row":""},on:{"page-action":e.handlePagination,"checkbox-all":e.selectAllEvent,"checkbox-change":e.selectRowChange}},[a("ec-table-col",{attrs:{type:"checkbox",width:"50",align:"center"}}),a("ec-table-col",{attrs:{title:"序号",type:"seq",width:"70",align:"center"}}),a("ec-table-col",{attrs:{field:"applyDate",title:"申请日期",align:"center",width:"200"}}),a("ec-table-col",{attrs:{field:"applyOrgName",title:"申请单位",align:"left","min-width":"150"}}),a("ec-table-col",{attrs:{field:"leafTypeName",title:"烟叶类型",align:"left","min-width":"150"}}),a("ec-table-col",{attrs:{field:"packType",title:"包装类型",align:"left","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return e._l(e.packTypeList,(function(t){return a("div",{key:t.enumKey},[r.packType===t.enumKey?a("span",[e._v(" "+e._s(t.name))]):e._e()])}))}}])}),a("ec-table-col",{attrs:{field:"spec",title:"规格（KG/件）",align:"right","min-width":"150"}}),a("ec-table-col",{attrs:{field:"applyNum",title:"申请码包数量",align:"right","min-width":"150"}}),a("ec-table-col",{attrs:{field:"applyWeight",title:"申请量",align:"right","min-width":"150"}}),a("ec-table-col",{attrs:{field:"applyState",title:"状态",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return["1"===r.applyState?a("div",[a("span",[e._v("已确认")])]):a("div",[a("span",[e._v("未确认")])])]}}])}),a("ec-table-col",{attrs:{title:"操作",align:"center",width:"150",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.onEdit(r)}}},[e._v("编辑")])]}}])})],1)],1)],1),a("buy-apply-edit",{ref:"BuyApplyEdit",on:{onQuery:e.onQuery}})],1)],1)},n=[],o=a("c7eb"),i=a("1da1"),l=(a("e906"),a("dd14")),s=a.n(l),p=(a("d3b7"),a("b0c0"),a("e9c4"),a("159b"),a("b680"),a("7db0"),a("99af"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ec-modal",{staticClass:"ec-draw-form",attrs:{visible:e.visible,title:e.title,size:"large",height:"450px","is-confirm":!0},on:{cancel:e.onclose},scopedSlots:e._u([{key:"footer",fn:function(){return[a("a-button",{attrs:{type:"primary",loading:e.saving},on:{click:e.onSave}},[e._v("保存")]),a("a-button",{on:{click:e.onclose}},[e._v("取消")])]},proxy:!0}])},[a("ec-form",{ref:"modelRef",attrs:{model:e.formData,rules:e.rules}},[a("a-row",{attrs:{type:"flex",gutter:12}},[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{ref:"applyOrgCode",attrs:{label:"申请单位",prop:"applyOrgCode"}},[a("org-picker",{attrs:{disabled:!0,placeholder:"请选择"},model:{value:e.formData.applyOrgCode,callback:function(t){e.$set(e.formData,"applyOrgCode",t)},expression:"formData.applyOrgCode"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{ref:"leafTypeCode",attrs:{prop:"leafTypeCode",label:"烟叶类型"}},[a("ec-select",{attrs:{placeholder:"请选择"},on:{select:e.handleSpec},model:{value:e.formData.leafTypeCode,callback:function(t){e.$set(e.formData,"leafTypeCode",t)},expression:"formData.leafTypeCode"}},e._l(e.leafTypeList,(function(t){return a("a-select-option",{key:t.leafTypeCode},[e._v(" "+e._s(t.leafTypeName)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{ref:"packType",attrs:{prop:"packType",label:"包装类型"}},[a("ec-select",{attrs:{placeholder:"请选择"},on:{select:e.handleSpec},model:{value:e.formData.packType,callback:function(t){e.$set(e.formData,"packType",t)},expression:"formData.packType"}},e._l(e.packTypeList,(function(t){return a("a-select-option",{key:t.enumKey},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{ref:"spec",attrs:{prop:"spec",label:"规格（KG/件）"}},[a("ec-select",{attrs:{placeholder:"请选择"},on:{select:function(t){return e.handleApplyNum("spec")}},model:{value:e.formData.spec,callback:function(t){e.$set(e.formData,"spec",t)},expression:"formData.spec"}},e._l(e.specList,(function(t){return a("a-select-option",{key:t.spec},[e._v(" "+e._s(t.spec)+" ")])})),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:e.applyLable,prop:"applyWeight"}},[a("a-input-number",{attrs:{min:0,max:1e5,precision:2},on:{change:function(t){return e.handleApplyNum("applyWeight")}},model:{value:e.formData.applyWeight,callback:function(t){e.$set(e.formData,"applyWeight",t)},expression:"formData.applyWeight"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"申请码包数量",prop:"applyNum"}},[a("a-input-number",{attrs:{disabled:!0,min:0},model:{value:e.formData.applyNum,callback:function(t){e.$set(e.formData,"applyNum",t)},expression:"formData.applyNum"}})],1)],1)],1)],1)],1)}),c=[],u=(a("d9e2"),a("a9e3"),a("2ef0")),d=a.n(u),f={name:"batchManageForm",components:{OrgPicker:s.a},data:function(){var e=function(e,t,a){if(0===t.length)return a(new Error("请选择供方单位"));a()};return{visible:!1,formData:{applyOrgCode:void 0,leafTypeCode:void 0,packType:void 0,spec:void 0,applyWeight:void 0,applyNum:void 0},applyLable:"申请量（KG）",isEditor:!1,saving:!1,isDisableYear:!0,busiYear:"",title:"",leafTypeList:[],packTypeList:[],specList:[],applyOrgCode:"",applyOrgName:"",oldFormData:{},weightUnitName:"",weightUnit:"",rules:{applyOrgCode:[{validator:e,required:!0,trigger:"change"}],leafTypeCode:{required:!0,message:"请选择烟叶类型",trigger:"blur"},packType:{required:!0,message:"请输入包装类型",trigger:"blur"},spec:{required:!0,message:"请选择规格",trigger:"blur"},applyWeight:{required:!0,message:"请输入申请量",trigger:"blur"},applyNum:{required:!0,message:"请输入申请码包数量",trigger:"blur"}}}},methods:{show:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function a(){var r,n,i,l,s,p,c,u,f,y;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.visible=!0,r=e.type||"",n=(null===e||void 0===e?void 0:e.orgCodeList)||"",i=(null===e||void 0===e?void 0:e.selectedRow)||{},l=(null===e||void 0===e?void 0:e.enumMap)||{},s=(null===l||void 0===l?void 0:l.PC_APPLY_STATE)||[],t.applyStateList=s,t.leafTypeList=(null===e||void 0===e?void 0:e.oldLeafTypeList)||[],p=(null===l||void 0===l?void 0:l.PC_PACK_TYPE)||[],t.weightUnitName=e.weightUnitObj.weightUnitName,t.weightUnit=e.weightUnitObj.weightUnitCd,t.applyLable="申请量（".concat(t.weightUnitName,"）"),t.packTypeList=p,"editor"!==r){a.next=24;break}return t.isEditor=!0,t.title="编辑",t.oldFormData=d.a.cloneDeep(i),i.applyWeight=Number(i.applyWeight/t.weightUnit).toFixed(2),t.formData=i,t.formData.applyOrgCode=t.formData.applyOrgCode||n,a.next=22,t.handleSpec();case 22:a.next=33;break;case 24:t.isEditor=!1,t.title="新增",t.formData.tranYear=e.busiYear,t.formData.applyOrgName=e.orgName,t.formData.applyOrgCode=e.orgCode,t.formData.applyType="BU_CP",t.formData.applyOrgCode=n,t.leafTypeList&&null!==(c=t.leafTypeList)&&void 0!==c&&c.length&&(f=t.leafTypeList.find((function(e){return"烤烟"===e.leafTypeName})),t.formData.leafTypeCode=f.leafTypeCode),t.packTypeList&&null!==(u=t.packTypeList)&&void 0!==u&&u.length&&(y=t.packTypeList.find((function(e){return"麻片"===e.name})),t.formData.packType=y.enumKey);case 33:return t.busiYear=e.busiYear,a.next=36,t.handleSpec();case 36:console.log(t.formData);case 37:case"end":return a.stop()}}),a)})))()},handleApplyNum:function(e){var t=this.formData.spec,a=Number(t)||0,r=this.formData.applyWeight,n=Number(r*this.weightUnit)||0,o=0===a?0:(n/a).toFixed(2);if(this.formData.applyNum=Math.ceil(o)||0,"applyWeight"===e&&this.isEditor){var i=this.oldFormData;i.applyWeight=(n*this.weightUnit).toFixed(2)}},handleSpec:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a,r,n,i;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.formData.leafTypeCode,r=e.formData.packType,!a||!r){t.next=9;break}return e.formData.spec=void 0,n={applyOrgCd:e.formData.applyOrgCode,leafTypeCd:a,packType:r,specState:"1"},t.next=7,e.$apis.pcm.buy.packApply.querySpec(n);case 7:i=t.sent,e.specList=(null===i||void 0===i?void 0:i.rows)||[];case 9:case"end":return t.stop()}}),t)})))()},onSave:function(){var e=this;this.$refs.modelRef.validate(function(){var t=Object(i["a"])(Object(o["a"])().mark((function t(a){var r,n,i,l;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:e.saving=!0,r=e.formData,n=r.leafTypeCode,i=e.leafTypeList.find((function(e){return e.leafTypeCode===n})),r.leafTypeName=null===i||void 0===i?void 0:i.leafTypeName,e.isEditor?(l=e.oldFormData,r.applyWeight=l.applyWeight):r.applyWeight=(r.applyWeight*e.weightUnit).toFixed(2),console.log(r),e.isEditor?e.$apis.pcm.buy.packApply.update(r).then((function(t){console.log(t),e.onclose(),e.$emit("onQuery"),e.$message.success("操作成功")})).catch((function(t){console.log(t),e.saving=!1})):(r.leafFormCode="101",r.leafFormName="原烟",e.$apis.pcm.buy.packApply.save(r).then((function(t){console.log(t),e.onclose(),e.$emit("onQuery"),e.$message.success("操作成功")})).catch((function(t){console.log(t),e.saving=!1})));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},onclose:function(){this.saving=!1,this.specList=[],this.visible=!1,this.$refs.modelRef.resetFields()}}},y=f,m=a("2877"),h=Object(m["a"])(y,p,c,!1,null,null,null),g=h.exports,b={name:"ExecutionManage",components:{BuyApplyEdit:g,OrgPicker:s.a},data:function(){return{objectData:{},busiYear:"",queryItems:{applyOrgCode:void 0,leafTypeCode:"",packType:"",spec:"",applyState:""},defaultPackType:"",weightUnit:1,areaUnit:1e4,nowYear:"",loading:!1,leafTypeCd:"",leafTypeList:[],oldLeafTypeList:[],oldDataRow:[],oldTotalData:[],totalData:{},isNullData:[],leafTypeName:"",bizCode:"",beforeLeafTypeName:"",weightUnitList:[{weightUnitCd:1,weightUnitName:"公斤",isSelected:!1},{weightUnitCd:50,weightUnitName:"担",isSelected:!1}],applyStateList:[],packTypeList:[],specList:[],enumMap:{},pagination:{pageNumber:1,pageSize:10,total:0},tableData:{rows:[]}}},computed:{appConfig:function(){return this.$store.getters.getAppConfig}},created:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a,r,n,i,l,s,p;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$router.history.current.query.appCode,e.appCode=a||"CM",r=["PC_PACK_TYPE","PC_APPLY_STATE","PC_RT_SPEC"],n={enumTypeCodes:r},t.next=6,e.$apis.enum.index.getEnumType(n);case 6:i=t.sent,l=(null===i||void 0===i?void 0:i.enumMap)||{},e.enumMap=d.a.cloneDeep(l),s=(null===l||void 0===l?void 0:l.PC_APPLY_STATE)||[],s&&s.length>0&&(s.unshift({enumKey:"",enumTypeCode:"PC_APPLY_STATE",name:"全部"}),e.queryItems.applyState=s[0].enumKey),e.applyStateList=s,p=(null===l||void 0===l?void 0:l.PC_PACK_TYPE)||[],p&&p.length>0&&(p.unshift({enumKey:"",enumTypeCode:"PC_PACK_TYPE",name:"全部"}),p.some((function(t){return"麻片"===t.name&&(e.queryItems.packType=t.enumKey,e.defaultPackType=t.enumKey,!0)}))),e.packTypeList=p,console.log(i);case 16:case"end":return t.stop()}}),t)})))()},methods:{handleSpec:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a,r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={applyOrgCd:e.queryItems.applyOrgCd,leafTypeCd:e.queryItems.leafTypeCode,packType:e.queryItems.packType,specState:"1"},console.log("包装规格参数：".concat(JSON.stringify(a))),t.next=4,e.$apis.pcm.buy.packApply.querySpec(a);case 4:r=t.sent,e.specList=(null===r||void 0===r?void 0:r.rows)||[],console.log("包装规格：".concat(JSON.stringify(r))),e.beforeLeafTypeName=e.handleLeafTypeName(e.queryItems.leafTypeCode);case 8:case"end":return t.stop()}}),t)})))()},handleUnitParse:function(){var e=this,t=JSON.parse(JSON.stringify(this.oldDataRow));t.forEach((function(t){var a=t;a.applyWeight=(t.applyWeight/e.weightUnit).toFixed(2)}));var a=JSON.parse(JSON.stringify(this.oldTotalData));a.planTotalWeight=(a.planTotalWeight/this.weightUnit).toFixed(2),a.leftWeight=(a.leftWeight/this.weightUnit).toFixed(2),a.applyWeight=(a.applyWeight/this.weightUnit).toFixed(2),this.totalData=a,this.tableData.rows=t},handlePagination:function(e,t){var a=this;return Object(i["a"])(Object(o["a"])().mark((function r(){return Object(o["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a.pagination.pageNumber=e,a.pagination.pageSize=t,r.next=4,a.handleGetLeafTypeList();case 4:case"end":return r.stop()}}),r)})))()},handleGetLeafTypeList:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a,r,n,i,l,s,p;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==(a=e.leafTypeList)&&void 0!==a&&a.length){t.next=9;break}return t.next=3,e.$apis.common.index.queryLeafType({});case 3:r=t.sent,n=(null===r||void 0===r?void 0:r.rows)||[],e.oldLeafTypeList=d.a.cloneDeep(n),n&&n.length>0&&n.unshift({leafTypeName:"全部",leafTypeCode:""}),e.leafTypeList=n,e.leafTypeList.some((function(t){return"烤烟"===t.leafTypeName&&(e.leafTypeCd=t.leafTypeCode,e.queryItems.leafTypeCode=t.leafTypeCode,e.leafTypeName="烤烟",!0)}));case 9:if(e.queryItems.leafTypeCode||(i=e.leafTypeList[0].leafTypeCode,e.leafTypeCd=i,e.queryItems.leafTypeCode=i,e.leafTypeName=e.leafTypeList[0].leafTypeName),e.orgCode){t.next=19;break}return t.next=13,e.$apis.bim.curOrg.get({});case 13:l=t.sent,console.log("当前用户信息：".concat(JSON.stringify(l))),e.bizCode=null===l||void 0===l?void 0:l.bizCode,e.orgCode=null===l||void 0===l?void 0:l.orgUniqueCode,e.orgName=null===l||void 0===l?void 0:l.orgName,e.queryItems.applyOrgCode=e.bizCode;case 19:if(!(!e.queryItems.busiYear>0)){t.next=26;break}return s={bizCode:e.appConfig.bizCode,appCode:e.appCode||"CM",yearTypeCode:"SM_YEAR"},t.next=23,e.$apis.bpm.executionEnter.getBuYear(s);case 23:p=t.sent,e.queryItems.busiYear=null===p||void 0===p?void 0:p.yearValue,e.nowYear=null===p||void 0===p?void 0:p.yearValue;case 26:e.onQuery();case 27:case"end":return t.stop()}}),t)})))()},onQuery:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var a,r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.leafTypeName=e.beforeLeafTypeName||e.leafTypeName,a={pageNo:e.pagination.pageNumber,pageSize:e.pagination.pageSize,leafTypeCode:e.queryItems.leafTypeCode,packType:e.queryItems.packType,spec:e.queryItems.spec,applyState:e.queryItems.applyState,applyOrgCode:e.queryItems.applyOrgCode,tranYear:e.nowYear,applyType:"BU_CP",leafFormCode:"101"},console.log(JSON.stringify(a)),t.next=6,e.$apis.pcm.buy.packApply.query(a).then((function(t){var a=t.rows||[];e.pagination.total=t.totalRows,e.oldDataRow=JSON.parse(JSON.stringify(a))})).catch((function(e){console.log(e)})).finally((function(){e.loading=!1,e.selectedRows=[]}));case 6:return t.next=8,e.$apis.pcm.buy.packApply.queryTotalData(a);case 8:r=t.sent,e.oldTotalData=JSON.parse(JSON.stringify(r)),e.handleUnitParse();case 11:case"end":return t.stop()}}),t)})))()},onConfirm:function(){var e=this,t=this.$createElement;if(!this.selectedRows||this.selectedRows.length<=0)this.$message.error("请选择一条数据再同意");else{var a=this.selectedRows.find((function(e){return"1"===e.applyState}));console.log("--".concat(JSON.stringify(a))),a?this.$message.error("存在已确认数据，不能重复确认！"):this.$confirm({title:"是否执行该操作?",content:function(){return t("div",{style:"color:red;"},["是否确认提交选中的数据，确认请点击'确认'按钮，取消点击'取消'按钮。"])},onOk:function(){e.loading=!0;for(var t=[],a=0;a<e.selectedRows.length;a++)t.push(e.selectedRows[a].barcodeApplyId);console.log("ids:".concat(JSON.stringify(t))),e.$apis.pcm.buy.packApply.confirm({barcodeApplyIds:t}).then((function(t){console.log(JSON.stringify(t)),t.result?(e.loading=!1,e.$message.success("操作成功"),e.onQuery()):(e.loading=!1,e.$message.error("操作失败"))})).catch((function(t){console.log(t),e.loading=!1}))}})}},onDelete:function(){var e=this,t=this.$createElement;if(!this.selectedRows||this.selectedRows.length<=0)this.$message.error("请选择一条数据再同意");else{var a=this.selectedRows.find((function(e){return"1"===e.applyState}));console.log("--".concat(JSON.stringify(a))),a?this.$message.error("存在已确认数据，不能删除！"):this.$confirm({title:"是否执行该操作?",content:function(){return t("div",{style:"color:red;"},["是否确认提交选中的数据，确认请点击'确认'按钮，取消点击'取消'按钮。"])},onOk:function(){e.loading=!0;for(var t=[],a=0;a<e.selectedRows.length;a++)t.push(e.selectedRows[a].barcodeApplyId);console.log("ids:".concat(JSON.stringify(t))),e.$apis.pcm.buy.packApply.delete({barcodeApplyIds:t}).then((function(t){console.log(JSON.stringify(t)),t.result?(e.loading=!1,e.$message.success("操作成功"),e.onQuery()):(e.loading=!1,e.$message.error("操作失败"))})).catch((function(t){console.log(t),e.loading=!1}))}})}},onAdd:function(){var e=this,t=this.queryItems.busiYear,a=this.weightUnitList.find((function(t){return t.weightUnitCd===e.weightUnit})),r={busiYear:t,enumMap:this.enumMap,oldLeafTypeList:this.oldLeafTypeList,orgCodeList:this.queryItems.applyOrgCode,orgCode:this.orgCode,orgName:this.orgName,weightUnitObj:a};this.$refs.BuyApplyEdit.show(r)},onEdit:function(e){var t=this;if("1"!==e.applyState){var a=this.queryItems.busiYear,r=this.oldDataRow.find((function(t){return t.barcodeApplyId===e.barcodeApplyId})),n=this.weightUnitList.find((function(e){return e.weightUnitCd===t.weightUnit})),o={selectedRow:d.a.cloneDeep(r),busiYear:a,enumMap:this.enumMap,oldLeafTypeList:this.oldLeafTypeList,orgCodeList:this.queryItems.applyOrgCode,weightUnitObj:n,type:"editor"};console.log("0000000:".concat(JSON.stringify(o))),this.$refs.BuyApplyEdit.show(o)}else this.$message.error("已确认数据不能编辑！")},onReset:function(){this.queryItems.leafTypeCode=this.leafTypeCd,this.queryItems.packType=this.defaultPackType,this.queryItems.spec="",this.queryItems.applyState="",this.beforeLeafTypeName=this.handleLeafTypeName(this.leafTypeCd),this.$refs.table.pageAction(1)},handleLeafTypeName:function(e){var t=this.leafTypeList.find((function(t){return t.leafTypeCode===e}));return null===t||void 0===t?void 0:t.leafTypeName},selectAllEvent:function(e){var t=e.checked,a=e.records;console.log("".concat(t,"-选中所有records包含选中的所以对象----").concat(JSON.stringify(a))),this.selectedRows=a},selectRowChange:function(e){var t=e.checked,a=e.records;console.log("".concat(t,"-选择改变时会把records包含选中的所以对象----").concat(JSON.stringify(a))),this.selectedRows=a}}},v=b,T=(a("e6c1"),Object(m["a"])(v,r,n,!1,null,"1850849c",null));t["default"]=T.exports},"448a":function(e,t,a){var r=a("2236"),n=a("11b0"),o=a("6613"),i=a("0676");function l(e){return r(e)||n(e)||o(e)||i()}e.exports=l,e.exports.__esModule=!0,e.exports["default"]=e.exports},"5a43":function(e,t){function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}e.exports=a,e.exports.__esModule=!0,e.exports["default"]=e.exports},63748:function(e,t,a){a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("d9e2");var r=a("6613");function n(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=r(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==a["return"]||a["return"]()}finally{if(s)throw i}}}}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},6613:function(e,t,a){a("fb6a"),a("d3b7"),a("b0c0"),a("a630"),a("3ca3"),a("ac1f"),a("00b4");var r=a("5a43");function n(e,t){if(e){if("string"===typeof e)return r(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(e,t):void 0}}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},9523:function(e,t){function a(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}e.exports=a,e.exports.__esModule=!0,e.exports["default"]=e.exports},"9b42":function(e,t,a){function r(e,t){var a=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done);i=!0)if(o.push(r.value),t&&o.length===t)break}catch(s){l=!0,n=s}finally{try{i||null==a["return"]||a["return"]()}finally{if(l)throw n}}return o}}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},c135:function(e,t){function a(e){if(Array.isArray(e))return e}e.exports=a,e.exports.__esModule=!0,e.exports["default"]=e.exports},c240:function(e,t,a){function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}a("d9e2"),e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},c973:function(e,t,a){function r(e,t,a,r,n,o,i){try{var l=e[o](i),s=l.value}catch(p){return void a(p)}l.done?t(s):Promise.resolve(s).then(r,n)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var i=e.apply(t,a);function l(e){r(i,n,o,l,s,"next",e)}function s(e){r(i,n,o,l,s,"throw",e)}l(void 0)}))}}a("d3b7"),e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},ded3:function(e,t,a){a("b64b"),a("a4d3"),a("4de4"),a("d3b7"),a("e439"),a("159b"),a("dbb4");var r=a("9523");function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}e.exports=o,e.exports.__esModule=!0,e.exports["default"]=e.exports},e6c1:function(e,t,a){"use strict";a("276b")}}]);
//# sourceMappingURL=chunk-0bd0446c.8d64a13d.js.map