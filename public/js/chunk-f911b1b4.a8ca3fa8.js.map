{"version":3,"sources":["webpack:///./src/views/bpm/execution-enter/Index.vue?7fb7","webpack:///./src/views/bpm/execution-enter/ExecutionEnterForm.vue?8741","webpack:///src/views/bpm/execution-enter/ExecutionEnterForm.vue","webpack:///./src/views/bpm/execution-enter/ExecutionEnterForm.vue?c1c2","webpack:///./src/views/bpm/execution-enter/ExecutionEnterForm.vue","webpack:///src/views/bpm/execution-enter/Index.vue","webpack:///./src/views/bpm/execution-enter/Index.vue?ed62","webpack:///./src/views/bpm/execution-enter/Index.vue","webpack:///./src/views/bpm/execution-enter/ExecutionEnterForm.vue?1c29","webpack:///./src/views/bpm/execution-enter/Index.vue?688e"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","onQuery","onReset","model","value","queryItems","callback","$$v","$set","expression","_l","leafTypeEk","key","leafTypeCode","_v","_s","leafTypeName","onEdit","onSubmit","staticStyle","busiYear","$event","handleUnitParse","weightUnit","weightUnitCd","weightUnitName","areaUnit","areaUnitCd","areaUnitName","ref","tableData","rows","loading","footerMethod","selectAllEvent","selectRowChange","scopedSlots","_u","fn","row","submitState","staticRenderFns","staticClass","visible","onclose","nowYear","handleFileInit","visibleFile","slot","handleFileCandle","totalFileList","uploading","transformFile","fileList","onDownload","onDelete","saving","trigger","mode","showStatus","validRules","releaseState","handlePlanInnerWeight","planTotalWeight","planExportWeight","planPlantArea","handleRemark","remark","onSave","name","data","props","type","default","isEditor","isShowSaveAndAdd","ruleForm","leafTypeCd","leafTypeList","saveTableData","fileUid","orgCode","required","message","methods","file","title","content","onOk","asAttachFileId","deleteFile","then","catch","console","downFile","link","document","window","moduleCode","queryFile","finally","that","uid","param","$ec","post","headers","itemObj","handleAaData","$table","errMap","pcTBuPlanOprRecordList","save","show","handleInitEnterData","queryEnter","obj","handleDataParse","beforeAjustData","handleBeforeSaveAdjustData","copyTableData","field","rowObj","handleNoValue","sumNum","list","count","columns","column","component","components","ExecutionEnterForm","submitStateFlag","colCount","oldDataRow","weightUnitList","isSelected","areaUnitList","pagination","pageNumber","pageSize","total","created","mounted","computed","appConfig","auditState","query","leafTypeObj","weightUnitObj","areaUnitObj","idList","oprRecordIds","handleOlDataRow","newTableData","handleLeafTypeName","typeCd","handlePagination","handleGetLeafTypeList","res","orgObj","bizCode","appCode","yearTypeCode","busiYearObj","checked","JSON"],"mappings":"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WACA,qBACA7B,uBACA,QACA4B,sCACAA,wCACAA,sCACAA,kCACAA,8BACAA,yBAIAvC,OAzJA,WAyJA,uKACAyC,EAAA,eADA,SAGAA,kCAAA,YAHA,OAGAC,EAHA,OAIA,EACA,4BAGA/B,EAAA,EAAAA,cACA,iBACA,YACAT,EAAA,CACAzD,4BACAO,mBACA2F,yCAEAlB,eACA,2BACAmB,KAAA1C,GACAqB,MAAA,YAEA,GADAE,+BACA,SACA,YACA,2BACA,mBACA,gBACA,CACA,YACA,kDACA,wBAGAD,OAAA,YACAC,eACA,gBAlCA,8CAuCAoB,KAhMA,SAgMA3C,GACA,gBACA,YACA,6CACA,6CACA,mDACA,6CAEA,6CACA,uCACA,uBACA,uBAGA,4BAIA4C,oBAlNA,WAkNA,WACA,gBACA,OACArG,+BACAO,uBAEA,8BACA+F,WAAA7C,GACAqB,MAAA,YACA,aACA,iBACA,iCACA,sCACA,QACAyB,8BACA,wBAEA,iBAEAxB,OAAA,YACA,aACA,EACA,oCAEA,6BAMAyB,gBAhPA,SAgPAC,GACA,QACAF,iEACAA,iEACAA,mEACAA,4DAIAG,2BAzPA,WAyPA,WAEA,6CACA,KAUA,OARAC,uBACA,QACAJ,8DACAA,8DACAA,gEACAA,wDACArC,aAEA,GAIAjB,sBA1QA,SA0QAvB,EAAAkF,GAAA,WACA,IACA,+BACA,gCACA,QAEA,GADA,iCACA,sBAEA,YADAC,sBAGA,0BAEA,YADAA,uBAIA,uBACAA,oBACA,wCACA,0BACA,QACA,uBACAf,sDACA,CACAA,oDACA,mCACA,gCACA,mBACAA,0BAOAgB,cA5SA,SA4SApF,EAAAkF,GAAA,WACA,IACA,OACA,IACAC,aAEA,uCACA,oCACA,QACAf,wDAIAd,oDACAA,wEAIA+B,OA9TA,SA8TAC,EAAAJ,GACA,QAIA,OAHAI,uBACAC,mBAEA,cAGA7F,aAtUA,YAsUA,uBAAI,EAAJ,OACA,OACA8F,qBACA,aACA,KAGA,kFACAC,YAGA,uBAEA,UAKApF,QAxVA,WA0VA,kBACA,mBC9mB6Z,I,wBCQzZqF,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QC2GA,GACf5D,4BACA6D,YACAC,sBAEA7D,KALA,WAMA,OACAjE,YACAQ,kBACAuH,mBACAhH,aAEAG,eACAG,aACA2G,WACAxF,WACAb,WACA6C,cACAC,cACA,CAAAjE,kBAAAG,mBACA,CAAAH,kBAAAG,wBACA,CAAAH,oBAAAG,2BAEAsH,cACArD,WACAsD,gBACA,CAAA/G,eAAAC,oBAAA+G,eACA,CAAAhH,gBAAAC,mBAAA+G,eACA,CAAAhH,iBAAAC,oBAAA+G,gBAEAC,cACA,CAAA9G,eAAAC,mBACA,CAAAD,aAAAC,mBAEA8G,YACAC,aACAC,YACAC,SAEA/G,WAGAC,WAKA+G,QA/CA,WAgDA,iDACA,sBAEAC,QAnDA,WAoDA,gBAEAC,UAEAC,UAFA,WAGA,0CAGA7D,SAEAnF,QAFA,WAEA,mKACA4F,+DADA,SAEA,0BAFA,OAGA,aACAuC,EAAA,aAAAA,gBACA9D,EAAA,CACAzD,uCACA2B,qBACApB,+BACA8H,qBAEArD,eACA,2BACAsD,MAAA7E,GACAqB,MAAA,YACA,cACA,uBACA,+BACA,2CACAE,+CAEA,uBAEAD,OAAA,YACAC,kBAEAO,SAAA,WACA,aACA,qBA5BA,8CAiCAnF,OAnCA,WAmCA,WAEA,0BACA,iEAEA,gFACA,0EACA,GACAmI,cACAC,gBACAC,cAEArE,qBACApC,kCAEA,uCAIA3B,SAtDA,WAsDA,iCACA,mDACA,sCADA,CAKA,8BACA,6DAEA2E,4CACA,EACA,uCAGAA,+CACA,eACAP,iBACAC,mBAAA,sBACA,cADA,0CAKAC,gBACA,aAEA,IADA,SACA,gCACA+D,sCAEA,mCAAAC,iBAAA,kBACA3D,+BACA,UACA,aACA,2BACA,cAEA,aACA,mCAQA3F,QAlGA,WAmGA,6CACA,mCACA,qBACA,gCAIAoB,gBA1GA,WA0GA,WACA,KACA,kDAEAmI,uBACA,QACArC,8DACAA,8DACAA,gEACAA,wDACAsC,aAEA7D,eACA,uBAIA8D,mBA3HA,SA2HAC,GACA,uEACA,mDAGAC,iBAhIA,SAgIAlB,EAAAC,GAAA,2JACA,0BACA,wBACA/C,0BAHA,SAIA,0BAJA,8CAQAiE,sBAxIA,WAwIA,+KACA,sBADA,OACA,SADA,gCAEA,6CAFA,OAEAC,EAFA,OAGA,wDACA,iCACA,8BACA,4BACA,0CACA,MARA,UAeA,UAfA,iCAgBA,2BAhBA,OAgBAC,EAhBA,OAiBAnE,iDACA,gDACA,sDAnBA,cAqBA,yBArBA,wBAuBAvB,EAAA,CACA2F,kBACAC,wBACAC,yBA1BA,UA4BA,wCA5BA,QA4BAC,EA5BA,OA6BA,8DA7BA,+CAoCAxC,OA5KA,SA4KAC,EAAAJ,GACA,QAIA,OAHAI,uBACAC,mBAEA,cAGA7F,aApLA,YAoLA,uBAAI,EAAJ,OACA,OACA8F,qBACA,aACA,KAGA,kFACAC,YAGA,uBAEA,UAMA9F,eAvMA,YAuMA,gBAAI,EAAJ,UACA2D,gFACA,qBAIA1D,gBA7MA,YA6MA,gBAAI,EAAJ,UACA0D,sBACAwE,EADA,uCACAC,oBAEA,uBC3YgZ,ICQ5Y,G,UAAY,eACd,EACA9K,EACAiD,GACA,EACA,KACA,WACA,OAIa,e,oECnBf,W,kCCAA","file":"js/chunk-f911b1b4.a8ca3fa8.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-container',{attrs:{\"height\":\"100%\"}},[_c('ec-container-header',[_c('ec-panel-item',[_c('ec-panel-item-left',[_c('ec-header',{attrs:{\"title\":\"收购计划量登记\",\"icon\":\"onetomany\",\"color-code\":\"008\"}})],1)],1)],1),_c('ec-container-body',[_c('ec-panel',{attrs:{\"auto\":false}},[_c('ec-panel-toolbar',[_c('ec-query-panel',{on:{\"query\":_vm.onQuery,\"reset\":_vm.onReset}},[_c('ec-query-item',{attrs:{\"label\":\"烟叶类型\"}},[_c('ec-select',{attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.queryItems.leafTypeCode),callback:function ($$v) {_vm.$set(_vm.queryItems, \"leafTypeCode\", $$v)},expression:\"queryItems.leafTypeCode\"}},_vm._l((_vm.leafTypeList),function(leafTypeEk){return _c('a-select-option',{key:leafTypeEk.leafTypeCode},[_vm._v(\" \"+_vm._s(leafTypeEk.leafTypeName)+\" \")])}),1)],1)],1),_c('ec-divider')],1),_c('ec-panel-header',[_c('ec-panel-item',[_c('ec-panel-item-left',[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onEdit}},[_vm._v(\"编辑\")]),_c('a-button',{on:{\"click\":_vm.onSubmit}},[_vm._v(\"提交\")]),_c('a-checkbox',{staticStyle:{\"margin-left\":\"10px\"},on:{\"change\":_vm.onQuery},model:{value:(_vm.queryItems.submitStateFlag),callback:function ($$v) {_vm.$set(_vm.queryItems, \"submitStateFlag\", $$v)},expression:\"queryItems.submitStateFlag\"}},[_vm._v(\" 可提交 \")])],1),_c('ec-panel-item-right',[_c('a-space',{attrs:{\"size\":15}},[_c('span',[_vm._v(\"种植收购年度：\"+_vm._s(_vm.queryItems.busiYear)+\"年\")]),_c('span',[_vm._v(\"重量单位：\"),_c('ec-select',{staticStyle:{\"width\":\"150px\"},attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},on:{\"select\":function($event){return _vm.handleUnitParse()}},model:{value:(_vm.weightUnit),callback:function ($$v) {_vm.weightUnit=$$v},expression:\"weightUnit\"}},_vm._l((_vm.weightUnitList),function(weightUnit){return _c('a-select-option',{key:weightUnit.weightUnitCd},[_vm._v(\" \"+_vm._s(weightUnit.weightUnitName)+\" \")])}),1)],1),_c('span',[_vm._v(\"面积单位：\"),_c('ec-select',{staticStyle:{\"width\":\"150px\"},attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},on:{\"select\":function($event){return _vm.handleUnitParse()}},model:{value:(_vm.areaUnit),callback:function ($$v) {_vm.areaUnit=$$v},expression:\"areaUnit\"}},_vm._l((_vm.areaUnitList),function(areaUnit){return _c('a-select-option',{key:areaUnit.areaUnitCd},[_vm._v(\" \"+_vm._s(areaUnit.areaUnitName)+\" \")])}),1)],1)])],1)],1)],1),_c('ec-panel-body',[_c('ec-table',{ref:\"table\",attrs:{\"border\":\"\",\"height\":\"100%\",\"auto\":false,\"data\":_vm.tableData.rows,\"loading\":_vm.loading,\"row-select\":\"\",\"show-footer\":\"\",\"footer-method\":_vm.footerMethod},on:{\"checkbox-all\":_vm.selectAllEvent,\"checkbox-change\":_vm.selectRowChange}},[_c('ec-table-col',{attrs:{\"type\":\"checkbox\",\"width\":\"50\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"type\":\"seq\",\"title\":\"序号\",\"width\":\"70\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"field\":\"orgName\",\"title\":\"单位名称\",\"align\":\"left\",\"min-width\":\"200\"}}),_c('ec-table-colgroup',{attrs:{\"title\":\"收购计划执行量\"}},[_c('ec-table-col',{attrs:{\"field\":\"planTotalWeight\",\"title\":\"合计\",\"align\":\"center\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"planInnerWeight\",\"title\":\"国内\",\"align\":\"center\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"planExportWeight\",\"title\":\"出口备货\",\"align\":\"center\",\"width\":\"150\"}})],1),_c('ec-table-col',{attrs:{\"field\":\"planPlantArea\",\"title\":\"种植面积\",\"align\":\"right\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"remark\",\"title\":\"办理依据\",\"align\":\"left\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"submitState\",\"title\":\"提交状态\",\"align\":\"center\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.submitState === '1')?_c('div',[_c('span',[_vm._v(\"已提交\")])]):_c('div',[_c('span',[_vm._v(\"未提交\")])])]}}])})],1)],1)],1),_c('execution-enter-form',{ref:\"ExecutionEnterForm\",on:{\"onQuery\":_vm.onQuery}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-drawer',{staticClass:\"ec-draw-form\",attrs:{\"title\":\"收购计划量登记\",\"visible\":_vm.visible,\"size\":\"large\",\"is-confirm\":true},on:{\"close\":_vm.onclose}},[_c('ec-container',{attrs:{\"height\":\"100%\",\"fixed\":\"top bottom\",\"color-code\":\"007\"}},[_c('ec-container-header',[_c('ec-panel-item',[_c('ec-panel-item-left',[_c('ec-header',{attrs:{\"title\":\"收购计划量登记\",\"icon\":\"onetomany\",\"color-code\":\"008\"}})],1),_c('ec-panel-item-right',[_c('div',{staticClass:\"year\"},[_vm._v(\" 种植收购年度：\"+_vm._s(_vm.nowYear)+\"年;正在编辑的烟叶类型：\"+_vm._s(_vm.leafTypeName)+\"；单位：\"+_vm._s(_vm.weightUnitName)+\"、\"+_vm._s(_vm.areaUnitName)+\" \")])])],1)],1),_c('ec-container-body',[_c('ec-panel',{attrs:{\"color-code\":\"001\",\"auto\":false}},[_c('ec-panel-header',[_c('ec-v-item',[_c('ec-panel-item',[_c('ec-panel-item-left',[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleFileInit}},[_vm._v(\"附件管理\")])],1)],1),_c('a-modal',{attrs:{\"title\":\"附件\",\"width\":\"800px\"},model:{value:(_vm.visibleFile),callback:function ($$v) {_vm.visibleFile=$$v},expression:\"visibleFile\"}},[_c('template',{slot:\"footer\"},[_c('a-button',{key:\"back\",on:{\"click\":_vm.handleFileCandle}},[_vm._v(\" 取消 \")])],1),_c('ec-panel-body',[_c('ec-v-layout',[_c('ec-v-item',[_c('ec-panel-item',[_c('ec-panel-item-left',[_c('a-upload',{attrs:{\"file-list\":_vm.totalFileList,\"disabled\":_vm.uploading},on:{\"change\":_vm.transformFile}},[_c('a-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.uploading}},[_c('a-icon',{attrs:{\"type\":\"upload\"}}),_vm._v(\" 上传 \")],1)],1)],1)],1)],1),_c('ec-v-item',[_c('ec-table',{ref:\"table\",attrs:{\"data\":_vm.fileList,\"loading\":_vm.loading,\"row-select\":\"\"}},[_c('ec-table-col',{attrs:{\"type\":\"seq\",\"title\":\"序号\",\"width\":\"70\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"field\":\"fileName\",\"title\":\"附件名称\",\"align\":\"left\",\"min-width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"createrName\",\"title\":\"上传人\",\"align\":\"left\",\"min-width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"createTime\",\"title\":\"上传时间\",\"align\":\"left\",\"min-width\":\"150\"}}),_c('ec-table-col',{attrs:{\"title\":\"操作\",\"align\":\"center\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.onDownload(row)}}},[_vm._v(\"下载\")]),_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.onDelete(row)}}},[_vm._v(\"删除\")])]}}])})],1)],1)],1)],1)],2)],1)],1),_c('ec-panel-body',[_c('ec-table',{ref:\"xTable\",staticClass:\"my-xtable-antd\",attrs:{\"border\":\"\",\"show-overflow\":\"\",\"keep-source\":\"\",\"height\":\"100%\",\"auto\":false,\"loading\":_vm.saving,\"data\":_vm.tableData,\"row-select\":\"\",\"edit-config\":{ trigger: 'click', mode: 'row', showStatus: true },\"edit-rules\":_vm.validRules,\"show-footer\":\"\",\"footer-method\":_vm.footerMethod}},[_c('ec-table-col',{attrs:{\"title\":\"序号\",\"type\":\"seq\",\"width\":\"70\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"field\":\"orgName\",\"title\":\"单位名称\",\"align\":\"left\",\"min-width\":\"150\"}}),_c('ec-table-colgroup',{attrs:{\"title\":\"收购计划执行量\"}},[_c('ec-table-col',{attrs:{\"field\":\"planTotalWeight\",\"title\":\"合计\",\"width\":\"150\",\"align\":\"center\",\"edit-render\":{}},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.releaseState !== '1')?_c('a-input-number',{attrs:{\"min\":0,\"max\":100000,\"precision\":2},on:{\"blur\":function($event){return _vm.handlePlanInnerWeight(row, 'planTotalWeight')}},model:{value:(row.planTotalWeight),callback:function ($$v) {_vm.$set(row, \"planTotalWeight\", $$v)},expression:\"row.planTotalWeight\"}}):[_vm._v(\" \"+_vm._s(row.planTotalWeight)+\" \")]]}}])}),_c('ec-table-col',{attrs:{\"field\":\"planInnerWeight\",\"title\":\"国内\",\"align\":\"center\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"planExportWeight\",\"title\":\"出口备货\",\"width\":\"150\",\"align\":\"center\",\"edit-render\":{}},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.releaseState !== '1')?_c('a-input-number',{attrs:{\"min\":0,\"max\":100000,\"precision\":2},on:{\"blur\":function($event){return _vm.handlePlanInnerWeight(row, 'planExportWeight')}},model:{value:(row.planExportWeight),callback:function ($$v) {_vm.$set(row, \"planExportWeight\", $$v)},expression:\"row.planExportWeight\"}}):[_vm._v(_vm._s(row.planExportWeight))]]}}])})],1),_c('ec-table-col',{attrs:{\"field\":\"planPlantArea\",\"title\":\"种植面积\",\"width\":\"150\",\"edit-render\":{},\"align\":\"right\"},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.releaseState !== '1')?_c('a-input-number',{attrs:{\"min\":0,\"max\":100000,\"precision\":2},on:{\"blur\":function($event){return _vm.handlePlanInnerWeight(row, 'planPlantArea')}},model:{value:(row.planPlantArea),callback:function ($$v) {_vm.$set(row, \"planPlantArea\", $$v)},expression:\"row.planPlantArea\"}}):[_vm._v(_vm._s(row.planPlantArea))]]}}])}),_c('ec-table-col',{attrs:{\"field\":\"remark\",\"title\":\"办理依据\",\"width\":\"150\",\"maxLength\":64,\"edit-render\":{},\"align\":\"left\"},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.releaseState !== '1')?_c('a-input',{on:{\"blur\":function($event){return _vm.handleRemark(row)}},model:{value:(row.remark),callback:function ($$v) {_vm.$set(row, \"remark\", $$v)},expression:\"row.remark\"}}):[_vm._v(_vm._s(row.remark))]]}}])}),_c('ec-table-col',{attrs:{\"field\":\"submitState\",\"title\":\"提交状态\",\"align\":\"left\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.submitState === '1')?_c('div',[_c('span',[_vm._v(\"已提交\")])]):_c('div',[_c('span',[_vm._v(\"未提交\")])])]}}])})],1)],1)],1)],1),_c('ec-container-footer',{attrs:{\"fixed\":\"\"}},[_c('a-space',[_c('a-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.saving},on:{\"click\":function($event){return _vm.onSave('save')}}},[_vm._v(\"保存\")]),_c('a-button',{on:{\"click\":_vm.onclose}},[_vm._v(\"取消\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ec-drawer\r\n    title=\"收购计划量登记\"\r\n    :visible=\"visible\"\r\n    size=\"large\"\r\n    @close=\"onclose\"\r\n    class=\"ec-draw-form\"\r\n    :is-confirm=\"true\"\r\n  >\r\n    <ec-container height=\"100%\" fixed=\"top bottom\" color-code=\"007\">\r\n      <ec-container-header>\r\n        <ec-panel-item>\r\n          <ec-panel-item-left>\r\n            <ec-header title=\"收购计划量登记\" icon=\"onetomany\" color-code=\"008\" />\r\n          </ec-panel-item-left>\r\n          <ec-panel-item-right>\r\n            <div class=\"year\">\r\n              种植收购年度：{{ nowYear }}年;正在编辑的烟叶类型：{{ leafTypeName }}；单位：{{\r\n                weightUnitName\r\n              }}、{{ areaUnitName }}\r\n            </div>\r\n          </ec-panel-item-right>\r\n        </ec-panel-item>\r\n      </ec-container-header>\r\n      <ec-container-body>\r\n        <ec-panel color-code=\"001\" :auto=\"false\">\r\n          <ec-panel-header>\r\n            <ec-v-item>\r\n              <ec-panel-item>\r\n                <ec-panel-item-left>\r\n                  <a-button type=\"primary\" @click=\"handleFileInit\">附件管理</a-button>\r\n                </ec-panel-item-left>\r\n              </ec-panel-item>\r\n\r\n              <a-modal v-model=\"visibleFile\" title=\"附件\" width=\"800px\">\r\n                <template slot=\"footer\">\r\n                  <a-button key=\"back\" @click=\"handleFileCandle\"> 取消 </a-button>\r\n                </template>\r\n                <ec-panel-body>\r\n                  <ec-v-layout>\r\n                    <!-- 表格工具栏 -->\r\n                    <ec-v-item>\r\n                      <ec-panel-item>\r\n                        <ec-panel-item-left>\r\n                          <a-upload\r\n                            :file-list=\"totalFileList\"\r\n                            :disabled=\"uploading\"\r\n                            @change=\"transformFile\"\r\n                          >\r\n                            <a-button type=\"primary\" :loading=\"uploading\">\r\n                              <a-icon type=\"upload\" /> 上传\r\n                            </a-button>\r\n                          </a-upload>\r\n                        </ec-panel-item-left>\r\n                      </ec-panel-item>\r\n                    </ec-v-item>\r\n                    <!-- 列表 -->\r\n                    <ec-v-item>\r\n                      <ec-table ref=\"table\" :data=\"fileList\" :loading=\"loading\" row-select>\r\n                        <ec-table-col type=\"seq\" title=\"序号\" width=\"70\" align=\"center\" />\r\n                        <ec-table-col\r\n                          field=\"fileName\"\r\n                          title=\"附件名称\"\r\n                          align=\"left\"\r\n                          min-width=\"150\"\r\n                        />\r\n                        <ec-table-col\r\n                          field=\"createrName\"\r\n                          title=\"上传人\"\r\n                          align=\"left\"\r\n                          min-width=\"150\"\r\n                        />\r\n                        <ec-table-col\r\n                          field=\"createTime\"\r\n                          title=\"上传时间\"\r\n                          align=\"left\"\r\n                          min-width=\"150\"\r\n                        >\r\n                        </ec-table-col>\r\n                        <ec-table-col title=\"操作\" align=\"center\" width=\"150\">\r\n                          <template #default=\"{ row }\">\r\n                            <a-button type=\"link\" @click=\"onDownload(row)\">下载</a-button>\r\n                            <a-button type=\"link\" @click=\"onDelete(row)\">删除</a-button>\r\n                          </template>\r\n                        </ec-table-col>\r\n                      </ec-table>\r\n                    </ec-v-item>\r\n                  </ec-v-layout>\r\n                </ec-panel-body>\r\n              </a-modal>\r\n            </ec-v-item>\r\n          </ec-panel-header>\r\n          <ec-panel-body>\r\n            <ec-table\r\n              border\r\n              show-overflow\r\n              keep-source\r\n              height=\"100%\"\r\n              :auto=\"false\"\r\n              ref=\"xTable\"\r\n              class=\"my-xtable-antd\"\r\n              :loading=\"saving\"\r\n              :data=\"tableData\"\r\n              row-select\r\n              :edit-config=\"{ trigger: 'click', mode: 'row', showStatus: true }\"\r\n              :edit-rules=\"validRules\"\r\n              show-footer\r\n              :footer-method=\"footerMethod\"\r\n            >\r\n              <ec-table-col title=\"序号\" type=\"seq\" width=\"70\" align=\"center\" />\r\n              <ec-table-col field=\"orgName\" title=\"单位名称\" align=\"left\" min-width=\"150\" />\r\n              <ec-table-colgroup title=\"收购计划执行量\">\r\n                <ec-table-col\r\n                  field=\"planTotalWeight\"\r\n                  title=\"合计\"\r\n                  width=\"150\"\r\n                  align=\"center\"\r\n                  :edit-render=\"{}\"\r\n                >\r\n                  <template #edit=\"{ row }\">\r\n                    <a-input-number\r\n                      v-if=\"row.releaseState !== '1'\"\r\n                      v-model=\"row.planTotalWeight\"\r\n                      :min=\"0\"\r\n                      :max=\"100000\"\r\n                      :precision=\"2\"\r\n                      @blur=\"handlePlanInnerWeight(row, 'planTotalWeight')\"\r\n                    ></a-input-number>\r\n\r\n                    <template v-else>\r\n                      {{ row.planTotalWeight }}\r\n                    </template>\r\n                  </template>\r\n                </ec-table-col>\r\n                <ec-table-col field=\"planInnerWeight\" title=\"国内\" align=\"center\" width=\"150\" />\r\n                <ec-table-col\r\n                  field=\"planExportWeight\"\r\n                  title=\"出口备货\"\r\n                  width=\"150\"\r\n                  align=\"center\"\r\n                  :edit-render=\"{}\"\r\n                >\r\n                  <template #edit=\"{ row }\">\r\n                    <a-input-number\r\n                      v-if=\"row.releaseState !== '1'\"\r\n                      v-model=\"row.planExportWeight\"\r\n                      :min=\"0\"\r\n                      :max=\"100000\"\r\n                      :precision=\"2\"\r\n                      @blur=\"handlePlanInnerWeight(row, 'planExportWeight')\"\r\n                    ></a-input-number>\r\n                    <template v-else>{{ row.planExportWeight }}</template>\r\n                  </template>\r\n                </ec-table-col>\r\n              </ec-table-colgroup>\r\n              <ec-table-col\r\n                field=\"planPlantArea\"\r\n                title=\"种植面积\"\r\n                width=\"150\"\r\n                :edit-render=\"{}\"\r\n                align=\"right\"\r\n              >\r\n                <template #edit=\"{ row }\">\r\n                  <a-input-number\r\n                    v-if=\"row.releaseState !== '1'\"\r\n                    v-model=\"row.planPlantArea\"\r\n                    :min=\"0\"\r\n                    :max=\"100000\"\r\n                    :precision=\"2\"\r\n                    @blur=\"handlePlanInnerWeight(row, 'planPlantArea')\"\r\n                  ></a-input-number>\r\n                  <template v-else>{{ row.planPlantArea }}</template>\r\n                </template>\r\n              </ec-table-col>\r\n              <ec-table-col\r\n                field=\"remark\"\r\n                title=\"办理依据\"\r\n                width=\"150\"\r\n                :maxLength=\"64\"\r\n                :edit-render=\"{}\"\r\n                align=\"left\"\r\n              >\r\n                <template #edit=\"{ row }\">\r\n                  <a-input\r\n                    v-if=\"row.releaseState !== '1'\"\r\n                    v-model=\"row.remark\"\r\n                    @blur=\"handleRemark(row)\"\r\n                  ></a-input>\r\n                  <template v-else>{{ row.remark }}</template>\r\n                </template>\r\n              </ec-table-col>\r\n\r\n              <!-- <ec-table-col field=\"remark\" title=\"办理依据\" align=\"left\" width=\"150\" /> -->\r\n              <ec-table-col field=\"submitState\" title=\"提交状态\" align=\"left\" width=\"100\">\r\n                <template #default=\"{ row }\">\r\n                  <div v-if=\"row.submitState === '1'\">\r\n                    <span>已提交</span>\r\n                  </div>\r\n                  <div v-else>\r\n                    <span>未提交</span>\r\n                  </div>\r\n                </template>\r\n              </ec-table-col>\r\n              <!-- <ec-table-col field=\"auditState\" title=\"审核状态\" align=\"left\" width=\"100\">\r\n                <template #default=\"{ row }\">\r\n                  <div v-if=\"row.auditState === '1'\">\r\n                    <span>处长审批</span>\r\n                  </div>\r\n                  <div v-else-if=\"row.auditState === '2'\">\r\n                    <span>副总经理审批</span>\r\n                  </div>\r\n                  <div v-else-if=\"row.auditState === '3'\">\r\n                    <span>完成</span>\r\n                  </div>\r\n                  <div v-else>\r\n                    <span>未审批</span>\r\n                  </div>\r\n                </template>\r\n              </ec-table-col> -->\r\n            </ec-table>\r\n          </ec-panel-body>\r\n        </ec-panel>\r\n      </ec-container-body>\r\n      <ec-container-footer fixed>\r\n        <a-space>\r\n          <a-button type=\"primary\" @click=\"onSave('save')\" :loading=\"saving\">保存</a-button>\r\n          <a-button @click=\"onclose\">取消</a-button>\r\n        </a-space>\r\n      </ec-container-footer>\r\n    </ec-container>\r\n  </ec-drawer>\r\n</template>\r\n<script>\r\nimport _ from 'lodash';\r\n\r\nexport default {\r\n  name: 'ExecutionEnterFormManage',\r\n  data() {\r\n    return {\r\n      props: {\r\n        visibleFile: {\r\n          type: Boolean,\r\n          default: false,\r\n        },\r\n      },\r\n      visibleFile: false,\r\n      tableData: [],\r\n      data: {},\r\n      leafTypeName: '',\r\n      leafTypeCode: '',\r\n      weightUnitName: '',\r\n      areaUnitName: '',\r\n      nowYear: '',\r\n      visible: false,\r\n      isEditor: false,\r\n      saving: false,\r\n      loading: false,\r\n      uploading: false,\r\n      isShowSaveAndAdd: true,\r\n      ruleForm: {},\r\n      leafTypeCd: '',\r\n      leafTypeList: [],\r\n      fileList: [],\r\n      totalFileList: [],\r\n      saveTableData: [],\r\n      fileUid: '',\r\n      orgCode: '',\r\n      validRules: {\r\n        planTotalWeight: [{ required: true, message: '请输入合计' }],\r\n        planExportWeight: [{ required: true, message: '请输入出口备货' }],\r\n        planPlantArea: [{ required: true, message: '请输入种植面积' }],\r\n      },\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    // 点击删除\r\n    onDelete(file) {\r\n      // 删除之前对操作进行提醒，避免误删\r\n      this.$confirm({\r\n        title: '是否执行该操作?',\r\n        content: () => (\r\n          <div style=\"color:red;\">\r\n            是否确认删除选中的数据，确认请点击'确认'按钮，取消点击'取消'按钮。\r\n          </div>\r\n        ),\r\n        onOk: () => {\r\n          const data = {\r\n            asAttachFileId: file.asAttachFileId,\r\n          };\r\n          this.$apis.bpm.executionEnter\r\n            .deleteFile(data)\r\n            .then((res) => {\r\n              if (res.result) {\r\n                this.$message.success('删除成功');\r\n              } else {\r\n                this.$message.error('删除失败');\r\n              }\r\n              this.handleFileInit('query');\r\n            })\r\n            .catch((error) => {\r\n              console.log(error);\r\n              this.$message.error('删除失败');\r\n            });\r\n        },\r\n      });\r\n    },\r\n\r\n    // 点击下载\r\n    onDownload(file) {\r\n      const data = {\r\n        asAttachFileId: file.asAttachFileId,\r\n      };\r\n      this.$apis.bpm.executionEnter\r\n        .downFile(data)\r\n        .then((res) => {\r\n          if (!res) {\r\n            return;\r\n          }\r\n          // 点击下载之后，将文件下载到本地\r\n          const link = document.createElement('a');\r\n          link.style.display = 'none';\r\n          link.href = res.url;\r\n          link.download = file.fileName;\r\n          document.body.appendChild(link);\r\n          link.click();\r\n          window.URL.revokeObjectURL(link.href);\r\n          document.body.removeChild(link);\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          this.$message.error('下载失败');\r\n        });\r\n    },\r\n    // 点击附件管理按钮，对附件进行初始化\r\n    handleFileInit(type) {\r\n      this.fileList = [];\r\n      if (type !== 'query') {\r\n        this.visibleFile = !this.visibleFile;\r\n      }\r\n      const data = {\r\n        busiYear: this.nowYear,\r\n        moduleCode: 'PIM001001001',\r\n      };\r\n\r\n      this.loading = true;\r\n      this.$apis.bpm.executionEnter\r\n        .queryFile(data)\r\n        .then((res) => {\r\n          this.fileList = res?.rows;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        })\r\n        .finally(() => {\r\n          this.loading = false;\r\n        });\r\n    },\r\n    // 处理附件管理的取消事件\r\n    handleFileCandle() {\r\n      this.visibleFile = !this.visibleFile;\r\n      this.fileList = [];\r\n    },\r\n    // 上传附件\r\n    async transformFile(data) {\r\n      const that = this;\r\n      if (that._data.uploading) {\r\n        return;\r\n      }\r\n      const { uid } = data.file;\r\n      // 由于上传附件change事件会在上传中、完成、失败都调用，那么需要判断，如果是在上传中，就不能重复调用\r\n      if (uid && that._data.fileUid !== uid) {\r\n        this._data.fileUid = uid;\r\n        const param = new FormData();\r\n        param.append('file', data.file.originFileObj);\r\n        param.append('moduleCode', 'PIM001001001');\r\n        param.append('moduleName', '执行量录入');\r\n        param.append('busiYear', that._data.nowYear);\r\n        param.append('orgCode', that._data.orgCode);\r\n        that._data.uploading = true;\r\n        await $ec.http\r\n          .post('/dts/plm/c/file/uploadPcTBuPlanOprRecordRegister/v1', param, {\r\n            headers: {\r\n              'Content-Type': 'multipart/form-data',\r\n            },\r\n          })\r\n          .then((res) => {\r\n            if (!res.result) {\r\n              this.$message.error('上传失败');\r\n            } else {\r\n              this.$message.success('上传成功');\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          })\r\n          .finally(() => {\r\n            // 设置上传中的上传效果，同时使用该参数设置上传状态不可用，保证幂等性\r\n            that._data.uploading = false;\r\n          });\r\n        // 上传之后重新处理列表数据\r\n        await that.handleFileInit('query');\r\n      }\r\n    },\r\n    // 处理表格里面的办理依据\r\n    handleRemark(row) {\r\n      const rowObj = row;\r\n      this.saveTableData.forEach((item) => {\r\n        if (item.orgCode === rowObj.orgCode) {\r\n          const itemObj = item;\r\n          itemObj.remark = rowObj.remark;\r\n        }\r\n      });\r\n    },\r\n    // 后端逻辑调整，需要设置aa开头的参数\r\n    handleAaData() {\r\n      const { saveTableData } = this;\r\n      saveTableData.forEach((item) => {\r\n        const itemObj = item;\r\n        itemObj.aaPlanTotalWeight = itemObj.planTotalWeight;\r\n        itemObj.aaPlanExportWeight = itemObj.planExportWeight;\r\n        itemObj.aaPlanInnerWeight = itemObj.planInnerWeight;\r\n        itemObj.aaPlanPlantArea = itemObj.planPlantArea;\r\n        itemObj.leafTypeCode = this.leafTypeCode;\r\n        itemObj.busiYear = this.nowYear;\r\n      });\r\n    },\r\n    // 保存数据\r\n    async onSave() {\r\n      const $table = this.$refs.xTable;\r\n\r\n      const errMap = await $table.validate(true).catch((err) => err);\r\n      if (errMap) {\r\n        this.$message.error('校验不通过！');\r\n      } else {\r\n        // 保存之前对数据单位进行转化，转成计量单位\r\n        const { saveTableData } = this;\r\n        this.handleAaData();\r\n        this.saving = true;\r\n        const data = {\r\n          leafTypeCode: this.leafTypeCode,\r\n          busiYear: this.nowYear,\r\n          pcTBuPlanOprRecordList: _.cloneDeep(saveTableData),\r\n        };\r\n        console.log(data);\r\n        this.$apis.bpm.executionEnter\r\n          .save(data)\r\n          .then((res) => {\r\n            console.log(JSON.stringify(res));\r\n            if (res.result) {\r\n              this.saving = false;\r\n              this.$message.success('操作成功');\r\n              this.$emit('onQuery');\r\n              this.onclose();\r\n            } else {\r\n              this.saving = false;\r\n              const msg = res?.msg || '操作失败';\r\n              this.$message.error(msg);\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n            this.saving = false;\r\n          });\r\n      }\r\n    },\r\n    // 显示推窗\r\n    show(data) {\r\n      this.visible = true;\r\n      this.data = data;\r\n      this.leafTypeName = data.leafTypeObj.leafTypeName;\r\n      this.leafTypeCode = data.leafTypeObj.leafTypeCode;\r\n      this.weightUnitName = data.weightUnitObj.weightUnitName;\r\n      this.weightUnit = data.weightUnitObj.weightUnitCd;\r\n\r\n      this.areaUnitName = data.areaUnitObj.areaUnitName;\r\n      this.areaUnit = data.areaUnitObj.areaUnitCd;\r\n      this.nowYear = data.nowYear;\r\n      this.orgCode = data.orgCode;\r\n\r\n      // 获取初始化的编辑列表数据\r\n      this.handleInitEnterData();\r\n    },\r\n\r\n    // 初始化编辑数据\r\n    handleInitEnterData() {\r\n      this.loading = true;\r\n      const data = {\r\n        leafTypeCode: this.leafTypeCode,\r\n        busiYear: this.nowYear,\r\n      };\r\n      this.$apis.bpm.executionEnter\r\n        .queryEnter(data)\r\n        .then((res) => {\r\n          this.loading = false;\r\n          const rows = res.rows || [];\r\n          this.saveTableData = _.cloneDeep(rows);\r\n          this.oldTableData = rows.forEach((item) => {\r\n            const obj = item;\r\n            obj.leafTypeCode = this.leafTypeCode;\r\n            this.handleDataParse(obj);\r\n          });\r\n          this.tableData = rows;\r\n        })\r\n        .catch((error) => {\r\n          this.loading = false;\r\n          if (error) {\r\n            this.$message.error(error.message || '操作失败');\r\n          } else {\r\n            this.$message.error('操作失败');\r\n          }\r\n        });\r\n    },\r\n\r\n    // 将获取到的数据转成界面需要显示的单位\r\n    handleDataParse(beforeAjustData) {\r\n      const obj = beforeAjustData;\r\n      obj.planTotalWeight = (obj.planTotalWeight / this.weightUnit).toFixed(2);\r\n      obj.planInnerWeight = (obj.planInnerWeight / this.weightUnit).toFixed(2);\r\n      obj.planExportWeight = (obj.planExportWeight / this.weightUnit).toFixed(2);\r\n      obj.planPlantArea = (obj.planPlantArea / this.areaUnit).toFixed(2);\r\n    },\r\n\r\n    // 保存之前处理本次调整的数据\r\n    handleBeforeSaveAdjustData() {\r\n      // 在保存之前先拷贝，避免保存不通过之后，导致数据变了。    乘法\r\n      const copyTableData = JSON.parse(JSON.stringify(this.tableData));\r\n      const saveTableData = [];\r\n\r\n      copyTableData.forEach((item) => {\r\n        const obj = item;\r\n        obj.planTotalWeight = (obj.planTotalWeight * this.weightUnit).toFixed(2);\r\n        obj.planInnerWeight = (obj.planInnerWeight * this.weightUnit).toFixed(2);\r\n        obj.planExportWeight = (obj.planExportWeight * this.weightUnit).toFixed(2);\r\n        obj.planPlantArea = (obj.planPlantArea * this.areaUnit).toFixed(2);\r\n        saveTableData.push(obj);\r\n      });\r\n      return saveTableData;\r\n    },\r\n\r\n    // 处理国内计划量的算法\r\n    handlePlanInnerWeight(row, field) {\r\n      const rowObj = row;\r\n      const planTotalWeight = Number(row.planTotalWeight) || 0;\r\n      const planExportWeight = Number(row.planExportWeight) || 0;\r\n      if (planTotalWeight < planExportWeight) {\r\n        this.$message.warn('合计不能小于出口备货');\r\n        if (field === 'planTotalWeight') {\r\n          rowObj.planTotalWeight = '';\r\n          return;\r\n        }\r\n        if (field === 'planExportWeight') {\r\n          rowObj.planExportWeight = '';\r\n          return;\r\n        }\r\n      }\r\n      const newPlanInnerWeight = (planTotalWeight - planExportWeight).toFixed(2);\r\n      rowObj.planInnerWeight = newPlanInnerWeight;\r\n      this.saveTableData.forEach((item) => {\r\n        if (item.orgCode === rowObj.orgCode) {\r\n          const itemObj = item;\r\n          if (field === 'planPlantArea') {\r\n            itemObj[field] = (Number(row[field]) * Number(this.areaUnit)).toFixed(2);\r\n          } else {\r\n            itemObj[field] = (Number(row[field]) * Number(this.weightUnit)).toFixed(2);\r\n            const savePlanTotalWeight = Number(itemObj.planTotalWeight) || 0;\r\n            const savePlanExportWeight = Number(itemObj.planExportWeight) || 0;\r\n            const savePlanInnerWeight = (savePlanTotalWeight - savePlanExportWeight).toFixed(2);\r\n            itemObj.planInnerWeight = savePlanInnerWeight;\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    // 处理输入空数据\r\n    handleNoValue(row, field) {\r\n      const rowObj = row;\r\n      const value = rowObj[field];\r\n      if (!value) {\r\n        rowObj[field] = '0.00';\r\n      }\r\n      this.oldTableData.forEach((item) => {\r\n        if (item.planAmountId === rowObj.planAmountId) {\r\n          const itemObj = item;\r\n          itemObj[field] = (Number(row[field]) * Number(this.weightUnit)).toFixed(2);\r\n        }\r\n      });\r\n\r\n      console.log(`tableData:${JSON.stringify(row)}`);\r\n      console.log(`oldTableData:${JSON.stringify(this.oldTableData)}`);\r\n    },\r\n\r\n    // 对合计数据进行处理\r\n    sumNum(list, field) {\r\n      let count = 0;\r\n      list.forEach((item) => {\r\n        count += Number(item[field]);\r\n      });\r\n      return count.toFixed(2);\r\n    },\r\n    // 底部的合计行\r\n    footerMethod({ columns, data }) {\r\n      return [\r\n        columns.map((column, columnIndex) => {\r\n          if (columnIndex === 0) {\r\n            return '合计';\r\n          }\r\n          if (\r\n            ['planTotalWeight', 'planInnerWeight', 'planExportWeight', 'planPlantArea'].includes(\r\n              column.property,\r\n            )\r\n          ) {\r\n            return this.sumNum(data, column.property);\r\n          }\r\n          return null;\r\n        }),\r\n      ];\r\n    },\r\n    // 取消\r\n    onclose() {\r\n      // this.$refs.modelRef.resetFields();\r\n      this.tableData = [];\r\n      this.visible = false;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.year {\r\n  font-size: 18px;\r\n  line-height: 22px;\r\n\r\n  color: #18191a;\r\n  font-weight: 700;\r\n  padding-top: 18px;\r\n  padding-right: 50px;\r\n  font-family: '微软雅黑 Bold', '微软雅黑', 'Microsoft YaHei', sans-serif;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExecutionEnterForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExecutionEnterForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExecutionEnterForm.vue?vue&type=template&id=7d945fd6&scoped=true&\"\nimport script from \"./ExecutionEnterForm.vue?vue&type=script&lang=js&\"\nexport * from \"./ExecutionEnterForm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ExecutionEnterForm.vue?vue&type=style&index=0&id=7d945fd6&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7d945fd6\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <ec-container height=\"100%\">\r\n    <ec-container-header>\r\n      <ec-panel-item>\r\n        <ec-panel-item-left>\r\n          <ec-header title=\"收购计划量登记\" icon=\"onetomany\" color-code=\"008\" />\r\n        </ec-panel-item-left>\r\n      </ec-panel-item>\r\n    </ec-container-header>\r\n    <ec-container-body>\r\n      <ec-panel :auto=\"false\">\r\n        <ec-panel-toolbar>\r\n          <ec-query-panel @query=\"onQuery\" @reset=\"onReset\">\r\n            <ec-query-item label=\"烟叶类型\">\r\n              <ec-select\r\n                showSearch\r\n                allowClear\r\n                placeholder=\"请选择\"\r\n                v-model=\"queryItems.leafTypeCode\"\r\n              >\r\n                <a-select-option v-for=\"leafTypeEk in leafTypeList\" :key=\"leafTypeEk.leafTypeCode\">\r\n                  {{ leafTypeEk.leafTypeName }}\r\n                </a-select-option>\r\n              </ec-select>\r\n            </ec-query-item>\r\n          </ec-query-panel>\r\n          <ec-divider />\r\n        </ec-panel-toolbar>\r\n        <ec-panel-header>\r\n          <ec-panel-item>\r\n            <ec-panel-item-left>\r\n              <a-button type=\"primary\" @click=\"onEdit\">编辑</a-button>\r\n              <a-button @click=\"onSubmit\">提交</a-button>\r\n              <a-checkbox\r\n                @change=\"onQuery\"\r\n                v-model=\"queryItems.submitStateFlag\"\r\n                style=\"margin-left: 10px\"\r\n              >\r\n                可提交\r\n              </a-checkbox>\r\n            </ec-panel-item-left>\r\n            <ec-panel-item-right>\r\n              <a-space :size=\"15\">\r\n                <span>种植收购年度：{{ queryItems.busiYear }}年</span>\r\n\r\n                <!-- <ec-query-item label=\"重量单位\"> -->\r\n                <span\r\n                  >重量单位：<ec-select\r\n                    showSearch\r\n                    allowClear\r\n                    placeholder=\"请选择\"\r\n                    v-model=\"weightUnit\"\r\n                    @select=\"handleUnitParse()\"\r\n                    style=\"width: 150px\"\r\n                  >\r\n                    <a-select-option\r\n                      v-for=\"weightUnit in weightUnitList\"\r\n                      :key=\"weightUnit.weightUnitCd\"\r\n                    >\r\n                      {{ weightUnit.weightUnitName }}\r\n                    </a-select-option>\r\n                  </ec-select></span\r\n                >\r\n                <span\r\n                  >面积单位：<ec-select\r\n                    showSearch\r\n                    allowClear\r\n                    placeholder=\"请选择\"\r\n                    v-model=\"areaUnit\"\r\n                    @select=\"handleUnitParse()\"\r\n                    style=\"width: 150px\"\r\n                  >\r\n                    <a-select-option v-for=\"areaUnit in areaUnitList\" :key=\"areaUnit.areaUnitCd\">\r\n                      {{ areaUnit.areaUnitName }}\r\n                    </a-select-option>\r\n                  </ec-select></span\r\n                >\r\n              </a-space>\r\n            </ec-panel-item-right>\r\n          </ec-panel-item>\r\n        </ec-panel-header>\r\n        <ec-panel-body>\r\n          <ec-table\r\n            ref=\"table\"\r\n            border\r\n            height=\"100%\"\r\n            :auto=\"false\"\r\n            :data=\"tableData.rows\"\r\n            @checkbox-all=\"selectAllEvent\"\r\n            @checkbox-change=\"selectRowChange\"\r\n            :loading=\"loading\"\r\n            row-select\r\n            show-footer\r\n            :footer-method=\"footerMethod\"\r\n          >\r\n            <ec-table-col type=\"checkbox\" width=\"50\" align=\"center\"></ec-table-col>\r\n            <ec-table-col type=\"seq\" title=\"序号\" width=\"70\" align=\"center\" />\r\n            <ec-table-col field=\"orgName\" title=\"单位名称\" align=\"left\" min-width=\"200\" />\r\n            <ec-table-colgroup title=\"收购计划执行量\">\r\n              <ec-table-col field=\"planTotalWeight\" title=\"合计\" align=\"center\" width=\"150\" />\r\n              <ec-table-col field=\"planInnerWeight\" title=\"国内\" align=\"center\" width=\"150\" />\r\n              <ec-table-col field=\"planExportWeight\" title=\"出口备货\" align=\"center\" width=\"150\" />\r\n            </ec-table-colgroup>\r\n            <ec-table-col field=\"planPlantArea\" title=\"种植面积\" align=\"right\" width=\"150\" />\r\n            <ec-table-col field=\"remark\" title=\"办理依据\" align=\"left\" width=\"150\" />\r\n            <ec-table-col field=\"submitState\" title=\"提交状态\" align=\"center\" width=\"100\">\r\n              <template #default=\"{ row }\">\r\n                <div v-if=\"row.submitState === '1'\">\r\n                  <span>已提交</span>\r\n                </div>\r\n                <div v-else>\r\n                  <span>未提交</span>\r\n                </div>\r\n              </template>\r\n            </ec-table-col>\r\n          </ec-table>\r\n        </ec-panel-body>\r\n      </ec-panel>\r\n      <execution-enter-form @onQuery=\"onQuery\" ref=\"ExecutionEnterForm\"></execution-enter-form>\r\n    </ec-container-body>\r\n  </ec-container>\r\n</template>\r\n\r\n<script>\r\nimport ExecutionEnterForm from './ExecutionEnterForm.vue';\r\n\r\nexport default {\r\n  name: 'ExecutionEnterManage',\r\n  components: {\r\n    ExecutionEnterForm,\r\n  },\r\n  data() {\r\n    return {\r\n      queryItems: {\r\n        leafTypeCode: '10',\r\n        submitStateFlag: true,\r\n        busiYear: '',\r\n      },\r\n      weightUnit: 500000,\r\n      areaUnit: 10000,\r\n      colCount: 5,\r\n      nowYear: '',\r\n      loading: false,\r\n      leafTypeCd: '',\r\n      leafTypeList: [\r\n        { leafTypeCode: '10', leafTypeName: '烤烟' },\r\n        { leafTypeCode: '20', leafTypeName: '晾晒烟(全部)' },\r\n        { leafTypeCode: '2013', leafTypeName: '晾晒烟(雪茄烟叶)' },\r\n      ],\r\n      oldDataRow: [],\r\n      orgCode: '',\r\n      weightUnitList: [\r\n        { weightUnitCd: 1, weightUnitName: '公斤', isSelected: false },\r\n        { weightUnitCd: 50, weightUnitName: '担', isSelected: false },\r\n        { weightUnitCd: 500000, weightUnitName: '万担', isSelected: false },\r\n      ],\r\n      areaUnitList: [\r\n        { areaUnitCd: 10000, areaUnitName: '万亩' },\r\n        { areaUnitCd: 1, areaUnitName: '亩' },\r\n      ],\r\n      pagination: {\r\n        pageNumber: 1,\r\n        pageSize: 10,\r\n        total: 0,\r\n      },\r\n      tableData: {\r\n        // 数据表格\r\n        // totalRows: 0,\r\n        rows: [],\r\n      },\r\n    };\r\n  },\r\n\r\n  created() {\r\n    const { appCode } = this.$router.history.current.query;\r\n    this.appCode = appCode || 'CM'; // 获取当前登入信息\r\n  },\r\n  mounted() {\r\n    this.onQuery();\r\n  },\r\n  computed: {\r\n    // 这里使用getters获取，只是语法糖\r\n    appConfig() {\r\n      return this.$store.getters.getAppConfig;\r\n    },\r\n  },\r\n  methods: {\r\n    // 数据初始化\r\n    async onQuery() {\r\n      console.log(`你好：${JSON.stringify(this.appConfig.bizCode)}`);\r\n      await this.handleGetLeafTypeList();\r\n      this.loading = true;\r\n      const { submitStateFlag } = this.queryItems;\r\n      const data = {\r\n        leafTypeCode: this.queryItems.leafTypeCode,\r\n        submitState: submitStateFlag ? '0' : '',\r\n        busiYear: this.queryItems.busiYear,\r\n        auditState: submitStateFlag ? '0' : '',\r\n      };\r\n      console.log(data);\r\n      this.$apis.bpm.executionEnter\r\n        .query(data)\r\n        .then((res) => {\r\n          this.tableData = res;\r\n          const { rows } = this.tableData;\r\n          this.pagination.total = res.totalRows;\r\n          this.oldDataRow = JSON.parse(JSON.stringify(rows));\r\n          console.log(`66666${JSON.stringify(res)}`);\r\n          // 对返回的数据处理，转成对应的单位数据\r\n          this.handleUnitParse();\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        })\r\n        .finally(() => {\r\n          this.loading = false;\r\n          this.selectedRows = [];\r\n        });\r\n    },\r\n\r\n    // 编辑\r\n    onEdit() {\r\n      // 解析传到编辑页面的年度，单位等信息\r\n      const leafTypeObj = this.leafTypeList.find(\r\n        (res) => res.leafTypeCode === this.queryItems.leafTypeCode,\r\n      );\r\n      const weightUnitObj = this.weightUnitList.find((res) => res.weightUnitCd === this.weightUnit);\r\n      const areaUnitObj = this.areaUnitList.find((res) => res.areaUnitCd === this.areaUnit);\r\n      const data = {\r\n        leafTypeObj,\r\n        weightUnitObj,\r\n        areaUnitObj,\r\n        // selectedRows,\r\n        orgCode: this.orgCode,\r\n        nowYear: this.queryItems.busiYear,\r\n      };\r\n      this.$refs.ExecutionEnterForm.show(data);\r\n    },\r\n\r\n    // 按钮提交\r\n    onSubmit() {\r\n      if (!this.selectedRows || this.selectedRows.length <= 0) {\r\n        this.$message.error('请选择一条数据再提交');\r\n        return;\r\n      }\r\n\r\n      const submitData = this.selectedRows.find(\r\n        (item) => item.submitState === '1' && item.auditState !== '0',\r\n      );\r\n      console.log(`--${JSON.stringify(submitData)}`);\r\n      if (submitData) {\r\n        this.$message.error('存在已提交数据，请勿重复提交');\r\n        return;\r\n      }\r\n      console.log(JSON.stringify(this.selectedRows));\r\n      this.$confirm({\r\n        title: '是否执行该操作?',\r\n        content: () => (\r\n          <div style=\"color:red;\">\r\n            是否确认提交选中的数据，确认请点击'确认'按钮，取消点击'取消'按钮。\r\n          </div>\r\n        ),\r\n        onOk: () => {\r\n          this.loading = true;\r\n          const idList = [];\r\n          for (let i = 0; i < this.selectedRows.length; i++) {\r\n            idList.push(this.selectedRows[i].oprRecordId);\r\n          }\r\n          this.$apis.bpm.executionEnter.submit({ oprRecordIds: idList }).then((res) => {\r\n            console.log(JSON.stringify(res));\r\n            if (res.result) {\r\n              this.loading = false;\r\n              this.$message.success('操作成功');\r\n              this.onQuery();\r\n            } else {\r\n              this.loading = false;\r\n              this.$message.error('操作失败');\r\n            }\r\n          });\r\n        },\r\n      });\r\n    },\r\n\r\n    // 重置\r\n    onReset() {\r\n      this.queryItems.leafTypeCode = this.leafTypeCd;\r\n      this.queryItems.submitStateFlag = true;\r\n      this.selectedRows = [];\r\n      this.$refs.table.pageAction(1);\r\n    },\r\n\r\n    // 处理单位切换\r\n    handleUnitParse() {\r\n      const newTableData = [];\r\n      const handleOlDataRow = JSON.parse(JSON.stringify(this.oldDataRow)) || [];\r\n\r\n      handleOlDataRow.forEach((item) => {\r\n        const obj = item;\r\n        obj.planTotalWeight = (obj.planTotalWeight / this.weightUnit).toFixed(2);\r\n        obj.planInnerWeight = (obj.planInnerWeight / this.weightUnit).toFixed(2);\r\n        obj.planExportWeight = (obj.planExportWeight / this.weightUnit).toFixed(2);\r\n        obj.planPlantArea = (obj.planPlantArea / this.areaUnit).toFixed(2);\r\n        newTableData.push(obj);\r\n      });\r\n      console.log(newTableData);\r\n      this.tableData.rows = newTableData;\r\n    },\r\n\r\n    // 根据编码翻译对应的名称\r\n    handleLeafTypeName(typeCd) {\r\n      const leafType = this.leafTypeList.find((item) => item.leafTypeCode === typeCd);\r\n      return leafType?.leafTypeName;\r\n    },\r\n\r\n    async handlePagination(pageNumber, pageSize) {\r\n      this.pagination.pageNumber = pageNumber;\r\n      this.pagination.pageSize = pageSize;\r\n      console.log(this.queryItems);\r\n      await this.handleGetLeafTypeList();\r\n    },\r\n\r\n    // 获取烟叶类型数据\r\n    async handleGetLeafTypeList() {\r\n      if (!this.leafTypeList?.length) {\r\n        const res = await this.$apis.bpm.executionEnter.queryLeafType({});\r\n        this.leafTypeList = res?.rows || [];\r\n        this.leafTypeList.some((item) => {\r\n          if (item.leafTypeName === '烤烟') {\r\n            this.leafTypeCd = item.leafTypeCode;\r\n            this.queryItems.leafTypeCode = item.leafTypeCode;\r\n            return true;\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n\r\n      if (!this.orgCode) {\r\n        const orgObj = await this.$apis.bim.curOrg.get({});\r\n        console.log(`当前用户信息：${JSON.stringify(orgObj)}`);\r\n        this.bizCode = orgObj?.bizCode;\r\n        this.orgCode = orgObj?.orgUniqueCode; // todo 写死数据\r\n      }\r\n      if (!this.queryItems.busiYear > 0) {\r\n        // 获取年度\r\n        const data = {\r\n          bizCode: this.bizCode, // todo 写死的数据\r\n          appCode: this.appCode || 'CM',\r\n          yearTypeCode: 'BIZ_YEAR',\r\n        };\r\n        const busiYearObj = await this.$apis.bpm.executionEnter.getBuYear(data);\r\n        this.queryItems.busiYear = busiYearObj?.yearValue;\r\n      }\r\n\r\n      // this.onQuery();\r\n    },\r\n\r\n    // 合计数据的处理\r\n    sumNum(list, field) {\r\n      let count = 0;\r\n      list.forEach((item) => {\r\n        count += Number(item[field]);\r\n      });\r\n      return count.toFixed(2);\r\n    },\r\n    // 底部合计行\r\n    footerMethod({ columns, data }) {\r\n      return [\r\n        columns.map((column, columnIndex) => {\r\n          if (columnIndex === 0) {\r\n            return '合计';\r\n          }\r\n          if (\r\n            ['planTotalWeight', 'planInnerWeight', 'planExportWeight', 'planPlantArea'].includes(\r\n              column.property,\r\n            )\r\n          ) {\r\n            return this.sumNum(data, column.property);\r\n          }\r\n          return null;\r\n        }),\r\n      ];\r\n    },\r\n\r\n    // 选中所有列表\r\n    selectAllEvent({ checked, records }) {\r\n      console.log(`${checked}-选中所有records包含选中的所以对象----${JSON.stringify(records)}`);\r\n      this.selectedRows = records;\r\n    },\r\n\r\n    // 选中列表\r\n    selectRowChange({ checked, records }) {\r\n      console.log(\r\n        `${checked}-选择改变时会把records包含选中的所以对象----${JSON.stringify(records)}`,\r\n      );\r\n      this.selectedRows = records;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.year {\r\n  font-size: 18px;\r\n  line-height: 22px;\r\n\r\n  color: #18191a;\r\n  font-weight: 700;\r\n  padding-top: 18px;\r\n  padding-right: 20px;\r\n  font-family: '微软雅黑 Bold', '微软雅黑', 'Microsoft YaHei', sans-serif;\r\n}\r\n.paddingTop {\r\n  padding-top: 15px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=6cfdec50&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=6cfdec50&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6cfdec50\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExecutionEnterForm.vue?vue&type=style&index=0&id=7d945fd6&prod&lang=less&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&id=6cfdec50&prod&lang=less&scoped=true&\""],"sourceRoot":""}