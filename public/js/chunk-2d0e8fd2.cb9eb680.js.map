{"version":3,"sources":["webpack:///./src/views/apm/demand/batch/Index.vue?27b4","webpack:///./src/views/apm/demand/batch/BatchManageEdit.vue?9929","webpack:///src/views/apm/demand/batch/BatchManageEdit.vue","webpack:///./src/views/apm/demand/batch/BatchManageEdit.vue?82c8","webpack:///./src/views/apm/demand/batch/BatchManageEdit.vue","webpack:///src/views/apm/demand/batch/Index.vue","webpack:///./src/views/apm/demand/batch/Index.vue?d11c","webpack:///./src/views/apm/demand/batch/Index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","nowYear","queryItems","busiYear","on","onAdd","_v","onFinish","$event","$refs","table","pageAction","model","value","callback","$$v","$set","expression","ref","pagination","tableData","rows","loading","handlePagination","selectAllEvent","selectRowChange","scopedSlots","_u","key","fn","row","isFlueCuredControl","isSunCuredControl","lisRtControl","finishFlag","onEdit","onDel","leafTypeList","onQuery","staticRenderFns","staticClass","visible","title","onclose","directives","name","rawName","isEditor","saving","onSave","proxy","formData","rules","onChange","_l","item","code","_s","isDisableYear","data","needGatherYearList","batchName","required","message","trigger","needGatherYearValue","isRtControl","methods","show","console","checkedValues","type","valid","update","then","catch","save","handleSaveAfter","needGatherYear","component","components","BatchManageEdit","leafTypeCd","pageNumber","pageSize","total","bizCode","computed","appConfig","pageNo","query","selectedRow","needCollectBatchId","delete","content","onOk","idList","finish","ids","onReset","handleLeafTypeName","typeCd","handleGetYear","orgObj","appCode","yearTypeCode","busiYearObj","checked","JSON"],"mappings":"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","file":"js/chunk-2d0e8fd2.cb9eb680.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-container',{attrs:{\"height\":\"100%\",\"title\":\"采集批次管理\",\"icon\":\"onetomany\",\"color-code\":\"008\"}},[_c('ec-container-body',[_c('ec-panel',{attrs:{\"auto\":false}},[_c('ec-panel-toolbar',[_c('ec-panel-item',[_c('ec-panel-item-left',[_c('a-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.nowYear !== _vm.queryItems.busiYear},on:{\"click\":_vm.onAdd}},[_vm._v(\"新增\")]),_c('a-button',{attrs:{\"disabled\":_vm.nowYear !== _vm.queryItems.busiYear},on:{\"click\":_vm.onFinish}},[_vm._v(\"完成采集\")])],1),_c('ec-panel-item-right',[_vm._v(\" 业务年度：\"),_c('a-input-number',{attrs:{\"min\":2000,\"max\":2099},on:{\"change\":function($event){return _vm.$refs.table.pageAction(1)}},model:{value:(_vm.queryItems.busiYear),callback:function ($$v) {_vm.$set(_vm.queryItems, \"busiYear\", $$v)},expression:\"queryItems.busiYear\"}})],1)],1)],1),_c('ec-panel-body',[_c('ec-table',{ref:\"table\",attrs:{\"border\":\"\",\"pagination\":_vm.pagination,\"data\":_vm.tableData.rows,\"loading\":_vm.loading,\"row-select\":\"\",\"auto\":false,\"height\":\"100%\"},on:{\"page-action\":_vm.handlePagination,\"checkbox-all\":_vm.selectAllEvent,\"checkbox-change\":_vm.selectRowChange}},[_c('ec-table-col',{attrs:{\"type\":\"checkbox\",\"width\":\"36\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"width\":\"50\",\"title\":\"序号\",\"type\":\"seq\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"field\":\"busiYear\",\"title\":\"业务年度\",\"align\":\"center\",\"min-width\":\"130\"}}),_c('ec-table-col',{attrs:{\"field\":\"batchName\",\"title\":\"采集批次\",\"align\":\"left\",\"min-width\":\"180\"}}),_c('ec-table-col',{attrs:{\"field\":\"needGatherYear\",\"title\":\"采集年度\",\"align\":\"center\",\"min-width\":\"130\"}}),_c('ec-table-col',{attrs:{\"field\":\"isFlueCuredControl\",\"title\":\"烤烟是否\\n                计划控制\",\"align\":\"center\",\"width\":\"130\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.isFlueCuredControl === '1')?_c('div',[_c('span',[_vm._v(\"是\")])]):_c('div',[_c('span',[_vm._v(\"否\")])])]}}])}),_c('ec-table-col',{attrs:{\"field\":\"isSunCuredControl\",\"title\":\"晾晒烟是否受\\n                计划控制\",\"align\":\"center\",\"width\":\"130\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.isSunCuredControl === '1')?_c('div',[_c('span',[_vm._v(\"是\")])]):_c('div',[_c('span',[_vm._v(\"否\")])])]}}])}),_c('ec-table-col',{attrs:{\"field\":\"lisRtControl\",\"title\":\"再造烟叶是否受\\n                计划控制\",\"align\":\"center\",\"width\":\"130\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.lisRtControl === '1')?_c('div',[_c('span',[_vm._v(\"是\")])]):_c('div',[_c('span',[_vm._v(\"否\")])])]}}])}),_c('ec-table-col',{attrs:{\"field\":\"finishFlag\",\"title\":\"是否完成\",\"align\":\"center\",\"width\":\"120\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.finishFlag === '1')?_c('div',[_c('span',[_vm._v(\"是\")])]):_c('div',[_c('span',[_vm._v(\"否\")])])]}}])}),_c('ec-table-col',{attrs:{\"title\":\"操作\",\"align\":\"center\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-button',{attrs:{\"type\":\"link\",\"disabled\":_vm.nowYear !== _vm.queryItems.busiYear},on:{\"click\":function($event){return _vm.onEdit(row)}}},[_vm._v(\"编辑\")]),_c('a-popconfirm',{attrs:{\"title\":\"是否要删除此行？\",\"ok-text\":\"确定\",\"cancel-text\":\"取消\",\"disabled\":_vm.nowYear !== _vm.queryItems.busiYear},on:{\"confirm\":function($event){return _vm.onDel(row)}}},[_c('a-button',{attrs:{\"type\":\"link\",\"disabled\":_vm.nowYear !== _vm.queryItems.busiYear}},[_vm._v(\"删除\")])],1)]}}])})],1)],1)],1),_c('batch-manage-edit',{ref:\"BatchManageEdit\",attrs:{\"leafTypeList\":_vm.leafTypeList},on:{\"onQuery\":_vm.onQuery}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-modal',{staticClass:\"ec-draw-form\",attrs:{\"visible\":_vm.visible,\"title\":_vm.title,\"size\":\"large\",\"is-confirm\":true},on:{\"cancel\":_vm.onclose},scopedSlots:_vm._u([{key:\"footer\",fn:function(){return [_c('a-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isEditor),expression:\"!isEditor\"}],attrs:{\"type\":\"primary\",\"loading\":_vm.saving},on:{\"click\":function($event){return _vm.onSave('saveAndAdd')}}},[_vm._v(\"保存并新增\")]),_c('a-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.saving},on:{\"click\":_vm.onSave}},[_vm._v(\"保存\")]),_c('a-button',{on:{\"click\":_vm.onclose}},[_vm._v(\"取消\")])]},proxy:true}])},[_c('ec-form',{ref:\"modelRef\",attrs:{\"model\":_vm.formData,\"rules\":_vm.rules}},[_c('a-row',{attrs:{\"type\":\"flex\",\"gutter\":12}},[_c('a-col',{attrs:{\"span\":12}},[_c('a-form-model-item',{attrs:{\"label\":\"采集批次\",\"prop\":\"batchName\"}},[_c('a-input',{attrs:{\"placeholder\":\"请输入采集批次\",\"maxLength\":24},model:{value:(_vm.formData.batchName),callback:function ($$v) {_vm.$set(_vm.formData, \"batchName\", $$v)},expression:\"formData.batchName\"}})],1)],1),_c('a-col',{attrs:{\"span\":12}},[_c('a-form-model-item',{ref:\"needGatherYearValue\",attrs:{\"label\":\"采集年份\",\"prop\":\"needGatherYearValue\"}},[_c('a-checkbox-group',{on:{\"change\":_vm.onChange},model:{value:(_vm.formData.needGatherYearValue),callback:function ($$v) {_vm.$set(_vm.formData, \"needGatherYearValue\", $$v)},expression:\"formData.needGatherYearValue\"}},_vm._l((_vm.needGatherYearList),function(item){return _c('a-checkbox',{key:item.code,attrs:{\"label\":item.name,\"value\":item.code}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])}),1)],1)],1),_c('a-col',{attrs:{\"span\":12}},[_c('a-form-model-item',{attrs:{\"label\":\"烤烟是否受计划控制\",\"prop\":\"isFlueCuredControl\"}},[_c('a-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.formData.isFlueCuredControl),callback:function ($$v) {_vm.$set(_vm.formData, \"isFlueCuredControl\", $$v)},expression:\"formData.isFlueCuredControl\"}},[_c('a-select-option',{attrs:{\"value\":\"1\"}},[_vm._v(\" 是 \")]),_c('a-select-option',{attrs:{\"value\":\"0\"}},[_vm._v(\" 否 \")])],1)],1)],1),_c('a-col',{attrs:{\"span\":12}},[_c('a-form-model-item',{attrs:{\"label\":\"晾晒烟是否受计划控制\",\"prop\":\"isSunCuredControl\"}},[_c('a-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.formData.isSunCuredControl),callback:function ($$v) {_vm.$set(_vm.formData, \"isSunCuredControl\", $$v)},expression:\"formData.isSunCuredControl\"}},[_c('a-select-option',{attrs:{\"value\":\"1\"}},[_vm._v(\" 是 \")]),_c('a-select-option',{attrs:{\"value\":\"0\"}},[_vm._v(\" 否 \")])],1)],1)],1),_c('a-col',{attrs:{\"span\":12}},[_c('a-form-model-item',{attrs:{\"label\":\"再造烟叶是否受计划控制\",\"prop\":\"isRtControl\"}},[_c('a-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.formData.isRtControl),callback:function ($$v) {_vm.$set(_vm.formData, \"isRtControl\", $$v)},expression:\"formData.isRtControl\"}},[_c('a-select-option',{attrs:{\"value\":\"1\"}},[_vm._v(\" 是 \")]),_c('a-select-option',{attrs:{\"value\":\"0\"}},[_vm._v(\" 否 \")])],1)],1)],1),_c('a-col',{attrs:{\"span\":12}},[_c('a-form-model-item',{attrs:{\"label\":\"业务年度\",\"prop\":\"busiYear\"}},[_c('a-input',{attrs:{\"disabled\":_vm.isDisableYear,\"placeholder\":\"请输入业务年度\"},model:{value:(_vm.formData.busiYear),callback:function ($$v) {_vm.$set(_vm.formData, \"busiYear\", $$v)},expression:\"formData.busiYear\"}})],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ec-modal\r\n    :visible=\"visible\"\r\n    :title=\"title\"\r\n    size=\"large\"\r\n    class=\"ec-draw-form\"\r\n    @cancel=\"onclose\"\r\n    :is-confirm=\"true\"\r\n  >\r\n    <ec-form :model=\"formData\" :rules=\"rules\" ref=\"modelRef\">\r\n      <a-row type=\"flex\" :gutter=\"12\">\r\n        <a-col :span=\"12\">\r\n          <a-form-model-item label=\"采集批次\" prop=\"batchName\">\r\n            <a-input v-model=\"formData.batchName\" placeholder=\"请输入采集批次\" :maxLength=\"24\" />\r\n          </a-form-model-item>\r\n        </a-col>\r\n        <a-col :span=\"12\">\r\n          <a-form-model-item label=\"采集年份\" prop=\"needGatherYearValue\" ref=\"needGatherYearValue\">\r\n            <a-checkbox-group @change=\"onChange\" v-model=\"formData.needGatherYearValue\">\r\n              <a-checkbox\r\n                v-for=\"item in needGatherYearList\"\r\n                :key=\"item.code\"\r\n                :label=\"item.name\"\r\n                :value=\"item.code\"\r\n              >\r\n                {{ item.name }}\r\n              </a-checkbox>\r\n            </a-checkbox-group>\r\n          </a-form-model-item>\r\n        </a-col>\r\n\r\n        <a-col :span=\"12\">\r\n          <a-form-model-item label=\"烤烟是否受计划控制\" prop=\"isFlueCuredControl\">\r\n            <a-select v-model=\"formData.isFlueCuredControl\" placeholder=\"请选择\">\r\n              <a-select-option value=\"1\"> 是 </a-select-option>\r\n              <a-select-option value=\"0\"> 否 </a-select-option>\r\n            </a-select>\r\n          </a-form-model-item>\r\n        </a-col>\r\n        <a-col :span=\"12\">\r\n          <a-form-model-item label=\"晾晒烟是否受计划控制\" prop=\"isSunCuredControl\">\r\n            <a-select v-model=\"formData.isSunCuredControl\" placeholder=\"请选择\">\r\n              <a-select-option value=\"1\"> 是 </a-select-option>\r\n              <a-select-option value=\"0\"> 否 </a-select-option>\r\n            </a-select>\r\n          </a-form-model-item>\r\n        </a-col>\r\n        <a-col :span=\"12\">\r\n          <a-form-model-item label=\"再造烟叶是否受计划控制\" prop=\"isRtControl\">\r\n            <a-select v-model=\"formData.isRtControl\" placeholder=\"请选择\">\r\n              <a-select-option value=\"1\"> 是 </a-select-option>\r\n              <a-select-option value=\"0\"> 否 </a-select-option>\r\n            </a-select>\r\n          </a-form-model-item>\r\n        </a-col>\r\n        <a-col :span=\"12\">\r\n          <a-form-model-item label=\"业务年度\" prop=\"busiYear\">\r\n            <a-input\r\n              :disabled=\"isDisableYear\"\r\n              v-model=\"formData.busiYear\"\r\n              placeholder=\"请输入业务年度\"\r\n            />\r\n          </a-form-model-item>\r\n        </a-col>\r\n      </a-row>\r\n    </ec-form>\r\n    <template v-slot:footer>\r\n      <a-button type=\"primary\" :loading=\"saving\" v-show=\"!isEditor\" @click=\"onSave('saveAndAdd')\"\r\n        >保存并新增</a-button\r\n      >\r\n      <a-button type=\"primary\" @click=\"onSave\" :loading=\"saving\">保存</a-button>\r\n      <a-button @click=\"onclose\">取消</a-button>\r\n    </template>\r\n  </ec-modal>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'batchManageForm',\r\n  data() {\r\n    return {\r\n      visible: false,\r\n      formData: {},\r\n      isEditor: false,\r\n      saving: false,\r\n      isDisableYear: true,\r\n      busiYear: '',\r\n      title: '',\r\n      needGatherYearList: [],\r\n      rules: {\r\n        batchName: {\r\n          required: true,\r\n          message: '请输入采集批次',\r\n          trigger: 'blur',\r\n        },\r\n        needGatherYearValue: {\r\n          required: true,\r\n          message: '请选择采集年度',\r\n          trigger: 'blur',\r\n        },\r\n        isFlueCuredControl: {\r\n          required: true,\r\n          message: '请选择烤烟是否受计划控制',\r\n          trigger: 'blur',\r\n        },\r\n        isSunCuredControl: {\r\n          required: true,\r\n          message: '请选择晾晒烟是否受计划控制',\r\n          trigger: 'blur',\r\n        },\r\n        isRtControl: {\r\n          required: true,\r\n          message: '请选择再造烟叶是否受计划控制',\r\n          trigger: 'blur',\r\n        },\r\n        busiYear: {\r\n          required: true,\r\n          message: '请输入业务年度',\r\n          trigger: 'blur',\r\n        },\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    // 显示编辑页面\r\n    show(data) {\r\n      this.visible = true;\r\n      // this.isEditor = !!data;\r\n      this.formData = {};\r\n      this.busiYear = data.busiYear;\r\n      const { selectedRow } = data;\r\n      if (selectedRow) {\r\n        this.isEditor = true;\r\n        this.title = '编辑采集批次';\r\n        this.formData = selectedRow;\r\n      } else {\r\n        this.isEditor = false;\r\n        this.title = '新增采集批次';\r\n        this.formData.busiYear = data.busiYear;\r\n      }\r\n      const needGatherYearList = [];\r\n      for (let i = 1; i < 5; i++) {\r\n        const obj = {\r\n          code: `${this.busiYear + i}`,\r\n          name: `${this.busiYear + i}`,\r\n        };\r\n        needGatherYearList.push(obj);\r\n      }\r\n\r\n      this.needGatherYearList = needGatherYearList;\r\n\r\n      this.$set(\r\n        this.formData,\r\n        'needGatherYearValue',\r\n        this.formData?.needGatherYear?.split(',') || [],\r\n      );\r\n      console.log(this.formData.needGatherYearValue);\r\n    },\r\n    onChange(checkedValues) {\r\n      this.formData.needGatherYear = checkedValues.join();\r\n    },\r\n\r\n    // 保存\r\n    onSave(type) {\r\n      this.$refs.modelRef.validate(async (valid) => {\r\n        // debugger;\r\n        if (!valid) return;\r\n        this.saving = true;\r\n        const data = this.formData;\r\n        // data.needGatherYear = data?.needGatherYear?.join(',');\r\n        console.log(data);\r\n        if (this.isEditor) {\r\n          this.$apis.apm.batchManage\r\n            .update(data)\r\n            .then((res) => {\r\n              console.log(res);\r\n              if (res.result) {\r\n                this.handleSaveAfter(type);\r\n                this.$message.success('操作成功');\r\n              } else {\r\n                const { msg } = res;\r\n                this.$message.error(msg);\r\n                this.saving = false;\r\n              }\r\n            })\r\n            .catch((err) => {\r\n              console.log(err);\r\n              this.saving = false;\r\n              // this.$message.error('操作失败');\r\n            });\r\n        } else {\r\n          this.$apis.apm.batchManage\r\n            .save(data)\r\n            .then((res) => {\r\n              console.log(res);\r\n              if (res.result) {\r\n                this.handleSaveAfter(type);\r\n                this.$message.success('操作成功');\r\n              } else {\r\n                const { msg } = res;\r\n                this.$message.error(msg);\r\n                this.saving = false;\r\n              }\r\n            })\r\n            .catch((err) => {\r\n              console.log(err);\r\n              // this.$message.error('操作失败');\r\n              this.saving = false;\r\n            });\r\n        }\r\n      });\r\n    },\r\n\r\n    // 保存之后数据的处理\r\n    handleSaveAfter(type) {\r\n      this.$emit('onQuery');\r\n      this.saving = false;\r\n      if (type === 'saveAndAdd') {\r\n        this.formData = {\r\n          batchName: undefined,\r\n          needGatherYear: undefined,\r\n          isFlueCuredControl: undefined,\r\n          isSunCuredControl: undefined,\r\n          isRtControl: undefined,\r\n          busiYear: this.busiYear,\r\n        };\r\n      } else {\r\n        this.onclose();\r\n      }\r\n    },\r\n\r\n    // 取消\r\n    onclose() {\r\n      this.visible = false;\r\n      this.$refs.modelRef.resetFields();\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BatchManageEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BatchManageEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BatchManageEdit.vue?vue&type=template&id=63651bd6&\"\nimport script from \"./BatchManageEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./BatchManageEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <ec-container height=\"100%\" title=\"采集批次管理\" icon=\"onetomany\" color-code=\"008\">\r\n    <ec-container-body>\r\n      <ec-panel :auto=\"false\">\r\n        <ec-panel-toolbar>\r\n          <ec-panel-item>\r\n            <ec-panel-item-left>\r\n              <a-button type=\"primary\" :disabled=\"nowYear !== queryItems.busiYear\" @click=\"onAdd\"\r\n                >新增</a-button\r\n              >\r\n              <a-button @click=\"onFinish\" :disabled=\"nowYear !== queryItems.busiYear\"\r\n                >完成采集</a-button\r\n              >\r\n            </ec-panel-item-left>\r\n            <ec-panel-item-right>\r\n              业务年度：<a-input-number\r\n                v-model=\"queryItems.busiYear\"\r\n                :min=\"2000\"\r\n                :max=\"2099\"\r\n                @change=\"$refs.table.pageAction(1)\"\r\n              />\r\n            </ec-panel-item-right>\r\n          </ec-panel-item>\r\n        </ec-panel-toolbar>\r\n        <ec-panel-body>\r\n          <!-- <ec-v-layout>\r\n            <ec-v-item> -->\r\n          <!-- <ec-panel-item>\r\n            <ec-panel-item-left>\r\n              <a-button type=\"primary\" @click=\"onAdd\">新增</a-button>\r\n              <a-button @click=\"onFinish\">完成采集</a-button>\r\n            </ec-panel-item-left>\r\n            <ec-panel-item-right>\r\n              <span class=\"ant-form-text\"> 业务年度： {{ queryItems.busiYear }}</span>\r\n            </ec-panel-item-right>\r\n          </ec-panel-item> -->\r\n          <!-- </ec-v-item>\r\n            <ec-v-item> -->\r\n          <ec-table\r\n            ref=\"table\"\r\n            border\r\n            @page-action=\"handlePagination\"\r\n            :pagination=\"pagination\"\r\n            :data=\"tableData.rows\"\r\n            @checkbox-all=\"selectAllEvent\"\r\n            @checkbox-change=\"selectRowChange\"\r\n            :loading=\"loading\"\r\n            row-select\r\n            :auto=\"false\"\r\n            height=\"100%\"\r\n          >\r\n            <ec-table-col type=\"checkbox\" width=\"36\" align=\"center\"></ec-table-col>\r\n            <ec-table-col width=\"50\" title=\"序号\" type=\"seq\" align=\"center\" />\r\n            <ec-table-col field=\"busiYear\" title=\"业务年度\" align=\"center\" min-width=\"130\" />\r\n            <ec-table-col field=\"batchName\" title=\"采集批次\" align=\"left\" min-width=\"180\" />\r\n\r\n            <ec-table-col field=\"needGatherYear\" title=\"采集年度\" align=\"center\" min-width=\"130\" />\r\n            <ec-table-col\r\n              field=\"isFlueCuredControl\"\r\n              title=\"烤烟是否\r\n                  计划控制\"\r\n              align=\"center\"\r\n              width=\"130\"\r\n            >\r\n              <template #default=\"{ row }\">\r\n                <div v-if=\"row.isFlueCuredControl === '1'\">\r\n                  <span>是</span>\r\n                </div>\r\n                <div v-else>\r\n                  <span>否</span>\r\n                </div>\r\n              </template>\r\n            </ec-table-col>\r\n            <ec-table-col\r\n              field=\"isSunCuredControl\"\r\n              title=\"晾晒烟是否受\r\n                  计划控制\"\r\n              align=\"center\"\r\n              width=\"130\"\r\n            >\r\n              <template #default=\"{ row }\">\r\n                <div v-if=\"row.isSunCuredControl === '1'\">\r\n                  <span>是</span>\r\n                </div>\r\n                <div v-else>\r\n                  <span>否</span>\r\n                </div>\r\n              </template>\r\n            </ec-table-col>\r\n            <ec-table-col\r\n              field=\"lisRtControl\"\r\n              title=\"再造烟叶是否受\r\n                  计划控制\"\r\n              align=\"center\"\r\n              width=\"130\"\r\n            >\r\n              <template #default=\"{ row }\">\r\n                <div v-if=\"row.lisRtControl === '1'\">\r\n                  <span>是</span>\r\n                </div>\r\n                <div v-else>\r\n                  <span>否</span>\r\n                </div>\r\n              </template>\r\n            </ec-table-col>\r\n            <ec-table-col field=\"finishFlag\" title=\"是否完成\" align=\"center\" width=\"120\">\r\n              <template #default=\"{ row }\">\r\n                <div v-if=\"row.finishFlag === '1'\">\r\n                  <span>是</span>\r\n                </div>\r\n                <div v-else>\r\n                  <span>否</span>\r\n                </div>\r\n              </template>\r\n            </ec-table-col>\r\n            <ec-table-col title=\"操作\" align=\"center\" width=\"150\">\r\n              <template #default=\"{ row }\">\r\n                <a-button\r\n                  type=\"link\"\r\n                  :disabled=\"nowYear !== queryItems.busiYear\"\r\n                  @click=\"onEdit(row)\"\r\n                  >编辑</a-button\r\n                >\r\n                <!-- <a-button type=\"link\" @click=\"onDel(row)\">删除</a-button> -->\r\n                <a-popconfirm\r\n                  title=\"是否要删除此行？\"\r\n                  ok-text=\"确定\"\r\n                  cancel-text=\"取消\"\r\n                  @confirm=\"onDel(row)\"\r\n                  :disabled=\"nowYear !== queryItems.busiYear\"\r\n                >\r\n                  <a-button type=\"link\" :disabled=\"nowYear !== queryItems.busiYear\">删除</a-button>\r\n                </a-popconfirm>\r\n              </template>\r\n            </ec-table-col>\r\n          </ec-table>\r\n          <!-- </ec-v-item>\r\n          </ec-v-layout> -->\r\n        </ec-panel-body>\r\n      </ec-panel>\r\n      <batch-manage-edit\r\n        @onQuery=\"onQuery\"\r\n        ref=\"BatchManageEdit\"\r\n        :leafTypeList=\"leafTypeList\"\r\n      ></batch-manage-edit>\r\n    </ec-container-body>\r\n  </ec-container>\r\n</template>\r\n\r\n<script>\r\nimport BatchManageEdit from './BatchManageEdit.vue';\r\n\r\nexport default {\r\n  name: 'BatchManage',\r\n  components: {\r\n    BatchManageEdit,\r\n  },\r\n  data() {\r\n    return {\r\n      queryItems: {\r\n        busiYear: '',\r\n      },\r\n      // isDisable: true,\r\n      loading: false,\r\n      leafTypeCd: '',\r\n      nowYear: '',\r\n      leafTypeList: [],\r\n      pagination: {\r\n        pageNumber: 1,\r\n        pageSize: 10,\r\n        total: 0,\r\n      },\r\n      bizCode: '',\r\n      tableData: {\r\n        // 数据表格\r\n        // totalRows: 0,\r\n        rows: [],\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    appConfig() {\r\n      return this.$store.getters.getAppConfig;\r\n    },\r\n  },\r\n  methods: {\r\n    // 数据初始化\r\n    onQuery() {\r\n      const data = {\r\n        pageNo: this.pagination.pageNumber,\r\n        pageSize: this.pagination.pageSize,\r\n        busiYear: this.queryItems.busiYear,\r\n      };\r\n      this.loading = true;\r\n      this.$apis.apm.batchManage\r\n        .query(data)\r\n        .then((res) => {\r\n          this.pagination.total = res.totalRows;\r\n          this.tableData.rows = res.rows;\r\n          this.loading = false;\r\n        })\r\n        .catch((err) => {\r\n          this.loading = false;\r\n          console.log(err);\r\n        });\r\n    },\r\n    // 新增\r\n    onAdd() {\r\n      const { busiYear } = this.queryItems;\r\n      const data = {\r\n        busiYear,\r\n      };\r\n      this.$refs.BatchManageEdit.show(data);\r\n    },\r\n\r\n    // 编辑\r\n    onEdit(row) {\r\n      const { finishFlag } = row;\r\n      if (finishFlag === '1') {\r\n        this.$message.error('已完成采集批次，不允许编辑！');\r\n        return;\r\n      }\r\n      const { busiYear } = this.queryItems;\r\n      const selectedRow = JSON.parse(JSON.stringify(row));\r\n      const data = {\r\n        busiYear,\r\n        selectedRow,\r\n      };\r\n      this.$refs.BatchManageEdit.show(data);\r\n    },\r\n\r\n    // 按钮删除\r\n    onDel(row) {\r\n      const { finishFlag } = row;\r\n      if (finishFlag === '1') {\r\n        this.$message.error('已完成采集批次，不允许删除！');\r\n        return;\r\n      }\r\n      const data = {\r\n        needCollectBatchId: row.needCollectBatchId,\r\n      };\r\n      this.$apis.apm.batchManage\r\n        .delete(data)\r\n        .then((res) => {\r\n          if (res.result) {\r\n            this.loading = false;\r\n            this.$message.success('操作成功');\r\n            this.onQuery();\r\n          } else {\r\n            this.$message.error(res.msg);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          this.loading = false;\r\n          console.log(err);\r\n        });\r\n    },\r\n\r\n    // 完成采集\r\n    onFinish() {\r\n      if (!this.selectedRows || this.selectedRows.length <= 0) {\r\n        this.$message.error('请选择一条数据再进行完成采集');\r\n        return;\r\n      }\r\n\r\n      const isFinishData = this.selectedRows.find((item) => item.finishFlag === '1');\r\n      if (isFinishData) {\r\n        this.$message.error('选中的数据存在已完成采集，请重新选择！');\r\n        return;\r\n      }\r\n      this.$confirm({\r\n        title: '是否执行该操作?',\r\n        content: () => (\r\n          <div style=\"color:red;\">\r\n            是否确认完成采集选中的数据，确认请点击'确认'按钮，取消点击'取消'按钮。\r\n          </div>\r\n        ),\r\n        onOk: () => {\r\n          this.loading = true;\r\n          const idList = [];\r\n          for (let i = 0; i < this.selectedRows.length; i++) {\r\n            idList.push(this.selectedRows[i].needCollectBatchId);\r\n          }\r\n          this.$apis.apm.batchManage\r\n            .finish({ ids: idList })\r\n            .then((res) => {\r\n              console.log(JSON.stringify(res));\r\n              if (res.result) {\r\n                this.loading = false;\r\n                this.$refs.table.pageAction(1);\r\n                this.$message.success('操作成功');\r\n              } else {\r\n                this.$message.error('操作失败');\r\n              }\r\n            })\r\n            .catch((error) => {\r\n              this.loading = false;\r\n              if (error) {\r\n                this.$message.error(error.message || '操作失败');\r\n              } else {\r\n                this.$message.error('操作失败');\r\n              }\r\n            });\r\n        },\r\n      });\r\n    },\r\n\r\n    // 重置\r\n    onReset() {\r\n      this.queryItems.leafTypeCode = this.leafTypeCd;\r\n      this.$refs.table.pageAction(1);\r\n    },\r\n\r\n    // 根据编码翻译对应的名称\r\n    handleLeafTypeName(typeCd) {\r\n      const leafType = this.leafTypeList.find((item) => item.leafTypeCode === typeCd);\r\n      return leafType?.leafTypeName;\r\n    },\r\n\r\n    async handlePagination(pageNumber, pageSize) {\r\n      this.pagination.pageNumber = pageNumber;\r\n      this.pagination.pageSize = pageSize;\r\n      await this.handleGetYear();\r\n    },\r\n\r\n    // 获取业务年度\r\n    async handleGetYear() {\r\n      if (!this.orgCode) {\r\n        const orgObj = await this.$apis.bim.curOrg.get({});\r\n        this.bizCode = orgObj?.bizCode;\r\n        this.orgCode = orgObj?.orgUniqueCode; // todo 写死数据\r\n      }\r\n\r\n      if (!this.appCode) {\r\n        const { appCode } = await this.$router.history.current.query;\r\n        this.appCode = appCode || 'CM'; // 获取当前登入信息\r\n      }\r\n\r\n      if (!this.queryItems.busiYear > 0) {\r\n        // 获取年度\r\n        const data = {\r\n          // orgCode: this.orgCode, // todo 写死的数据\r\n          bizCode: this.appConfig.bizCode,\r\n          appCode: this.appCode || 'CM',\r\n          yearTypeCode: 'BIZ_YEAR',\r\n        };\r\n        const busiYearObj = await this.$apis.bpm.executionEnter.getBuYear(data);\r\n        this.queryItems.busiYear = busiYearObj?.yearValue;\r\n        this.nowYear = busiYearObj?.yearValue;\r\n      }\r\n      this.onQuery();\r\n    },\r\n    // 选中所有列表\r\n    selectAllEvent({ checked, records }) {\r\n      console.log(`${checked}-选中所有records包含选中的所以对象----${JSON.stringify(records)}`);\r\n      this.selectedRows = records;\r\n    },\r\n\r\n    // 选中列表\r\n    selectRowChange({ checked, records }) {\r\n      console.log(\r\n        `${checked}-选择改变时会把records包含选中的所以对象----${JSON.stringify(records)}`,\r\n      );\r\n      this.selectedRows = records;\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=2b954730&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}