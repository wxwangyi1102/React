{"version":3,"sources":["webpack:///./src/views/centre/transfer/Index.vue?450c","webpack:///./src/views/centre/transfer/Index.vue?51b5","webpack:///./src/views/centre/transfer/Dytable.vue?3bbf","webpack:///./src/views/centre/transfer/Detail.vue?1641","webpack:///src/views/centre/transfer/Detail.vue","webpack:///./src/views/centre/transfer/Detail.vue?efd9","webpack:///./src/views/centre/transfer/Detail.vue","webpack:///src/views/centre/transfer/Dytable.vue","webpack:///./src/views/centre/transfer/Dytable.vue?7110","webpack:///./src/views/centre/transfer/Dytable.vue","webpack:///src/views/centre/transfer/Index.vue","webpack:///./src/views/centre/transfer/Index.vue?b704","webpack:///./src/views/centre/transfer/Index.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack:///./src/views/centre/transfer/Detail.vue?d7d9","webpack:///./src/components/_utils.js","webpack:///./src/utils/utils.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","_s","busiYear","on","init","resetHandle","model","value","queryItems","callback","$$v","$set","expression","_l","b","key","id","name","statusValOptions","disabled","selectedStatusList","unitstr","s","_e","$event","operate","exportFile","handleSubmit","handleCancel","label","tableData","memberOrgType","loading","tableDataChildren","staticRenderFns","ref","staticClass","cellStyle","footerMethod","trigger","mode","selected","isArrow","isDel","isEnter","isTab","isEdit","enterToTab","editMethod","editClosedEvent","scopedSlots","_u","fn","row","getTotal","Math","random","immediate","handlerzhejChange","zhej","getGsptgx","ckbhgx","remark","handleGetdetails","visible","onclose","leafTypeCode","data","unitTypeId","unitOptions","methods","show","response","obj","handleUnitType","sumNum","list","field","count","columns","component","components","Detail","props","tableState","type","default","computed","_apis","watch","handler","val","memberLevelCode","state","item","$table","$columnIndex","textAlign","Dytable","code","ispush","orgCode","unitType","children","unitstrOptions","appConfig","deep","created","params","query","then","finally","footerCellClassName","updateFooterEvent","$ec","update","detailMapList","setTimeout","onGetuserinfo","orgTypeEk","findlabel","A","_defineProperty","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","listFormatTree","replace","pkey","title","option","Array","isArray","console","error","child","parentId","parent","parentTmp","String","cloneDeep","Reflect","deleteProperty","root","every","n","treeFormatList","treeData","clone","stack","node","shift","filterList","filterFn","uniqueArrayBy","arr","prop","isPlainObject","from","Set","map","Map","Error","set","size","values","getExpandedKeys","paths","select","add","isLeaf","delete","reverse","getSelectedBy","by","getNodeBy","getNameBy","dicList","prototype","toString","document","addEventListener","removeEventListener","weightMatching","fields","unit","k","includes","DownloadA","url","filename","link","createElement","style","display","href","setAttribute","body","appendChild","click","removeChild"],"mappings":"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","file":"js/chunk-338084a0.adee859e.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&id=b36e6b50&prod&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-container',{attrs:{\"height\":\"auto\"}},[_c('ec-container-header',[_c('ec-panel-toolbar',[_c('ec-panel-item-left',[_c('ec-header',{attrs:{\"title\":\"调拨计划量管理\",\"icon\":\"onetomany\",\"color-code\":\"003\"}})],1),_c('ec-panel-item-right',[_c('div',[_vm._v(\"集中交易年度: \"+_vm._s(_vm.busiYear)+\"年\")])])],1)],1),_c('ec-container-body',[_c('ec-panel',[(_vm.operate)?_c('ec-panel-toolbar',[_c('ec-query-panel',{attrs:{\"defaultFold\":true},on:{\"query\":_vm.init,\"reset\":_vm.resetHandle}},[_c('ec-query-item',{attrs:{\"label\":\"单位类型\"}},[_c('a-select',{attrs:{\"allowClear\":\"\",\"show-search\":\"\",\"placeholder\":\"请选择单位类型\"},on:{\"select\":_vm.init},model:{value:(_vm.queryItems.memberOrgType),callback:function ($$v) {_vm.$set(_vm.queryItems, \"memberOrgType\", $$v)},expression:\"queryItems.memberOrgType\"}},_vm._l((_vm.unitType),function(b){return _c('a-select-option',{key:b.id},[_vm._v(\" \"+_vm._s(b.name)+\" \")])}),1)],1),_c('ec-query-item',{attrs:{\"label\":\"烟叶类型\"}},[_c('a-cascader',{attrs:{\"options\":_vm.statusValOptions,\"disabled\":_vm.disabled,\"change-on-select\":\"\",\"placeholder\":\"请选择\"},on:{\"change\":_vm.selectedStatusList},model:{value:(_vm.queryItems.leafTypeCode),callback:function ($$v) {_vm.$set(_vm.queryItems, \"leafTypeCode\", $$v)},expression:\"queryItems.leafTypeCode\"}})],1),_c('ec-query-item',{attrs:{\"label\":\"计量单位\"}},[_c('a-select',{attrs:{\"allow-clear\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.unitstr),callback:function ($$v) {_vm.unitstr=$$v},expression:\"unitstr\"}},_vm._l((_vm.unitstrOptions),function(s){return _c('a-select-option',{key:s.id},[_vm._v(\" \"+_vm._s(s.name)+\" \")])}),1)],1)],1),_c('ec-divider')],1):_vm._e(),_c('ec-panel-body',[_c('ec-v-layout',[_c('ec-v-item',[_c('ec-panel-item',[_c('ec-panel-item-left',[(_vm.operate)?[(_vm.ispush)?_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.operate = false}}},[_vm._v(\"编辑\")]):_vm._e(),_c('a-button',{on:{\"click\":_vm.exportFile}},[_vm._v(\"导出\")])]:[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"保存\")]),_c('a-button',{on:{\"click\":_vm.handleCancel}},[_vm._v(\"取消\")])]],2),_c('ec-panel-item-right',[(!_vm.operate)?_c('div',[_vm._v(\" 集中交易年度:2021年; 正在编辑的烟叶类型:\"+_vm._s(_vm.label)+\";计量单位:\"+_vm._s(_vm.unitstr === '50' ? '担' : '万担')+\" \")]):_vm._e()])],1)],1),_c('ec-v-item',[_c('Dytable',{attrs:{\"tableState\":_vm.tableData,\"memberOrgType\":_vm.queryItems.memberOrgType,\"operate\":_vm.operate,\"loading\":_vm.loading,\"unitstr\":_vm.unitstr,\"busiYear\":_vm.busiYear},model:{value:(_vm.tableDataChildren),callback:function ($$v) {_vm.tableDataChildren=$$v},expression:\"tableDataChildren\"}})],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('vxe-table',{ref:\"xTable\",staticClass:\"editable-footer\",attrs:{\"border\":\"\",\"stripe\":\"\",\"resizable\":\"\",\"header-align\":\"center\",\"align\":\"center\",\"cell-style\":_vm.cellStyle,\"show-footer\":\"\",\"show-overflow\":\"\",\"highlight-hover-row\":\"\",\"height\":!_vm.operate ? 720 : 620,\"footer-method\":_vm.footerMethod,\"loading\":_vm.loading,\"data\":_vm.tableData,\"edit-config\":!_vm.operate ? { trigger: 'click', mode: 'cell' } : {},\"mouse-config\":{ selected: true },\"keyboard-config\":{\n      isArrow: true,\n      isDel: true,\n      isEnter: true,\n      isTab: true,\n      isEdit: true,\n      enterToTab: true,\n      editMethod: _vm.editMethod,\n    }},on:{\"edit-closed\":_vm.editClosedEvent}},[_c('vxe-column',{attrs:{\"width\":\"60\",\"title\":\"序号\",\"type\":\"seq\",\"align\":\"center\"}}),_c('vxe-column',{attrs:{\"title\":\"会员单位\",\"field\":\"memberOrgName\"}}),_c('vxe-column',{attrs:{\"title\":\"总计\",\"field\":\"total\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\n    var row = ref.row;\nreturn [_vm._v(_vm._s(_vm.getTotal(row)))]}}])}),_c('vxe-colgroup',{key:Math.random(),attrs:{\"title\":\"国内计划核定量\",\"align\":\"center\"}},[_c('vxe-column',{attrs:{\"field\":\"zhej\",\"title\":\"合计\",\"edit-render\":{ name: 'input', immediate: true }},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\n    var row = ref.row;\nreturn [_c('a-input-number',{attrs:{\"type\":\"text\",\"min\":0},on:{\"blur\":function($event){return _vm.handlerzhejChange(row)}},model:{value:(row.zhej),callback:function ($$v) {_vm.$set(row, \"zhej\", $$v)},expression:\"row.zhej\"}})]}},{key:\"default\",fn:function(ref){\n    var row = ref.row;\nreturn [_vm._v(\" \"+_vm._s(row.zhej)+\" \")]}}])}),_c('vxe-column',{attrs:{\"field\":\"gsptgx\",\"title\":\"工商普通购销\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\n    var row = ref.row;\nreturn [_vm._v(_vm._s(_vm.getGsptgx(row)))]}}])}),_c('vxe-column',{attrs:{\"field\":\"jdy\",\"title\":\"基地烟\"}})],1),(_vm.memberOrgType != 'INDUSTRY')?_c('vxe-colgroup',{key:Math.random(),attrs:{\"title\":\"出口调拨计划量\"}},[_c('vxe-column',{attrs:{\"field\":\"ckbhgx\",\"title\":\"出口备货普通购销\",\"edit-render\":{ name: 'input', immediate: true }},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\n    var row = ref.row;\nreturn [_c('a-input-number',{attrs:{\"type\":\"text\",\"min\":0},model:{value:(row.ckbhgx),callback:function ($$v) {_vm.$set(row, \"ckbhgx\", $$v)},expression:\"row.ckbhgx\"}})]}},{key:\"default\",fn:function(ref){\n    var row = ref.row;\nreturn [_vm._v(\" \"+_vm._s(row.ckbhgx)+\" \")]}}],null,false,2317154319)})],1):_vm._e(),_c('vxe-column',{attrs:{\"title\":\"办理依据\",\"field\":\"remark\",\"edit-render\":{ name: 'input', immediate: true }},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\n    var row = ref.row;\nreturn [_c('a-input',{attrs:{\"type\":\"text\"},model:{value:(row.remark),callback:function ($$v) {_vm.$set(row, \"remark\", $$v)},expression:\"row.remark\"}})]}},{key:\"default\",fn:function(ref){\n    var row = ref.row;\nreturn [_vm._v(\" \"+_vm._s(row.remark)+\" \")]}}])}),_c('vxe-colgroup',{key:Math.random(),attrs:{\"title\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\n    var row = ref.row;\nreturn [_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.handleGetdetails(row)}}},[_vm._v(\"基地烟详情\")])]}}])})],1),_c('Detail',{ref:\"detailRef\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-drawer',{staticClass:\"ec-draw-form\",attrs:{\"title\":\"详情\",\"visible\":_vm.visible,\"size\":\"large\",\"is-confirm\":true},on:{\"close\":_vm.onclose}},[_c('ec-container',[_c('ec-container-body',[_c('div',{staticClass:\"detailTitle\"},[_vm._v(\" 集中交易年度：\"+_vm._s(_vm.busiYear)+\"年 \"),_c('span',{staticClass:\"detailUtil\"},[_vm._v(\"计量单位：\"+_vm._s(_vm.unitstr === '50' ? '担' : '万担'))])]),_c('vxe-table',{ref:\"xTable\",staticClass:\"editable-footer\",attrs:{\"border\":\"\",\"show-footer\":\"\",\"show-overflow\":\"\",\"highlight-hover-row\":\"\",\"height\":\"400\",\"export-config\":{},\"footer-method\":_vm.footerMethod,\"data\":_vm.tableData}},[_c('vxe-column',{attrs:{\"width\":\"60\",\"type\":\"seq\",\"title\":\"序号\",\"align\":\"center\"}}),_c('vxe-column',{attrs:{\"title\":\"会员单位\",\"field\":\"memberOrgName\"}}),_c('vxe-column',{attrs:{\"title\":\"基地单元\",\"field\":\"baseCellName\"}}),_c('vxe-column',{attrs:{\"title\":\"烟叶类型\",\"field\":\"leafTypeCode\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(_vm._s(row.leafTypeCode === '20' ? '晾晒烟' : row.leafTypeCode === '10' ? '烤烟' : '雪茄烟叶'))]}}])}),_c('vxe-column',{attrs:{\"title\":\"收购量\",\"field\":\"buyWeight\"}}),_c('vxe-column',{attrs:{\"title\":\"计划核定量\",\"field\":\"apprWeight\"}})],1)],1),_c('ec-container-footer',{attrs:{\"fixed\":\"\"}},[_c('a-space',[_c('a-button',{on:{\"click\":_vm.onclose}},[_vm._v(\"关闭\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ec-drawer\r\n    title=\"详情\"\r\n    :visible=\"visible\"\r\n    size=\"large\"\r\n    @close=\"onclose\"\r\n    class=\"ec-draw-form\"\r\n    :is-confirm=\"true\"\r\n  >\r\n    <ec-container>\r\n      <ec-container-body>\r\n        <div class=\"detailTitle\">\r\n          集中交易年度：{{ busiYear }}年\r\n          <span class=\"detailUtil\">计量单位：{{ unitstr === '50' ? '担' : '万担' }}</span>\r\n        </div>\r\n        <vxe-table\r\n          border\r\n          show-footer\r\n          show-overflow\r\n          highlight-hover-row\r\n          ref=\"xTable\"\r\n          height=\"400\"\r\n          class=\"editable-footer\"\r\n          :export-config=\"{}\"\r\n          :footer-method=\"footerMethod\"\r\n          :data=\"tableData\"\r\n        >\r\n          <vxe-column width=\"60\" type=\"seq\" title=\"序号\" align=\"center\"></vxe-column>\r\n          <vxe-column title=\"会员单位\" field=\"memberOrgName\"></vxe-column>\r\n          <vxe-column title=\"基地单元\" field=\"baseCellName\"></vxe-column>\r\n          <!-- <vxe-column title=\"核定量类型\" field=\"apprTypeCode\"></vxe-column> -->\r\n          <vxe-column title=\"烟叶类型\" field=\"leafTypeCode\">\r\n            <template #default=\"{ row }\">{{\r\n              row.leafTypeCode === '20' ? '晾晒烟' : row.leafTypeCode === '10' ? '烤烟' : '雪茄烟叶'\r\n            }}</template>\r\n          </vxe-column>\r\n          <vxe-column title=\"收购量\" field=\"buyWeight\"></vxe-column>\r\n          <vxe-column title=\"计划核定量\" field=\"apprWeight\"></vxe-column>\r\n        </vxe-table>\r\n      </ec-container-body>\r\n      <ec-container-footer fixed>\r\n        <a-space>\r\n          <!-- <a-button :loading=\"loading\" type=\"primary\" @click=\"onSaveAndAdd\">保存并新增</a-button> -->\r\n          <!-- <a-button :loading=\"loading\" type=\"primary\" @click=\"onSave\">保存</a-button> -->\r\n          <a-button @click=\"onclose\">关闭</a-button>\r\n        </a-space>\r\n      </ec-container-footer>\r\n    </ec-container>\r\n  </ec-drawer>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'transferDetail',\r\n  data() {\r\n    return {\r\n      unitstr: '50',\r\n      busiYear: '',\r\n      tableData: [],\r\n      visible: false,\r\n\r\n      unitTypeId: '1',\r\n      unitOptions: [\r\n        { name: '全部', id: '1' },\r\n        { name: '特色单元', id: '2' },\r\n        { name: '标准单元', id: '3' },\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    // 数据初始化\r\n    // 显示推窗\r\n    show(response) {\r\n      const { rows, unitstr, busiYear } = response;\r\n      this.unitstr = unitstr;\r\n      this.busiYear = busiYear;\r\n      this.tableData = [...rows].map((item) => {\r\n        const obj = { ...item };\r\n        const org = Number(unitstr); // 单位  // 换算为担\r\n        obj.buyWeight = Number(obj.buyWeight) / org;\r\n        obj.apprWeight = Number(obj.apprWeight) / org;\r\n        return obj;\r\n      });\r\n      this.visible = true;\r\n    },\r\n    onclose() {\r\n      this.tableData = [];\r\n      this.visible = false;\r\n    },\r\n    // 核定量类型改变\r\n    handleUnitType() {},\r\n\r\n    sumNum(list, field) {\r\n      let count = 0;\r\n      list.forEach((item) => {\r\n        count += Number(item[field]);\r\n      });\r\n      return count;\r\n    },\r\n    footerMethod({ columns, data }) {\r\n      return [\r\n        columns.map((column, columnIndex) => {\r\n          if (columnIndex === 1) {\r\n            return '合计';\r\n          }\r\n          if (['buyWeight', 'apprWeight'].includes(column.property)) {\r\n            return this.sumNum(data, column.property);\r\n          }\r\n          return null;\r\n        }),\r\n      ];\r\n    },\r\n    // // 驳回\r\n    // reject() {\r\n    //   this.$http.post('/pages', { id: this.formData.id }).then((data) => {\r\n    //     this.$message.success('驳回成功！', data);\r\n    //   });\r\n    // },\r\n    // // 通过\r\n    // pass() {\r\n    //   this.$http.post('/pages', { id: this.formData.id }).then((data) => {\r\n    //     this.$message.success('审批通过！', data);\r\n    //   });\r\n    // },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.detailTitle {\r\n  text-align: right;\r\n  margin: 0;\r\n}\r\n.detailUtil {\r\n  margin-left: 10px;\r\n}\r\n.detailSelect {\r\n  text-align: right;\r\n  width: 100%;\r\n  margin: 10px 0;\r\n}\r\n/deep/.ant-modal-body {\r\n  padding-top: 0;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Detail.vue?vue&type=template&id=0ee5aeb7&scoped=true&\"\nimport script from \"./Detail.vue?vue&type=script&lang=js&\"\nexport * from \"./Detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Detail.vue?vue&type=style&index=0&id=0ee5aeb7&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0ee5aeb7\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <vxe-table\r\n      ref=\"xTable\"\r\n      border\r\n      stripe\r\n      resizable\r\n      header-align=\"center\"\r\n      align=\"center\"\r\n      :cell-style=\"cellStyle\"\r\n      show-footer\r\n      show-overflow\r\n      highlight-hover-row\r\n      :height=\"!operate ? 720 : 620\"\r\n      class=\"editable-footer\"\r\n      :footer-method=\"footerMethod\"\r\n      :loading=\"loading\"\r\n      :data=\"tableData\"\r\n      :edit-config=\"!operate ? { trigger: 'click', mode: 'cell' } : {}\"\r\n      :mouse-config=\"{ selected: true }\"\r\n      :keyboard-config=\"{\r\n        isArrow: true,\r\n        isDel: true,\r\n        isEnter: true,\r\n        isTab: true,\r\n        isEdit: true,\r\n        enterToTab: true,\r\n        editMethod,\r\n      }\"\r\n      @edit-closed=\"editClosedEvent\"\r\n    >\r\n      <vxe-column width=\"60\" title=\"序号\" type=\"seq\" align=\"center\"></vxe-column>\r\n      <vxe-column title=\"会员单位\" field=\"memberOrgName\"></vxe-column>\r\n\r\n      <vxe-column title=\"总计\" field=\"total\">\r\n        <template #default=\"{ row }\">{{ getTotal(row) }}</template>\r\n      </vxe-column>\r\n\r\n      <vxe-colgroup title=\"国内计划核定量\" :key=\"Math.random()\" align=\"center\">\r\n        <vxe-column field=\"zhej\" title=\"合计\" :edit-render=\"{ name: 'input', immediate: true }\">\r\n          <template #edit=\"{ row }\">\r\n            <a-input-number\r\n              type=\"text\"\r\n              :min=\"0\"\r\n              v-model=\"row.zhej\"\r\n              @blur=\"handlerzhejChange(row)\"\r\n            ></a-input-number>\r\n          </template>\r\n          <template #default=\"{ row }\"> {{ row.zhej }} </template>\r\n        </vxe-column>\r\n        <vxe-column field=\"gsptgx\" title=\"工商普通购销\">\r\n          <template #default=\"{ row }\">{{ getGsptgx(row) }}</template>\r\n        </vxe-column>\r\n        <vxe-column field=\"jdy\" title=\"基地烟\"> </vxe-column>\r\n      </vxe-colgroup>\r\n\r\n      <vxe-colgroup v-if=\"memberOrgType != 'INDUSTRY'\" title=\"出口调拨计划量\" :key=\"Math.random()\">\r\n        <vxe-column\r\n          field=\"ckbhgx\"\r\n          title=\"出口备货普通购销\"\r\n          :edit-render=\"{ name: 'input', immediate: true }\"\r\n        >\r\n          <template #edit=\"{ row }\">\r\n            <a-input-number type=\"text\" :min=\"0\" v-model=\"row.ckbhgx\"></a-input-number>\r\n          </template>\r\n          <template #default=\"{ row }\"> {{ row.ckbhgx }} </template>\r\n        </vxe-column>\r\n      </vxe-colgroup>\r\n\r\n      <vxe-column title=\"办理依据\" field=\"remark\" :edit-render=\"{ name: 'input', immediate: true }\">\r\n        <template #edit=\"{ row }\">\r\n          <a-input type=\"text\" v-model=\"row.remark\"></a-input>\r\n        </template>\r\n        <template #default=\"{ row }\"> {{ row.remark }} </template>\r\n      </vxe-column>\r\n      <vxe-colgroup title=\"操作\" :key=\"Math.random()\">\r\n        <template #default=\"{ row }\">\r\n          <a-button type=\"link\" @click=\"handleGetdetails(row)\">基地烟详情</a-button>\r\n        </template>\r\n      </vxe-colgroup>\r\n    </vxe-table>\r\n    <Detail ref=\"detailRef\"></Detail>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Detail from './Detail.vue';\r\n\r\nexport default {\r\n  name: 'Dytable',\r\n  components: { Detail },\r\n  props: {\r\n    tableState: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n    operate: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    loading: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    memberOrgType: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    unitstr: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    busiYear: {\r\n      type: Number,\r\n      default: 2022,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n    };\r\n  },\r\n  computed: {\r\n    _apis() {\r\n      return this.$apis.centre.transfer;\r\n    },\r\n  },\r\n  watch: {\r\n    tableState: {\r\n      handler(val) {\r\n        this.tableData = val;\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    // 发起请求 获取详情\r\n    handleGetdetails({ memberLevelCode, leafTypeCode }) {\r\n      const params = {\r\n        busiYear: this.busiYear,\r\n        memberLevelCode,\r\n        leafTypeCode,\r\n      };\r\n      // 拿到详情数据并且传递\r\n      this._apis.queryDetails(params).then((res) => {\r\n        const state = { ...res };\r\n        state.unitstr = this.unitstr;\r\n        state.busiYear = this.busiYear;\r\n        this.$refs.detailRef.show(state);\r\n      });\r\n    },\r\n    // 计算总价\r\n    getTotal(item) {\r\n      item.total = Math.floor((Number(item.zhej) + Number(item.ckbhgx)) * 10000) / 10000;\r\n      return item.total;\r\n    },\r\n    // 计算工商普通购销\r\n    getGsptgx(item) {\r\n      item.gsptgx = Number(item.zhej) - Number(item.jdy);\r\n      return item.gsptgx;\r\n    },\r\n    // 编辑重写默认\r\n    editMethod({ row, column }) {\r\n      const $table = this.$refs.xTable;\r\n      $table.setActiveCell(row, column);\r\n    },\r\n    sumNum(list, field) {\r\n      let count = 0;\r\n      list.forEach((item) => {\r\n        count += Number(item[field]);\r\n      });\r\n      return count;\r\n    },\r\n    // 合计栏\r\n    footerMethod({ columns, data }) {\r\n      return [\r\n        columns.map((column, columnIndex) => {\r\n          if (columnIndex === 0) {\r\n            return '合计';\r\n          }\r\n          if (['total', 'zhej', 'gsptgx', 'jdy', 'ckbhgx'].includes(column.property)) {\r\n            return this.sumNum(data, column.property);\r\n          }\r\n          return null;\r\n        }),\r\n      ];\r\n    },\r\n    // 单元格居右\r\n    cellStyle({ $columnIndex }) {\r\n      if (\r\n        $columnIndex === 2 ||\r\n        $columnIndex === 3 ||\r\n        $columnIndex === 4 ||\r\n        $columnIndex === 5 ||\r\n        $columnIndex === 6\r\n      ) {\r\n        return { textAlign: 'right' };\r\n      }\r\n    },\r\n\r\n    // 校验\r\n    handlerzhejChange(item) {\r\n      if (Number(item.zhej) < Number(item.jdy)) {\r\n        item.zhej = item.jdy; // 小于基地烟则 等于基地烟\r\n        this.$message.error('合计量 不能小于基地烟合计量');\r\n      }\r\n    },\r\n    // 退出编辑 emit\r\n    editClosedEvent() {\r\n      // const $table = this.$refs.xTable;\r\n      // const { visibleData } = $table.getTableData();\r\n      // this.$emit('input', visibleData);\r\n      this.$emit('input', this.tableData);\r\n    },\r\n    // 总计变化\r\n    // onValueChange(row, type) {\r\n    //   // 使用vxe-table的方法获取data否则会存在bug\r\n    //   // const $table = this.$refs.xTable;\r\n    //   // const { visibleData } = $table.getTableData();\r\n    //   // const list = visibleData.map((child) => {\r\n    //   //   const item = { ...child };\r\n    //   //   if (item._X_ID === row._X_ID) {\r\n    //   //     if (type === 'zhej') {\r\n    //   //       if (Number(item.zhej) < Number(item.jdy)) {\r\n    //   //         this.$message.error('合计量 不能小于基地烟合计量');\r\n    //   //         item.zhej = 0; // 小于基地烟则 清零\r\n    //   //       } else {\r\n    //   //         item.gsptgx = Number(item.zhej) - Number(item.jdy);\r\n    //   //         // js 加法运算为弱运算(0.1+0.2=0.30000000000000000000001)\r\n    //   //         item.total = Math.floor((Number(item.zhej) + Number(item.ckbhgx)) * 10000) / 10000;\r\n    //   //       }\r\n    //   //     }\r\n    //   //     if (type === 'ckbhgx') {\r\n    //   //       item.total = Math.floor((Number(item.zhej) + Number(item.ckbhgx)) * 10000) / 10000;\r\n    //   //     }\r\n    //   //   }\r\n    //   //   return item;\r\n    //   // });\r\n    //   // $table.loadData(list);\r\n    // },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dytable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dytable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dytable.vue?vue&type=template&id=78ec69e1&scoped=true&\"\nimport script from \"./Dytable.vue?vue&type=script&lang=js&\"\nexport * from \"./Dytable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"78ec69e1\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <ec-container height=\"auto\">\r\n    <ec-container-header>\r\n      <ec-panel-toolbar>\r\n        <ec-panel-item-left>\r\n          <ec-header title=\"调拨计划量管理\" icon=\"onetomany\" color-code=\"003\" />\r\n        </ec-panel-item-left>\r\n        <ec-panel-item-right>\r\n          <div>集中交易年度: {{ busiYear }}年</div>\r\n        </ec-panel-item-right>\r\n      </ec-panel-toolbar>\r\n    </ec-container-header>\r\n    <ec-container-body>\r\n      <ec-panel>\r\n        <ec-panel-toolbar v-if=\"operate\">\r\n          <ec-query-panel :defaultFold=\"true\" @query=\"init\" @reset=\"resetHandle\">\r\n            <ec-query-item label=\"单位类型\">\r\n              <a-select\r\n                allowClear\r\n                show-search\r\n                placeholder=\"请选择单位类型\"\r\n                v-model=\"queryItems.memberOrgType\"\r\n                @select=\"init\"\r\n              >\r\n                <a-select-option v-for=\"b in unitType\" :key=\"b.id\">\r\n                  {{ b.name }}\r\n                </a-select-option>\r\n              </a-select>\r\n            </ec-query-item>\r\n            <ec-query-item label=\"烟叶类型\">\r\n              <a-cascader\r\n                :options=\"statusValOptions\"\r\n                :disabled=\"disabled\"\r\n                v-model=\"queryItems.leafTypeCode\"\r\n                change-on-select\r\n                placeholder=\"请选择\"\r\n                @change=\"selectedStatusList\"\r\n              />\r\n            </ec-query-item>\r\n            <ec-query-item label=\"计量单位\">\r\n              <a-select allow-clear placeholder=\"请选择\" v-model=\"unitstr\">\r\n                <a-select-option v-for=\"s in unitstrOptions\" :key=\"s.id\">\r\n                  {{ s.name }}\r\n                </a-select-option>\r\n              </a-select></ec-query-item\r\n            >\r\n          </ec-query-panel>\r\n          <ec-divider />\r\n        </ec-panel-toolbar>\r\n        <ec-panel-body>\r\n          <ec-v-layout>\r\n            <!-- 表格工具栏 -->\r\n            <ec-v-item>\r\n              <ec-panel-item>\r\n                <ec-panel-item-left>\r\n                  <template v-if=\"operate\">\r\n                    <a-button v-if=\"ispush\" type=\"primary\" @click=\"operate = false\">编辑</a-button>\r\n                    <a-button @click=\"exportFile\">导出</a-button></template\r\n                  >\r\n                  <template v-else>\r\n                    <a-button type=\"primary\" @click=\"handleSubmit\">保存</a-button>\r\n                    <a-button @click=\"handleCancel\">取消</a-button>\r\n                  </template>\r\n                </ec-panel-item-left>\r\n                <ec-panel-item-right>\r\n                  <div v-if=\"!operate\">\r\n                    集中交易年度:2021年; 正在编辑的烟叶类型:{{ label }};计量单位:{{\r\n                      unitstr === '50' ? '担' : '万担'\r\n                    }}\r\n                  </div>\r\n                </ec-panel-item-right>\r\n              </ec-panel-item>\r\n            </ec-v-item>\r\n            <!-- 列表 -->\r\n            <ec-v-item>\r\n              <Dytable\r\n                v-model=\"tableDataChildren\"\r\n                :tableState=\"tableData\"\r\n                :memberOrgType=\"queryItems.memberOrgType\"\r\n                :operate=\"operate\"\r\n                :loading=\"loading\"\r\n                :unitstr=\"unitstr\"\r\n                :busiYear=\"busiYear\"\r\n              />\r\n            </ec-v-item>\r\n          </ec-v-layout>\r\n        </ec-panel-body>\r\n      </ec-panel>\r\n    </ec-container-body>\r\n  </ec-container>\r\n</template>\r\n\r\n<script>\r\nimport Dytable from './Dytable.vue';\r\nimport { weightMatching } from '@/utils/utils';\r\n\r\nexport default {\r\n  name: 'transfer',\r\n  components: { Dytable },\r\n  data() {\r\n    return {\r\n      // 初始化单位数据\r\n      code: '',\r\n      ispush: true, //  工业平台是否推送\r\n      orgCode: '',\r\n      // boolean\r\n      loading: true,\r\n      operate: true,\r\n      disabled: false,\r\n      // options\r\n      unitstr: '50',\r\n      label: '烤烟',\r\n      unitType: [\r\n        { name: '商业企业', id: 'TOBACCO' },\r\n        { name: '工业企业', id: 'INDUSTRY' },\r\n      ],\r\n      statusValOptions: [\r\n        {\r\n          value: '10',\r\n          label: '烤烟',\r\n        },\r\n        {\r\n          value: '20',\r\n          label: '晾晒烟',\r\n          children: [\r\n            {\r\n              value: '2013',\r\n              label: '雪茄烟叶',\r\n            },\r\n          ],\r\n        },\r\n      ],\r\n      unitstrOptions: [\r\n        { name: '担', id: '50' },\r\n        { name: '万担', id: '500000' },\r\n      ],\r\n      // state\r\n      queryItems: {\r\n        memberOrgType: 'TOBACCO',\r\n        leafTypeCode: ['10'],\r\n        busiYear: '',\r\n      },\r\n      tableData: [],\r\n      tableDataChildren: [],\r\n    };\r\n  },\r\n  computed: {\r\n    _apis() {\r\n      return this.$apis.centre.transfer;\r\n    },\r\n    appConfig() {\r\n      return this.$store.getters.getAppConfig;\r\n    },\r\n    busiYear() {\r\n      return this.$store.getters.getAppConfig?.yearValueMap?.CENTER_YEAR;\r\n    },\r\n  },\r\n  watch: {\r\n    queryItems: {\r\n      handler(val) {\r\n        if (val.memberOrgType === 'INDUSTRY') {\r\n          this.disabled = true;\r\n        } else {\r\n          this.disabled = false;\r\n        }\r\n      },\r\n      deep: true,\r\n      immediate: true,\r\n    },\r\n  },\r\n  created() {\r\n    this.onGetuserinfo();\r\n  },\r\n  methods: {\r\n    // 数据初始化\r\n    init() {\r\n      const params = { ...this.queryItems };\r\n      params.busiYear = this.busiYear;\r\n      if (params.leafTypeCode && params.leafTypeCode?.length !== 0)\r\n        params.leafTypeCode = params.leafTypeCode.reverse()[0];\r\n      this._apis\r\n        .query(params)\r\n        .then(({ rows }) => {\r\n          const fieldArr = ['zhej', 'gsptgx', 'jdy', 'ckbhgx'];\r\n          const list = weightMatching(fieldArr, rows, this.unitstr, '/');\r\n          const newlist = list.map((item) => {\r\n            for (const k in item) {\r\n              // for in 循环数组 需要判断是否为自身属性\r\n              if (Object.prototype.hasOwnProperty.call(item, k)) {\r\n                const rowIndex = item[k];\r\n                if (fieldArr.includes(k) && !rowIndex) {\r\n                  item[k] = 0; // 如果为null则为0\r\n                }\r\n              }\r\n            }\r\n            item.zhej = item.jdy + item.gsptgx;\r\n            return item;\r\n          });\r\n          this.tableData = newlist;\r\n        })\r\n        .finally(() => {\r\n          this.loading = false;\r\n        });\r\n    },\r\n    // 重置\r\n    resetHandle() {\r\n      this.brandId = undefined;\r\n      this.init();\r\n    },\r\n    footerCellClassName({ $rowIndex, columnIndex }) {\r\n      if (columnIndex === 1) {\r\n        if ($rowIndex === 0) {\r\n          return 'col-blue';\r\n        }\r\n      }\r\n      if (columnIndex === 2) {\r\n        if ($rowIndex === 1) {\r\n          return 'col-red';\r\n        }\r\n      }\r\n    },\r\n    // 在值发生改变时更新表尾合计\r\n    updateFooterEvent() {\r\n      const $table = this.$refs.xTable;\r\n      $table.updateFooter();\r\n    },\r\n    // 烟叶类型 change\r\n    selectedStatusList(data) {\r\n      this.findlabel(data[data.length - 1]);\r\n    },\r\n    // 导出\r\n    exportFile() {},\r\n    // 提交\r\n    handleSubmit() {\r\n      // 单位换算后 再提交\r\n      const detailMapList = weightMatching(\r\n        ['zhej', 'gsptgx', 'jdy', 'ckbhgx', 'total'],\r\n        this.tableDataChildren,\r\n        this.unitstr,\r\n        '*',\r\n      );\r\n      if (detailMapList.length > 0) {\r\n        $ec.showLoading();\r\n        this._apis\r\n          .update(detailMapList)\r\n          .then(() => {\r\n            // 短暂延迟\r\n            setTimeout(() => {\r\n              this.operate = true;\r\n            }, 800);\r\n          })\r\n          .finally(() => {\r\n            this.init();\r\n            $ec.hideLoading();\r\n          });\r\n      } else {\r\n        this.$message.warning('取消编辑');\r\n        this.operate = true;\r\n      }\r\n\r\n      // 发起请求\r\n    },\r\n    // 取消\r\n    handleCancel() {\r\n      this.operate = true;\r\n      this.init();\r\n    },\r\n    // 登陆数据初始化\r\n    async onGetuserinfo() {\r\n      // 供需方字段 orgTypeEk\r\n      const { orgCode, orgTypeEk } = await this.$apis.bpm.executionEnter.getOrgCode({});\r\n      const ispush = await this._apis.getParamsByCode();\r\n      this.ispush = ispush === '0'; // 编辑按钮是否可视\r\n      this.orgCode = orgCode; // 登陆单位\r\n      this.orgType = orgTypeEk === 'TOBACCO' ? 'O' : 'I';\r\n      this.init();\r\n    },\r\n    // utils //递归获取key\r\n    findlabel(key) {\r\n      const list = [...this.statusValOptions];\r\n      let label;\r\n      fn(list, key);\r\n      function fn(A, k) {\r\n        A.forEach((item) => {\r\n          if (item.value === k) {\r\n            label = item.label;\r\n            return false;\r\n          } else if ('children' in item) {\r\n            fn(item.children, k);\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      this.label = label;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.btn-other {\r\n  border: 1px solid #0070d2;\r\n  color: #0070d2;\r\n}\r\n\r\n.table-bar-icon-btn {\r\n  width: 32px;\r\n\r\n  > i {\r\n    margin-left: -4px;\r\n  }\r\n}\r\n\r\n/deep/.org.ec-query-item-inline .ec-query-item__control {\r\n  min-width: 76px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=b36e6b50&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=b36e6b50&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b36e6b50\",\n  null\n  \n)\n\nexport default component.exports","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&id=0ee5aeb7&prod&lang=less&scoped=true&\"","import cloneDeep from 'lodash/cloneDeep';\r\nimport isPlainObject from 'lodash/isPlainObject';\r\n/**\r\n * 平铺树结构转换标注树结构\r\n * @param {Array} list 平铺类型数据\r\n * @param {Object | Null} replace 替换属性名称，key原来属性，value新属性\r\n * @param {Object} option 对应replace中的key字段，pkey和children必填\r\n * @returns treeData树结构\r\n */\r\nexport function listFormatTree(\r\n  list = [],\r\n  replace = { pkey: 'pkey', key: 'key', title: 'title', children: 'children' },\r\n  option = { pkey: 'pkey', children: 'children' },\r\n) {\r\n  if (!Array.isArray(list)) {\r\n    return console.error('请传入一个list数组');\r\n  }\r\n  list.forEach((child) => {\r\n    const parentId = child[option.pkey];\r\n    if (parentId) {\r\n      list.forEach((parent) => {\r\n        const parentTmp = parent;\r\n        // 替换属性\r\n        if (replace) {\r\n          for (const key in replace) {\r\n            // 新旧属性不一致的替换\r\n            if (String(key) !== String(replace[key])) {\r\n              if (\r\n                Array.isArray(parentTmp[replace[key]]) ||\r\n                parentTmp[replace[key]] instanceof Object\r\n              ) {\r\n                parentTmp[key] = cloneDeep(parentTmp[replace[key]]);\r\n              } else {\r\n                parentTmp[key] = parentTmp[replace[key]];\r\n              }\r\n              Reflect.deleteProperty(parentTmp, replace[key]);\r\n            }\r\n          }\r\n        }\r\n        if (parentTmp && parentTmp.key === parentId) {\r\n          parentTmp[option.children] = parentTmp[option.children] || [];\r\n          parentTmp[option.children].push(child);\r\n        }\r\n      });\r\n    }\r\n  });\r\n  const root = list.every((item) => item[replace.pkey]);\r\n  if (root) {\r\n    return console.error('至少有一个根节点pid为null数组或传入一个空数组', list);\r\n  }\r\n  return list.filter((n) => !n[option.pkey]);\r\n}\r\n\r\n/**\r\n * 树转换为扁平树结构\r\n * @param {Array} treeData 树结构\r\n * @param {Object | Null} replace 替换属性名称，value要替换的属性名，null 不替换\r\n * @param {String} children 对应replace中children字段\r\n * @returns\r\n */\r\nexport function treeFormatList(\r\n  treeData = [],\r\n  replace = { pkey: 'pkey', key: 'key', title: 'title' },\r\n  children = 'children',\r\n) {\r\n  if (!Array.isArray(treeData)) {\r\n    return console.error('请传入一个tree数组');\r\n  }\r\n  const list = [];\r\n  const clone = cloneDeep(treeData);\r\n  const stack = [...clone];\r\n  while (stack.length) {\r\n    const node = stack.shift();\r\n    const child = node[children];\r\n    if (child) {\r\n      stack.push(...child);\r\n    }\r\n    // 如果存在replace那就依次更换属性名称\r\n    if (replace) {\r\n      for (const key in replace) {\r\n        if (String(key) !== String(replace[key])) {\r\n          if (Array.isArray(node[replace[key]]) || node[replace[key]] instanceof Object) {\r\n            node[key] = cloneDeep(node[replace[key]]);\r\n          } else {\r\n            node[key] = node[replace[key]];\r\n          }\r\n          Reflect.deleteProperty(node, replace[key]);\r\n        }\r\n      }\r\n    }\r\n    // 删除空children属性\r\n    Reflect.deleteProperty(node, children);\r\n    list.push(node);\r\n  }\r\n  // 如果本身是list就返回本身\r\n  return list.length === 0 ? treeData : list;\r\n}\r\n\r\n/**\r\n * 过滤树，并保留原有的结构\r\n * @param {Array} treeData\r\n * @param {Function} filterFn 回调函数值判断来过滤，默认true不过滤\r\n * @param {String} children 子节点字段属性名称\r\n * @returns\r\n */\r\nexport function filterTree(treeData = [], filterFn = () => true, children = 'children') {\r\n  if (!Array.isArray(treeData)) {\r\n    return console.error('请传入一个tree数组');\r\n  }\r\n  function filter(treeDatas) {\r\n    if (!treeDatas?.length) {\r\n      return treeDatas;\r\n    }\r\n    return treeDatas.filter((data) => {\r\n      const item = data;\r\n      if (!filterFn(item)) {\r\n        return false;\r\n      }\r\n      item[children] = filter(item[children]);\r\n      return true;\r\n    });\r\n  }\r\n\r\n  return filter(treeData) || [];\r\n}\r\n\r\n/**\r\n * 树转为list并且过滤返回过滤的列表\r\n * @param {Array} treeData 树结构数据\r\n * @param {Function} filterFn 回调函数值判断来过滤，默认true不过滤\r\n * @param {Object | Null} replace 替换属性名称，value要替换的属性名，null 不替换\r\n * @returns 过滤后的数据\r\n */\r\nexport function filterList(\r\n  treeData,\r\n  filterFn = () => true,\r\n  replace = { pkey: 'pkey', key: 'key', title: 'title' },\r\n) {\r\n  if (!Array.isArray(treeData)) {\r\n    return console.error('请传入一个tree数组');\r\n  }\r\n  const clone = cloneDeep(treeData);\r\n  const list = treeFormatList(clone, replace);\r\n  return list.filter((item) => {\r\n    if (!filterFn(item)) {\r\n      return false;\r\n    }\r\n    return true;\r\n  });\r\n}\r\n\r\n/**\r\n * 数组去重\r\n * @param {Array} arr 存在重复数组对象\r\n * @param {String} prop 依据该属性判断唯一\r\n * @returns\r\n */\r\nexport function uniqueArrayBy(arr = [], prop = 'key') {\r\n  if (!Array.isArray(arr)) {\r\n    return console.error('请传入一个数组');\r\n  }\r\n  if (arr && arr.length !== 0 && isPlainObject(arr[0])) {\r\n    const map = new Map();\r\n    arr.forEach((item) => {\r\n      if (item[prop]) {\r\n        map.set(item[prop], item);\r\n      } else {\r\n        throw new Error('prop参数不匹配，在节点找不到对应的值');\r\n      }\r\n    });\r\n    if (map.size !== 0) {\r\n      return Array.from(map.values());\r\n    }\r\n  } else {\r\n    return Array.from(new Set(arr));\r\n  }\r\n}\r\n\r\n/**\r\n * 获取选中节点展开的keys\r\n * @param {Array} treeData 树data\r\n * @param {String} selected 选中的节点\r\n * @param {Object | Null} replace 替换属性名称，value要替换的属性名，null 不替换\r\n * @param {Object} option 默认配置\r\n * @returns {Array} 路径数组\r\n */\r\nexport function getExpandedKeys(\r\n  treeData,\r\n  selected,\r\n  replace = { pkey: 'pkey', key: 'key', title: 'title' },\r\n  option = { pkey: 'pkey', key: 'key' },\r\n) {\r\n  if (!Array.isArray(treeData)) {\r\n    return console.error('请传入一个tree数组');\r\n  }\r\n  const paths = new Set();\r\n  const data = treeFormatList(treeData, replace);\r\n  function fn(list, select) {\r\n    list.forEach((node) => {\r\n      if (String(node[option.key]) === String(select)) {\r\n        paths.add(node[option.key]);\r\n        // 移除叶子节点\r\n        if (node.isLeaf) {\r\n          paths.delete(node[option.key]);\r\n        }\r\n        fn(list, node[option.pkey]);\r\n      }\r\n    });\r\n  }\r\n  fn(data, selected);\r\n  return Array.from(paths)\r\n    .reverse()\r\n    .filter((item) => item !== selected);\r\n}\r\n\r\n/**\r\n * 获取选中节点选择的keys\r\n * @param {Array} treeData 树data\r\n * @param {String} selected 选中的节点\r\n * @param {String} by 依据by字段取值，默认配置'key'\r\n * @param {Object | Null} replace 替换属性名称，value要替换的属性名，null 不替换\r\n * @param {Object} option 默认配置\r\n * @returns {Array} 路径数组\r\n */\r\nexport function getSelectedBy(\r\n  treeData,\r\n  selected,\r\n  by = 'key',\r\n  replace = { pkey: 'pkey', key: 'key', title: 'title' },\r\n  option = { pkey: 'pkey', key: 'key' },\r\n) {\r\n  if (!Array.isArray(treeData)) {\r\n    return console.error('请传入一个tree数组');\r\n  }\r\n  const keys = new Set();\r\n  const data = treeFormatList(treeData, replace);\r\n  function fn(list, select) {\r\n    list.forEach((node) => {\r\n      if (String(node[option.key]) === String(select)) {\r\n        keys.add(node[by]);\r\n        fn(list, node[option.pkey]);\r\n      }\r\n    });\r\n  }\r\n  fn(data, selected);\r\n  return Array.from(keys).reverse();\r\n}\r\n\r\n/**\r\n * 根据选中的属性获取节点node\r\n * @param {Array} treeData 树data\r\n * @param {String} selected 选中的节点值\r\n * @param {String} by 属性名称\r\n * @param {Object | Null} replace 替换属性名称，key原来属性，value新属性\r\n * @returns {Object} 选中的节点对象\r\n */\r\nexport function getNodeBy(\r\n  treeData,\r\n  selected,\r\n  by = 'key',\r\n  replace = { pkey: 'pkey', key: 'key', title: 'title' },\r\n) {\r\n  if (!Array.isArray(treeData)) {\r\n    return console.error('请传入一个tree数组');\r\n  }\r\n  const data = treeFormatList(treeData, replace);\r\n  const node = data.filter((n) => {\r\n    return String(n[by]) === String(selected);\r\n  });\r\n  return Array.isArray(node) && node.length === 1 ? node[0] : null;\r\n}\r\n\r\n/**\r\n * 根据选中的属性获取对应的name名称\r\n * @param {Array} dicList 字典列表\r\n * @param {String} value 节点值\r\n * @param {String} option 字典中key和label字典对应字段名称\r\n * @returns {String} 值对应的属性\r\n */\r\nexport function getNameBy(dicList, value, option = { key: 'key', label: 'title' }) {\r\n  if (!Array.isArray(dicList)) {\r\n    return console.error('请传入一个字典数组');\r\n  }\r\n  const node = dicList.filter((n) => {\r\n    return String(n[option.key]) === String(value);\r\n  });\r\n  // console.log(node)\r\n  if (node && node.length !== 0) {\r\n    return node[0][option.label];\r\n  }\r\n  return '';\r\n}\r\n","const { toString } = Object.prototype;\r\n// 公共组件沉淀方法库导入导出\r\nexport * from '@/components/_utils';\r\nexport const isArray = (value) => {\r\n  if (typeof Array.isArray === 'function') {\r\n    return Array.isArray(value);\r\n  } else {\r\n    return toString.call(value) === '[object Array]';\r\n  }\r\n};\r\nexport const isObject = (value) => {\r\n  return toString.call(value) === '[object Object]';\r\n};\r\n\r\nexport const isNull = (value) => {\r\n  return value === null;\r\n};\r\n\r\nexport const isUndefined = (value) => {\r\n  return value === undefined;\r\n};\r\n\r\nexport const isString = (value) => {\r\n  return typeof value === 'string';\r\n};\r\n\r\nexport const isEmpty = (value) => {\r\n  if (isArray(value)) {\r\n    return value.length === 0;\r\n  }\r\n\r\n  if (isObject(value)) {\r\n    return Object.keys(value).length === 0;\r\n  }\r\n\r\n  return value === '' || isUndefined(value) || isNull(value);\r\n};\r\n\r\nexport const last = (data) => {\r\n  if (isEmpty(data)) return;\r\n\r\n  if (isArray(data) || isString(data)) {\r\n    return data[data.length - 1];\r\n  }\r\n};\r\n\r\n/**\r\n * @param {HTMLElement} element\r\n * @param {string} event\r\n * @param {function} handler\r\n */\r\nexport const on = (() => {\r\n  if (document.addEventListener) {\r\n    return function (element, event, handler) {\r\n      if (element && event && handler) {\r\n        element.addEventListener(event, handler, false);\r\n      }\r\n    };\r\n  } else {\r\n    return function (element, event, handler) {\r\n      if (element && event && handler) {\r\n        element.attachEvent(`on${event}`, handler);\r\n      }\r\n    };\r\n  }\r\n})();\r\n/**\r\n * @param {HTMLElement} element\r\n * @param {string} event\r\n * @param {function} handler\r\n */\r\nexport const off = (() => {\r\n  if (document.removeEventListener) {\r\n    return function (element, event, handler) {\r\n      if (element && event) {\r\n        element.removeEventListener(event, handler, false);\r\n      }\r\n    };\r\n  } else {\r\n    return function (element, event, handler) {\r\n      if (element && event) {\r\n        element.detachEvent(`on${event}`, handler);\r\n      }\r\n    };\r\n  }\r\n})();\r\n\r\n/**\r\n * @param {HTMLElement} el\r\n * @param {string} event\r\n * @param {function} fn\r\n */\r\nexport const once = (el, event, fn) => {\r\n  const listener = function (...args) {\r\n    if (fn) {\r\n      fn.apply(this, args);\r\n    }\r\n    off(el, event, listener);\r\n  };\r\n  on(el, event, listener);\r\n};\r\n\r\n/**\r\n * @param {array} list\r\n * @param {*} predicate\r\n * @returns {array}\r\n */\r\nexport const uniqBy = (list, predicate) => {\r\n  if (isEmpty(list)) return [];\r\n\r\n  const cb = typeof predicate === 'function' ? predicate : (o) => o[predicate];\r\n  return [\r\n    ...list\r\n      .reduce((map, item) => {\r\n        const key = isEmpty(item) ? item : cb(item);\r\n        map.has(key) || map.set(key, item);\r\n        return map;\r\n      }, new Map())\r\n      .values(),\r\n  ];\r\n};\r\n\r\n/**\r\n * 防抖\r\n * @param {function} fn\r\n * @param {number} delay\r\n * @returns\r\n */\r\nexport const debounce = (fn, delay) => {\r\n  let timer = null;\r\n\r\n  return function (...args) {\r\n    const context = this;\r\n\r\n    if (timer) {\r\n      clearTimeout(timer);\r\n\r\n      timer = setTimeout(() => {\r\n        fn.apply(context, args);\r\n      }, delay);\r\n    } else {\r\n      timer = setTimeout(() => {\r\n        fn.apply(context, args);\r\n      }, delay);\r\n    }\r\n  };\r\n};\r\n/**\r\n * @description 由于现在看到基本上接口树状数据都是统一这种结构 `{main:object,children:object[]}` 在这里统一处理成`{[key:string]:any,children:object[]}[]`\r\n * @param {{main:object,children:object[]} | {main:object,children:object[]}[]} data\r\n * @param {{children: string;title: string;key: string;value: string;}} props\r\n * @param {number?} level\r\n * @returns {{[key:string]:any,children:object[]}[]}\r\n * @example tree组件渲染只需要修改replaceFields\r\n * js\r\n *  import { deepTree } from \"@/utils/utils\";\r\n *  this.treeData = deepTree(res.orgTreeDate)\r\n * html\r\n *  <a-tree\r\n *    :tree-data=\"treeData\"\r\n *    :replaceFields=\"{\r\n *      key: 'orgUniqueCd',\r\n *      title: 'orgName',\r\n *  }\"\r\n *  />\r\n */\r\nconst deepTreeProps = {\r\n  children: 'children',\r\n  title: 'title',\r\n  key: 'key',\r\n  value: 'value',\r\n};\r\nexport const deepTree = (data = [], props = {}, level = 1) => {\r\n  const nProps = {\r\n    ...deepTreeProps,\r\n    ...props,\r\n  };\r\n  if (isEmpty(data)) return [];\r\n  const list = (isObject(data) ? [data] : data) || [];\r\n  const len = list.length;\r\n  const result = [];\r\n  for (let i = 0; i < len; i++) {\r\n    const item = list[i];\r\n    const children = item[nProps.children] ?? [];\r\n    const isLeaf = !children.length;\r\n\r\n    const nItem = {\r\n      _level: level,\r\n      ...item.main,\r\n      isLeaf,\r\n    };\r\n\r\n    nItem.key = nItem[nProps.key];\r\n    nItem.title = nItem[nProps.title];\r\n    nItem.value = nItem[nProps.value];\r\n\r\n    if (!isLeaf) {\r\n      nItem.children = deepTree(children, nProps, level + 1);\r\n    }\r\n    result.push(nItem);\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const fileSaveAs = (file, name) => {\r\n  if (!file) return;\r\n  const url = window.URL.createObjectURL(file);\r\n  const link = document.createElement('a');\r\n  link.style.display = 'none';\r\n  link.href = url;\r\n  link.setAttribute('download', name);\r\n  document.body.appendChild(link);\r\n  link.click();\r\n};\r\nexport const weightMatching = (fields, data, unit, type) => {\r\n  // 重量匹配\r\n  return data?.map((item) => {\r\n    const obj = { ...item };\r\n    for (const k in item) {\r\n      if (fields.includes(k)) {\r\n        if (type === '/') {\r\n          obj[k] /= unit;\r\n        } else {\r\n          obj[k] *= unit;\r\n        }\r\n      }\r\n    }\r\n    return obj;\r\n  });\r\n};\r\n// 判断是否是字符串数字\r\nexport const isNumber = (str) => !isNaN(Number(str));\r\n\r\n/**\r\n * 下载文件\r\n * @param url\r\n * @param filename\r\n */\r\nexport const DownloadA = (url, filename) => {\r\n  if (!url) return;\r\n  const link = document.createElement('a'); //  创建a标签\r\n  link.style.display = 'none'; //  使其隐藏\r\n  link.href = url; // 赋予文件下载地址\r\n  link.setAttribute('download', filename); // 设置下载属性 以及文件名\r\n  document.body.appendChild(link); // a标签插至页面中\r\n  link.click(); //  强制触发a标签事件\r\n  document.body.removeChild(link);\r\n};\r\n"],"sourceRoot":""}