{"version":3,"sources":["webpack:///./src/views/apm/daily/setting/Index.vue?abf5","webpack:///src/views/apm/daily/setting/Index.vue","webpack:///./src/views/apm/daily/setting/Index.vue?f83e","webpack:///./src/views/apm/daily/setting/Index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","handleSave","_v","handleClose","model","value","callback","$$v","busiYear","expression","ref","tableData","trigger","mode","scopedSlots","_u","key","fn","row","$event","handleChange","$set","_l","item","_s","label","isExistTobaccoProvOrg","tobaccoProvOrgCode","staticRenderFns","name","data","isExistTobaccoProvOrgList","created","watch","handler","newVal","console","methods","handleGetYear","getComparisonTable","res","getTobaccoProvOrgCode","tiem","provs","component"],"mappings":"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","file":"js/chunk-2d21e398.780efa77.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-container',{attrs:{\"fixed\":\"top\",\"height\":\"auto\",\"title\":\"工业调剂商业省公司设置\"}},[_c('ec-container-body',[_c('ec-panel',[_c('ec-panel-header',[_c('ec-panel-item',[_c('ec-panel-item-left',[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSave}},[_vm._v(\"设置\")]),_c('a-button',{on:{\"click\":_vm.handleClose}},[_vm._v(\"取消\")])],1),_c('ec-panel-item-right',[_vm._v(\" 业务年度：\"),_c('a-input-number',{attrs:{\"min\":2000,\"max\":2099},model:{value:(_vm.busiYear),callback:function ($$v) {_vm.busiYear=$$v},expression:\"busiYear\"}})],1)],1)],1),_c('ec-panel-body',[_c('ec-v-layout',[_c('ec-v-item',[_c('ec-table',{ref:\"xTable\",attrs:{\"border\":\"\",\"data\":_vm.tableData,\"edit-config\":{ trigger: 'click', mode: 'row' }}},[_c('ec-table-col',{attrs:{\"type\":\"seq\",\"title\":\"序号\",\"width\":\"50\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"field\":\"industryOrgCode\",\"title\":\"工业单位\"}}),_c('ec-table-col',{attrs:{\"field\":\"isExistTobaccoProvOrg\",\"title\":\"是否需要商业省公司审核\",\"edit-render\":{}},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('ec-select',{attrs:{\"placeholder\":\"请选择是否需要商业省公司审核\"},on:{\"change\":function($event){return _vm.handleChange(row)}},model:{value:(row.isExistTobaccoProvOrg),callback:function ($$v) {_vm.$set(row, \"isExistTobaccoProvOrg\", $$v)},expression:\"row.isExistTobaccoProvOrg\"}},_vm._l((_vm.isExistTobaccoProvOrgList),function(item){return _c('a-select-option',{key:item.key,attrs:{\"value\":item.key}},[_vm._v(\" \"+_vm._s(item.label)+\" \")])}),1)]}},{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.isExistTobaccoProvOrg === '1')?_c('div',[_vm._v(\"是\")]):_c('div',[_vm._v(\"否\")])]}}])}),_c('ec-table-col',{attrs:{\"field\":\"tobaccoProvOrgCode\",\"title\":\"商业省公司\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(row.isExistTobaccoProvOrg === '1')?_c('div',[_c('span',[_vm._v(_vm._s(row.tobaccoProvOrgCode))])]):_c('div',[_c('span')])]}}])})],1)],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ec-container fixed=\"top\" height=\"auto\" title=\"工业调剂商业省公司设置\">\r\n    <!-- <ec-container-header>\r\n      <ec-panel-toolbar>\r\n        <ec-panel-item-left>\r\n          <ec-header title=\"工业调剂商业省公司设置\" color-code=\"001\" />\r\n        </ec-panel-item-left>\r\n      </ec-panel-toolbar>\r\n    </ec-container-header> -->\r\n    <ec-container-body>\r\n      <ec-panel>\r\n        <ec-panel-header>\r\n          <ec-panel-item>\r\n            <ec-panel-item-left>\r\n              <a-button type=\"primary\" @click=\"handleSave\">设置</a-button>\r\n              <a-button @click=\"handleClose\">取消</a-button>\r\n            </ec-panel-item-left>\r\n            <ec-panel-item-right>\r\n              业务年度：<a-input-number v-model=\"busiYear\" :min=\"2000\" :max=\"2099\" />\r\n            </ec-panel-item-right>\r\n          </ec-panel-item>\r\n        </ec-panel-header>\r\n        <ec-panel-body>\r\n          <ec-v-layout>\r\n            <!-- 列表 -->\r\n            <ec-v-item>\r\n              <ec-table\r\n                ref=\"xTable\"\r\n                border\r\n                :data=\"tableData\"\r\n                :edit-config=\"{ trigger: 'click', mode: 'row' }\"\r\n              >\r\n                <ec-table-col type=\"seq\" title=\"序号\" width=\"50\" align=\"center\" />\r\n                <ec-table-col field=\"industryOrgCode\" title=\"工业单位\" />\r\n                <ec-table-col\r\n                  field=\"isExistTobaccoProvOrg\"\r\n                  title=\"是否需要商业省公司审核\"\r\n                  :edit-render=\"{}\"\r\n                >\r\n                  <template #edit=\"{ row }\">\r\n                    <ec-select\r\n                      placeholder=\"请选择是否需要商业省公司审核\"\r\n                      v-model=\"row.isExistTobaccoProvOrg\"\r\n                      @change=\"handleChange(row)\"\r\n                    >\r\n                      <a-select-option\r\n                        v-for=\"item in isExistTobaccoProvOrgList\"\r\n                        :key=\"item.key\"\r\n                        :value=\"item.key\"\r\n                      >\r\n                        {{ item.label }}\r\n                      </a-select-option>\r\n                    </ec-select>\r\n                  </template>\r\n                  <template #default=\"{ row }\">\r\n                    <div v-if=\"row.isExistTobaccoProvOrg === '1'\">是</div>\r\n                    <div v-else>否</div>\r\n                  </template>\r\n                </ec-table-col>\r\n                <ec-table-col field=\"tobaccoProvOrgCode\" title=\"商业省公司\">\r\n                  <template #default=\"{ row }\">\r\n                    <div v-if=\"row.isExistTobaccoProvOrg === '1'\">\r\n                      <span>{{ row.tobaccoProvOrgCode }}</span>\r\n                    </div>\r\n                    <div v-else>\r\n                      <span></span>\r\n                    </div>\r\n                  </template>\r\n                </ec-table-col>\r\n              </ec-table>\r\n            </ec-v-item>\r\n          </ec-v-layout>\r\n        </ec-panel-body>\r\n      </ec-panel>\r\n    </ec-container-body>\r\n  </ec-container>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'DailySetting',\r\n  data() {\r\n    return {\r\n      tableData: [], // 表格数据\r\n      busiYear: '',\r\n      isExistTobaccoProvOrgList: [\r\n        { label: '否', key: '0' },\r\n        { label: '是', key: '1' },\r\n      ],\r\n    };\r\n  },\r\n  created() {\r\n    this.handleGetYear();\r\n  },\r\n  watch: {\r\n    busiYear: {\r\n      handler(newVal) {\r\n        console.log(newVal);\r\n        this.getComparisonTable();\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    // 获取年度\r\n    handleGetYear() {\r\n      const date = new Date();\r\n      const year = date.getFullYear();\r\n      console.log(year);\r\n      this.busiYear = year;\r\n    },\r\n    // 获取对照表\r\n    async getComparisonTable() {\r\n      this.loading = true;\r\n      try {\r\n        const data = `busiYear=${this.busiYear}`;\r\n        const res = await this.$apis.apm.dailySetting.query(data);\r\n        this.tableData = [...this.tableData, ...res.rows];\r\n        // this.tableData.forEach((item) => {\r\n        //   if (item.industryOrgCode === null) {\r\n        //     return;\r\n        //   }\r\n        //   console.log(item);\r\n        // });\r\n        console.log('res1', this.tableData);\r\n        this.getTobaccoProvOrgCode();\r\n      } catch (err) {\r\n        this.loading = false;\r\n        console.log(err);\r\n      }\r\n    },\r\n    // 根据工业单位获取商业省公司\r\n    getTobaccoProvOrgCode() {\r\n      // try {\r\n      //   const res = await this.$apis.apm.dailySetting.query({ busiYear: this.busiYear });\r\n      //   this.tableData.push(res.rows);\r\n      //   console.log('res1', this.tableData);\r\n      // } catch (err) {\r\n      //   console.log(err);\r\n      // }\r\n      // if (this.tableData.isExistTobaccoProvOrg === false) return;\r\n      this.loading = true;\r\n      // this.tableData.forEach(async (item) => {\r\n      //   if (item.isExistTobaccoProvOrg === '1') {\r\n      //     try {\r\n      //       const res = await this.$apis.apm.dailySetting.queryTobaccoProvOrgCode({\r\n      //         industryOrgCode: item.industryOrgCode,\r\n      //       });\r\n      //       this.tobaccoProvOrgCode = res.rows[0].tobaccoProvOrgCode;\r\n      //       console.log('res2', this.tableData, res);\r\n      //     } catch (err) {\r\n      //       this.loading = false;\r\n      //       console.log('err', err.message);\r\n      //     }\r\n      //   }\r\n      // });\r\n    },\r\n    // 设置\r\n    async handleSave() {\r\n      this.loading = true;\r\n      const data = this.tableData;\r\n      const tiem = { provs: data };\r\n      // console.log(data);\r\n      try {\r\n        const res = await this.$apis.apm.dailySetting.save(tiem);\r\n        console.log('res3', res);\r\n      } catch (err) {\r\n        this.loading = false;\r\n        console.log('err', err.message);\r\n      }\r\n    },\r\n    // 取消\r\n    handleClose() {\r\n      this.getComparisonTable();\r\n      this.$router.back();\r\n    },\r\n    handleChange(row) {\r\n      console.log(row);\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=1e86af57&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}