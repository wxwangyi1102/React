{"version":3,"sources":["webpack:///./src/views/centre/apply/Edit.vue?7d7a","webpack:///./src/views/centre/apply/Index.vue?4c3a","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack:///./src/views/centre/apply/Index.vue?a7b8","webpack:///./src/views/centre/apply/Edit.vue?0117","webpack:///src/views/centre/apply/Edit.vue","webpack:///./src/views/centre/apply/Edit.vue?e856","webpack:///./src/views/centre/apply/Edit.vue","webpack:///src/views/centre/apply/Index.vue","webpack:///./src/views/centre/apply/Index.vue?35ce","webpack:///./src/views/centre/apply/Index.vue","webpack:///./src/components/_utils.js","webpack:///./src/utils/utils.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","render","_vm","this","_h","$createElement","_c","_self","attrs","_v","_s","busiYear","on","init","resetHandle","scopedSlots","_u","fn","model","queryItems","callback","$$v","$set","expression","getfetchData","$event","handlepickerValue","supplyOrgCode_temporary","demandOrgCode_temporary","tabaccoTypeOptions","proxy","businessTypeOptions","_l","s","label","staticClass","unitstr","id","name","stopPropagation","handleAdd","handleDelete","handleReport","_e","ref","height","tableData","pagination","queryPagination","selectRowChange","onDetailsList","row","onGetstatusLaael","circleSate","cellStyle","FocusDealDetailData","footerMethod","handlerWeightcalculate","supplyWeight","demandWeight","finalWeight","viewOpenDetails","childrenData","staticRenderFns","visible","cancel","ruleForm","rules","isbuttonshow","orgValueChange","staticStyle","handleAddRow","cellStyleleft","DetailData","onGetapprTypeCode","apprTypeCode","onGetleafTypeCode","leafTypeCode","handleEditRow","handleDeleteRow","BaseDealDetailList","trigger","mode","immediate","onValueChange","weight","handleSubmit","cancelDetails","open","formData","formDataRules","item","leafTypeName","remark1","handleSave","props","type","default","parentDefaultData","components","SelectPicker","data","orgType","orgCode","asFocusDealMasId","ratio60","isedit","iscreatestatus","treeData","demandCreateDate","required","message","supplyOrgCode","demandOrgCode","apprTypeCodeTptions","leafTypeCodeOtions","computed","_apis","created","methods","moment","show","state","res","billNo","pcAsFocusDealDetailList","pcAsFocusBaseDealDetailList","createDate","$ec","params","add","then","finally","title","content","onOk","onCancel","val","querybaseList","refresh","columns","sumNum","list","field","count","resolve","num","unit","textAlign","component","AdminOrgManageEdit","treeParams","bizCode","orgTypeEk","orgLevelEk","paramMap","isCorporation","appCode","islock","records","children","StatesOptions","unitstrOptions","statusList","pageNumber","pageSize","searchType","total","appConfig","watch","handler","query","resPonseData","asFocusDealMasIds","e","index","console","onqueryGetbaselist","treeGetlist","fields","pkey","response","onGetuserinfo","listFormatTree","replace","option","Array","isArray","error","child","parentId","parent","parentTmp","String","cloneDeep","Reflect","deleteProperty","root","every","n","treeFormatList","clone","stack","node","shift","filterList","filterFn","uniqueArrayBy","arr","prop","isPlainObject","from","Set","map","Map","Error","set","size","values","getExpandedKeys","selected","paths","select","isLeaf","delete","reverse","getSelectedBy","by","getNodeBy","getNameBy","dicList","prototype","toString","document","addEventListener","removeEventListener","weightMatching","k","includes","DownloadA","url","filename","link","createElement","style","display","href","setAttribute","body","appendChild","click","removeChild"],"mappings":"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","file":"js/chunk-6aee0f1c.3866f81a.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=style&index=0&id=a7c0d23a&prod&lang=less&scoped=true&\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&id=71310881&prod&lang=less&scoped=true&\"","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-container',{attrs:{\"height\":\"100%\"}},[_c('ec-container-header',[_c('ec-panel-toolbar',[_c('ec-panel-item-left',[_c('ec-header',{attrs:{\"title\":\"交易衔接量申请\",\"icon\":\"onetomany\",\"color-code\":\"003\"}})],1),_c('ec-panel-item-right',[_c('div',[_vm._v(\"集中交易年度：\"+_vm._s(_vm.busiYear)+\"年\")])])],1)],1),_c('ec-container-body',[_c('ec-panel',{attrs:{\"auto\":false}},[_c('ec-panel-toolbar',[_c('ec-query-panel',{attrs:{\"defaultFold\":true},on:{\"query\":_vm.init,\"reset\":_vm.resetHandle},scopedSlots:_vm._u([{key:\"inner\",fn:function(){return [_c('ec-query-item',{attrs:{\"label\":\"单据编号\"}},[_c('a-input',{attrs:{\"placeholder\":\"\"},model:{value:(_vm.queryItems.billNo),callback:function ($$v) {_vm.$set(_vm.queryItems, \"billNo\", $$v)},expression:\"queryItems.billNo\"}})],1),_c('ec-query-item',{attrs:{\"label\":\"供方单位\"}},[_c('select-picker',{attrs:{\"title\":\"选择单位\",\"lazy\":false,\"search\":false,\"fetchData\":_vm.getfetchData},on:{\"ok\":function($event){return _vm.handlepickerValue($event, 'supplyOrgCode')}},model:{value:(_vm.supplyOrgCode_temporary),callback:function ($$v) {_vm.supplyOrgCode_temporary=$$v},expression:\"supplyOrgCode_temporary\"}})],1),_c('ec-query-item',{attrs:{\"label\":\"需方单位\"}},[_c('select-picker',{attrs:{\"title\":\"选择单位\",\"lazy\":false,\"search\":false,\"fetchData\":_vm.getfetchData},on:{\"ok\":function($event){return _vm.handlepickerValue($event, 'demandOrgCode')}},model:{value:(_vm.demandOrgCode_temporary),callback:function ($$v) {_vm.demandOrgCode_temporary=$$v},expression:\"demandOrgCode_temporary\"}})],1),_c('ec-query-item',{attrs:{\"label\":\"烟叶类型\"}},[_c('a-cascader',{attrs:{\"options\":_vm.tabaccoTypeOptions,\"change-on-select\":\"\",\"placeholder\":\"\"},model:{value:(_vm.queryItems.leafTypeCode),callback:function ($$v) {_vm.$set(_vm.queryItems, \"leafTypeCode\", $$v)},expression:\"queryItems.leafTypeCode\"}})],1)]},proxy:true}])},[_c('ec-query-item',{attrs:{\"label\":\"业务类型\"}},[_c('a-cascader',{attrs:{\"options\":_vm.businessTypeOptions,\"placeholder\":\"请选择\"},model:{value:(_vm.queryItems.apprTypeCode),callback:function ($$v) {_vm.$set(_vm.queryItems, \"apprTypeCode\", $$v)},expression:\"queryItems.apprTypeCode\"}})],1),_c('ec-query-item',{attrs:{\"label\":\"状态\"}},[_c('a-select',{attrs:{\"showSearch\":\"\",\"allow-clear\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.queryItems.circleSate),callback:function ($$v) {_vm.$set(_vm.queryItems, \"circleSate\", $$v)},expression:\"queryItems.circleSate\"}},_vm._l((_vm.StatesOptions),function(s){return _c('a-select-option',{key:s.value},[_vm._v(\" \"+_vm._s(s.label)+\" \")])}),1)],1),_c('ec-query-item',{staticClass:\"org\",attrs:{\"label\":\"计量单位\"}},[_c('a-select',{attrs:{\"allow-clear\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.unitstr),callback:function ($$v) {_vm.unitstr=$$v},expression:\"unitstr\"}},_vm._l((_vm.unitstrOptions),function(s){return _c('a-select-option',{key:s.id},[_vm._v(\" \"+_vm._s(s.name)+\" \")])}),1)],1)],1),_c('ec-divider')],1),_c('ec-panel-item',[(_vm.islock)?_c('ec-panel-item-left',[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleAdd($event)}}},[_vm._v(\"新增\")]),_c('a-button',{on:{\"click\":_vm.handleDelete}},[_vm._v(\"删除\")]),_c('a-button',{on:{\"click\":_vm.handleReport}},[_vm._v(\"上报\")])],1):_vm._e()],1),_c('ec-panel-body',[_c('ec-v-layout',[_c('ec-v-item',[_c('ec-table',{ref:\"xTable1\",attrs:{\"height\":!_vm.height ? '200' : '300',\"show-overflow\":\"\",\"header-align\":\"center\",\"align\":\"center\",\"data\":_vm.tableData,\"pagination\":_vm.pagination},on:{\"page-action\":_vm.queryPagination,\"checkbox-all\":_vm.selectRowChange,\"checkbox-change\":_vm.selectRowChange,\"cell-click\":_vm.onDetailsList}},[_c('ec-table-col',{attrs:{\"type\":\"checkbox\",\"width\":\"60\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"type\":\"seq\",\"title\":\"序号\",\"width\":\"50\"}}),_c('ec-table-col',{attrs:{\"field\":\"billNo\",\"title\":\"单据编号\"}}),_c('ec-table-col',{attrs:{\"field\":\"supplyOrgName\",\"title\":\"供方单位\"}}),_c('ec-table-col',{attrs:{\"field\":\"demandOrgName\",\"title\":\"需方单位\"}}),_c('ec-table-col',{attrs:{\"field\":\"circleSate\",\"title\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(_vm._s(_vm.onGetstatusLaael(row.circleSate)))]}}])}),_c('ec-table-col',{attrs:{\"title\":\"操作\",\"width\":\"190\",\"align\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [(_vm.islock)?_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleAdd(row, 'update')}}},[_vm._v(\"编辑\")]):_vm._e(),_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.handleAdd(row, 'view')}}},[_vm._v(\"详情\")])]}}])})],1)],1),_c('ec-v-item',[_c('h2',{staticClass:\"details-bg\"},[_vm._v(\"详细\")]),_c('ec-table',{ref:\"xTable2\",attrs:{\"height\":\"216\",\"show-overflow\":\"\",\"header-align\":\"center\",\"align\":\"center\",\"show-footer\":\"\",\"cell-style\":_vm.cellStyle,\"data\":_vm.FocusDealDetailData,\"footer-method\":_vm.footerMethod}},[_c('ec-table-col',{attrs:{\"type\":\"seq\",\"title\":\"序号\",\"width\":\"50\"}}),_c('ec-table-col',{attrs:{\"field\":\"apprTypeCode\",\"title\":\"业务类型\"}}),_c('ec-table-col',{attrs:{\"field\":\"leafTypeName\",\"title\":\"烟叶类型\"}}),_c('ec-table-col',{attrs:{\"field\":\"leafFormName\",\"title\":\"烟叶形态\"}}),_c('ec-table-col',{attrs:{\"field\":\"supplyWeight\",\"title\":\"供方提报量\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(_vm._s(_vm.handlerWeightcalculate(row.supplyWeight, _vm.unitstr)))]}}])}),_c('ec-table-col',{attrs:{\"field\":\"demandWeight\",\"title\":\"需方提报量\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(_vm._s(_vm.handlerWeightcalculate(row.demandWeight, _vm.unitstr)))]}}])}),_c('ec-table-col',{attrs:{\"field\":\"finalWeight\",\"title\":\"总公司审核量\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(_vm._s(_vm.handlerWeightcalculate(row.finalWeight, _vm.unitstr)))]}}])}),_c('ec-table-col',{attrs:{\"title\":\"操作\",\"width\":\"190\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.viewOpenDetails(row)}}},[_vm._v(\"详情\")])]}}])})],1)],1)],1)],1)],1),_c('admin-org-manage-edit',{ref:\"editRef\",model:{value:(_vm.childrenData),callback:function ($$v) {_vm.childrenData=$$v},expression:\"childrenData\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-drawer',{staticClass:\"ec-draw-form\",attrs:{\"title\":\"新增\",\"visible\":_vm.visible,\"size\":\"large\"},on:{\"close\":_vm.cancel}},[_c('ec-container',{attrs:{\"height\":\"auto\",\"fixed\":\"top bottom\",\"color-code\":\"007\"}},[_c('ec-container-header',[_c('ec-panel-toolbar',[_c('ec-panel-item-left',[_vm._v(\" 主信息 \")]),_c('ec-panel-item-right',[_c('code',[_vm._v(\"集中交易年度：\"+_vm._s(_vm.busiYear)+\"年计量单位：\"+_vm._s(_vm.unitstr === '50' ? '担' : '万担'))])])],1)],1),_c('ec-container-body',[_c('ec-panel',[_c('ec-panel-item',[_c('ec-form',{ref:\"ruleForm2\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules}},[_c('a-row',{attrs:{\"type\":\"flex\",\"gutter\":12}},[_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"单据编号\"}},[_c('a-input',{attrs:{\"placeholder\":\"保存后自动生成\",\"autocomplete\":\"off\",\"disabled\":\"\"},model:{value:(_vm.ruleForm.billNo),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"billNo\", $$v)},expression:\"ruleForm.billNo\"}})],1)],1),_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"供方单位\",\"prop\":\"supplyOrgCode\"}},[_c('select-picker',{attrs:{\"title\":\"选择单位\",\"lazy\":false,\"search\":false,\"disabled\":_vm.isbuttonshow === 'view',\"placeholder\":\"请输入供方单位\",\"fetchData\":_vm.getfetchData},on:{\"ok\":_vm.orgValueChange},model:{value:(_vm.ruleForm.supplyOrgCode),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"supplyOrgCode\", $$v)},expression:\"ruleForm.supplyOrgCode\"}})],1)],1),_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"需方单位\",\"prop\":\"demandOrgCode\"}},[_c('select-picker',{attrs:{\"title\":\"选择单位\",\"lazy\":false,\"search\":false,\"disabled\":_vm.isbuttonshow === 'view',\"placeholder\":\"请输入需方单位\",\"fetchData\":_vm.getfetchData},on:{\"ok\":_vm.orgValueChange},model:{value:(_vm.ruleForm.demandOrgCode),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"demandOrgCode\", $$v)},expression:\"ruleForm.demandOrgCode\"}})],1)],1),_c('a-col',{attrs:{\"span\":6}},[_c('a-form-model-item',{attrs:{\"label\":\"录入日期\",\"prop\":\"demandCreateDate\"}},[_c('a-date-picker',{attrs:{\"show-time\":\"\",\"disabled\":_vm.isbuttonshow === 'view',\"format\":\"YYYY-MM-DD\",\"value-format\":\"YYYY-MM-DD\"},model:{value:(_vm.ruleForm.demandCreateDate),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"demandCreateDate\", $$v)},expression:\"ruleForm.demandCreateDate\"}})],1)],1)],1)],1)],1),_c('ec-panel-item',[_c('a-row',{attrs:{\"type\":\"flex\",\"gutter\":6}},[_c('a-col',{attrs:{\"span\":9}},[_c('span',{staticStyle:{\"color\":\"blue\"}},[_vm._v(\"明细\")]),(_vm.isbuttonshow !== 'view')?_c('vxe-toolbar',{scopedSlots:_vm._u([{key:\"buttons\",fn:function(){return [_c('div',{staticClass:\"span-color\"},[_c('a-button',{staticStyle:{\"border\":\"0\"},attrs:{\"icon\":\"plus\"},on:{\"click\":_vm.handleAddRow}},[_vm._v(\"新增\")])],1)]},proxy:true}],null,false,4139288976)}):_vm._e(),_c('vxe-table',{ref:\"detailTable\",attrs:{\"border\":\"\",\"stripe\":\"\",\"show-footer\":\"\",\"show-overflow\":\"\",\"height\":_vm.isbuttonshow === 'view' ? '450' : '400',\"highlight-hover-row\":\"\",\"header-align\":\"center\",\"align\":\"center\",\"cell-style\":_vm.cellStyleleft,\"export-config\":{},\"footer-method\":_vm.footerMethod,\"data\":_vm.DetailData}},[_c('vxe-column',{attrs:{\"width\":\"60\",\"type\":\"seq\",\"title\":\"序号\",\"align\":\"center\"}}),_c('vxe-column',{attrs:{\"title\":\"业务类型\",\"field\":\"apprTypeCode\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\" \"+_vm._s(_vm.onGetapprTypeCode(row.apprTypeCode)))]}}])}),_c('vxe-column',{attrs:{\"title\":\"烟叶类型\",\"field\":\"leafTypeCode\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\" \"+_vm._s(_vm.onGetleafTypeCode(row.leafTypeCode)))]}}])}),_c('vxe-column',{attrs:{\"title\":\"交易衔接量\",\"field\":\"weight\"}}),(_vm.isbuttonshow !== 'view')?_c('vxe-column',{attrs:{\"title\":\"操作\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.handleEditRow(row)}}},[_vm._v(\"编辑\")]),_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.handleDeleteRow(row)}}},[_vm._v(\"删除\")])]}}],null,false,1645878676)}):_vm._e()],1)],1),_c('a-col',{attrs:{\"span\":15}},[_c('span',{staticStyle:{\"color\":\"blue\"}},[_vm._v(\"基地单元明细\")]),_c('vxe-table',{ref:\"utilTable\",attrs:{\"border\":\"\",\"stripe\":\"\",\"show-footer\":\"\",\"show-overflow\":\"\",\"height\":\"450\",\"highlight-hover-row\":\"\",\"header-align\":\"center\",\"align\":\"center\",\"cell-style\":_vm.cellStyle,\"footer-method\":_vm.footerMethod,\"data\":_vm.BaseDealDetailList,\"edit-config\":_vm.isbuttonshow !== 'view' ? { trigger: 'click', mode: 'row' } : {}}},[_c('vxe-column',{attrs:{\"width\":\"60\",\"type\":\"seq\",\"title\":\"序号\",\"align\":\"center\"}}),_c('vxe-column',{attrs:{\"title\":\"基地单元\",\"field\":\"baseCellName\"}}),_c('vxe-column',{attrs:{\"title\":\"烟叶类型\",\"field\":\"leafTypeName\"}}),_c('vxe-column',{attrs:{\"title\":\"计划量\",\"field\":\"limitWeight\"}}),_c('vxe-column',{attrs:{\"title\":\"交易衔接量\",\"field\":\"weight\",\"edit-render\":{ name: 'input', immediate: true }},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-input-number',{attrs:{\"type\":\"text\",\"min\":0},on:{\"blur\":function($event){return _vm.onValueChange(row)}},model:{value:(row.weight),callback:function ($$v) {_vm.$set(row, \"weight\", $$v)},expression:\"row.weight\"}})]}},{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_vm._v(\" \"+_vm._s(row.weight)+\" \")]}}])})],1)],1)],1)],1)],1),_c('a-modal',{attrs:{\"width\":\"26%\",\"title\":\"新增明细数据\"},scopedSlots:_vm._u([{key:\"footer\",fn:function(){return [_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"保存\")]),_c('a-button',{on:{\"click\":_vm.cancelDetails}},[_vm._v(\"关闭\")])]},proxy:true}]),model:{value:(_vm.open),callback:function ($$v) {_vm.open=$$v},expression:\"open\"}},[_c('ec-form',{ref:\"ruleForm1\",attrs:{\"model\":_vm.formData,\"rules\":_vm.formDataRules}},[_c('a-row',{attrs:{\"type\":\"flex\"}},[_c('a-col',{attrs:{\"span\":24}},[_c('a-form-model-item',{attrs:{\"prop\":\"apprTypeCode\",\"label\":\"业务类型\"}},[_c('a-select',{attrs:{\"allowClear\":\"\",\"placeholder\":\"请选择卷烟档次\"},model:{value:(_vm.formData.apprTypeCode),callback:function ($$v) {_vm.$set(_vm.formData, \"apprTypeCode\", $$v)},expression:\"formData.apprTypeCode\"}},_vm._l((_vm.apprTypeCodeTptions),function(item){return _c('a-select-option',{key:item.value,attrs:{\"value\":item.value}},[_vm._v(_vm._s(item.label))])}),1)],1)],1),_c('a-col',{attrs:{\"span\":24}},[_c('a-form-model-item',{attrs:{\"prop\":\"leafTypeCode\",\"label\":\"烟叶类型\"}},[_c('a-select',{attrs:{\"allowClear\":\"\",\"placeholder\":\"请选择卷烟档次\"},model:{value:(_vm.formData.leafTypeCode),callback:function ($$v) {_vm.$set(_vm.formData, \"leafTypeCode\", $$v)},expression:\"formData.leafTypeCode\"}},_vm._l((_vm.leafTypeCodeOtions),function(item){return _c('a-select-option',{key:item.leafTypeCode},[_vm._v(_vm._s(item.leafTypeName))])}),1)],1)],1),_c('a-col',{attrs:{\"span\":24}},[_c('a-form-model-item',{attrs:{\"prop\":\"remark1\",\"label\":\"烟叶形态\"}},[_c('a-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.remark1),callback:function ($$v) {_vm.remark1=$$v},expression:\"remark1\"}})],1)],1),_c('a-col',{attrs:{\"span\":24}},[_c('a-form-model-item',{attrs:{\"prop\":\"weight\",\"label\":\"交易衔接量\"}},[_c('a-input',{attrs:{\"placeholder\":\"请输入交易衔接量\"},model:{value:(_vm.formData.weight),callback:function ($$v) {_vm.$set(_vm.formData, \"weight\", $$v)},expression:\"formData.weight\"}})],1)],1)],1)],1)],1)],1),_c('ec-container-footer',{attrs:{\"fixed\":\"\"}},[_c('a-space',[(_vm.isbuttonshow === 'add')?_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.handleSave('save')}}},[_vm._v(\"保存并新增\")]):_vm._e(),(_vm.isbuttonshow !== 'view')?_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSave}},[_vm._v(\"保存\")]):_vm._e(),_c('a-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"取消\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ec-drawer title=\"新增\" :visible=\"visible\" size=\"large\" @close=\"cancel\" class=\"ec-draw-form\">\r\n    <ec-container height=\"auto\" fixed=\"top bottom\" color-code=\"007\">\r\n      <ec-container-header>\r\n        <ec-panel-toolbar>\r\n          <ec-panel-item-left> 主信息 </ec-panel-item-left>\r\n          <ec-panel-item-right>\r\n            <code\r\n              >集中交易年度：{{ busiYear }}年计量单位：{{ unitstr === '50' ? '担' : '万担' }}</code\r\n            >\r\n          </ec-panel-item-right>\r\n        </ec-panel-toolbar>\r\n      </ec-container-header>\r\n      <ec-container-body>\r\n        <ec-panel>\r\n          <ec-panel-item>\r\n            <ec-form ref=\"ruleForm2\" :model=\"ruleForm\" :rules=\"rules\">\r\n              <a-row type=\"flex\" :gutter=\"12\">\r\n                <a-col :span=\"6\">\r\n                  <a-form-model-item label=\"单据编号\">\r\n                    <a-input\r\n                      v-model=\"ruleForm.billNo\"\r\n                      placeholder=\"保存后自动生成\"\r\n                      autocomplete=\"off\"\r\n                      disabled\r\n                    />\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col :span=\"6\">\r\n                  <a-form-model-item label=\"供方单位\" prop=\"supplyOrgCode\">\r\n                    <select-picker\r\n                      title=\"选择单位\"\r\n                      :lazy=\"false\"\r\n                      :search=\"false\"\r\n                      :disabled=\"isbuttonshow === 'view'\"\r\n                      v-model=\"ruleForm.supplyOrgCode\"\r\n                      placeholder=\"请输入供方单位\"\r\n                      :fetchData=\"getfetchData\"\r\n                      @ok=\"orgValueChange\"\r\n                    />\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col :span=\"6\">\r\n                  <a-form-model-item label=\"需方单位\" prop=\"demandOrgCode\">\r\n                    <select-picker\r\n                      title=\"选择单位\"\r\n                      :lazy=\"false\"\r\n                      :search=\"false\"\r\n                      :disabled=\"isbuttonshow === 'view'\"\r\n                      v-model=\"ruleForm.demandOrgCode\"\r\n                      placeholder=\"请输入需方单位\"\r\n                      :fetchData=\"getfetchData\"\r\n                      @ok=\"orgValueChange\"\r\n                    />\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col :span=\"6\">\r\n                  <a-form-model-item label=\"录入日期\" prop=\"demandCreateDate\">\r\n                    <a-date-picker\r\n                      v-model=\"ruleForm.demandCreateDate\"\r\n                      show-time\r\n                      :disabled=\"isbuttonshow === 'view'\"\r\n                      format=\"YYYY-MM-DD\"\r\n                      value-format=\"YYYY-MM-DD\"\r\n                    />\r\n                  </a-form-model-item>\r\n                </a-col>\r\n              </a-row>\r\n            </ec-form>\r\n          </ec-panel-item>\r\n          <ec-panel-item>\r\n            <a-row type=\"flex\" :gutter=\"6\">\r\n              <a-col :span=\"9\">\r\n                <span style=\"color: blue\">明细</span>\r\n                <vxe-toolbar v-if=\"isbuttonshow !== 'view'\">\r\n                  <template #buttons>\r\n                    <div class=\"span-color\">\r\n                      <a-button style=\"border: 0\" icon=\"plus\" @click=\"handleAddRow\">新增</a-button>\r\n                    </div>\r\n                  </template>\r\n                </vxe-toolbar>\r\n                <vxe-table\r\n                  border\r\n                  stripe\r\n                  show-footer\r\n                  show-overflow\r\n                  :height=\"isbuttonshow === 'view' ? '450' : '400'\"\r\n                  highlight-hover-row\r\n                  header-align=\"center\"\r\n                  align=\"center\"\r\n                  :cell-style=\"cellStyleleft\"\r\n                  ref=\"detailTable\"\r\n                  :export-config=\"{}\"\r\n                  :footer-method=\"footerMethod\"\r\n                  :data=\"DetailData\"\r\n                >\r\n                  <vxe-column width=\"60\" type=\"seq\" title=\"序号\" align=\"center\"></vxe-column>\r\n                  <vxe-column title=\"业务类型\" field=\"apprTypeCode\">\r\n                    <template #default=\"{ row }\">\r\n                      {{ onGetapprTypeCode(row.apprTypeCode) }}</template\r\n                    >\r\n                  </vxe-column>\r\n                  <vxe-column title=\"烟叶类型\" field=\"leafTypeCode\">\r\n                    <template #default=\"{ row }\">\r\n                      {{ onGetleafTypeCode(row.leafTypeCode) }}</template\r\n                    >\r\n                  </vxe-column>\r\n                  <vxe-column title=\"交易衔接量\" field=\"weight\"></vxe-column>\r\n                  <vxe-column v-if=\"isbuttonshow !== 'view'\" title=\"操作\" align=\"center\">\r\n                    <template #default=\"{ row }\">\r\n                      <a-button type=\"link\" @click=\"handleEditRow(row)\">编辑</a-button>\r\n                      <a-button type=\"link\" @click=\"handleDeleteRow(row)\">删除</a-button>\r\n                    </template></vxe-column\r\n                  >\r\n                </vxe-table></a-col\r\n              >\r\n              <a-col :span=\"15\">\r\n                <span style=\"color: blue\">基地单元明细</span>\r\n                <vxe-table\r\n                  ref=\"utilTable\"\r\n                  border\r\n                  stripe\r\n                  show-footer\r\n                  show-overflow\r\n                  height=\"450\"\r\n                  highlight-hover-row\r\n                  header-align=\"center\"\r\n                  align=\"center\"\r\n                  :cell-style=\"cellStyle\"\r\n                  :footer-method=\"footerMethod\"\r\n                  :data=\"BaseDealDetailList\"\r\n                  :edit-config=\"isbuttonshow !== 'view' ? { trigger: 'click', mode: 'row' } : {}\"\r\n                >\r\n                  <vxe-column width=\"60\" type=\"seq\" title=\"序号\" align=\"center\"></vxe-column>\r\n                  <vxe-column title=\"基地单元\" field=\"baseCellName\"></vxe-column>\r\n                  <vxe-column title=\"烟叶类型\" field=\"leafTypeName\"></vxe-column>\r\n                  <vxe-column title=\"计划量\" field=\"limitWeight\"></vxe-column>\r\n                  <vxe-column\r\n                    title=\"交易衔接量\"\r\n                    field=\"weight\"\r\n                    :edit-render=\"{ name: 'input', immediate: true }\"\r\n                  >\r\n                    <template #edit=\"{ row }\">\r\n                      <a-input-number\r\n                        type=\"text\"\r\n                        :min=\"0\"\r\n                        v-model=\"row.weight\"\r\n                        @blur=\"onValueChange(row)\"\r\n                      ></a-input-number>\r\n                    </template>\r\n                    <template #default=\"{ row }\"> {{ row.weight }} </template></vxe-column\r\n                  >\r\n                </vxe-table></a-col\r\n              >\r\n            </a-row></ec-panel-item\r\n          >\r\n        </ec-panel>\r\n        <a-modal v-model=\"open\" width=\"26%\" title=\"新增明细数据\">\r\n          <ec-form :model=\"formData\" :rules=\"formDataRules\" ref=\"ruleForm1\">\r\n            <a-row type=\"flex\">\r\n              <a-col :span=\"24\">\r\n                <a-form-model-item prop=\"apprTypeCode\" label=\"业务类型\">\r\n                  <a-select allowClear v-model=\"formData.apprTypeCode\" placeholder=\"请选择卷烟档次\">\r\n                    <a-select-option\r\n                      v-for=\"item in apprTypeCodeTptions\"\r\n                      :key=\"item.value\"\r\n                      :value=\"item.value\"\r\n                      >{{ item.label }}</a-select-option\r\n                    >\r\n                  </a-select>\r\n                </a-form-model-item>\r\n              </a-col>\r\n              <a-col :span=\"24\">\r\n                <a-form-model-item prop=\"leafTypeCode\" label=\"烟叶类型\">\r\n                  <a-select allowClear v-model=\"formData.leafTypeCode\" placeholder=\"请选择卷烟档次\">\r\n                    <a-select-option v-for=\"item in leafTypeCodeOtions\" :key=\"item.leafTypeCode\">{{\r\n                      item.leafTypeName\r\n                    }}</a-select-option>\r\n                  </a-select>\r\n                </a-form-model-item>\r\n              </a-col>\r\n              <a-col :span=\"24\">\r\n                <a-form-model-item prop=\"remark1\" label=\"烟叶形态\">\r\n                  <a-input disabled v-model=\"remark1\"></a-input>\r\n                </a-form-model-item>\r\n              </a-col>\r\n              <a-col :span=\"24\">\r\n                <a-form-model-item prop=\"weight\" label=\"交易衔接量\">\r\n                  <a-input v-model=\"formData.weight\" placeholder=\"请输入交易衔接量\" />\r\n                </a-form-model-item>\r\n              </a-col>\r\n            </a-row>\r\n          </ec-form>\r\n          <template v-slot:footer>\r\n            <a-button type=\"primary\" @click=\"handleSubmit\">保存</a-button>\r\n            <a-button @click=\"cancelDetails\">关闭</a-button>\r\n          </template>\r\n        </a-modal>\r\n      </ec-container-body>\r\n\r\n      <ec-container-footer fixed>\r\n        <a-space>\r\n          <a-button v-if=\"isbuttonshow === 'add'\" type=\"primary\" @click=\"handleSave('save')\"\r\n            >保存并新增</a-button\r\n          >\r\n          <a-button v-if=\"isbuttonshow !== 'view'\" type=\"primary\" @click=\"handleSave\"\r\n            >保存</a-button\r\n          >\r\n          <a-button @click=\"cancel\">取消</a-button>\r\n        </a-space>\r\n      </ec-container-footer>\r\n    </ec-container>\r\n    <!-- </a-modal> -->\r\n  </ec-drawer>\r\n</template>\r\n<script>\r\nimport { SelectPicker } from '@euler-material/ecm-ui';\r\nimport { cloneDeep } from '@euler-material/ecm-utils';\r\nimport { weightMatching } from '@/utils/utils';\r\nimport moment from 'moment';\r\n\r\nexport default {\r\n  name: 'applicationEdit',\r\n  props: {\r\n    type: {\r\n      type: String,\r\n      default: '0',\r\n    },\r\n    parentDefaultData: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n  components: { SelectPicker },\r\n  data() {\r\n    return {\r\n      // 初始化\r\n      orgType: null, // I 代表需方,O代表供方\r\n      orgCode: null,\r\n      busiYear: null,\r\n      unitstr: null,\r\n      asFocusDealMasId: null,\r\n      isbuttonshow: 'add',\r\n      remark1: '原烟',\r\n      // boolean\r\n      ratio60: true,\r\n      open: false,\r\n      isedit: false,\r\n      // 是否新增状态\r\n      iscreatestatus: true,\r\n      visible: false,\r\n      // state\r\n      treeData: null,\r\n      DetailData: [],\r\n      BaseDealDetailList: [],\r\n      ruleForm: {\r\n        demandCreateDate: moment(new Date(), 'YYYY-MM-DD'),\r\n      },\r\n      formData: {\r\n        apprTypeCode: 'HT1101',\r\n        leafTypeCode: '10',\r\n      },\r\n      formDataRules: {\r\n        weight: { required: true, message: '请输入交易核定量' },\r\n      },\r\n      rules: {\r\n        supplyOrgCode: { required: true, message: '请先选择供方单位' },\r\n        demandOrgCode: { required: true, message: '请先选择需方单位' },\r\n      },\r\n      // options\r\n      // 业务类型value\r\n      apprTypeCodeTptions: [\r\n        { label: '工商普通购销', value: 'HT1101' },\r\n        { label: '出口备货普通购销', value: 'HT1201' },\r\n      ],\r\n      // 烟叶类型\r\n      leafTypeCodeOtions: [],\r\n    };\r\n  },\r\n  computed: {\r\n    _apis() {\r\n      return this.$apis.centre.apply;\r\n    },\r\n  },\r\n  created() {\r\n    this._apis.getLeafTypeOptions({}).then((res) => {\r\n      this.leafTypeCodeOtions = res.rows;\r\n    });\r\n  },\r\n  methods: {\r\n    moment,\r\n    // 显示推窗\r\n    show(type, state) {\r\n      this.refresh(); // 先刷新\r\n      const {\r\n        orgType,\r\n        orgCode,\r\n        busiYear,\r\n        unitstr,\r\n        res,\r\n        billNo,\r\n        demandOrgCode,\r\n        supplyOrgCode,\r\n        pcAsFocusDealDetailList,\r\n        pcAsFocusBaseDealDetailList,\r\n        asFocusDealMasId, // 主表ID\r\n        createDate,\r\n        treeData,\r\n      } = state || {};\r\n      if (type === 'add') {\r\n        // 根据登陆单位 赋值 供方需方数据\r\n        if (orgType === 'I') {\r\n          this.ruleForm.demandOrgCode = orgCode;\r\n        } else if (orgType === 'O') {\r\n          this.ruleForm.supplyOrgCode = orgCode;\r\n        }\r\n        // 使用上份缓存数据\r\n        if (res?.ruleForm) {\r\n          this.ruleForm = res.ruleForm;\r\n          this.DetailData = res.DetailData; // 表1\r\n          this.BaseDealDetailList = res.BaseDealDetailList; // 表1\r\n        }\r\n        this.iscreatestatus = true;\r\n      } else {\r\n        this.ratio60 = false; // 编辑默认为 计划量是ok的\r\n        this.ruleForm = { billNo, supplyOrgCode, demandOrgCode };\r\n        this.ruleForm.demandCreateDate = moment(createDate, 'YYYY-MM-DD');\r\n\r\n        // 对重量数值 做计算\r\n        const matchedList = weightMatching(['weight'], pcAsFocusDealDetailList, unitstr, '/');\r\n        const basematchedList = weightMatching(\r\n          ['weight'],\r\n          pcAsFocusBaseDealDetailList,\r\n          unitstr,\r\n          '/',\r\n        );\r\n        this.DetailData = matchedList;\r\n        this.BaseDealDetailList = basematchedList;\r\n        this.iscreatestatus = false;\r\n      }\r\n      // 公共数据\r\n      this.treeData = treeData;\r\n      this.orgType = orgType;\r\n      this.orgCode = orgCode;\r\n      this.busiYear = busiYear;\r\n\r\n      this.unitstr = unitstr;\r\n      this.isbuttonshow = type;\r\n      this.asFocusDealMasId = asFocusDealMasId;\r\n      this.visible = true;\r\n    },\r\n    // 新增一行\r\n    handleAddRow() {\r\n      this.formData = {\r\n        apprTypeCode: 'HT1101',\r\n        leafTypeCode: '10',\r\n      };\r\n\r\n      this.isedit = false;\r\n      this.open = true;\r\n    },\r\n    // 删除行\r\n    handleDeleteRow(row) {\r\n      this.DetailData.forEach((item, i) => {\r\n        if (item._X_ID === row._X_ID) {\r\n          this.DetailData.splice(i, 1);\r\n        }\r\n      });\r\n    },\r\n    // 编辑行\r\n    handleEditRow(row) {\r\n      this.formData = { ...row };\r\n      this.isedit = true;\r\n      this.open = true;\r\n    },\r\n    // 提交\r\n    handleSubmit() {\r\n      this.$refs.ruleForm1.validate().then((vali) => {\r\n        if (vali) {\r\n          const row = { ...this.formData };\r\n          // 获取烟叶label\r\n          row.leafTypeName = this.onGetleafTypeCode(row.leafTypeCode);\r\n          if (this.isedit) {\r\n            // 编辑\r\n            this.DetailData = this.DetailData.map((item) => {\r\n              if (item._X_ID === row._X_ID) {\r\n                return row;\r\n              }\r\n              return item;\r\n            });\r\n          } else {\r\n            this.DetailData.push(row);\r\n          }\r\n          this.open = false;\r\n          // this.$message.warning('当前功能尚未开放');\r\n        } else {\r\n          this.$message.error('验证未通过');\r\n        }\r\n      });\r\n    },\r\n    // 关闭\r\n    cancelDetails() {\r\n      this.open = false;\r\n    },\r\n    // 保存\r\n    handleSave(type) {\r\n      // 验证两个form表单\r\n      this.$refs.ruleForm2.validate().then((vali) => {\r\n        if (vali) {\r\n          // if (this.ratio60) {\r\n          //   // 如果比例不大于60\r\n          //   this.$message.error('申请量必须大于大于收购规模量60%，请确认！');\r\n          //   return;\r\n          // }\r\n          // 组合数据\r\n          $ec.showLoading();\r\n          // 对重量数值 做计算\r\n          const orgType = 'prov';\r\n          const pcAsFocusDealDetailList = weightMatching(\r\n            ['weight'],\r\n            this.DetailData,\r\n            this.unitstr,\r\n            '*',\r\n          );\r\n          const pcAsFocusBaseDealDetailList = weightMatching(\r\n            ['weight'],\r\n            this.BaseDealDetailList,\r\n            this.unitstr,\r\n            '*',\r\n          );\r\n          const params = {\r\n            orgType,\r\n            ...this.ruleForm,\r\n            pcAsFocusDealDetailList,\r\n            pcAsFocusBaseDealDetailList,\r\n            asFocusDealMasId: this.asFocusDealMasId,\r\n          };\r\n          // 录入日期\r\n          if (params.demandCreateDate) {\r\n            params.supplyCreateDate = params.demandCreateDate;\r\n          }\r\n          if (this.orgType === 'I') {\r\n            delete params.supplyCreateDate;\r\n          } else if (this.orgType === 'O') {\r\n            delete params.demandCreateDate;\r\n          }\r\n          // if (params.demandOrgCode && Array.isArray(params.demandOrgCode)) {\r\n          //   params.demandOrgCode = params.demandOrgCode[0];\r\n          // }\r\n          // if (params.supplyOrgCode && Array.isArray(params.supplyOrgCode)) {\r\n          //   params.supplyOrgCode = params.supplyOrgCode[0];\r\n          // }\r\n          this._apis\r\n            .add(params)\r\n            .then((res) => {\r\n              if (res.ifCanSave) {\r\n                this.$message.success('操作成功！');\r\n                // 如果不是保存并且新增\r\n                if (type !== 'save') {\r\n                  this.$emit('input', 'refresh');\r\n                  this.visible = false;\r\n                }\r\n              } else {\r\n                this.$message.error(res.returnMessage);\r\n              }\r\n            })\r\n            .finally(() => {\r\n              $ec.hideLoading();\r\n            });\r\n        } else {\r\n          this.$message.error('验证未通过');\r\n        }\r\n      });\r\n    },\r\n    // 取消\r\n    cancel(type) {\r\n      if (type && this.iscreatestatus) {\r\n        // 确认是否保存当前信息\r\n        this.$confirm({\r\n          title: '是否执行该操作?',\r\n          content: () => (\r\n            <div style=\"color:red;\">\r\n              是否保存新增数据？确认请点击'确认'按钮，取消点击'取消'按钮。\r\n            </div>\r\n          ),\r\n          onOk: () => {\r\n            const params = {};\r\n            params.ruleForm = this.ruleForm;\r\n            params.DetailData = this.DetailData;\r\n            params.BaseDealDetailList = this.BaseDealDetailList;\r\n            this.$emit('input', params);\r\n            this.visible = false;\r\n          },\r\n          onCancel: () => {\r\n            this.$emit('input', {});\r\n            this.visible = false;\r\n          },\r\n        });\r\n        return false;\r\n      }\r\n      this.visible = false;\r\n      // 清空form\r\n      // this.$refs.ruleForm1.resetFields();\r\n      // this.$refs.ruleForm2.resetFields();\r\n    },\r\n    // search Options\r\n    onGetapprTypeCode(val) {\r\n      const list = [...this.apprTypeCodeTptions];\r\n      return list.find((item) => item.value === val)?.label;\r\n    },\r\n    onGetleafTypeCode(val) {\r\n      const list = [...this.leafTypeCodeOtions];\r\n      return list.find((item) => item.value === val)?.label;\r\n    },\r\n    // 单位变化 获取基地数据\r\n    orgValueChange() {\r\n      const { supplyOrgCode, demandOrgCode } = this.ruleForm;\r\n      if (supplyOrgCode && demandOrgCode) {\r\n        if (supplyOrgCode !== this.orgCode && demandOrgCode !== this.orgCode) {\r\n          this.$message.error('供需方单位必须一方为登陆单位');\r\n          return;\r\n        }\r\n        $ec.showLoading();\r\n        const params = {\r\n          busiYear: this.busiYear,\r\n          supplyOrgCode:\r\n            supplyOrgCode && Array.isArray(supplyOrgCode) ? supplyOrgCode[0] : supplyOrgCode,\r\n          demandOrgCode:\r\n            demandOrgCode && Array.isArray(demandOrgCode) ? demandOrgCode[0] : demandOrgCode,\r\n        };\r\n        // 发起请求\r\n        this._apis\r\n          .querybaseList(params)\r\n          .then((res) => {\r\n            this.BaseDealDetailList = [...res?.rows?.pcAsFocusBaseDealDetailList];\r\n          })\r\n          .finally(() => {\r\n            $ec.hideLoading();\r\n          });\r\n      }\r\n    },\r\n    // 60%\r\n    onValueChange(row) {\r\n      this.ratio60 = false;\r\n      const { limitWeight, weight } = row;\r\n      if (!limitWeight) {\r\n        this.$message.error('当前计划量不满足条件,请先设定计划量!');\r\n        return;\r\n      }\r\n      const ratio = weight / limitWeight;\r\n      // 为0 或者>60% 准许通过\r\n      if (ratio <= 0.6 && Number(weight) !== 0) {\r\n        this.ratio60 = true;\r\n        this.$message.error('申请量必须大于大于收购规模量60%，请确认！');\r\n      }\r\n    },\r\n    // 刷新\r\n    refresh() {\r\n      this.ruleForm = {};\r\n      this.DetailData = []; // 表1\r\n      this.BaseDealDetailList = []; // 表1\r\n      this.orgType = null;\r\n      this.orgCode = null;\r\n      this.busiYear = null;\r\n      this.unitstr = null;\r\n      this.asFocusDealMasId = null;\r\n      this.isbuttonshow = 'add';\r\n    },\r\n    // 页脚\r\n    footerMethod({ columns, data }) {\r\n      return [\r\n        columns.map((column, columnIndex) => {\r\n          if (columnIndex === 1) {\r\n            return '合计';\r\n          }\r\n          if (['num', 'lvl'].includes(column.property)) {\r\n            return this.sumNum(data, column.property);\r\n          }\r\n          return null;\r\n        }),\r\n      ];\r\n    },\r\n    // 合计\r\n    sumNum(list, field) {\r\n      let count = 0;\r\n      list.forEach((item) => {\r\n        count += Number(item[field]);\r\n      });\r\n      return count;\r\n    },\r\n    // 渲染组织树数据\r\n    getfetchData() {\r\n      return new Promise((resolve) => {\r\n        resolve(cloneDeep(this.treeData));\r\n      });\r\n    },\r\n    // 单位换算\r\n    handlerWeightcalculate(num, unit) {\r\n      return num / unit;\r\n    },\r\n    cellStyleleft({ $columnIndex }) {\r\n      if ($columnIndex === 3) {\r\n        return { textAlign: 'right' };\r\n      }\r\n    },\r\n    cellStyle({ $columnIndex }) {\r\n      if ($columnIndex === 4 || $columnIndex === 3) {\r\n        return { textAlign: 'right' };\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.ec-container .ec-container-body {\r\n  padding: 0;\r\n}\r\n/deep/.ant-modal-body {\r\n  padding-top: 0;\r\n}\r\n/deep/.vxe-table--render-default {\r\n  border: 1px solid rgba(248, 243, 253, 1);\r\n}\r\n.span-color {\r\n  background-color: rgba(248, 249, 250, 1);\r\n  button {\r\n    background: none;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Edit.vue?vue&type=template&id=a7c0d23a&scoped=true&\"\nimport script from \"./Edit.vue?vue&type=script&lang=js&\"\nexport * from \"./Edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Edit.vue?vue&type=style&index=0&id=a7c0d23a&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a7c0d23a\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <ec-container height=\"100%\">\r\n    <!-- // 头 -->\r\n    <ec-container-header>\r\n      <ec-panel-toolbar>\r\n        <ec-panel-item-left>\r\n          <ec-header title=\"交易衔接量申请\" icon=\"onetomany\" color-code=\"003\" />\r\n        </ec-panel-item-left>\r\n        <ec-panel-item-right>\r\n          <div>集中交易年度：{{ busiYear }}年</div>\r\n        </ec-panel-item-right>\r\n      </ec-panel-toolbar>\r\n    </ec-container-header>\r\n    <!-- // 主内容 -->\r\n    <ec-container-body>\r\n      <ec-panel :auto=\"false\">\r\n        <ec-panel-toolbar>\r\n          <ec-query-panel :defaultFold=\"true\" @query=\"init\" @reset=\"resetHandle\">\r\n            <ec-query-item label=\"业务类型\">\r\n              <a-cascader\r\n                v-model=\"queryItems.apprTypeCode\"\r\n                :options=\"businessTypeOptions\"\r\n                placeholder=\"请选择\"\r\n              />\r\n            </ec-query-item>\r\n            <ec-query-item label=\"状态\">\r\n              <a-select showSearch allow-clear placeholder=\"请选择\" v-model=\"queryItems.circleSate\">\r\n                <a-select-option v-for=\"s in StatesOptions\" :key=\"s.value\">\r\n                  {{ s.label }}\r\n                </a-select-option>\r\n              </a-select>\r\n            </ec-query-item>\r\n            <ec-query-item label=\"计量单位\" class=\"org\">\r\n              <a-select allow-clear placeholder=\"请选择\" v-model=\"unitstr\">\r\n                <a-select-option v-for=\"s in unitstrOptions\" :key=\"s.id\">\r\n                  {{ s.name }}\r\n                </a-select-option>\r\n              </a-select>\r\n            </ec-query-item>\r\n            <template #inner>\r\n              <ec-query-item label=\"单据编号\">\r\n                <a-input v-model=\"queryItems.billNo\" placeholder=\"\" />\r\n              </ec-query-item>\r\n              <ec-query-item label=\"供方单位\">\r\n                <select-picker\r\n                  title=\"选择单位\"\r\n                  :lazy=\"false\"\r\n                  :search=\"false\"\r\n                  v-model=\"supplyOrgCode_temporary\"\r\n                  :fetchData=\"getfetchData\"\r\n                  @ok=\"handlepickerValue($event, 'supplyOrgCode')\"\r\n                />\r\n              </ec-query-item>\r\n              <ec-query-item label=\"需方单位\">\r\n                <select-picker\r\n                  title=\"选择单位\"\r\n                  :lazy=\"false\"\r\n                  :search=\"false\"\r\n                  v-model=\"demandOrgCode_temporary\"\r\n                  :fetchData=\"getfetchData\"\r\n                  @ok=\"handlepickerValue($event, 'demandOrgCode')\"\r\n                />\r\n              </ec-query-item>\r\n              <ec-query-item label=\"烟叶类型\">\r\n                <a-cascader\r\n                  :options=\"tabaccoTypeOptions\"\r\n                  v-model=\"queryItems.leafTypeCode\"\r\n                  change-on-select\r\n                  placeholder=\"\"\r\n                />\r\n              </ec-query-item>\r\n            </template>\r\n          </ec-query-panel>\r\n          <ec-divider />\r\n        </ec-panel-toolbar>\r\n        <!-- 表格工具栏 -->\r\n        <ec-panel-item>\r\n          <ec-panel-item-left v-if=\"islock\">\r\n            <a-button type=\"primary\" @click.stop=\"handleAdd\">新增</a-button>\r\n            <a-button @click=\"handleDelete\">删除</a-button>\r\n            <a-button @click=\"handleReport\">上报</a-button>\r\n          </ec-panel-item-left>\r\n        </ec-panel-item>\r\n        <ec-panel-body>\r\n          <ec-v-layout>\r\n            <!-- 主列表 -->\r\n            <ec-v-item>\r\n              <ec-table\r\n                ref=\"xTable1\"\r\n                :height=\"!height ? '200' : '300'\"\r\n                show-overflow\r\n                header-align=\"center\"\r\n                align=\"center\"\r\n                :data=\"tableData\"\r\n                :pagination=\"pagination\"\r\n                @page-action=\"queryPagination\"\r\n                @checkbox-all=\"selectRowChange\"\r\n                @checkbox-change=\"selectRowChange\"\r\n                @cell-click=\"onDetailsList\"\r\n              >\r\n                <ec-table-col type=\"checkbox\" width=\"60\" align=\"center\"></ec-table-col>\r\n                <ec-table-col type=\"seq\" title=\"序号\" width=\"50\" />\r\n                <ec-table-col field=\"billNo\" title=\"单据编号\" />\r\n                <ec-table-col field=\"supplyOrgName\" title=\"供方单位\" />\r\n                <ec-table-col field=\"demandOrgName\" title=\"需方单位\" />\r\n                <ec-table-col field=\"circleSate\" title=\"状态\">\r\n                  <template #default=\"{ row }\">{{ onGetstatusLaael(row.circleSate) }}</template>\r\n                </ec-table-col>\r\n                <ec-table-col title=\"操作\" width=\"190\" align=\"right\">\r\n                  <template #default=\"{ row }\">\r\n                    <a-button v-if=\"islock\" type=\"link\" @click.stop=\"handleAdd(row, 'update')\"\r\n                      >编辑</a-button\r\n                    >\r\n                    <a-button type=\"link\" @click.stop=\"handleAdd(row, 'view')\">详情</a-button>\r\n                  </template>\r\n                </ec-table-col>\r\n              </ec-table>\r\n            </ec-v-item>\r\n            <!-- //  详情列表 -->\r\n            <ec-v-item>\r\n              <h2 class=\"details-bg\">详细</h2>\r\n              <ec-table\r\n                ref=\"xTable2\"\r\n                height=\"216\"\r\n                show-overflow\r\n                header-align=\"center\"\r\n                align=\"center\"\r\n                show-footer\r\n                :cell-style=\"cellStyle\"\r\n                :data=\"FocusDealDetailData\"\r\n                :footer-method=\"footerMethod\"\r\n              >\r\n                <ec-table-col type=\"seq\" title=\"序号\" width=\"50\" />\r\n\r\n                <ec-table-col field=\"apprTypeCode\" title=\"业务类型\" />\r\n                <ec-table-col field=\"leafTypeName\" title=\"烟叶类型\" />\r\n                <ec-table-col field=\"leafFormName\" title=\"烟叶形态\" />\r\n                <ec-table-col field=\"supplyWeight\" title=\"供方提报量\">\r\n                  <template #default=\"{ row }\">{{\r\n                    handlerWeightcalculate(row.supplyWeight, unitstr)\r\n                  }}</template>\r\n                </ec-table-col>\r\n                <ec-table-col field=\"demandWeight\" title=\"需方提报量\">\r\n                  <template #default=\"{ row }\">{{\r\n                    handlerWeightcalculate(row.demandWeight, unitstr)\r\n                  }}</template>\r\n                </ec-table-col>\r\n                <ec-table-col field=\"finalWeight\" title=\"总公司审核量\">\r\n                  <template #default=\"{ row }\">{{\r\n                    handlerWeightcalculate(row.finalWeight, unitstr)\r\n                  }}</template>\r\n                </ec-table-col>\r\n\r\n                <ec-table-col title=\"操作\" width=\"190\">\r\n                  <template #default=\"{ row }\">\r\n                    <a-button type=\"link\" @click=\"viewOpenDetails(row)\">详情</a-button>\r\n                  </template>\r\n                </ec-table-col>\r\n              </ec-table>\r\n            </ec-v-item>\r\n          </ec-v-layout>\r\n        </ec-panel-body>\r\n      </ec-panel>\r\n      <admin-org-manage-edit ref=\"editRef\" v-model=\"childrenData\"></admin-org-manage-edit>\r\n    </ec-container-body>\r\n  </ec-container>\r\n</template>\r\n\r\n<script>\r\nimport AdminOrgManageEdit from './Edit.vue';\r\nimport { SelectPicker } from '@euler-material/ecm-ui';\r\nimport { treeFormatList, cloneDeep } from '@euler-material/ecm-utils';\r\n\r\nexport default {\r\n  name: 'AdminOrgManage',\r\n  components: {\r\n    AdminOrgManageEdit,\r\n    SelectPicker,\r\n  },\r\n  data() {\r\n    return {\r\n      // 初始化数据\r\n      supplyOrgCode_temporary: null,\r\n      demandOrgCode_temporary: null,\r\n      demandOrgCode: null,\r\n      supplyOrgCode: null,\r\n\r\n      treeData: null,\r\n      treeParams: {\r\n        bizCode: '11000001000000000000',\r\n        orgTypeEk: 'EXPORT,INDUSTRY,TOBACCO',\r\n        orgLevelEk: '3',\r\n        paramMap: {\r\n          isCorporation: '1',\r\n        },\r\n      },\r\n      orgType: '', // I 代表需方,O代表供方\r\n      orgCode: '',\r\n      appCode: '',\r\n      unitstr: '50',\r\n      height: true,\r\n      islock: true,\r\n      // store\r\n      records: [],\r\n      // options\r\n      businessTypeOptions: [\r\n        {\r\n          value: '0',\r\n          label: '业务类型',\r\n          children: [\r\n            {\r\n              value: '1',\r\n              label: '购销',\r\n              children: [\r\n                {\r\n                  value: '1-1',\r\n                  label: '工商购销',\r\n                  children: [\r\n                    { value: 'HT1101', label: '工商普通购销' },\r\n                    { value: 'HT1104', label: '基地烟' },\r\n                  ],\r\n                },\r\n                {\r\n                  value: '1-2',\r\n                  label: '出口备货购销',\r\n                  children: [{ value: 'HT1201', label: '出口备货普通购销' }],\r\n                },\r\n              ],\r\n            },\r\n          ],\r\n        },\r\n      ],\r\n      StatesOptions: [\r\n        { label: '未上报', value: '0' },\r\n        { label: '省公司退回', value: '2' },\r\n        { label: '总公司退回', value: '5' },\r\n        { label: '省公司待确认', value: '1' },\r\n        { label: '省公司已确认', value: '3' },\r\n        { label: '总公司待审核', value: '4' },\r\n        { label: '总公司已审核', value: '6' },\r\n      ],\r\n      tabaccoTypeOptions: [\r\n        {\r\n          value: '10',\r\n          label: '烤烟',\r\n        },\r\n        {\r\n          value: '20',\r\n          label: '晾晒烟',\r\n          children: [\r\n            {\r\n              value: '2013',\r\n              label: '雪茄烟叶',\r\n            },\r\n          ],\r\n        },\r\n      ],\r\n\r\n      unitstrOptions: [\r\n        { name: '担', id: '50' },\r\n        { name: '万担', id: '500000' },\r\n      ],\r\n\r\n      statusList: [\r\n        { name: '启用', id: 0 },\r\n        { name: '停用', id: 1 },\r\n      ],\r\n      // 子数据\r\n      childrenData: null,\r\n      queryItems: {\r\n        pageNumber: 1,\r\n        pageSize: 10,\r\n        leafTypeCode: ['10'],\r\n        searchType: 'cityType', // 默认市级\r\n        apprTypeCode: null,\r\n      },\r\n      rules: {},\r\n      tableData: [],\r\n      FocusDealDetailData: [],\r\n      pagination: {\r\n        pageNumber: 1,\r\n        pageSize: 10,\r\n        total: 0,\r\n      },\r\n    };\r\n  },\r\n  // 接口\r\n  computed: {\r\n    _apis() {\r\n      return this.$apis.centre.apply;\r\n    },\r\n    appConfig() {\r\n      return this.$store.getters.getAppConfig;\r\n    },\r\n    busiYear() {\r\n      return this.$store.getters.getAppConfig?.yearValueMap?.CENTER_YEAR;\r\n    },\r\n  },\r\n  watch: {\r\n    childrenData: {\r\n      handler(val) {\r\n        if (val === 'refresh') this.init(); // 刷新\r\n      },\r\n    },\r\n  },\r\n  created() {\r\n    this.onGetuserinfo();\r\n  },\r\n  methods: {\r\n    // 主列表\r\n    init() {\r\n      $ec.showLoading();\r\n      this.records = [];\r\n      this.FocusDealDetailData = []; // 清空详细数据\r\n      // 构造请求参数\r\n      const params = { ...this.queryItems };\r\n      params.orgCode = this.orgCode;\r\n      params.busiYear = this.busiYear;\r\n      !params.apprTypeCode && delete params.apprTypeCode;\r\n\r\n      if (params.apprTypeCode && params.apprTypeCode.length !== 0)\r\n        params.apprTypeCode = params.apprTypeCode.reverse()[0];\r\n      if (params.leafTypeCode && params.leafTypeCode?.length !== 0)\r\n        params.leafTypeCode = params.leafTypeCode.reverse()[0];\r\n      this._apis\r\n        .query(params)\r\n        .then((res) => {\r\n          this.tableData = res.rows;\r\n          this.pagination.total = res.totalRows;\r\n        })\r\n        .finally(() => {\r\n          $ec.hideLoading();\r\n        });\r\n    },\r\n    // 重置\r\n    resetHandle() {\r\n      this.unitstr = '50';\r\n      this.demandOrgCode = '';\r\n      this.supplyOrgCode = '';\r\n      this.queryItems = {\r\n        pageNumber: 1,\r\n        pageSize: 10,\r\n        demandOrgCode: '',\r\n        supplyOrgCode: '',\r\n        circleSate: '',\r\n        billNo: '',\r\n        leafTypeCode: ['10'],\r\n        searchType: 'cityType', // 默认市级\r\n        apprTypeCode: '', // 默认市级\r\n      };\r\n      this.init();\r\n    },\r\n    // 主弹窗 (新增,编辑,详情)\r\n    async handleAdd(row, type) {\r\n      $ec.showLoading();\r\n      if (type === 'update') {\r\n        const { circleSate } = row;\r\n        // 不允许编辑 0  应该为circleSate === '0'\r\n        if (circleSate === '0' || circleSate === '2' || circleSate === '5') {\r\n          const resPonseData = await this.onqueryGetbaselist(row);\r\n          this.$refs.editRef.show('update', {\r\n            ...resPonseData,\r\n            orgType: this.orgType,\r\n            treeData: this.treeData,\r\n          });\r\n        } else {\r\n          this.$message.error(`当前状态不允许修改`);\r\n        }\r\n        $ec.hideLoading();\r\n      } else if (type === 'view') {\r\n        // 详情\r\n        const resPonseData = await this.onqueryGetbaselist(row);\r\n        this.$refs.editRef.show('view', {\r\n          ...resPonseData,\r\n          orgType: this.orgType,\r\n          treeData: this.treeData,\r\n        });\r\n        $ec.hideLoading();\r\n      } else {\r\n        // 新增\r\n        const data = {\r\n          orgCode: this.orgCode,\r\n          orgType: this.orgType,\r\n          busiYear: this.busiYear,\r\n          unitstr: this.unitstr,\r\n          res: this.childrenData, // 上条保存未提交的数据\r\n          treeData: this.treeData,\r\n        };\r\n        this.$refs.editRef.show('add', data);\r\n        $ec.hideLoading();\r\n      }\r\n    },\r\n    // 上报\r\n    handleReport() {\r\n      if (this.records.length === 0) {\r\n        this.$message.error('请选中数据后再进行上报!');\r\n        return false;\r\n      }\r\n      // 为“省公司退回”、“总公司退回”\r\n      this.$message.error(`请对退回单据进行编辑保存后，再上报！`);\r\n    },\r\n    // 删除\r\n    handleDelete() {\r\n      if (this.records.length === 0) {\r\n        this.$message.error('请选中数据后再进行删除!');\r\n        return false;\r\n      }\r\n      // 非“未上报”、“省公司退回”、“总公司退回”三种状态\r\n      const isok = this.records.some(\r\n        (item) =>\r\n          item.circleSate === '1' ||\r\n          item.circleSate === '3' ||\r\n          item.circleSate === '4' ||\r\n          item.circleSate === '6',\r\n      ); // 4\r\n      if (isok) {\r\n        this.$message.error(`该交易衔接量已上报，不允许删除！`);\r\n        return;\r\n      }\r\n      const asFocusDealMasIds = this.records.map((item) => item.asFocusDealMasId) || [];\r\n      this._apis.delete({ asFocusDealMasIds }).then(() => {\r\n        // debugger;\r\n        // if (res.ifCanSave) {\r\n        //   this.visible = false;\r\n        //   this.$message.success('保存成功');\r\n        // } else {\r\n        //   this.$message.error(res.returnMessage);\r\n        // }\r\n      });\r\n    },\r\n    // 分页\r\n    queryPagination(pageNumber, pageSize) {\r\n      this.queryItems.pageNumber = pageNumber;\r\n      this.queryItems.pageSize = pageSize;\r\n      this.init();\r\n    },\r\n    // 主列表 checkbox\r\n    selectRowChange({ records }) {\r\n      this.records = records;\r\n    },\r\n    // 组织单位change\r\n    handlepickerValue(e, index) {\r\n      const { val } = e.selectOption;\r\n      this.queryItems[index] = val;\r\n    },\r\n    // 选中行 获取详情list\r\n    onDetailsList({ row }) {\r\n      const params = {\r\n        orgType: 'city',\r\n        billNo: row.billNo,\r\n        busiYear: this.busiYear,\r\n      };\r\n      this._apis.querySelectRows(params).then((res) => {\r\n        this.FocusDealDetailData = res.rows || [];\r\n      });\r\n    },\r\n    // 点击详情内的详情\r\n    viewOpenDetails(row) {\r\n      const { asFocusDealMasId } = row;\r\n      const params = {\r\n        asFocusDealMasId,\r\n        busiYear: this.busiYear,\r\n      };\r\n      this._apis.queryDetails(params).then((res) => {\r\n        console.log(res);\r\n      });\r\n    },\r\n    // 编辑 详情 需要的数据\r\n    async onqueryGetbaselist(row) {\r\n      const { supplyOrgCode, demandOrgCode } = row;\r\n      const params = {\r\n        supplyOrgCode,\r\n        demandOrgCode,\r\n        busiYear: this.busiYear,\r\n      };\r\n      return await this._apis.querybaseList(params);\r\n    },\r\n    sumNum(list, field) {\r\n      let count = 0;\r\n      list.forEach((item) => {\r\n        count += Number(item[field]);\r\n      });\r\n      return count;\r\n    },\r\n    // 获取组织树数据\r\n    async treeGetlist() {\r\n      const fields = {\r\n        pkey: 'parentOrgUniqueCode',\r\n        title: 'orgName',\r\n        key: 'orgUniqueCode',\r\n        children: 'children',\r\n      };\r\n      this.treeParams.bizCode = this.appConfig?.bizCode;\r\n      const response = await this._apis.getreeDate(this.treeParams);\r\n      this.treeData = treeFormatList(response?.rows, fields);\r\n    },\r\n    // 登陆数据初始化\r\n    async onGetuserinfo() {\r\n      // 供需方字段orgTypeEk\r\n      const { orgCode, orgTypeEk } = await this.$apis.bpm.executionEnter.getOrgCode({});\r\n      this.orgCode = orgCode; // 登陆单位\r\n      this.orgType = orgTypeEk === 'TOBACCO' ? 'O' : 'I';\r\n      this.treeParams.bizYear = this.busiYear;\r\n      await this.treeGetlist();\r\n      // 初始化\r\n      this.init();\r\n    },\r\n    // 合计栏\r\n    footerMethod({ columns, data }) {\r\n      return [\r\n        columns.map((column, columnIndex) => {\r\n          if (columnIndex === 1) {\r\n            return '合计';\r\n          }\r\n          if (['demandWeight', 'supplyWeight', 'finalWeight'].includes(column.property)) {\r\n            return this.sumNum(data, column.property);\r\n          }\r\n          return null;\r\n        }),\r\n      ];\r\n    },\r\n    // 渲染组织树数据\r\n    getfetchData() {\r\n      return new Promise((resolve) => {\r\n        const list = cloneDeep(this.treeData);\r\n        resolve(list);\r\n      });\r\n    },\r\n    // 字段匹配\r\n    onGetstatusLaael(val) {\r\n      const list = [...this.StatesOptions];\r\n      return list.find((item) => item.value === val)?.label;\r\n    },\r\n    // 单位换算\r\n    handlerWeightcalculate(num, unit) {\r\n      return num / unit;\r\n    },\r\n    cellStyle({ $columnIndex }) {\r\n      if ($columnIndex === 4 || $columnIndex === 5 || $columnIndex === 6) {\r\n        return { textAlign: 'right' };\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.btn-other {\r\n  border: 1px solid #0070d2;\r\n  color: #0070d2;\r\n}\r\n\r\n.table-bar-icon-btn {\r\n  width: 32px;\r\n\r\n  > i {\r\n    margin-left: -4px;\r\n  }\r\n}\r\n/deep/.ant-modal-body {\r\n  padding: 6px 24px;\r\n}\r\n/deep/.org.ec-query-item-inline .ec-query-item__control {\r\n  min-width: 76px;\r\n}\r\n.details-bg {\r\n  background-color: rgba(248, 248, 249, 1);\r\n  color: rgb(48, 48, 48);\r\n  font-weight: 600;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=71310881&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=71310881&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"71310881\",\n  null\n  \n)\n\nexport default component.exports","import cloneDeep from 'lodash/cloneDeep';\r\nimport isPlainObject from 'lodash/isPlainObject';\r\n/**\r\n * 平铺树结构转换标注树结构\r\n * @param {Array} list 平铺类型数据\r\n * @param {Object | Null} replace 替换属性名称，key原来属性，value新属性\r\n * @param {Object} option 对应replace中的key字段，pkey和children必填\r\n * @returns treeData树结构\r\n */\r\nexport function listFormatTree(\r\n  list = [],\r\n  replace = { pkey: 'pkey', key: 'key', title: 'title', children: 'children' },\r\n  option = { pkey: 'pkey', children: 'children' },\r\n) {\r\n  if (!Array.isArray(list)) {\r\n    return console.error('请传入一个list数组');\r\n  }\r\n  list.forEach((child) => {\r\n    const parentId = child[option.pkey];\r\n    if (parentId) {\r\n      list.forEach((parent) => {\r\n        const parentTmp = parent;\r\n        // 替换属性\r\n        if (replace) {\r\n          for (const key in replace) {\r\n            // 新旧属性不一致的替换\r\n            if (String(key) !== String(replace[key])) {\r\n              if (\r\n                Array.isArray(parentTmp[replace[key]]) ||\r\n                parentTmp[replace[key]] instanceof Object\r\n              ) {\r\n                parentTmp[key] = cloneDeep(parentTmp[replace[key]]);\r\n              } else {\r\n                parentTmp[key] = parentTmp[replace[key]];\r\n              }\r\n              Reflect.deleteProperty(parentTmp, replace[key]);\r\n            }\r\n          }\r\n        }\r\n        if (parentTmp && parentTmp.key === parentId) {\r\n          parentTmp[option.children] = parentTmp[option.children] || [];\r\n          parentTmp[option.children].push(child);\r\n        }\r\n      });\r\n    }\r\n  });\r\n  const root = list.every((item) => item[replace.pkey]);\r\n  if (root) {\r\n    return console.error('至少有一个根节点pid为null数组或传入一个空数组', list);\r\n  }\r\n  return list.filter((n) => !n[option.pkey]);\r\n}\r\n\r\n/**\r\n * 树转换为扁平树结构\r\n * @param {Array} treeData 树结构\r\n * @param {Object | Null} replace 替换属性名称，value要替换的属性名，null 不替换\r\n * @param {String} children 对应replace中children字段\r\n * @returns\r\n */\r\nexport function treeFormatList(\r\n  treeData = [],\r\n  replace = { pkey: 'pkey', key: 'key', title: 'title' },\r\n  children = 'children',\r\n) {\r\n  if (!Array.isArray(treeData)) {\r\n    return console.error('请传入一个tree数组');\r\n  }\r\n  const list = [];\r\n  const clone = cloneDeep(treeData);\r\n  const stack = [...clone];\r\n  while (stack.length) {\r\n    const node = stack.shift();\r\n    const child = node[children];\r\n    if (child) {\r\n      stack.push(...child);\r\n    }\r\n    // 如果存在replace那就依次更换属性名称\r\n    if (replace) {\r\n      for (const key in replace) {\r\n        if (String(key) !== String(replace[key])) {\r\n          if (Array.isArray(node[replace[key]]) || node[replace[key]] instanceof Object) {\r\n            node[key] = cloneDeep(node[replace[key]]);\r\n          } else {\r\n            node[key] = node[replace[key]];\r\n          }\r\n          Reflect.deleteProperty(node, replace[key]);\r\n        }\r\n      }\r\n    }\r\n    // 删除空children属性\r\n    Reflect.deleteProperty(node, children);\r\n    list.push(node);\r\n  }\r\n  // 如果本身是list就返回本身\r\n  return list.length === 0 ? treeData : list;\r\n}\r\n\r\n/**\r\n * 过滤树，并保留原有的结构\r\n * @param {Array} treeData\r\n * @param {Function} filterFn 回调函数值判断来过滤，默认true不过滤\r\n * @param {String} children 子节点字段属性名称\r\n * @returns\r\n */\r\nexport function filterTree(treeData = [], filterFn = () => true, children = 'children') {\r\n  if (!Array.isArray(treeData)) {\r\n    return console.error('请传入一个tree数组');\r\n  }\r\n  function filter(treeDatas) {\r\n    if (!treeDatas?.length) {\r\n      return treeDatas;\r\n    }\r\n    return treeDatas.filter((data) => {\r\n      const item = data;\r\n      if (!filterFn(item)) {\r\n        return false;\r\n      }\r\n      item[children] = filter(item[children]);\r\n      return true;\r\n    });\r\n  }\r\n\r\n  return filter(treeData) || [];\r\n}\r\n\r\n/**\r\n * 树转为list并且过滤返回过滤的列表\r\n * @param {Array} treeData 树结构数据\r\n * @param {Function} filterFn 回调函数值判断来过滤，默认true不过滤\r\n * @param {Object | Null} replace 替换属性名称，value要替换的属性名，null 不替换\r\n * @returns 过滤后的数据\r\n */\r\nexport function filterList(\r\n  treeData,\r\n  filterFn = () => true,\r\n  replace = { pkey: 'pkey', key: 'key', title: 'title' },\r\n) {\r\n  if (!Array.isArray(treeData)) {\r\n    return console.error('请传入一个tree数组');\r\n  }\r\n  const clone = cloneDeep(treeData);\r\n  const list = treeFormatList(clone, replace);\r\n  return list.filter((item) => {\r\n    if (!filterFn(item)) {\r\n      return false;\r\n    }\r\n    return true;\r\n  });\r\n}\r\n\r\n/**\r\n * 数组去重\r\n * @param {Array} arr 存在重复数组对象\r\n * @param {String} prop 依据该属性判断唯一\r\n * @returns\r\n */\r\nexport function uniqueArrayBy(arr = [], prop = 'key') {\r\n  if (!Array.isArray(arr)) {\r\n    return console.error('请传入一个数组');\r\n  }\r\n  if (arr && arr.length !== 0 && isPlainObject(arr[0])) {\r\n    const map = new Map();\r\n    arr.forEach((item) => {\r\n      if (item[prop]) {\r\n        map.set(item[prop], item);\r\n      } else {\r\n        throw new Error('prop参数不匹配，在节点找不到对应的值');\r\n      }\r\n    });\r\n    if (map.size !== 0) {\r\n      return Array.from(map.values());\r\n    }\r\n  } else {\r\n    return Array.from(new Set(arr));\r\n  }\r\n}\r\n\r\n/**\r\n * 获取选中节点展开的keys\r\n * @param {Array} treeData 树data\r\n * @param {String} selected 选中的节点\r\n * @param {Object | Null} replace 替换属性名称，value要替换的属性名，null 不替换\r\n * @param {Object} option 默认配置\r\n * @returns {Array} 路径数组\r\n */\r\nexport function getExpandedKeys(\r\n  treeData,\r\n  selected,\r\n  replace = { pkey: 'pkey', key: 'key', title: 'title' },\r\n  option = { pkey: 'pkey', key: 'key' },\r\n) {\r\n  if (!Array.isArray(treeData)) {\r\n    return console.error('请传入一个tree数组');\r\n  }\r\n  const paths = new Set();\r\n  const data = treeFormatList(treeData, replace);\r\n  function fn(list, select) {\r\n    list.forEach((node) => {\r\n      if (String(node[option.key]) === String(select)) {\r\n        paths.add(node[option.key]);\r\n        // 移除叶子节点\r\n        if (node.isLeaf) {\r\n          paths.delete(node[option.key]);\r\n        }\r\n        fn(list, node[option.pkey]);\r\n      }\r\n    });\r\n  }\r\n  fn(data, selected);\r\n  return Array.from(paths)\r\n    .reverse()\r\n    .filter((item) => item !== selected);\r\n}\r\n\r\n/**\r\n * 获取选中节点选择的keys\r\n * @param {Array} treeData 树data\r\n * @param {String} selected 选中的节点\r\n * @param {String} by 依据by字段取值，默认配置'key'\r\n * @param {Object | Null} replace 替换属性名称，value要替换的属性名，null 不替换\r\n * @param {Object} option 默认配置\r\n * @returns {Array} 路径数组\r\n */\r\nexport function getSelectedBy(\r\n  treeData,\r\n  selected,\r\n  by = 'key',\r\n  replace = { pkey: 'pkey', key: 'key', title: 'title' },\r\n  option = { pkey: 'pkey', key: 'key' },\r\n) {\r\n  if (!Array.isArray(treeData)) {\r\n    return console.error('请传入一个tree数组');\r\n  }\r\n  const keys = new Set();\r\n  const data = treeFormatList(treeData, replace);\r\n  function fn(list, select) {\r\n    list.forEach((node) => {\r\n      if (String(node[option.key]) === String(select)) {\r\n        keys.add(node[by]);\r\n        fn(list, node[option.pkey]);\r\n      }\r\n    });\r\n  }\r\n  fn(data, selected);\r\n  return Array.from(keys).reverse();\r\n}\r\n\r\n/**\r\n * 根据选中的属性获取节点node\r\n * @param {Array} treeData 树data\r\n * @param {String} selected 选中的节点值\r\n * @param {String} by 属性名称\r\n * @param {Object | Null} replace 替换属性名称，key原来属性，value新属性\r\n * @returns {Object} 选中的节点对象\r\n */\r\nexport function getNodeBy(\r\n  treeData,\r\n  selected,\r\n  by = 'key',\r\n  replace = { pkey: 'pkey', key: 'key', title: 'title' },\r\n) {\r\n  if (!Array.isArray(treeData)) {\r\n    return console.error('请传入一个tree数组');\r\n  }\r\n  const data = treeFormatList(treeData, replace);\r\n  const node = data.filter((n) => {\r\n    return String(n[by]) === String(selected);\r\n  });\r\n  return Array.isArray(node) && node.length === 1 ? node[0] : null;\r\n}\r\n\r\n/**\r\n * 根据选中的属性获取对应的name名称\r\n * @param {Array} dicList 字典列表\r\n * @param {String} value 节点值\r\n * @param {String} option 字典中key和label字典对应字段名称\r\n * @returns {String} 值对应的属性\r\n */\r\nexport function getNameBy(dicList, value, option = { key: 'key', label: 'title' }) {\r\n  if (!Array.isArray(dicList)) {\r\n    return console.error('请传入一个字典数组');\r\n  }\r\n  const node = dicList.filter((n) => {\r\n    return String(n[option.key]) === String(value);\r\n  });\r\n  // console.log(node)\r\n  if (node && node.length !== 0) {\r\n    return node[0][option.label];\r\n  }\r\n  return '';\r\n}\r\n","const { toString } = Object.prototype;\r\n// 公共组件沉淀方法库导入导出\r\nexport * from '@/components/_utils';\r\nexport const isArray = (value) => {\r\n  if (typeof Array.isArray === 'function') {\r\n    return Array.isArray(value);\r\n  } else {\r\n    return toString.call(value) === '[object Array]';\r\n  }\r\n};\r\nexport const isObject = (value) => {\r\n  return toString.call(value) === '[object Object]';\r\n};\r\n\r\nexport const isNull = (value) => {\r\n  return value === null;\r\n};\r\n\r\nexport const isUndefined = (value) => {\r\n  return value === undefined;\r\n};\r\n\r\nexport const isString = (value) => {\r\n  return typeof value === 'string';\r\n};\r\n\r\nexport const isEmpty = (value) => {\r\n  if (isArray(value)) {\r\n    return value.length === 0;\r\n  }\r\n\r\n  if (isObject(value)) {\r\n    return Object.keys(value).length === 0;\r\n  }\r\n\r\n  return value === '' || isUndefined(value) || isNull(value);\r\n};\r\n\r\nexport const last = (data) => {\r\n  if (isEmpty(data)) return;\r\n\r\n  if (isArray(data) || isString(data)) {\r\n    return data[data.length - 1];\r\n  }\r\n};\r\n\r\n/**\r\n * @param {HTMLElement} element\r\n * @param {string} event\r\n * @param {function} handler\r\n */\r\nexport const on = (() => {\r\n  if (document.addEventListener) {\r\n    return function (element, event, handler) {\r\n      if (element && event && handler) {\r\n        element.addEventListener(event, handler, false);\r\n      }\r\n    };\r\n  } else {\r\n    return function (element, event, handler) {\r\n      if (element && event && handler) {\r\n        element.attachEvent(`on${event}`, handler);\r\n      }\r\n    };\r\n  }\r\n})();\r\n/**\r\n * @param {HTMLElement} element\r\n * @param {string} event\r\n * @param {function} handler\r\n */\r\nexport const off = (() => {\r\n  if (document.removeEventListener) {\r\n    return function (element, event, handler) {\r\n      if (element && event) {\r\n        element.removeEventListener(event, handler, false);\r\n      }\r\n    };\r\n  } else {\r\n    return function (element, event, handler) {\r\n      if (element && event) {\r\n        element.detachEvent(`on${event}`, handler);\r\n      }\r\n    };\r\n  }\r\n})();\r\n\r\n/**\r\n * @param {HTMLElement} el\r\n * @param {string} event\r\n * @param {function} fn\r\n */\r\nexport const once = (el, event, fn) => {\r\n  const listener = function (...args) {\r\n    if (fn) {\r\n      fn.apply(this, args);\r\n    }\r\n    off(el, event, listener);\r\n  };\r\n  on(el, event, listener);\r\n};\r\n\r\n/**\r\n * @param {array} list\r\n * @param {*} predicate\r\n * @returns {array}\r\n */\r\nexport const uniqBy = (list, predicate) => {\r\n  if (isEmpty(list)) return [];\r\n\r\n  const cb = typeof predicate === 'function' ? predicate : (o) => o[predicate];\r\n  return [\r\n    ...list\r\n      .reduce((map, item) => {\r\n        const key = isEmpty(item) ? item : cb(item);\r\n        map.has(key) || map.set(key, item);\r\n        return map;\r\n      }, new Map())\r\n      .values(),\r\n  ];\r\n};\r\n\r\n/**\r\n * 防抖\r\n * @param {function} fn\r\n * @param {number} delay\r\n * @returns\r\n */\r\nexport const debounce = (fn, delay) => {\r\n  let timer = null;\r\n\r\n  return function (...args) {\r\n    const context = this;\r\n\r\n    if (timer) {\r\n      clearTimeout(timer);\r\n\r\n      timer = setTimeout(() => {\r\n        fn.apply(context, args);\r\n      }, delay);\r\n    } else {\r\n      timer = setTimeout(() => {\r\n        fn.apply(context, args);\r\n      }, delay);\r\n    }\r\n  };\r\n};\r\n/**\r\n * @description 由于现在看到基本上接口树状数据都是统一这种结构 `{main:object,children:object[]}` 在这里统一处理成`{[key:string]:any,children:object[]}[]`\r\n * @param {{main:object,children:object[]} | {main:object,children:object[]}[]} data\r\n * @param {{children: string;title: string;key: string;value: string;}} props\r\n * @param {number?} level\r\n * @returns {{[key:string]:any,children:object[]}[]}\r\n * @example tree组件渲染只需要修改replaceFields\r\n * js\r\n *  import { deepTree } from \"@/utils/utils\";\r\n *  this.treeData = deepTree(res.orgTreeDate)\r\n * html\r\n *  <a-tree\r\n *    :tree-data=\"treeData\"\r\n *    :replaceFields=\"{\r\n *      key: 'orgUniqueCd',\r\n *      title: 'orgName',\r\n *  }\"\r\n *  />\r\n */\r\nconst deepTreeProps = {\r\n  children: 'children',\r\n  title: 'title',\r\n  key: 'key',\r\n  value: 'value',\r\n};\r\nexport const deepTree = (data = [], props = {}, level = 1) => {\r\n  const nProps = {\r\n    ...deepTreeProps,\r\n    ...props,\r\n  };\r\n  if (isEmpty(data)) return [];\r\n  const list = (isObject(data) ? [data] : data) || [];\r\n  const len = list.length;\r\n  const result = [];\r\n  for (let i = 0; i < len; i++) {\r\n    const item = list[i];\r\n    const children = item[nProps.children] ?? [];\r\n    const isLeaf = !children.length;\r\n\r\n    const nItem = {\r\n      _level: level,\r\n      ...item.main,\r\n      isLeaf,\r\n    };\r\n\r\n    nItem.key = nItem[nProps.key];\r\n    nItem.title = nItem[nProps.title];\r\n    nItem.value = nItem[nProps.value];\r\n\r\n    if (!isLeaf) {\r\n      nItem.children = deepTree(children, nProps, level + 1);\r\n    }\r\n    result.push(nItem);\r\n  }\r\n  return result;\r\n};\r\n\r\nexport const fileSaveAs = (file, name) => {\r\n  if (!file) return;\r\n  const url = window.URL.createObjectURL(file);\r\n  const link = document.createElement('a');\r\n  link.style.display = 'none';\r\n  link.href = url;\r\n  link.setAttribute('download', name);\r\n  document.body.appendChild(link);\r\n  link.click();\r\n};\r\nexport const weightMatching = (fields, data, unit, type) => {\r\n  // 重量匹配\r\n  return data?.map((item) => {\r\n    const obj = { ...item };\r\n    for (const k in item) {\r\n      if (fields.includes(k)) {\r\n        if (type === '/') {\r\n          obj[k] /= unit;\r\n        } else {\r\n          obj[k] *= unit;\r\n        }\r\n      }\r\n    }\r\n    return obj;\r\n  });\r\n};\r\n// 判断是否是字符串数字\r\nexport const isNumber = (str) => !isNaN(Number(str));\r\n\r\n/**\r\n * 下载文件\r\n * @param url\r\n * @param filename\r\n */\r\nexport const DownloadA = (url, filename) => {\r\n  if (!url) return;\r\n  const link = document.createElement('a'); //  创建a标签\r\n  link.style.display = 'none'; //  使其隐藏\r\n  link.href = url; // 赋予文件下载地址\r\n  link.setAttribute('download', filename); // 设置下载属性 以及文件名\r\n  document.body.appendChild(link); // a标签插至页面中\r\n  link.click(); //  强制触发a标签事件\r\n  document.body.removeChild(link);\r\n};\r\n"],"sourceRoot":""}