(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8d1feef0"],{"0676":function(e,t,n){function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n("d9e2"),e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},"11b0":function(e,t,n){function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630"),e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},2236:function(e,t,n){var r=n("5a43");function a(e){if(Array.isArray(e))return r(e)}e.exports=a,e.exports.__esModule=!0,e.exports["default"]=e.exports},"278c":function(e,t,n){var r=n("c135"),a=n("9b42"),i=n("6613"),l=n("c240");function c(e,t){return r(e)||a(e,t)||i(e,t)||l()}e.exports=c,e.exports.__esModule=!0,e.exports["default"]=e.exports},"448a":function(e,t,n){var r=n("2236"),a=n("11b0"),i=n("6613"),l=n("0676");function c(e){return r(e)||a(e)||i(e)||l()}e.exports=c,e.exports.__esModule=!0,e.exports["default"]=e.exports},"5a43":function(e,t){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},6198:function(e,t,n){},63748:function(e,t,n){n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("d9e2");var r=n("6613");function a(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){o=!0,l=e},f:function(){try{c||null==n["return"]||n["return"]()}finally{if(o)throw l}}}}e.exports=a,e.exports.__esModule=!0,e.exports["default"]=e.exports},6613:function(e,t,n){n("fb6a"),n("d3b7"),n("b0c0"),n("a630"),n("3ca3"),n("ac1f"),n("00b4");var r=n("5a43");function a(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}e.exports=a,e.exports.__esModule=!0,e.exports["default"]=e.exports},"6fc0":function(e,t,n){var r=n("278c").default,a=n("448a").default,i=n("63748").default,l=n("7ec2").default,c=n("c973").default,o=n("9523").default,s=n("ded3").default;n("99af"),n("b0c0"),n("a9e3"),n("ac1f"),n("841c"),n("d3b7"),n("4de4"),n("d81d"),n("caad"),n("2532"),n("3ca3"),n("ddb0"),n("4ec9"),n("159b"),n("a630"),n("6062"),n("00b4"),n("a15b"),n("466d"),function(){"use strict";var t={483:function(e,t,n){function r(e,t,n,r,a,i,l,c){var o,s="function"===typeof e?e.options:e;if(t&&(s.render=t,s.staticRenderFns=n,s._compiled=!0),r&&(s.functional=!0),i&&(s._scopeId="data-v-"+i),l?(o=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},s._ssrRegister=o):a&&(o=c?function(){a.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:a),o)if(s.functional){s._injectStyles=o;var u=s.render;s.render=function(e,t){return o.call(t),u(e,t)}}else{var d=s.beforeCreate;s.beforeCreate=d?[].concat(d,o):[o]}return{exports:e,options:s}}n.d(t,{Z:function(){return r}})},51:function(e,t,n){n.d(t,{H_:function(){return i},Qb:function(){return l}});var r="Ecm",a="$ecm",i=function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.componentPrefix)&&void 0!==t?t:r},l=function(e,t){var n,r=e;t&&t.classPrefix&&(r.prototype[a]=s(s({},null!==(n=r.prototype[a])&&void 0!==n?n:{}),{},{classPrefix:t.classPrefix}))}},657:function(e,t,n){var r;n.d(t,{default:function(){return S}});var u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tree-search"},[e._t("title"),e.isSearch?t("div",{staticClass:"tree-search-select",style:{padding:e.searchPadding}},[t("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"",value:e.selectedValue,placeholder:e.placeholder,"default-active-first-option":!1,"show-arrow":!1,"filter-option":!1,"not-found-content":null},on:{search:e.onSelectSearch,select:e.onSelectChange,rightClick:e.oRightClick}},e._l(e.selectOption,(function(n){return t("a-select-option",{key:n.key,attrs:{value:n.key,title:"".concat(n.title)}},[t("a-row",[t("a-col",{staticClass:"ellipsis",attrs:{span:e.isShowParent?18:24,title:n.title}},[e._v(e._s(n.title))]),t("a-col",{staticClass:"ellipsis",staticStyle:{color:"#ccc","font-size":"12px"},attrs:{span:e.isShowParent?6:0,title:e.getNameBy(e.tmpSearchOption,n.pkey)}},[e._v(e._s(e.getNameBy(e.tmpSearchOption,n.pkey)))])],1)],1)})),1)],1):e._e(),e.isSearch?t("a-divider",{staticStyle:{margin:"8px 0"}}):e._e(),t("div",{staticClass:"tree-search-tree"},[t("a-spin",{staticClass:"spin",attrs:{spinning:e.fetching}}),e.lazy?t("a-tree",e._b({ref:"treeRef",attrs:{blockNode:!0,multiple:e.multiple,checkedKeys:e.treeCheckedKeys,checkable:e.checkable,selectable:e.selectable,expandedKeys:e.treeExpandedKeys,selectedKeys:e.treeSelectedKeys,loadedKeys:e.treeLoadedKeys,"tree-data":e.treeData,loadData:e.handleLoadLazyData},on:{select:e.onSelectTree,check:e.onCheckTree,expand:e.onExpandTree,load:e.onLazyLoad,rightClick:e.oRightClick},scopedSlots:e._u([{key:"title",fn:function(n){return[t("span",{attrs:{id:"".concat(e.treeType,"_").concat(n.key)}},[e._v(e._s(n.title))]),e._t("action",null,{action:n})]}}],null,!0)},"a-tree",e.$attrs,!1)):t("a-tree",e._b({ref:"treeRef",attrs:{blockNode:!0,checkable:e.checkable,selectable:e.selectable,multiple:e.multiple,checkedKeys:e.treeCheckedKeys,expandedKeys:e.treeExpandedKeys,selectedKeys:e.treeSelectedKeys,"tree-data":e.treeData,replaceFields:e.replaceFields},on:{select:e.onSelectTree,check:e.onCheckTree,expand:e.onExpandTree},scopedSlots:e._u([{key:"title",fn:function(n){return[t("span",{attrs:{id:"".concat(e.treeType,"_").concat(n.key)}},[e._v(e._s(n.title))]),e._t("action",null,{action:n})]}}],null,!0)},"a-tree",e.$attrs,!1)),e.fetching||e.treeData&&(!Array.isArray(e.treeData)||0!==e.treeData.length)?e._e():t("a-empty",{staticClass:"spin"})],1)],2)},d=[],p=n(632),f=n(142),y={inheritAttrs:!1,name:"SelectTree",components:(r={},o(r,f.Select.name,f.Select),o(r,f.Row.name,f.Row),o(r,f.Col.name,f.Col),o(r,f.Divider.name,f.Divider),o(r,f.Spin.name,f.Spin),o(r,f.Empty.name,f.Empty),o(r,f.Tree.name,f.Tree),r),props:{treeType:{type:String,default:"st"},selectedKeys:{type:Array,default:null},checkedKeys:{type:Array,default:null},expandedKeys:{type:Array,default:null},lazy:{type:Boolean,default:!0},selectable:{type:Boolean,default:!0},checkable:{type:Boolean,default:!1},searchPadding:{type:String,default:"12px 12px 6px"},placeholder:{type:String,default:"请输入关键词筛选"},multiple:{type:Boolean,default:!1},join:{type:[String,Boolean],default:","},isShowParent:{type:Boolean,default:!1},replaceFields:{type:Object,default:function(){return{pkey:"pkey",title:"title",key:"key",children:"children"}}},search:{type:Boolean,default:!0},activeFirst:{type:Boolean,default:!1},beforeSelect:{type:Function,default:null},beforeCheck:{type:Function,default:null},initLevel:{type:Number,default:2},fetchData:{type:Function,required:!0},fetchDataById:{type:Function},fetchDataByName:{type:Function},valueField:{type:String,default:"key"},params:{type:Object,default:function(){return{}}}},data:function(){return this.onSelectSearch=(0,p.debounce)(this.onSelectSearch,500),{fetching:!1,selectedValue:void 0,treeCheckedKeys:[],treeSelectedKeys:[],treeExpandedKeys:[],treeLoadedKeys:[],treeData:[],selectOption:[],tmpSearchOption:[]}},computed:{isSearch:function(){return this.search&&(this.treeData||Array.isArray(this.treeData)&&0!==this.treeData.length)}},watch:{params:{handler:function(e,t){(0,p.isRefEqual)(e,t)||this.handleTreeData(e)},deep:!0,immediate:!0},checkedKeys:{handler:function(e){this.treeCheckedKeys=e},deep:!0,immediate:!0},selectedKeys:{handler:function(e){this.treeSelectedKeys=e},deep:!0,immediate:!0},expandedKeys:{handler:function(e){this.treeExpandedKeys=e},deep:!0,immediate:!0}},methods:{getNameBy:p.getNameBy,handleTreeData:function(e){var t=this;this.fetching=!0,this.treeLoadedKeys=[],this.treeExpandedKeys=[],this.treeData=[];try{this.fetchData(e).then(function(){var e=c(l().mark((function e(n){var r,a,i;return l().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=(0,p.cloneDeep)(n).filter((function(e){return!e.pkey}))[0],t.treeData=(0,p.listFormatTree)(n,t.replaceFields),a=n.map((function(e){return e.key})).filter((function(e){return e})),i=(t.selectedKeys||[]).filter((function(e){return!a.includes(e)})),Array.isArray(t.treeData)&&0!==t.treeData.length&&(t.treeExpandedKeys=[r.key],t.$emit("expand",t.treeExpandedKeys),t.activeFirst&&t.onSelectTreeFn(r.key)),e.t0=0!==i.length,!e.t0){e.next=8;break}return e.next=8,t.handleTreeByCode(i);case 8:Array.isArray(t.treeSelectedKeys)&&0!==t.treeSelectedKeys.length&&setTimeout((function(){t.onScrollIntoView(t.treeSelectedKeys[0])}),500);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).finally((function(){t.fetching=!1}))}catch(n){this.treeData=[]}},handleTreeByCode:function(e){var t=this;return c(l().mark((function n(){var r,c,o,u,d,f,y,h,m,v,x,b;return l().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=Array.isArray(e)?e:[e],t.fetching=!0,n.prev=2,!t.lazy){n.next=20;break}c=[],o=i(r);try{for(o.s();!(u=o.n()).done;)d=u.value,d&&c.push(t.fetchDataById(s(s({},t.params),{},{code:d})))}catch(l){o.e(l)}finally{o.f()}return n.next=9,Promise.all(c);case 9:if(f=n.sent,y=(0,p.treeFormatList)(t.treeData,t.replaceFields),h=(0,p.flattenDeep)(f),m=y.map((function(e){return e.key})).filter((function(e){return e})),v=h.filter((function(e){return!m.includes(e.key)})),x=v.map((function(e){return e.pkey})),b=(0,p.uniqueBy)(x),n.t0=0!==b.length,!n.t0){n.next=20;break}return n.next=20,t.handleLoadMore(b);case 20:r.forEach((function(e){var n=(0,p.getExpandedKeys)(t.treeData,e,t.replaceFields);t.treeExpandedKeys=Array.from(new Set([].concat(a(n),a(t.treeExpandedKeys))))})),n.next=25;break;case 23:n.prev=23,n.t1=n["catch"](2);case 25:t.fetching=!1;case 26:case"end":return n.stop()}}),n,null,[[2,23]])})))()},handleLoadMore:function(e){var t=this;return c(l().mark((function n(){var r,c,o,u,d,f,y,h;return l().wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.fetching=!0,r=[],c=i(e);try{for(c.s();!(o=c.n()).done;)u=o.value,u&&r.push(t.fetchData(s(s({},t.params),{},{code:u})))}catch(l){c.e(l)}finally{c.f()}return n.next=6,Promise.all(r);case 6:d=n.sent,f=(0,p.flattenDeep)(d),y=(0,p.treeFormatList)(t.treeData),h=(0,p.uniqueBy)([].concat(a(y),a(f))),t.treeData=(0,p.listFormatTree)(h,t.replaceFields),t.fetching=!1;case 11:case"end":return n.stop()}}),n)})))()},handleLoadLazyData:function(e){var t=this,n=e;return new Promise((function(e){n.dataRef.children?e():t.fetchData(s(s({},t.params),{},{code:n.dataRef.key})).then((function(r){var i=(0,p.uniqueBy)(r,"key");n.dataRef.children=a(i),t.treeData=a(t.treeData),e(i)})).finally((function(){t.fetching=!1}))}))},onSelectSearch:function(e){/^\s*$/.test(e)||(this.handlerSearch(e),this.$emit("search",e))},handlerSearch:function(e){var t=this;return c(l().mark((function n(){var r,a;return l().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.lazy){n.next=8;break}return n.next=3,t.fetchDataByName(s(s({},t.params),{},{name:e})).catch((function(e){}));case 3:r=n.sent,a=(0,p.uniqueBy)(r,"key"),t.tmpSearchOption=(0,p.cloneDeep)(a)||[],t.selectOption=a.filter((function(t){return String(null===t||void 0===t?void 0:t.title).indexOf(e)>-1})),n.next=9;break;case 8:t.selectOption=(0,p.filterList)(t.treeData,(function(t){return String(null===t||void 0===t?void 0:t.title).indexOf(e)>-1}),t.replaceFields);case 9:case"end":return n.stop()}}),n)})))()},handleReturnValue:function(e){return Array.isArray(e)&&this.multiple?e:Array.isArray(e)&&0!==e.length?e[0]:Array.isArray(e)&&0===e.length?this.multiple?e:null:e},onSelectChange:function(e){var t=this;return c(l().mark((function n(){var r,i,c,o,s,u,d,f;return l().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=Array.isArray(e)?e:[e],c=(0,p.cloneDeep)(t.selectOption).filter((function(e){return i.includes(e.key)})),!t.lazy){n.next=7;break}if(o=(0,p.treeFormatList)(t.treeData,t.replaceFields),s=o.map((function(e){return e.key})).filter((function(e){return e})),u=t.tmpSearchOption.filter((function(e){return!s.includes(e.key)})),d=u.map((function(e){return e.pkey})),n.t0=0!==d.length,!n.t0){n.next=7;break}return n.next=7,t.handleLoadMore(d);case 7:f=(0,p.getExpandedKeys)(t.treeData,Array.isArray(e)&&0!==e.length?e[0]:e,t.replaceFields),t.multiple?!t.treeSelectedKeys.includes(i)&&(r=t.treeSelectedKeys).push.apply(r,a(i)):t.treeSelectedKeys=i,Object.assign(t,{selectedValue:i,treeExpandedKeys:f,selectOption:c,fetching:!1}),t.onSelectTreeFn(e);case 9:case"end":return n.stop()}}),n)})))()},onExpandTree:function(e,t){this.treeExpandedKeys=Array.isArray(e)?e:[e],this.$emit("expand",this.treeExpandedKeys,t)},onSelectTreeFn:function(e){var t=this;return c(l().mark((function n(){var r,i,c,o,s,u,d,f,y;return l().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=Array.isArray(e)?e:[e],i=Array.isArray(e)&&0!==e.length?e[0]:e,c=(0,p.treeFormatList)(t.treeData,t.replaceFields),o=c.map((function(e){return e.key})).filter((function(e){return e})),o.includes(i)){n.next=11;break}return n.next=4,t.fetchDataById({code:i});case 4:return s=n.sent,n.next=7,(0,p.uniqueBy)([].concat(a(c),a(s)));case 7:return u=n.sent,n.next=10,(0,p.listFormatTree)(u);case 10:t.treeData=n.sent;case 11:d=(0,p.getNodeBy)(t.treeData,i),f=(0,p.getExpandedKeys)(t.treeData,i),y=Array.from(new Set(t.multiple?[].concat(a(t.treeSelectedKeys),a(r)):r)),t.expandedKeys=[].concat(a(t.expandedKeys),a(f)),t.onSelectTree(y,{event:"select",selected:!0,node:{dataRef:d}});case 13:case"end":return n.stop()}}),n)})))()},onScrollIntoView:function(e){var t=this;this.$nextTick((function(){var n,r,a=document.querySelector(".select-picker-modal");a?null===(n=document.querySelector(".select-picker-modal #".concat(t.treeType,"_").concat(e)))||void 0===n||n.scrollIntoView({behavior:"smooth",block:"center"}):null===(r=document.getElementById("".concat(t.treeType,"_").concat(e)))||void 0===r||r.scrollIntoView({behavior:"smooth",block:"center"})}))},onSelectTree:function(e,t){var n=this;return c(l().mark((function r(){var a,i,c,o,s,u,d,f;return l().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.t0=n.beforeSelect,!r.t0){r.next=4;break}return r.next=4,n.beforeSelect(e,t);case 4:a=Array.isArray(e)?e:[e],i=t.node.dataRef.key,Object.assign(n,{treeSelectedKeys:a}),c=(0,p.uniqueBy)((0,p.filterList)(n.treeData,(function(e){return n.treeSelectedKeys.includes(e.key)}),n.replaceFields)),o=[],n.join&&(o=c.map((function(e){var t={};for(var r in e)r&&(t[r]=(0,p.getSelectedBy)(n.treeData,i,r,n.replaceFields).join("string"===typeof n.join?n.join:","));return t}))),s=c.map((function(e){return e[n.valueField]})),u=n.handleReturnValue(s),d=n.handleReturnValue(c),f=n.handleReturnValue(o),n.$emit("select",{treeSelectedKeys:u,selectOption:d,joinSelectOption:f,treeData:(0,p.cloneDeep)(n.treeData)},t),Array.isArray(n.selectedValue)&&0!==n.selectedValue.length&&n.selectedValue[0]!==i&&(n.selectedValue=void 0,n.selectOption=[]),n.onScrollIntoView(i);case 11:case"end":return r.stop()}}),r)})))()},onCheckTree:function(e,t){var n=this;return c(l().mark((function r(){var a,i,c,o;return l().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.t0=n.beforeCheck,!r.t0){r.next=4;break}return r.next=4,n.beforeCheck(e,t);case 4:a=Array.isArray(e)?e:[e],i=t.node.dataRef.key,Object.assign(n,{treeCheckedKeys:a}),c=(0,p.uniqueBy)((0,p.filterList)(n.treeData,(function(e){return n.treeCheckedKeys.includes(e.key)}),n.replaceFields)),o=c.map((function(e){return e[n.valueField]})),n.$emit("check",{treeCheckedKeys:o,checkOption:c,treeData:(0,p.cloneDeep)(n.treeData)},t),Array.isArray(n.selectedValue)&&0!==n.selectedValue.length&&n.selectedValue[0]!==i&&(n.selectedValue=void 0,n.selectOption=[]),n.onScrollIntoView(i);case 8:case"end":return r.stop()}}),r)})))()},oRightClick:function(e){this.$emit("rightClick",e)},onLazyLoad:function(e){this.treeLoadedKeys=e}}},h=y,m=n(483),v=(0,m.Z)(h,u,d,!1,null,null,null),x=v.exports,b=n(51);x.install=function(e,t){(0,b.Qb)(e,t);var n=(0,b.H_)(t);e.component(n+x.name,x)};var S=x},632:function(e){e.exports=n("6ea6")},142:function(e){e.exports=n("f23d")}},u={};function d(e){var n=u[e];if(void 0!==n)return n.exports;var r=u[e]={exports:{}};return t[e](r,r.exports,d),r.exports}!function(){d.d=function(e,t){for(var n in t)d.o(t,n)&&!d.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}();var p={};!function(){var e;d.d(p,{default:function(){return k}});var t=function(){var e=this,t=e._self._c;return t("div",{staticClass:"select-picker"},[t("a-input-group",{staticClass:"picker-wrapper",attrs:{compact:""}},[t("a-select",{staticClass:"picker-wrapper-select",staticStyle:{width:"200px"},attrs:{value:e.selectedValue,"show-search":"","allow-clear":e.allowClear,placeholder:e.placeholder,mode:e.multiple?"multiple":"default",disabled:e.disabled,"show-arrow":!1,"filter-option":!1,maxTagCount:e.maxTagCount,"default-active-first-option":!1,"not-found-content":e.fetching?void 0:null},on:{search:e.onSelectSearch,change:e.onChange}},[e.fetching?t("a-spin",{attrs:{slot:"notFoundContent",size:"small"},slot:"notFoundContent"}):e._e(),e._l(e.selectOption,(function(n){return t("a-select-option",{key:n[e.valueField],attrs:{title:"".concat(n.title),value:n[e.valueField]}},[e._v(" "+e._s(n.title)+" ")])}))],2),t("div",{staticClass:"picker-btn-wrapper"},[t("a-button",{staticClass:"picker-wrapper-btn",attrs:{icon:"more",disabled:e.disabled},on:{click:e.onOpenModal}})],1)],1),t("a-modal",{attrs:{wrapClassName:"select-picker-modal",title:e.title,visible:e.visible,width:e.widthed,height:e.height,bodyStyle:{height:parseInt(e.height,10)-108+"px"},top:e.top,centered:e.centered,keyboard:!1,"mask-closable":!1},on:{cancel:e.onCancel,ok:e.onOk}},[e.visible?t("SelectTree",{ref:"SelectTree",staticClass:"select-picker-tree",attrs:{lazy:e.lazy,searchPadding:e.searchPadding,join:e.join,search:e.search,treeType:e.treeType,initLevel:e.initLevel,multiple:e.multiple,selectedKeys:e.selectedKeys,expandedKeys:e.expandedKeys,fetchData:e.fetchData,fetchDataById:e.fetchDataById,fetchDataByName:e.fetchDataByName,replaceFields:e.replaceFields,valueField:e.valueField,isShowParent:e.isShowParent,params:e.params},on:{select:e.onSelectTreeData}}):e._e(),Array.isArray(e.selectedKeys)&&e.multiple?t("a-divider",{staticStyle:{height:"100%"},attrs:{type:"vertical"}}):e._e(),Array.isArray(e.selectedKeys)&&e.multiple?t("div",{staticClass:"select-picker-wrap"},[t("div",{staticStyle:{height:"30px","line-height":"30px","font-size":"12px","text-align":"right"}},[e._v(" 已选择："),t("strong",[e._v(e._s(e.selectedKeys.length))]),e._v("项 ")]),t("div",{staticClass:"select-picker-list"},[e._l(e.treeSelectOption,(function(n){return t("div",{key:n.key},[t("a-tag",{key:n.key,attrs:{color:"blue",closable:!0,size:"large"},on:{close:function(t){return e.onRemoveOption(n.key)}}},[e._v(e._s(n.title))])],1)})),!e.selectedKeys||Array.isArray(e.selectedKeys)&&0===e.selectedKeys.length?t("a-empty",{staticClass:"spin"}):e._e()],2)]):e._e()],1)],1)},n=[],u=d(657),f=d(142),y=d(632),h={name:"SelectPicker",components:(e={SelectTree:u["default"]},o(e,f.Modal.name,f.Modal),o(e,f.Tag.name,f.Tag),o(e,f.Input.name,f.Input),o(e,f.Button.name,f.Button),o(e,f.Select.name,f.Select),o(e,f.Row.name,f.Row),o(e,f.Col.name,f.Col),o(e,f.Divider.name,f.Divider),o(e,f.Spin.name,f.Spin),o(e,f.Empty.name,f.Empty),o(e,f.Tree.name,f.Tree),e),model:{prop:"value",event:"change"},props:{value:{type:[String,Array],default:null},treeType:{type:String,default:"sp"},maxTagCount:{type:Number,default:1},placeholder:{type:String,default:"请选择关键词搜索"},lazy:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},searchPadding:{type:String,default:"6px 0"},isShowParent:{type:Boolean,default:!0},allowClear:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},title:{type:String,default:"选择器"},width:{type:[String,Number],default:"425px"},height:{type:[String,Number],default:"370px"},top:{type:[String,Number],default:"100px"},centered:{type:Boolean,default:!1},join:{type:[String,Boolean],default:!1},search:{type:Boolean,default:!0},initLevel:{type:Number,default:2},replaceFields:{type:Object,default:function(){return{pkey:"pkey",title:"title",key:"key",children:"children"}}},beforeOk:{type:Function,default:null},valueField:{type:String,default:"key"},fetchData:{type:Function,required:!0},fetchDataById:{type:Function},fetchDataByName:{type:Function},params:{type:Object,default:function(){return{}}}},data:function(){return this.onSelectSearch=(0,y.debounce)(this.onSelectSearch,300),{visible:!1,fetching:!1,treeData:[],selectedValue:[],expandedKeys:[],selectOption:[],joinSelectOption:[],selectedKeys:[],treeSelectOption:[]}},computed:{widthed:function(){var e=String(this.width).match(/[a-z]+|[^a-z]+/gi),t=r(e,2),n=t[0],a=t[1];return this.multiple?Number(n)+140+a:this.width}},watch:{value:{handler:function(e,t){(0,y.isRefEqual)(e,t)||this.handleListByCode(e)},deep:!0,immediate:!0}},methods:{handleTreeByName:function(e){var t=this;return c(l().mark((function n(){var r,i,c;return l().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.fetching=!0,n.prev=1,!t.lazy){n.next=10;break}return n.next=5,t.fetchDataByName(s(s({},t.params),{},{name:e}),e);case 5:r=n.sent,i=(0,y.filterList)(r,(function(t){return String(null===t||void 0===t?void 0:t.title).indexOf(e)>-1}),t.replaceFields),t.selectOption=(0,y.uniqueBy)([].concat(a(t.selectOption),a(i)),"key"),n.next=14;break;case 10:return n.next=12,t.fetchData(s({},t.params));case 12:c=n.sent,t.treeData=(0,y.listFormatTree)(c,t.replaceFields),t.selectOption=(0,y.filterList)(c,(function(t){return String(null===t||void 0===t?void 0:t.title).indexOf(e)>-1}),t.replaceFields);case 14:n.next=18;break;case 16:n.prev=16,n.t0=n["catch"](1);case 18:t.fetching=!1;case 19:case"end":return n.stop()}}),n,null,[[1,16]])})))()},handleListByCode:function(e){var t=this;return c(l().mark((function n(){var r,c,o,u,d,p,f,h,m,v;return l().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=[],!e){n.next=25;break}if(r=Array.isArray(e)?e:[e],t.fetching=!0,n.prev=3,!t.lazy){n.next=16;break}c=[],o=i(r);try{for(o.s();!(u=o.n()).done;)d=u.value,d&&c.push(t.fetchDataById(s(s({},t.params),{},{code:d}),e))}catch(l){o.e(l)}finally{o.f()}return n.next=10,Promise.all(c);case 10:p=n.sent,f=(0,y.flattenDeep)(p),h=(0,y.filterList)(f,(function(e){return r.includes(e.key)}),t.replaceFields),t.selectOption=(0,y.uniqueBy)(h),t.treeSelectOption=(0,y.cloneDeep)(t.selectOption),n.next=21;break;case 16:return n.next=18,t.fetchData(s({},t.params));case 18:m=n.sent,v=(0,y.uniqueBy)(m),t.treeData=(0,y.listFormatTree)(v,t.replaceFields),t.selectOption=(0,y.filterList)(v,(function(t){return String(null===t||void 0===t?void 0:t.key).indexOf(e)>-1}),t.replaceFields);case 21:n.next=25;break;case 23:n.prev=23,n.t0=n["catch"](3);case 25:t.selectedValue=a(r),t.selectedKeys=a(r),t.fetching=!1;case 26:case"end":return n.stop()}}),n,null,[[3,23]])})))()},handleReturnValue:function(e){return Array.isArray(e)&&this.multiple?e:Array.isArray(e)&&0!==e.length?e[0]:Array.isArray(e)&&0===e.length?this.multiple?e:null:e},onSelectSearch:function(e){/^\s*$/.test(e)||this.handleTreeByName(e)},onChange:function(e,t){var n=this;if(this.join){var r=this.selectOption.map((function(e){var t={};for(var r in e)r&&(t[r]=(0,y.getSelectedBy)(n.treeData,e.key,r,n.replaceFields).join("string"===typeof n.join?n.join:","));return t}));Object.assign(this,{joinSelectOption:r})}this.$emit("change",e,t)},onOpenModal:function(){this.visible=!0},onScrollIntoView:function(e){var t=this;this.$nextTick((function(){t.$ref.SelectTree.onScrollIntoView(e)}))},onSelectTreeData:function(e){var t=e.treeSelectedKeys,n=e.treeData,r=e.selectOption,a=e.joinSelectOption;Array.isArray(t)?this.selectedKeys=t:this.$set(this.selectedKeys,"0",t),Array.isArray(r)?this.treeSelectOption=r:this.$set(this.treeSelectOption,"0",r),Object.assign(this,{joinSelectOption:a,treeData:n})},onRemoveOption:function(e){this.selectedKeys=this.selectedKeys.filter((function(t){return t!==e})),this.treeSelectOption=this.treeSelectOption.filter((function(t){return t.key!==e})),this.onScrollIntoView(e)},onOk:function(){var e=this;if(null===this.selectedKeys||Array.isArray(this.selectedKeys)&&0===this.selectedKeys.length)return this.$message.info("请先选择单位");Object.assign(this,{selectedValue:this.selectedKeys,selectOption:this.treeSelectOption}),this.$nextTick(c(l().mark((function t(){var n,r;return l().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.handleReturnValue(e.selectOption),r=e.handleReturnValue(e.selectedValue),t.t0=e.beforeOk&&"function"===typeof e.beforeOk,!t.t0){t.next=5;break}return t.next=5,e.beforeOk({selectedValue:r,selectOption:n,joinSelectOption:e.joinSelectOption,treeData:e.treeData});case 5:e.visible=!1,e.$emit("change",r,n),e.$emit("ok",{selectedValue:r,selectOption:n,joinSelectOption:e.joinSelectOption,treeData:e.treeData});case 8:case"end":return t.stop()}}),t)}))))},onCancel:function(){this.visible=!1},onRefreshTree:function(e){this.$ref.SelectTree&&this.$ref.SelectTree.handleTreeData(e)}}},m=h,v=d(483),x=(0,v.Z)(m,t,n,!1,null,null,null),b=x.exports,S=d(51);b.install=function(e,t){(0,S.Qb)(e,t);var n=(0,S.H_)(t);e.component(n+b.name,b)};var k=b}(),e.exports=p["default"]}()},9523:function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},"9b42":function(e,t,n){function r(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],l=!0,c=!1;try{for(n=n.call(e);!(l=(r=n.next()).done);l=!0)if(i.push(r.value),t&&i.length===t)break}catch(o){c=!0,a=o}finally{try{l||null==n["return"]||n["return"]()}finally{if(c)throw a}}return i}}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},c135:function(e,t){function n(e){if(Array.isArray(e))return e}e.exports=n,e.exports.__esModule=!0,e.exports["default"]=e.exports},c240:function(e,t,n){function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n("d9e2"),e.exports=r,e.exports.__esModule=!0,e.exports["default"]=e.exports},c973:function(e,t,n){function r(e,t,n,r,a,i,l){try{var c=e[i](l),o=c.value}catch(s){return void n(s)}c.done?t(o):Promise.resolve(o).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var l=e.apply(t,n);function c(e){r(l,a,i,c,o,"next",e)}function o(e){r(l,a,i,c,o,"throw",e)}c(void 0)}))}}n("d3b7"),e.exports=a,e.exports.__esModule=!0,e.exports["default"]=e.exports},ded3:function(e,t,n){n("b64b"),n("a4d3"),n("4de4"),n("d3b7"),n("e439"),n("159b"),n("dbb4");var r=n("9523");function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}e.exports=i,e.exports.__esModule=!0,e.exports["default"]=e.exports}}]);
//# sourceMappingURL=chunk-8d1feef0.7b49c815.js.map