(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e69f6aa"],{4736:function(e,t,a){},ac8e:function(e,t,a){"use strict";a("4736")},c5ed:function(e,t,a){"use strict";a.d(t,"b",(function(){return l["a"]})),a.d(t,"c",(function(){return m})),a.d(t,"a",(function(){return C}));var i=a("24f1"),r=a("9d27"),l=a("6486"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("TreeSearch",e._g(e._b({ref:"org",attrs:{lazy:e.lazy,join:e.join,search:e.search,activeFirst:e.activeFirst,initLevel:e.initLevel,fetchData:e.fetchGetTree,fetchDataById:e.fetchGetTreeById,fetchDataByName:e.fetchGetTreeByName,replaceFields:e.replaceFields,valueField:e.valueField,isShowParent:e.isShowParent},on:{select:e.onSelectTreeData}},"TreeSearch",e.$attrs,!1),e.$listeners),[a("template",{slot:"title"},[e._t("title")],2)],2)},o=[],s=a("5530"),c=(a("a9e3"),a("d3b7"),a("ac16"),a("f8c9"),a("b0c0"),a("f2be")),d={inheritAttrs:!1,name:"OrgTree",components:{TreeSearch:i["a"]},props:{baseUrl:{type:String,default:"/dts/bim"},treeApi:{type:String,default:"/q/cmTOrgMain/getCmTOrgMainTreeDataList/v1"},treeApiById:{type:String,default:"/q/cmTOrgMain/getCmTOrgMainTreeParentByOrgUniqueCode/v1"},treeApiByName:{type:String,default:"/q/cmTOrgMain/getCmTOrgMainTreeParentByOrgName/v1"},placeholder:{type:String,default:"请选择关键词搜索"},multiple:{type:Boolean,default:!1},isShowParent:{type:Boolean,default:!1},activeFirst:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},initLevel:{type:[Number,null],default:2},limitLevel:{type:[Number,String,null],default:null},replaceFields:{type:Object,default:function(){return{pkey:"pkey",title:"title",key:"key",children:"children"}}},valueField:{type:String,default:"key"},join:{type:Boolean,default:!1},search:{type:Boolean,default:!0},lazy:{type:Boolean,default:!0}},data:function(){return{otherParams:{}}},methods:{fetchGetTree:function(e){var t=this;return new Promise((function(a,i){var r=null===e||void 0===e?void 0:e.code;r&&Reflect.deleteProperty(e,"code"),$ec.http.send(t.baseUrl+t.treeApi,Object(s["a"])(Object(s["a"])({orgLevelNum:t.limitLevel,orgUniqueCode:r},e),t.otherParams)).then((function(e){var i=e.rows,r=Object(c["g"])(i,t.replaceFields);a(r)})).catch((function(e){i(e)})).finally((function(){console.log("finally")}))}))},fetchGetTreeById:function(e){var t=this;return new Promise((function(a,i){var r=null===e||void 0===e?void 0:e.code;r&&Reflect.deleteProperty(e,"code"),$ec.http.send(t.baseUrl+t.treeApiById,Object(s["a"])(Object(s["a"])({orgLevelNum:t.limitLevel,orgUniqueCode:r},e),t.otherParams)).then((function(e){var i=e.rows,r=Object(c["g"])(i,t.replaceFields);a(r)})).catch((function(e){i(e)})).finally((function(){console.log("finally")}))}))},fetchGetTreeByName:function(e){var t=this;return new Promise((function(a,i){var r=null===e||void 0===e?void 0:e.name;r&&Reflect.deleteProperty(e,"name"),$ec.http.send(t.baseUrl+t.treeApiByName,Object(s["a"])(Object(s["a"])({orgLevelNum:t.limitLevel,orgName:r},e),t.otherParams)).then((function(e){var i=e.rows,r=Object(c["g"])(i,t.replaceFields);a(r)})).catch((function(e){i(e)})).finally((function(){console.log("finally")}))}))},onSelectTreeData:function(e){var t=e.treeSelectedKeys,a=e.treeData,i=e.selectOption;Object.assign(this,{selectedKeys:t,selectOption:i,treeData:a})},onRefreshTree:function(e){this.otherParams=e,this.$refs.org&&this.$refs.org.handleTreeData(e)},onSelectTreeFn:function(e){this.$refs.org&&this.$refs.org.onSelectTreeFn(e)}}},u=d,p=a("2877"),f=Object(p["a"])(u,n,o,!1,null,null,null),m=f.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("SelectPicker",e._g(e._b({attrs:{title:e.title,value:e.value,search:e.search,"allow-clear":e.allowClear,placeholder:e.placeholder,multiple:e.multiple,disabled:e.disabled,valueField:e.valueField,fetchData:e.fetchGetTree,fetchDataById:e.fetchGetTreeById,fetchDataByName:e.fetchGetTreeByName}},"SelectPicker",e.$attrs,!1),e.$listeners))},h=[],g={inheritAttrs:!1,name:"DivisionPicker",components:{SelectPicker:r["a"]},model:{prop:"value",event:"change"},props:{value:{type:[String,Array,null],default:null},baseUrl:{type:String,default:"/dts/bim"},treeApi:{type:String,default:"/q/cmOmDivision/getCmOmDivisionTreeDataList/v1"},treeApiById:{type:String,default:"/q/cmOmDivision/getCmOmDivisionTreeParentById/v1"},treeApiByName:{type:String,default:"/q/cmOmDivision/getCmOmDivisionTreeParentByIName/v1"},placeholder:{type:String,default:"请选择关键词搜索"},multiple:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},title:{type:String,default:"行政区域选择器"},search:{type:Boolean,default:!0},width:{type:[String,Number],default:"425px"},height:{type:[String,Number],default:"370px"},top:{type:[String,Number],default:"100px"},centered:{type:Boolean,default:!1},initLevel:{type:[Number,null],default:2},limitLevel:{type:[Number,null],default:null},replaceFields:{type:Object,default:function(){return{pkey:"pkey",title:"title",key:"key",children:"children"}}},valueField:{type:String,default:"key"},join:{type:Boolean,default:!1},lazy:{type:Boolean,default:!0}},methods:{fetchGetTree:function(e){var t=this;return new Promise((function(a,i){var r=null===e||void 0===e?void 0:e.code;r&&Reflect.deleteProperty(e,"code"),$ec.http.send(t.baseUrl+t.treeApi,Object(s["a"])({divisionLevelNum:t.limitLevel,divisionUniqueCode:r},e)).then((function(e){var i=e.rows,r=Object(c["g"])(i,t.replaceFields);a(r)})).catch((function(e){i(e)})).finally((function(){console.log("finally")}))}))},fetchGetTreeById:function(e){var t=this;return new Promise((function(a,i){var r=null===e||void 0===e?void 0:e.code;r&&Reflect.deleteProperty(e,"code"),$ec.http.send(t.baseUrl+t.treeApiById,Object(s["a"])({divisionLevelNum:t.limitLevel,divisionUniqueCode:r},e)).then((function(e){var i=e.rows,r=Object(c["g"])(i,t.replaceFields);a(r)})).catch((function(e){i(e)})).finally((function(){console.log("finally")}))}))},fetchGetTreeByName:function(e){var t=this;return new Promise((function(a,i){var r=null===e||void 0===e?void 0:e.name;r&&Reflect.deleteProperty(e,"name"),$ec.http.send(t.baseUrl+t.treeApiByName,Object(s["a"])({divisionLevelNum:t.limitLevel,divisionName:r},e)).then((function(e){var i=e.rows,r=Object(c["g"])(i,t.replaceFields);a(r)})).catch((function(e){i(e)})).finally((function(){console.log("finally")}))}))}}},v=g,b=Object(p["a"])(v,y,h,!1,null,null,null),C=b.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("TreeSearch",e._g(e._b({ref:"division",attrs:{lazy:e.lazy,join:e.join,search:e.search,activeFirst:e.activeFirst,initLevel:e.initLevel,fetchData:e.fetchGetTree,fetchDataById:e.fetchGetTreeById,fetchDataByName:e.fetchGetTreeByName,replaceFields:e.replaceFields,valueField:e.valueField,isShowParent:e.isShowParent},on:{select:e.onSelectTreeData}},"TreeSearch",e.$attrs,!1),e.$listeners),[a("template",{slot:"title"},[e._t("title")],2)],2)},w=[],T={inheritAttrs:!1,name:"DivisionTree",components:{TreeSearch:i["a"]},props:{baseUrl:{type:String,default:"/dts/bim"},treeApi:{type:String,default:"/q/cmOmDivision/getCmOmDivisionTreeDataList/v1"},treeApiById:{type:String,default:"/q/cmOmDivision/getCmOmDivisionTreeParentById/v1"},treeApiByName:{type:String,default:"/q/cmOmDivision/getCmOmDivisionTreeParentByIName/v1"},placeholder:{type:String,default:"请选择关键词搜索"},multiple:{type:Boolean,default:!1},isShowParent:{type:Boolean,default:!0},activeFirst:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},initLevel:{type:[Number,null],default:2},limitLevel:{type:[Number,String,null],default:null},replaceFields:{type:Object,default:function(){return{pkey:"pkey",title:"title",key:"key",children:"children"}}},valueField:{type:String,default:"key"},join:{type:Boolean,default:!1},search:{type:Boolean,default:!0},lazy:{type:Boolean,default:!0}},data:function(){return{otherParams:{}}},methods:{fetchGetTree:function(e){var t=this;return new Promise((function(a,i){var r=null===e||void 0===e?void 0:e.code;r&&Reflect.deleteProperty(e,"code"),$ec.http.send(t.baseUrl+t.treeApi,Object(s["a"])(Object(s["a"])({divisionLevelNum:t.limitLevel,divisionUniqueCode:r},e),t.otherParams)).then((function(e){var i=e.rows,r=Object(c["g"])(i,t.replaceFields);a(r)})).catch((function(e){i(e)})).finally((function(){console.log("finally")}))}))},fetchGetTreeById:function(e){var t=this;return new Promise((function(a,i){var r=null===e||void 0===e?void 0:e.code;r&&Reflect.deleteProperty(e,"code"),$ec.http.send(t.baseUrl+t.treeApiById,Object(s["a"])(Object(s["a"])({divisionLevelNum:t.limitLevel,divisionUniqueCode:r},e),t.otherParams)).then((function(e){var i=e.rows,r=Object(c["g"])(i,t.replaceFields);a(r)})).catch((function(e){i(e)})).finally((function(){console.log("finally")}))}))},fetchGetTreeByName:function(e){var t=this;return new Promise((function(a,i){var r=null===e||void 0===e?void 0:e.name;r&&Reflect.deleteProperty(e,"name"),$ec.http.send(t.baseUrl+t.treeApiByName,Object(s["a"])(Object(s["a"])({divisionLevelNum:t.limitLevel,divisionName:r},e),t.otherParams)).then((function(e){var i=e.rows,r=Object(c["g"])(i,t.replaceFields);a(r)})).catch((function(e){i(e)})).finally((function(){console.log("finally")}))}))},onSelectTreeData:function(e){var t=e.treeSelectedKeys,a=e.treeData,i=e.selectOption;Object.assign(this,{selectedKeys:t,selectOption:i,treeData:a})},onRefreshTree:function(e){this.otherParams=e,this.$refs.division&&this.$refs.division.handleTreeData(e)},onSelectTreeFn:function(e){this.$refs.division&&this.$refs.division.onSelectTreeFn(e)}}},q=T,I=Object(p["a"])(q,O,w,!1,null,null,null);I.exports},f6ed:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ec-container",{attrs:{height:"100%"}},[a("ec-container-header",[a("ec-panel-item",[a("ec-panel-item-left",[a("ec-header",{attrs:{title:"历史陈烟码包分配领用",icon:"onetomany","color-code":"008"}})],1)],1)],1),a("ec-container-body",{attrs:{auto:!1}},[a("ec-v-layout",[a("ec-v-item",[a("ec-panel",[a("ec-panel-body",[a("a-descriptions",{attrs:{bordered:"",column:4}},[a("a-descriptions-item",{attrs:{label:"调拨年度"}},[e._v(" "+e._s(e.queryItems.tranYear)+" ")]),a("a-descriptions-item",{attrs:{label:"烟叶类型"}},[e._v(" "+e._s(e.getLabelName(e.queryItems.leafTypeCode,this.leafTypeList,"leafTypeCode","leafTypeName")))]),a("a-descriptions-item",{attrs:{label:"烟叶形态"}},[e._v(" "+e._s(e.getLabelName(e.queryItems.leafFormCode,this.leafFormList,"leafFormCode","leafFormName"))+" ")]),a("a-descriptions-item",{attrs:{label:"申请码包数量"}},[e._v(" "+e._s(e.totalData.realApplyNum)+" ")]),a("a-descriptions-item",{attrs:{label:"申请量"}},[e._v(" "+e._s(e.totalData.applyNum)+" ")]),a("a-descriptions-item",{attrs:{label:"分配码包数量"}}),a("a-descriptions-item",{attrs:{label:"领用码包数量"}}),a("a-descriptions-item",{attrs:{label:""}})],1)],1)],1),a("ec-panel",[a("ec-panel-toolbar",[a("ec-query-panel",{attrs:{colCount:e.colCount,defaultFold:!0},on:{query:e.onQuery,reset:e.onReset},scopedSlots:e._u([{key:"inner",fn:function(){return[a("ec-query-item",{attrs:{label:"烟叶类型"}},[a("ec-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择"},on:{select:e.leafTypeChange},model:{value:e.queryItems.leafTypeCode,callback:function(t){e.$set(e.queryItems,"leafTypeCode",t)},expression:"queryItems.leafTypeCode"}},e._l(e.leafTypeList,(function(t){return a("a-select-option",{key:t.leafTypeCode,attrs:{value:t.leafTypeCode}},[e._v(" "+e._s(t.leafTypeName)+" ")])})),1)],1),a("ec-query-item",{attrs:{label:"烟叶形态"}},[a("ec-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择"},model:{value:e.queryItems.leafFormCode,callback:function(t){e.$set(e.queryItems,"leafFormCode",t)},expression:"queryItems.leafFormCode"}},e._l(e.leafFormList,(function(t){return a("a-select-option",{key:t.leafFormCode,attrs:{value:t.leafFormCode}},[e._v(e._s(t.leafFormName))])})),1)],1),a("ec-query-item",{attrs:{label:"物料"}},[a("ec-select",{attrs:{placeholder:"请选择"},model:{value:e.queryItems.materialCode,callback:function(t){e.$set(e.queryItems,"materialCode",t)},expression:"queryItems.materialCode"}},e._l(e.materialList,(function(t){return a("a-select-option",{key:t.enumKey},[e._v(" "+e._s(t.name)+" ")])})),1)],1)]},proxy:!0}])},[a("ec-query-item",{attrs:{label:"调拨年度"}},[a("a-input-number",{attrs:{placeholder:"请输入"},model:{value:e.queryItems.tranYear,callback:function(t){e.$set(e.queryItems,"tranYear",t)},expression:"queryItems.tranYear"}})],1),a("ec-query-item",{attrs:{label:"领用单位"}},[a("org-picker",{attrs:{placeholder:"请选择"},on:{ok:e.selectOrg},model:{value:e.queryItems.applyOrgCodes,callback:function(t){e.$set(e.queryItems,"applyOrgCodes",t)},expression:"queryItems.applyOrgCodes"}})],1),a("ec-query-item",{attrs:{label:"仓库"}},[a("a-select",{attrs:{allowClear:"",placeholder:"请选择"},model:{value:e.queryItems.storeCode,callback:function(t){e.$set(e.queryItems,"storeCode",t)},expression:"queryItems.storeCode"}},e._l(e.storesList,(function(t){return a("a-select-option",{key:t.storeCode,attrs:{value:t.storeCode}},[e._v(e._s(t.storeName))])})),1)],1)],1),a("ec-divider")],1),a("ec-panel-body",{attrs:{height:"100%"}},[a("ec-v-layout",[a("ec-v-item",[a("ec-panel-item",[a("ec-panel-item-left"),a("ec-panel-item-right",[a("a-space",{attrs:{size:15}},[a("span",[e._v("重量单位："),a("ec-select",{staticStyle:{width:"150px"},attrs:{showSearch:"",allowClear:"",placeholder:"请选择"},model:{value:e.weightUnit,callback:function(t){e.weightUnit=t},expression:"weightUnit"}},e._l(e.weightUnitList,(function(t){return a("a-select-option",{key:t.weightUnitCd,attrs:{value:t.weightUnitCd}},[e._v(" "+e._s(t.weightUnitName)+" ")])})),1)],1)])],1)],1)],1),a("ec-v-item"),a("ec-v-item",[a("ec-table",{ref:"table",attrs:{border:"",pagination:Object.keys(e.orgInfo).length?e.pagination:{},data:e.tableData,loading:e.loading,"highlight-current-row":""},on:{"page-action":e.handlePagination}},[a("ec-table-col",{attrs:{type:"checkbox",width:"50",align:"center"}}),a("ec-table-col",{attrs:{title:"序号",type:"seq",width:"70",align:"center"}}),a("ec-table-col",{attrs:{field:"tranYear",title:"调拨年度",align:"left",width:"200"}}),a("ec-table-col",{attrs:{field:"applyOrgName",title:"领用单位",align:"left",width:"200"}}),a("ec-table-col",{attrs:{field:"storeName",title:"仓库",align:"left",width:"200"}}),a("ec-table-col",{attrs:{field:"leafTypeName",title:"烟叶类型",align:"left","min-width":"150"}}),a("ec-table-col",{attrs:{field:"leafFormName",title:"烟叶形态",align:"left","min-width":"150"}}),a("ec-table-col",{attrs:{field:"applyNum",title:"申请码包数",align:"left","min-width":"150"}}),a("ec-table-col",{attrs:{field:"applyNum",title:"申请量",align:"left","min-width":"150"}}),a("ec-table-col",{attrs:{title:"操作",fixed:"right",scopedSlots:"",align:"center","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.onDetails(i)}}},[e._v("详细")])]}}])})],1)],1)],1)],1)],1)],1)],1),a("ec-drawer",{attrs:{title:"详细","is-confirm":!0,size:"small",visible:e.visible},on:{close:function(t){e.visible=!1}}},[a("ec-container",{attrs:{height:"auto",fixed:"top bottom","color-code":"007"}},[a("ec-container-body",[a("ec-panel",{staticClass:"prodDrawer",attrs:{"color-code":"001",title:"分配明细"}},[a("ec-panel-item",[a("ec-panel-item-right",[a("a-space",{staticStyle:{"margin-right":"15px"},attrs:{size:15}},[e._v("调拨年度: "+e._s(e.queryItems.tranYear))]),a("a-space",{attrs:{size:15}},[e._v("重量单位: "+e._s("担"))])],1)],1),a("ec-panel-item",[a("ec-table",{ref:"table",attrs:{border:"",data:e.detailsTableData,loading:e.detailsLoading}},[a("ec-table-col",{attrs:{title:"序号",type:"seq",width:"70",align:"center"}}),a("ec-table-col",{attrs:{"min-width":"150",field:"leafTypeName",title:"烟叶类型",align:"left"}}),a("ec-table-col",{attrs:{"min-width":"150",field:"leafFormName",title:"烟叶形态",align:"left"}}),a("ec-table-col",{attrs:{"min-width":"150",field:"packType",title:"包装类型",align:"left"}}),a("ec-table-col",{attrs:{field:"spec",title:"规格 (KG/件)",align:"left","min-width":"150"}}),a("ec-table-col",{attrs:{field:"allotNum",title:"分配码包数量",align:"left","min-width":"150"}}),a("ec-table-col",{attrs:{field:"collectNum",title:"领用码包数量",align:"left","min-width":"150"}})],1)],1)],1)],1),a("ec-container-footer",{attrs:{fixed:""}},[a("a-space",[a("a-button",{on:{click:function(t){e.visible=!1}}},[e._v("关闭")])],1)],1)],1)],1)],1)],1)},r=[],l=a("5530"),n=a("c7eb"),o=a("1da1"),s=(a("7db0"),a("d3b7"),a("a15b"),a("e9c4"),a("c5ed")),c={name:"inventoryReceive",components:{OrgPicker:s["b"]},computed:{_api:function(){return this.$apis.pcm.penatly.apply}},data:function(){return{visible:!1,applyOrgCode:"",materialList:[],topInfo:{},orgInfo:{},storesList:[],objectData:{},leafFormList:[],busiYear:"",detailsTableData:[],detailsLoading:!1,queryItems:{applyOrgCodes:[],storeCode:"",tranYear:void 0,leafTypeCode:void 0,busiYear:void 0,leafFormCode:void 0},weightUnit:50,areaUnit:1,colCount:5,nowYear:"",loading:!1,leafTypeCd:"",leafTypeList:[],oldDataRow:[],oldTotalData:[],totalData:{},isNullData:[],workSubmitState:[{id:"",name:"全部"},{id:"0",name:"未提交"},{id:"1",name:"已提交"}],workAuditState:[{id:"",name:"全部"},{id:"0",name:"未审批"},{id:"1",name:"处长审批"},{id:"2",name:"副总经理审批"},{id:"3",name:"完成"}],workOptType:[{id:"",name:"全部"},{id:"0",name:"调减"},{id:"1",name:"调增"}],weightUnitList:[{weightUnitCd:50,weightUnitName:"担",isSelected:!1}],orgCodeList:[],pagination:{pageNumber:1,pageSize:10,total:0},tableData:[]}},created:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$router.history.current.query.appCode,e.appCode=a||"CM",t.next=4,e.getCurrentUserOrg();case 4:return t.next=6,e.handleGetLeafTypeList();case 6:return t.next=8,e.leafTypeChange(e.queryItems.leafTypeCode);case 8:return t.next=10,e.onQuery();case 10:case"end":return t.stop()}}),t)})))()},methods:{selectOrg:function(e){var t=e.selectOption;console.log(this.queryItems.applyOrgCode),this.getCmTStoreByOrgCode(this.queryItems.applyOrgCode),this.queryItems.orgName=t.length?t[0].title:""},getLabelName:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(!e||!t.length)return"";var r=t.find((function(t){return t[a]===e}));return r[i]||""},onDetails:function(e){var t=this;this.detailsLoading=!0,this.queryItems.applyOrgCode=this.queryItems.applyOrgCodes?this.queryItems.applyOrgCodes.join(""):"";var a=Object(l["a"])({applyType:"INVENTORY_CP",barcodeApplyId:e.barcodeApplyId},this.queryItems);this._api.queryDetail(a).then((function(e){t.detailsTableData=e||[]})).finally((function(){t.detailsLoading=!1})),this.visible=!0},handlePagination:function(e,t){var a=this;return Object(o["a"])(Object(n["a"])().mark((function i(){return Object(n["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:a.pagination.pageNumber=e,a.pagination.pageSize=t,a.onQuery();case 3:case"end":return i.stop()}}),i)})))()},getCurrentUserOrg:function(){var e=this;this._api.getCurrentUserOrg({dataState:1}).then((function(t){e.orgInfo=t||{},e.queryItems.applyOrgCodes=t?[t.orgUniqueCode]:void 0,e.queryItems.applyOrgCode=e.queryItems.applyOrgCodes?e.queryItems.applyOrgCodes.join(""):"",e.getCmTStoreByOrgCode(e.queryItems.applyOrgCode)}))},getCmTStoreByOrgCode:function(){var e=arguments,t=this;return Object(o["a"])(Object(n["a"])().mark((function a(){var i;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:i=e.length>0&&void 0!==e[0]?e[0]:void 0,t._api.getCmTStoreByOrgCode({dataState:1,orgCode:i}).then((function(e){t.storesList=e.rows||[]})).finally((function(){t.storesList.unshift({storeName:"全部",storeCode:""}),t.queryItems.storeCode=""}));case 2:case"end":return a.stop()}}),a)})))()},handleGetLeafTypeList:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var a,i;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.queryItems.tranYear=(new Date).getFullYear(),null!==(a=e.leafTypeList)&&void 0!==a&&a.length){t.next=7;break}return t.next=4,e.$apis.bpm.executionEnter.queryLeafType({});case 4:i=t.sent,e.leafTypeList=(null===i||void 0===i?void 0:i.rows)||[],e.leafTypeList.some((function(t){return"烤烟"===t.leafTypeName&&(e.leafTypeCd=t.leafTypeCode,e.queryItems.leafTypeCode=t.leafTypeCode,!0)}));case 7:case"end":return t.stop()}}),t)})))()},leafTypeChange:function(e){var t=this;return Object(o["a"])(Object(n["a"])().mark((function a(){return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t._api.spinnerLeafForm({leafTypeCodes:[e]}).then((function(e){t.leafFormList=null===e||void 0===e?void 0:e.rows,t.leafFormList.some((function(e){return"片烟"===e.leafFormName&&(t.queryItems.leafFormCode=e.leafFormCode,console.log(t.queryItems.leafFormCode),!0)}))}));case 2:case"end":return a.stop()}}),a)})))()},onQuery:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loading=!0,e.queryItems.applyOrgCode=e.queryItems.applyOrgCodes?e.queryItems.applyOrgCodes.join(""):"",a=Object(l["a"])({applyType:"INVENTORY_CP",pageNo:e.pagination.pageNumber,pageSize:e.pagination.pageSize},e.queryItems),console.log(a),e._api.pageConfCp(a).then((function(t){var a=t.rows||[];e.pagination.total=t.totalRows,e.oldDataRow=JSON.parse(JSON.stringify(a)),e.tableData=a,console.log("列表的数据：".concat(JSON.stringify(e.tableData)))})).finally((function(){e.loading=!1,e.selectedRows=[]})),e._api.queryHead(a).then((function(t){e.topInfo=Object(l["a"])({},t)}));case 6:case"end":return t.stop()}}),t)})))()},onExport:function(){},onReset:function(){var e=this;return Object(o["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.leafTypeList.some((function(t){return"烤烟"===t.leafTypeName&&(e.leafTypeCd=t.leafTypeCode,a=t.leafTypeCode,!0)})),e.queryItems={applyOrgCodes:e.orgInfo?[e.orgInfo.orgUniqueCode]:void 0,applyOrgCode:e.queryItems.applyOrgCodes?e.queryItems.applyOrgCodes.join(""):"",tranYear:(new Date).getFullYear(),leafTypeCode:a,storeCode:"",leafFormCode:void 0},console.log(e.orgInfo),e.queryItems.leafTypeCode=e.leafTypeList.length?e.leafTypeList[0].leafTypeCode:"",t.next=6,e.leafTypeChange(e.queryItems.leafTypeCode);case 6:e.queryItems.orgName="",e.$refs.table.pageAction(1);case 8:case"end":return t.stop()}}),t)})))()}}},d=c,u=(a("ac8e"),a("2877")),p=Object(u["a"])(d,i,r,!1,null,"661f175c",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-3e69f6aa.10f7639b.js.map