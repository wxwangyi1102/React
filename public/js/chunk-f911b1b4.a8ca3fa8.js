(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f911b1b4"],{"1b8e":function(e,t,a){},"3a04":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ec-container",{attrs:{height:"100%"}},[a("ec-container-header",[a("ec-panel-item",[a("ec-panel-item-left",[a("ec-header",{attrs:{title:"收购计划量登记",icon:"onetomany","color-code":"008"}})],1)],1)],1),a("ec-container-body",[a("ec-panel",{attrs:{auto:!1}},[a("ec-panel-toolbar",[a("ec-query-panel",{on:{query:e.onQuery,reset:e.onReset}},[a("ec-query-item",{attrs:{label:"烟叶类型"}},[a("ec-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择"},model:{value:e.queryItems.leafTypeCode,callback:function(t){e.$set(e.queryItems,"leafTypeCode",t)},expression:"queryItems.leafTypeCode"}},e._l(e.leafTypeList,(function(t){return a("a-select-option",{key:t.leafTypeCode},[e._v(" "+e._s(t.leafTypeName)+" ")])})),1)],1)],1),a("ec-divider")],1),a("ec-panel-header",[a("ec-panel-item",[a("ec-panel-item-left",[a("a-button",{attrs:{type:"primary"},on:{click:e.onEdit}},[e._v("编辑")]),a("a-button",{on:{click:e.onSubmit}},[e._v("提交")]),a("a-checkbox",{staticStyle:{"margin-left":"10px"},on:{change:e.onQuery},model:{value:e.queryItems.submitStateFlag,callback:function(t){e.$set(e.queryItems,"submitStateFlag",t)},expression:"queryItems.submitStateFlag"}},[e._v(" 可提交 ")])],1),a("ec-panel-item-right",[a("a-space",{attrs:{size:15}},[a("span",[e._v("种植收购年度："+e._s(e.queryItems.busiYear)+"年")]),a("span",[e._v("重量单位："),a("ec-select",{staticStyle:{width:"150px"},attrs:{showSearch:"",allowClear:"",placeholder:"请选择"},on:{select:function(t){return e.handleUnitParse()}},model:{value:e.weightUnit,callback:function(t){e.weightUnit=t},expression:"weightUnit"}},e._l(e.weightUnitList,(function(t){return a("a-select-option",{key:t.weightUnitCd},[e._v(" "+e._s(t.weightUnitName)+" ")])})),1)],1),a("span",[e._v("面积单位："),a("ec-select",{staticStyle:{width:"150px"},attrs:{showSearch:"",allowClear:"",placeholder:"请选择"},on:{select:function(t){return e.handleUnitParse()}},model:{value:e.areaUnit,callback:function(t){e.areaUnit=t},expression:"areaUnit"}},e._l(e.areaUnitList,(function(t){return a("a-select-option",{key:t.areaUnitCd},[e._v(" "+e._s(t.areaUnitName)+" ")])})),1)],1)])],1)],1)],1),a("ec-panel-body",[a("ec-table",{ref:"table",attrs:{border:"",height:"100%",auto:!1,data:e.tableData.rows,loading:e.loading,"row-select":"","show-footer":"","footer-method":e.footerMethod},on:{"checkbox-all":e.selectAllEvent,"checkbox-change":e.selectRowChange}},[a("ec-table-col",{attrs:{type:"checkbox",width:"50",align:"center"}}),a("ec-table-col",{attrs:{type:"seq",title:"序号",width:"70",align:"center"}}),a("ec-table-col",{attrs:{field:"orgName",title:"单位名称",align:"left","min-width":"200"}}),a("ec-table-colgroup",{attrs:{title:"收购计划执行量"}},[a("ec-table-col",{attrs:{field:"planTotalWeight",title:"合计",align:"center",width:"150"}}),a("ec-table-col",{attrs:{field:"planInnerWeight",title:"国内",align:"center",width:"150"}}),a("ec-table-col",{attrs:{field:"planExportWeight",title:"出口备货",align:"center",width:"150"}})],1),a("ec-table-col",{attrs:{field:"planPlantArea",title:"种植面积",align:"right",width:"150"}}),a("ec-table-col",{attrs:{field:"remark",title:"办理依据",align:"left",width:"150"}}),a("ec-table-col",{attrs:{field:"submitState",title:"提交状态",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return["1"===n.submitState?a("div",[a("span",[e._v("已提交")])]):a("div",[a("span",[e._v("未提交")])])]}}])})],1)],1)],1),a("execution-enter-form",{ref:"ExecutionEnterForm",on:{onQuery:e.onQuery}})],1)],1)},i=[],o=a("c7eb"),r=a("1da1"),l=(a("e9c4"),a("d3b7"),a("7db0"),a("159b"),a("b680"),a("a9e3"),a("d81d"),a("caad"),a("99af"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ec-drawer",{staticClass:"ec-draw-form",attrs:{title:"收购计划量登记",visible:e.visible,size:"large","is-confirm":!0},on:{close:e.onclose}},[a("ec-container",{attrs:{height:"100%",fixed:"top bottom","color-code":"007"}},[a("ec-container-header",[a("ec-panel-item",[a("ec-panel-item-left",[a("ec-header",{attrs:{title:"收购计划量登记",icon:"onetomany","color-code":"008"}})],1),a("ec-panel-item-right",[a("div",{staticClass:"year"},[e._v(" 种植收购年度："+e._s(e.nowYear)+"年;正在编辑的烟叶类型："+e._s(e.leafTypeName)+"；单位："+e._s(e.weightUnitName)+"、"+e._s(e.areaUnitName)+" ")])])],1)],1),a("ec-container-body",[a("ec-panel",{attrs:{"color-code":"001",auto:!1}},[a("ec-panel-header",[a("ec-v-item",[a("ec-panel-item",[a("ec-panel-item-left",[a("a-button",{attrs:{type:"primary"},on:{click:e.handleFileInit}},[e._v("附件管理")])],1)],1),a("a-modal",{attrs:{title:"附件",width:"800px"},model:{value:e.visibleFile,callback:function(t){e.visibleFile=t},expression:"visibleFile"}},[a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:e.handleFileCandle}},[e._v(" 取消 ")])],1),a("ec-panel-body",[a("ec-v-layout",[a("ec-v-item",[a("ec-panel-item",[a("ec-panel-item-left",[a("a-upload",{attrs:{"file-list":e.totalFileList,disabled:e.uploading},on:{change:e.transformFile}},[a("a-button",{attrs:{type:"primary",loading:e.uploading}},[a("a-icon",{attrs:{type:"upload"}}),e._v(" 上传 ")],1)],1)],1)],1)],1),a("ec-v-item",[a("ec-table",{ref:"table",attrs:{data:e.fileList,loading:e.loading,"row-select":""}},[a("ec-table-col",{attrs:{type:"seq",title:"序号",width:"70",align:"center"}}),a("ec-table-col",{attrs:{field:"fileName",title:"附件名称",align:"left","min-width":"150"}}),a("ec-table-col",{attrs:{field:"createrName",title:"上传人",align:"left","min-width":"150"}}),a("ec-table-col",{attrs:{field:"createTime",title:"上传时间",align:"left","min-width":"150"}}),a("ec-table-col",{attrs:{title:"操作",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.onDownload(n)}}},[e._v("下载")]),a("a-button",{attrs:{type:"link"},on:{click:function(t){return e.onDelete(n)}}},[e._v("删除")])]}}])})],1)],1)],1)],1)],2)],1)],1),a("ec-panel-body",[a("ec-table",{ref:"xTable",staticClass:"my-xtable-antd",attrs:{border:"","show-overflow":"","keep-source":"",height:"100%",auto:!1,loading:e.saving,data:e.tableData,"row-select":"","edit-config":{trigger:"click",mode:"row",showStatus:!0},"edit-rules":e.validRules,"show-footer":"","footer-method":e.footerMethod}},[a("ec-table-col",{attrs:{title:"序号",type:"seq",width:"70",align:"center"}}),a("ec-table-col",{attrs:{field:"orgName",title:"单位名称",align:"left","min-width":"150"}}),a("ec-table-colgroup",{attrs:{title:"收购计划执行量"}},[a("ec-table-col",{attrs:{field:"planTotalWeight",title:"合计",width:"150",align:"center","edit-render":{}},scopedSlots:e._u([{key:"edit",fn:function(t){var n=t.row;return["1"!==n.releaseState?a("a-input-number",{attrs:{min:0,max:1e5,precision:2},on:{blur:function(t){return e.handlePlanInnerWeight(n,"planTotalWeight")}},model:{value:n.planTotalWeight,callback:function(t){e.$set(n,"planTotalWeight",t)},expression:"row.planTotalWeight"}}):[e._v(" "+e._s(n.planTotalWeight)+" ")]]}}])}),a("ec-table-col",{attrs:{field:"planInnerWeight",title:"国内",align:"center",width:"150"}}),a("ec-table-col",{attrs:{field:"planExportWeight",title:"出口备货",width:"150",align:"center","edit-render":{}},scopedSlots:e._u([{key:"edit",fn:function(t){var n=t.row;return["1"!==n.releaseState?a("a-input-number",{attrs:{min:0,max:1e5,precision:2},on:{blur:function(t){return e.handlePlanInnerWeight(n,"planExportWeight")}},model:{value:n.planExportWeight,callback:function(t){e.$set(n,"planExportWeight",t)},expression:"row.planExportWeight"}}):[e._v(e._s(n.planExportWeight))]]}}])})],1),a("ec-table-col",{attrs:{field:"planPlantArea",title:"种植面积",width:"150","edit-render":{},align:"right"},scopedSlots:e._u([{key:"edit",fn:function(t){var n=t.row;return["1"!==n.releaseState?a("a-input-number",{attrs:{min:0,max:1e5,precision:2},on:{blur:function(t){return e.handlePlanInnerWeight(n,"planPlantArea")}},model:{value:n.planPlantArea,callback:function(t){e.$set(n,"planPlantArea",t)},expression:"row.planPlantArea"}}):[e._v(e._s(n.planPlantArea))]]}}])}),a("ec-table-col",{attrs:{field:"remark",title:"办理依据",width:"150",maxLength:64,"edit-render":{},align:"left"},scopedSlots:e._u([{key:"edit",fn:function(t){var n=t.row;return["1"!==n.releaseState?a("a-input",{on:{blur:function(t){return e.handleRemark(n)}},model:{value:n.remark,callback:function(t){e.$set(n,"remark",t)},expression:"row.remark"}}):[e._v(e._s(n.remark))]]}}])}),a("ec-table-col",{attrs:{field:"submitState",title:"提交状态",align:"left",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return["1"===n.submitState?a("div",[a("span",[e._v("已提交")])]):a("div",[a("span",[e._v("未提交")])])]}}])})],1)],1)],1)],1),a("ec-container-footer",{attrs:{fixed:""}},[a("a-space",[a("a-button",{attrs:{type:"primary",loading:e.saving},on:{click:function(t){return e.onSave("save")}}},[e._v("保存")]),a("a-button",{on:{click:e.onclose}},[e._v("取消")])],1)],1)],1)],1)}),s=[],c=(a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("2ef0")),d=a.n(c),u={name:"ExecutionEnterFormManage",data:function(){return{props:{visibleFile:{type:Boolean,default:!1}},visibleFile:!1,tableData:[],data:{},leafTypeName:"",leafTypeCode:"",weightUnitName:"",areaUnitName:"",nowYear:"",visible:!1,isEditor:!1,saving:!1,loading:!1,uploading:!1,isShowSaveAndAdd:!0,ruleForm:{},leafTypeCd:"",leafTypeList:[],fileList:[],totalFileList:[],saveTableData:[],fileUid:"",orgCode:"",validRules:{planTotalWeight:[{required:!0,message:"请输入合计"}],planExportWeight:[{required:!0,message:"请输入出口备货"}],planPlantArea:[{required:!0,message:"请输入种植面积"}]}}},methods:{onDelete:function(e){var t=this,a=this.$createElement;this.$confirm({title:"是否执行该操作?",content:function(){return a("div",{style:"color:red;"},["是否确认删除选中的数据，确认请点击'确认'按钮，取消点击'取消'按钮。"])},onOk:function(){var a={asAttachFileId:e.asAttachFileId};t.$apis.bpm.executionEnter.deleteFile(a).then((function(e){e.result?t.$message.success("删除成功"):t.$message.error("删除失败"),t.handleFileInit("query")})).catch((function(e){console.log(e),t.$message.error("删除失败")}))}})},onDownload:function(e){var t=this,a={asAttachFileId:e.asAttachFileId};this.$apis.bpm.executionEnter.downFile(a).then((function(t){if(t){var a=document.createElement("a");a.style.display="none",a.href=t.url,a.download=e.fileName,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(a.href),document.body.removeChild(a)}})).catch((function(e){console.log(e),t.$message.error("下载失败")}))},handleFileInit:function(e){var t=this;this.fileList=[],"query"!==e&&(this.visibleFile=!this.visibleFile);var a={busiYear:this.nowYear,moduleCode:"PIM001001001"};this.loading=!0,this.$apis.bpm.executionEnter.queryFile(a).then((function(e){t.fileList=null===e||void 0===e?void 0:e.rows})).catch((function(e){console.log(e)})).finally((function(){t.loading=!1}))},handleFileCandle:function(){this.visibleFile=!this.visibleFile,this.fileList=[]},transformFile:function(e){var t=this;return Object(r["a"])(Object(o["a"])().mark((function a(){var n,i,r;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t,!n._data.uploading){a.next=3;break}return a.abrupt("return");case 3:if(i=e.file.uid,!i||n._data.fileUid===i){a.next=17;break}return t._data.fileUid=i,r=new FormData,r.append("file",e.file.originFileObj),r.append("moduleCode","PIM001001001"),r.append("moduleName","执行量录入"),r.append("busiYear",n._data.nowYear),r.append("orgCode",n._data.orgCode),n._data.uploading=!0,a.next=15,$ec.http.post("/dts/plm/c/file/uploadPcTBuPlanOprRecordRegister/v1",r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){e.result?t.$message.success("上传成功"):t.$message.error("上传失败")})).catch((function(e){console.log(e)})).finally((function(){n._data.uploading=!1}));case 15:return a.next=17,n.handleFileInit("query");case 17:case"end":return a.stop()}}),a)})))()},handleRemark:function(e){var t=e;this.saveTableData.forEach((function(e){if(e.orgCode===t.orgCode){var a=e;a.remark=t.remark}}))},handleAaData:function(){var e=this,t=this.saveTableData;t.forEach((function(t){var a=t;a.aaPlanTotalWeight=a.planTotalWeight,a.aaPlanExportWeight=a.planExportWeight,a.aaPlanInnerWeight=a.planInnerWeight,a.aaPlanPlantArea=a.planPlantArea,a.leafTypeCode=e.leafTypeCode,a.busiYear=e.nowYear}))},onSave:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var a,n,i,r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$refs.xTable,t.next=3,a.validate(!0).catch((function(e){return e}));case 3:n=t.sent,n?e.$message.error("校验不通过！"):(i=e.saveTableData,e.handleAaData(),e.saving=!0,r={leafTypeCode:e.leafTypeCode,busiYear:e.nowYear,pcTBuPlanOprRecordList:d.a.cloneDeep(i)},console.log(r),e.$apis.bpm.executionEnter.save(r).then((function(t){if(console.log(JSON.stringify(t)),t.result)e.saving=!1,e.$message.success("操作成功"),e.$emit("onQuery"),e.onclose();else{e.saving=!1;var a=(null===t||void 0===t?void 0:t.msg)||"操作失败";e.$message.error(a)}})).catch((function(t){console.log(t),e.saving=!1})));case 5:case"end":return t.stop()}}),t)})))()},show:function(e){this.visible=!0,this.data=e,this.leafTypeName=e.leafTypeObj.leafTypeName,this.leafTypeCode=e.leafTypeObj.leafTypeCode,this.weightUnitName=e.weightUnitObj.weightUnitName,this.weightUnit=e.weightUnitObj.weightUnitCd,this.areaUnitName=e.areaUnitObj.areaUnitName,this.areaUnit=e.areaUnitObj.areaUnitCd,this.nowYear=e.nowYear,this.orgCode=e.orgCode,this.handleInitEnterData()},handleInitEnterData:function(){var e=this;this.loading=!0;var t={leafTypeCode:this.leafTypeCode,busiYear:this.nowYear};this.$apis.bpm.executionEnter.queryEnter(t).then((function(t){e.loading=!1;var a=t.rows||[];e.saveTableData=d.a.cloneDeep(a),e.oldTableData=a.forEach((function(t){var a=t;a.leafTypeCode=e.leafTypeCode,e.handleDataParse(a)})),e.tableData=a})).catch((function(t){e.loading=!1,t?e.$message.error(t.message||"操作失败"):e.$message.error("操作失败")}))},handleDataParse:function(e){var t=e;t.planTotalWeight=(t.planTotalWeight/this.weightUnit).toFixed(2),t.planInnerWeight=(t.planInnerWeight/this.weightUnit).toFixed(2),t.planExportWeight=(t.planExportWeight/this.weightUnit).toFixed(2),t.planPlantArea=(t.planPlantArea/this.areaUnit).toFixed(2)},handleBeforeSaveAdjustData:function(){var e=this,t=JSON.parse(JSON.stringify(this.tableData)),a=[];return t.forEach((function(t){var n=t;n.planTotalWeight=(n.planTotalWeight*e.weightUnit).toFixed(2),n.planInnerWeight=(n.planInnerWeight*e.weightUnit).toFixed(2),n.planExportWeight=(n.planExportWeight*e.weightUnit).toFixed(2),n.planPlantArea=(n.planPlantArea*e.areaUnit).toFixed(2),a.push(n)})),a},handlePlanInnerWeight:function(e,t){var a=this,n=e,i=Number(e.planTotalWeight)||0,o=Number(e.planExportWeight)||0;if(i<o){if(this.$message.warn("合计不能小于出口备货"),"planTotalWeight"===t)return void(n.planTotalWeight="");if("planExportWeight"===t)return void(n.planExportWeight="")}var r=(i-o).toFixed(2);n.planInnerWeight=r,this.saveTableData.forEach((function(i){if(i.orgCode===n.orgCode){var o=i;if("planPlantArea"===t)o[t]=(Number(e[t])*Number(a.areaUnit)).toFixed(2);else{o[t]=(Number(e[t])*Number(a.weightUnit)).toFixed(2);var r=Number(o.planTotalWeight)||0,l=Number(o.planExportWeight)||0,s=(r-l).toFixed(2);o.planInnerWeight=s}}}))},handleNoValue:function(e,t){var a=this,n=e,i=n[t];i||(n[t]="0.00"),this.oldTableData.forEach((function(i){if(i.planAmountId===n.planAmountId){var o=i;o[t]=(Number(e[t])*Number(a.weightUnit)).toFixed(2)}})),console.log("tableData:".concat(JSON.stringify(e))),console.log("oldTableData:".concat(JSON.stringify(this.oldTableData)))},sumNum:function(e,t){var a=0;return e.forEach((function(e){a+=Number(e[t])})),a.toFixed(2)},footerMethod:function(e){var t=this,a=e.columns,n=e.data;return[a.map((function(e,a){return 0===a?"合计":["planTotalWeight","planInnerWeight","planExportWeight","planPlantArea"].includes(e.property)?t.sumNum(n,e.property):null}))]},onclose:function(){this.tableData=[],this.visible=!1}}},p=u,h=(a("a85e"),a("2877")),f=Object(h["a"])(p,l,s,!1,null,"7d945fd6",null),g=f.exports,m={name:"ExecutionEnterManage",components:{ExecutionEnterForm:g},data:function(){return{queryItems:{leafTypeCode:"10",submitStateFlag:!0,busiYear:""},weightUnit:5e5,areaUnit:1e4,colCount:5,nowYear:"",loading:!1,leafTypeCd:"",leafTypeList:[{leafTypeCode:"10",leafTypeName:"烤烟"},{leafTypeCode:"20",leafTypeName:"晾晒烟(全部)"},{leafTypeCode:"2013",leafTypeName:"晾晒烟(雪茄烟叶)"}],oldDataRow:[],orgCode:"",weightUnitList:[{weightUnitCd:1,weightUnitName:"公斤",isSelected:!1},{weightUnitCd:50,weightUnitName:"担",isSelected:!1},{weightUnitCd:5e5,weightUnitName:"万担",isSelected:!1}],areaUnitList:[{areaUnitCd:1e4,areaUnitName:"万亩"},{areaUnitCd:1,areaUnitName:"亩"}],pagination:{pageNumber:1,pageSize:10,total:0},tableData:{rows:[]}}},created:function(){var e=this.$router.history.current.query.appCode;this.appCode=e||"CM"},mounted:function(){this.onQuery()},computed:{appConfig:function(){return this.$store.getters.getAppConfig}},methods:{onQuery:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var a,n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("你好：".concat(JSON.stringify(e.appConfig.bizCode))),t.next=3,e.handleGetLeafTypeList();case 3:e.loading=!0,a=e.queryItems.submitStateFlag,n={leafTypeCode:e.queryItems.leafTypeCode,submitState:a?"0":"",busiYear:e.queryItems.busiYear,auditState:a?"0":""},console.log(n),e.$apis.bpm.executionEnter.query(n).then((function(t){e.tableData=t;var a=e.tableData.rows;e.pagination.total=t.totalRows,e.oldDataRow=JSON.parse(JSON.stringify(a)),console.log("66666".concat(JSON.stringify(t))),e.handleUnitParse()})).catch((function(e){console.log(e)})).finally((function(){e.loading=!1,e.selectedRows=[]}));case 8:case"end":return t.stop()}}),t)})))()},onEdit:function(){var e=this,t=this.leafTypeList.find((function(t){return t.leafTypeCode===e.queryItems.leafTypeCode})),a=this.weightUnitList.find((function(t){return t.weightUnitCd===e.weightUnit})),n=this.areaUnitList.find((function(t){return t.areaUnitCd===e.areaUnit})),i={leafTypeObj:t,weightUnitObj:a,areaUnitObj:n,orgCode:this.orgCode,nowYear:this.queryItems.busiYear};this.$refs.ExecutionEnterForm.show(i)},onSubmit:function(){var e=this,t=this.$createElement;if(!this.selectedRows||this.selectedRows.length<=0)this.$message.error("请选择一条数据再提交");else{var a=this.selectedRows.find((function(e){return"1"===e.submitState&&"0"!==e.auditState}));console.log("--".concat(JSON.stringify(a))),a?this.$message.error("存在已提交数据，请勿重复提交"):(console.log(JSON.stringify(this.selectedRows)),this.$confirm({title:"是否执行该操作?",content:function(){return t("div",{style:"color:red;"},["是否确认提交选中的数据，确认请点击'确认'按钮，取消点击'取消'按钮。"])},onOk:function(){e.loading=!0;for(var t=[],a=0;a<e.selectedRows.length;a++)t.push(e.selectedRows[a].oprRecordId);e.$apis.bpm.executionEnter.submit({oprRecordIds:t}).then((function(t){console.log(JSON.stringify(t)),t.result?(e.loading=!1,e.$message.success("操作成功"),e.onQuery()):(e.loading=!1,e.$message.error("操作失败"))}))}}))}},onReset:function(){this.queryItems.leafTypeCode=this.leafTypeCd,this.queryItems.submitStateFlag=!0,this.selectedRows=[],this.$refs.table.pageAction(1)},handleUnitParse:function(){var e=this,t=[],a=JSON.parse(JSON.stringify(this.oldDataRow))||[];a.forEach((function(a){var n=a;n.planTotalWeight=(n.planTotalWeight/e.weightUnit).toFixed(2),n.planInnerWeight=(n.planInnerWeight/e.weightUnit).toFixed(2),n.planExportWeight=(n.planExportWeight/e.weightUnit).toFixed(2),n.planPlantArea=(n.planPlantArea/e.areaUnit).toFixed(2),t.push(n)})),console.log(t),this.tableData.rows=t},handleLeafTypeName:function(e){var t=this.leafTypeList.find((function(t){return t.leafTypeCode===e}));return null===t||void 0===t?void 0:t.leafTypeName},handlePagination:function(e,t){var a=this;return Object(r["a"])(Object(o["a"])().mark((function n(){return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a.pagination.pageNumber=e,a.pagination.pageSize=t,console.log(a.queryItems),n.next=5,a.handleGetLeafTypeList();case 5:case"end":return n.stop()}}),n)})))()},handleGetLeafTypeList:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var a,n,i,r,l;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==(a=e.leafTypeList)&&void 0!==a&&a.length){t.next=6;break}return t.next=3,e.$apis.bpm.executionEnter.queryLeafType({});case 3:n=t.sent,e.leafTypeList=(null===n||void 0===n?void 0:n.rows)||[],e.leafTypeList.some((function(t){return"烤烟"===t.leafTypeName&&(e.leafTypeCd=t.leafTypeCode,e.queryItems.leafTypeCode=t.leafTypeCode,!0)}));case 6:if(e.orgCode){t.next=13;break}return t.next=9,e.$apis.bim.curOrg.get({});case 9:i=t.sent,console.log("当前用户信息：".concat(JSON.stringify(i))),e.bizCode=null===i||void 0===i?void 0:i.bizCode,e.orgCode=null===i||void 0===i?void 0:i.orgUniqueCode;case 13:if(!(!e.queryItems.busiYear>0)){t.next=19;break}return r={bizCode:e.bizCode,appCode:e.appCode||"CM",yearTypeCode:"BIZ_YEAR"},t.next=17,e.$apis.bpm.executionEnter.getBuYear(r);case 17:l=t.sent,e.queryItems.busiYear=null===l||void 0===l?void 0:l.yearValue;case 19:case"end":return t.stop()}}),t)})))()},sumNum:function(e,t){var a=0;return e.forEach((function(e){a+=Number(e[t])})),a.toFixed(2)},footerMethod:function(e){var t=this,a=e.columns,n=e.data;return[a.map((function(e,a){return 0===a?"合计":["planTotalWeight","planInnerWeight","planExportWeight","planPlantArea"].includes(e.property)?t.sumNum(n,e.property):null}))]},selectAllEvent:function(e){var t=e.checked,a=e.records;console.log("".concat(t,"-选中所有records包含选中的所以对象----").concat(JSON.stringify(a))),this.selectedRows=a},selectRowChange:function(e){var t=e.checked,a=e.records;console.log("".concat(t,"-选择改变时会把records包含选中的所以对象----").concat(JSON.stringify(a))),this.selectedRows=a}}},b=m,v=(a("ee82"),Object(h["a"])(b,n,i,!1,null,"6cfdec50",null));t["default"]=v.exports},"7afe":function(e,t,a){},a85e:function(e,t,a){"use strict";a("1b8e")},ee82:function(e,t,a){"use strict";a("7afe")}}]);
//# sourceMappingURL=chunk-f911b1b4.a8ca3fa8.js.map