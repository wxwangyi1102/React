(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10f2fcfe"],{"30fb":function(e,t,a){"use strict";a("84e6")},"84e6":function(e,t,a){},"91ae":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ec-container",{attrs:{height:"100%"}},[a("ec-container-header",[a("ec-panel-item",[a("ec-panel-item-left",[a("ec-header",{attrs:{title:"进口烟到港码包申请",icon:"onetomany","color-code":"008"}})],1)],1)],1),a("ec-container-body",[a("ec-panel",[a("ec-panel-toolbar",{staticStyle:{overflow:"hidden"}},[a("ec-panel-item",[a("a-descriptions",{attrs:{bordered:"",column:4}},[a("a-descriptions-item",{attrs:{label:"调拨年度"}},[e._v(" "+e._s(e.curYear)+" ")]),a("a-descriptions-item",{attrs:{label:"烟叶类型"}},[e._v(" "+e._s(e.getLeafTypeName(e.leafTypeCodes))+" ")]),a("a-descriptions-item",{attrs:{label:"烟叶形态"}},[e._v(" "+e._s(e.getLeafFormName(e.leafFormCodes))+" ")]),a("a-descriptions-item",{attrs:{label:"国别"}},[e._v(" "+e._s(e.getConturyName(e.conturys))+" ")]),a("a-descriptions-item",{attrs:{label:"计划衔接量"}},[e._v(" "+e._s(e.top.planTotalWeight)+" ")]),a("a-descriptions-item",{attrs:{label:"剩余计划衔接量"}},[e._v(" "+e._s(e.top.leftWeight)+" ")]),a("a-descriptions-item",{attrs:{label:"申请码包数量"}},[e._v(" "+e._s(e.top.applyNum)+" ")]),a("a-descriptions-item",{attrs:{label:"申请量"}},[e._v(" "+e._s(e.top.applyWeight)+" ")])],1)],1),a("ec-panel-item",{staticStyle:{"margin-top":"10px"}},[a("ec-panel-toolbar",[a("ec-query-panel",{attrs:{defaultFold:"",layout:"horizontal",showFold:!0},on:{query:e.queryData,reset:e.onReset},scopedSlots:e._u([{key:"inner",fn:function(){return[a("ec-query-item",{attrs:{label:"国别"}},[a("ec-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择"},model:{value:e.conturys,callback:function(t){e.conturys=t},expression:"conturys"}},e._l(e.contury,(function(t){return a("a-select-option",{key:t.leafCountryName,attrs:{value:t.leafCountryCode}},[e._v(" "+e._s(t.leafCountryName)+" ")])})),1)],1),a("ec-query-item",{attrs:{label:"烤烟类型"}},[a("ec-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择"},model:{value:e.leafTypeCodes,callback:function(t){e.leafTypeCodes=t},expression:"leafTypeCodes"}},e._l(e.leafTypeCode,(function(t){return a("a-select-option",{key:t.leafTypeName,attrs:{value:t.leafTypeCode}},[e._v(" "+e._s(t.leafTypeName)+" ")])})),1)],1),a("ec-query-item",{attrs:{label:"烟叶形态"}},[a("ec-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择"},model:{value:e.leafFormCodes,callback:function(t){e.leafFormCodes=t},expression:"leafFormCodes"}},e._l(e.leafFormCode,(function(t){return a("a-select-option",{key:t.leafFormName,attrs:{value:t.leafFormCode}},[e._v(" "+e._s(t.leafFormName)+" ")])})),1)],1)]},proxy:!0}])},[a("ec-query-item",{attrs:{label:"调拨年度"}},[a("ec-select",{attrs:{showSearch:"",allowClear:"",placeholder:"请选择"},model:{value:e.curYear,callback:function(t){e.curYear=t},expression:"curYear"}},e._l(e.prodYear,(function(t){return a("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.name)+" ")])})),1)],1),a("ec-query-item",{attrs:{label:"申请日期"}},[a("a-date-picker",{attrs:{format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},model:{value:e.applyDate,callback:function(t){e.applyDate=t},expression:"applyDate"}})],1),a("ec-query-item",{attrs:{label:"需方单位"}},[a("OrgPicker",{attrs:{title:"选择单位",lazy:!1,search:!1,placeholder:"请输入需方单位"},model:{value:e.demandOrgCode,callback:function(t){e.demandOrgCode=t},expression:"demandOrgCode"}})],1)],1),a("ec-divider")],1)],1),a("a-form",{attrs:{"label-col":{span:22},"wrapper-col":{span:2}}},[a("a-form-item",{attrs:{label:"重量单位"}},[a("a-select",{attrs:{placeholder:"公斤"}},[a("a-select-option",{attrs:{value:"1"}},[e._v("公斤")]),a("a-select-option",{attrs:{value:"2"}},[e._v("担")])],1)],1)],1),a("ec-panel-item",[a("ec-table",{ref:"table",attrs:{border:"","show-footer":"",data:e.tableData,pagination:e.pagination},on:{"page-action":e.pageAction}},[a("ec-table-col",{attrs:{type:"seq",align:"center",width:"50",title:"序号"}}),a("ec-table-col",{attrs:{field:"tranYear",align:"center",title:"调拨年度"}}),a("ec-table-col",{attrs:{field:"applyWeight",align:"center",title:"申请日期"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.applyDate)+" ")]}}])}),a("ec-table-col",{attrs:{field:"barcodeApplyId",align:"center",title:"供方单位"}}),a("ec-table-col",{attrs:{field:"leafCountryCode",align:"center",title:"国别"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.getConturyName(a.leafCountryCode))+" ")]}}])}),a("ec-table-col",{attrs:{field:"leafTypeCode",align:"center",title:"烟叶类型"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.getLeafTypeName(a.leafTypeCode))+" ")]}}])}),a("ec-table-col",{attrs:{field:"leafFormCode",align:"center",title:"烟叶形态"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.getLeafFormName(a.leafFormCode))+" ")]}}])}),a("ec-table-col",{attrs:{field:"leafTypeCode",align:"center",title:"计划衔接量"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.planTotalWeight)+" ")]}}])}),a("ec-table-col",{attrs:{field:"modifyTime",align:"center",title:"剩余计划衔接量"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.leftWeight)+" ")]}}])}),a("ec-table-col",{attrs:{field:"packType",align:"center",title:"申请码包数"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.applyNum)+" ")]}}])}),a("ec-table-col",{attrs:{field:"spec",align:"center",title:"申请量"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.applyNum)+" ")]}}])})],1)],1)],1)],1)],1)],1)],1)},l=[],r=(a("4de4"),a("d3b7"),a("a15b"),a("fb6a"),a("6486")),n=a("9d27"),i={components:{OrgPicker:r["a"],SelectPicker:n["a"]},data:function(){return{top:{tranYear:"",leafTypeCode:"",leafFormCode:"",leafCountryCode:"",planTotalWeight:"",leftWeight:"",applyNum:"",applyWeight:""},conturys:"",listQuery:{applyOrgCd:void 0,mouldName:void 0,mouldType:void 0,pageSize:10,pageNo:1,total:0},applyDate:"",demandOrgCode:[],contury:[],leafTypeCodes:"",leafTypeCode:[],leafFormCode:[],leafFormCodes:"",tableData:[],curYear:(new Date).getFullYear(),pagination:{pageSize:10,pageNo:1,total:0}}},mounted:function(){var e=this;this.$apis.apm.wharf.queryCountr({}).then((function(t){e.contury=t.rows})),this.$apis.apm.wharf.queryType({}).then((function(t){e.leafTypeCode=t.rows})),this.$apis.apm.wharf.queryForm({}).then((function(t){e.leafFormCode=t.rows}))},methods:{getLeafTypeName:function(e){if(!e)return"";var t=this.leafTypeCode,a=t.filter((function(t){return t.leafTypeCode===e}));return a.length?a[0].leafTypeName:""},getLeafFormName:function(e){if(!e)return"";var t=this.leafFormCode,a=t.filter((function(t){return t.leafFormCode===e}));return a.length?a[0].leafFormName:""},getConturyName:function(e){if(!e)return"";var t=this.contury,a=t.filter((function(t){return t.leafCountryCode===e}));return console.log(a),a.length?a[0].leafCountryName:""},queryData:function(){this.$refs.table.pageAction(this.pagination.pageNo,this.pagination.pageSize)},onReset:function(){this.applyDate="",this.demandOrgCode=[],this.conturys="",this.leafTypeCodes="",this.leafFormCodes="",this.curYear=(new Date).getFullYear()},getTableData:function(){var e=this,t=this.leafTypeCodes,a=this.leafFormCodes,o=this.conturys,l=this.demandOrgCode,r=this.curYear,n=this.applyDate,i=l.length?l.slice().join(""):"",s={applyType:"IMPORT_CP",leafTypeCode:t,leafFormCode:a,contury:o,applyDate:n,tranYear:r,demandOrgCode:i};this.$apis.apm.wharf.query(s).then((function(t){e.tableData=t.rows,e.top.tranYear=t.tranYear,e.top.leafTypeCode=t.leafTypeCode,e.top.leafFormCode=t.leafFormCode,e.top.leafCountryCode=t.leafFormCode,e.top.planTotalWeight=t.planTotalWeight,e.top.leftWeight=t.leftWeight}))},pageAction:function(e,t){var a=this;this.pagination.pageSize=t,this.pagination.pageNo=e;var o=this.leafTypeCodes,l=this.leafFormCodes,r=this.conturys,n=this.demandOrgCode,i=this.curYear,s=this.applyDate,p=n.length?n.slice().join(""):"",c={applyType:"IMPORT_CP",leafTypeCode:o,leafFormCode:l,contury:r,applyDate:s,tranYear:i,demandOrgCode:p,pageNo:e,pageSize:t};this.$apis.apm.wharf.query(c).then((function(e){a.tableData=e.rows,a.pagination.total=e.totalRows||0})),this.$apis.apm.wharf.queryTop(c).then((function(e){a.top.tranYear=e.tranYear,a.top.leafTypeCode=e.leafTypeCode,a.top.leafFormCode=e.leafFormCode,a.top.leafCountryCode=e.leafFormCode,a.top.planTotalWeight=e.planTotalWeight,a.top.leftWeight=e.leftWeight,a.top.applyNum=e.applyNum,a.top.applyWeight=e.applyWeight}))},getfetchData:function(){var e=this;return new Promise((function(t){t(e.treeData)}))}},computed:{_api:function(){return this.$apis.packingSpec.apply},prodYear:function(){for(var e=(new Date).getFullYear(),t=[],a=0;a<10;a++)t.push({name:e-a,value:e-a});return t}},orgValueChange:function(){}},s=i,p=(a("30fb"),a("2877")),c=Object(p["a"])(s,o,l,!1,null,"af7fdd00",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-10f2fcfe.8a83627d.js.map