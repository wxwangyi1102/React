(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a4d873d"],{5397:function(e,t,a){},6459:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ec-container",{attrs:{height:"auto",title:"收购计划执行量参数设置",icon:"onetomany","color-code":"003"}},[a("ec-container-body",[a("ec-panel",[a("ec-panel-toolbar",[a("ec-query-panel",{on:{query:e.queryHandle,reset:e.resetHandle}},[[a("ec-query-item",{attrs:{label:"种植收购年度"}},[a("a-select",{attrs:{showSearch:"","allow-clear":"",placeholder:"2022"},on:{select:e.selectedStatusList},model:{value:e.statusVal,callback:function(t){e.statusVal=t},expression:"statusVal"}},e._l(e.statusList,(function(t){return a("a-select-option",{key:t.id},[e._v(" "+e._s(t.name)+" ")])})),1)],1)]],2),a("ec-divider")],1),a("ec-panel-body",[a("ec-v-layout",[a("ec-v-item",[a("ec-table",{ref:"xTable1",attrs:{"show-overflow":"",border:"",data:e.arr,height:"680"}},[a("ec-table-col",{attrs:{type:"seq",title:"序号",width:"50",align:"center"}}),a("ec-table-col",{attrs:{field:"orgName",title:"单位名称",width:"350",align:"center"}}),a("ec-table-col",{attrs:{title:"是否区分出口备货"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[0!=n.diffExportFlag?a("span",[e._v("否")]):a("span",[e._v("是")])]}}])}),a("ec-table-col",{attrs:{title:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("a-button",{attrs:{type:"link",disabled:0==n.diffExportFlag},on:{click:function(t){return e.Distinguish(n)}}},[e._v("区分")]),a("a-button",{attrs:{type:"link",disabled:1==n.diffExportFlag},on:{click:function(t){return e.Indistinguishable(n)}}},[e._v("不区分")])]}}])})],1)],1)],1)],1)],1)],1)],1)},r=[],o=a("c7eb"),i=a("1da1"),l=(a("d3b7"),{name:"AdminParameter",components:{},data:function(){return{disflag:!1,indisflag:!1,statusVal:void 0,statusList:[{name:"2022",id:0},{name:"停用",id:1}],params:{busiYear:2022},yearValue:null,tableData:[],rowsList:[],arr:[],orgUniqueCode:"",orgCode:""}},mounted:function(){this.OnQueryPcTBuPlanParam(),this.OnGetYearByOrgAndType()},methods:{init:function(){this.arr=[];for(var e=0;e<this.tableData.length;e++)this.orgUniqueCode=this.tableData[e].orgUniqueCode,this.arr.push({orgName:this.tableData[e].orgName,diffExportFlag:this.rowsList[0].diffExportFlag,orgCode:this.tableData[e].orgUniqueCode}),this.orgUniqueCode===this.orgCode&&(this.arr[e].diffExportFlag=1);console.log(211,this.arr)},Distinguish:function(e){var t=this;console.log(e),e.diffExportFlag=0;var a={buPlanParamId:e.buPlanParamId,orgCode:e.orgCode,diffExportFlag:e.diffExportFlag,busiYear:this.yearValue};this.$apis.parameter.parameter.updatePcTBuPlanParam(a).then((function(e){console.log(e),t.OnQueryPcTBuPlanParam()})).catch((function(e){console.log(e)})).finally((function(){}))},Indistinguishable:function(e){var t=this;console.log(e),e.diffExportFlag=1;var a={buPlanParamId:e.buPlanParamId,orgCode:e.orgCode,diffExportFlag:e.diffExportFlag,busiYear:this.yearValue};this.$apis.parameter.parameter.updatePcTBuPlanParam(a).then((function(e){console.log(e),t.OnQueryPcTBuPlanParam(),t.init()})).catch((function(e){console.log(e)})).finally((function(){}))},OnfindAllChildOrgList:function(){var e=this,t={busiYear:this.yearValue,orgTypeEk:"TOBACCO",orgLevelEk:"2",parentOrgUniqueCode:"11000001000000000000"};this.$apis.parameter.parameter.findAllChildOrgList(t).then((function(t){console.log(t),e.tableData=t.rows,console.log(e.tableData),e.init()})).catch((function(e){console.log(e)})).finally((function(){}))},OnGetYearByOrgAndType:function(){var e=this,t={orgCode:"11000001000000000000",yearTypeCode:"BU_YEAR",appCode:"CM"};this.$apis.parameter.parameter.getYearByOrgAndType(t).then((function(t){console.log(t),e.yearValue=t.yearValue,e.OnfindAllChildOrgList()})).catch((function(e){console.log(e)})).finally((function(){window.localStorage.setItem()}))},OnQueryPcTBuPlanParam:function(){var e=this;this.$apis.parameter.parameter.QueryPcTBuPlanParam(this.params).then((function(t){console.log(t),e.rowsList=t.rows;for(var a=0;a<e.rowsList.length;a++)e.orgCode=e.rowsList[a].orgCode})).catch((function(e){console.log(e)})).finally((function(){}))},queryHandle:function(){var e=this;this.$apis.parameter.parameter.QueryPcTBuPlanParam(this.params).then((function(t){console.log(t),e.rowsList=t.rows}))},resetHandle:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$apis.parameter.parameter.QueryPcTBuPlanParam(e.params).then((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))()},selectedStatusList:function(e){this.statusVal=e}}}),s=l,c=(a("ce04"),a("2877")),u=Object(c["a"])(s,n,r,!1,null,"b3ef0e04",null);t["default"]=u.exports},ce04:function(e,t,a){"use strict";a("5397")}}]);
//# sourceMappingURL=chunk-2a4d873d.e720fdc6.js.map