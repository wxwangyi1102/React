{"version":3,"sources":["webpack:///./src/views/pcm/process/apply/Index.vue?7ba8","webpack:///./src/views/pcm/process/apply/ApplyDetail.vue?c728","webpack:///src/views/pcm/process/apply/ApplyDetail.vue","webpack:///./src/views/pcm/process/apply/ApplyDetail.vue?6a7d","webpack:///./src/views/pcm/process/apply/ApplyDetail.vue","webpack:///src/views/pcm/process/apply/Index.vue","webpack:///./src/views/pcm/process/apply/Index.vue?10b0","webpack:///./src/views/pcm/process/apply/Index.vue","webpack:///./src/views/pcm/process/apply/Index.vue?5513","webpack:///./src/views/pcm/process/apply/ApplyDetail.vue?7800"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","_s","visibleTranYear","totalData","contTypeName","totalWeight","leftWeight","applyNum","applyWeight","on","$event","$refs","table","pageAction","onReset","scopedSlots","_u","key","fn","model","value","queryItems","callback","$$v","$set","expression","_l","leafTypeEk","leafTypeCode","leafTypeName","leafForm","leafFormCode","leafFormName","handleStore","storeObj","storeCode","storeName","proxy","contType","contTypeCode","onFetchBusinessOrgList","staticStyle","handleUnitParse","weightUnit","weightUnitCd","weightUnitName","ref","pagination","tableData","rows","loading","handlePagination","row","leafFormObj","_e","onDetail","staticRenderFns","staticClass","visible","onclose","tranYear","packTypeObj","enumKey","packType","name","components","data","submitStateFlag","busiYear","leafTypeCd","oldDataRow","orgCode","packTypeList","created","methods","show","sumNum","list","field","count","footerMethod","columns","component","ApplyDetail","SelectPicker","OrgPicker","objectData","applyOrgCode","procOrgCode","defaultLeafFormCode","areaUnit","nowYear","leafTypeList","oldLeafTypeList","oldTotalData","isNullData","weightUnitList","isSelected","leafFormList","contTypeList","storeList","orgCodeList","procOrgList","enumMap","params","businessOrgList","bizCode","replaceFields","pkey","title","children","pageNumber","pageSize","total","computed","appConfig","appCode","enumTypeCodes","res","handleQueryBusinessOrgList","orgTypeEk","orgLevelEk","parentBizCode","resolve","handleOlDataRow","itemObj","handleOldTotalData","handleGetLeafTypeList","onQuery","pageNo","applyType","query","then","catch","console","finally","detailData","weightUnitObj","selectedRow","handleLeafTypeName","typeCd","selectAllEvent","selectRowChange","checked","JSON"],"mappings":"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","file":"js/chunk-4297fa83.44369631.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-container',{attrs:{\"height\":\"100%\"}},[_c('ec-container-header',[_c('ec-panel-item',[_c('ec-panel-item-left',[_c('ec-header',{attrs:{\"title\":\"加工下线码包申请\",\"icon\":\"onetomany\",\"color-code\":\"008\"}})],1)],1)],1),_c('ec-container-body',[_c('ec-panel',{attrs:{\"auto\":false}},[_c('ec-panel-toolbar',[_c('a-descriptions',{attrs:{\"bordered\":\"\",\"column\":4}},[_c('a-descriptions-item',{attrs:{\"label\":\"调拨年度\"}},[_vm._v(\" \"+_vm._s(_vm.visibleTranYear)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"合同类型\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.contTypeName))]),_c('a-descriptions-item',{attrs:{\"label\":\"合同量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.totalWeight)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"剩余合同量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.leftWeight)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"申请码包数量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.applyNum)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"申请量\"}},[_vm._v(\" \"+_vm._s(_vm.totalData.applyWeight)+\" \")]),_c('a-descriptions-item',{attrs:{\"label\":\"\"}}),_c('a-descriptions-item',{attrs:{\"label\":\"\"}})],1)],1),_c('ec-panel-toolbar',[_c('ec-query-panel',{attrs:{\"defaultFold\":true},on:{\"query\":function($event){return _vm.$refs.table.pageAction(1)},\"reset\":_vm.onReset},scopedSlots:_vm._u([{key:\"inner\",fn:function(){return [_c('ec-query-item',{attrs:{\"label\":\"烟叶类型\"}},[_c('ec-select',{attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.queryItems.leafTypeCode),callback:function ($$v) {_vm.$set(_vm.queryItems, \"leafTypeCode\", $$v)},expression:\"queryItems.leafTypeCode\"}},_vm._l((_vm.leafTypeList),function(leafTypeEk){return _c('a-select-option',{key:leafTypeEk.leafTypeCode},[_vm._v(\" \"+_vm._s(leafTypeEk.leafTypeName)+\" \")])}),1)],1),_c('ec-query-item',{attrs:{\"label\":\"烟叶形态\"}},[_c('ec-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.queryItems.leafFormCode),callback:function ($$v) {_vm.$set(_vm.queryItems, \"leafFormCode\", $$v)},expression:\"queryItems.leafFormCode\"}},_vm._l((_vm.leafFormList),function(leafForm){return _c('a-select-option',{key:leafForm.leafFormCode},[_vm._v(\" \"+_vm._s(leafForm.leafFormName)+\" \")])}),1)],1),_c('ec-query-item',{attrs:{\"label\":\"加工单位\"}},[_c('org-picker',{attrs:{\"placeholder\":\"请选择\"},on:{\"ok\":function($event){return _vm.handleStore()}},model:{value:(_vm.queryItems.procOrgCode),callback:function ($$v) {_vm.$set(_vm.queryItems, \"procOrgCode\", $$v)},expression:\"queryItems.procOrgCode\"}})],1),_c('ec-query-item',{attrs:{\"label\":\"仓库\"}},[_c('ec-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.queryItems.storeCode),callback:function ($$v) {_vm.$set(_vm.queryItems, \"storeCode\", $$v)},expression:\"queryItems.storeCode\"}},_vm._l((_vm.storeList),function(storeObj){return _c('a-select-option',{key:storeObj.storeCode},[_vm._v(\" \"+_vm._s(storeObj.storeName)+\" \")])}),1)],1)]},proxy:true}])},[_c('ec-query-item',{attrs:{\"label\":\"调拨年度\"}},[_c('a-input-number',{attrs:{\"min\":2000,\"max\":2099},model:{value:(_vm.queryItems.tranYear),callback:function ($$v) {_vm.$set(_vm.queryItems, \"tranYear\", $$v)},expression:\"queryItems.tranYear\"}})],1),_c('ec-query-item',{attrs:{\"label\":\"合同类型\"}},[_c('ec-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.queryItems.contTypeCode),callback:function ($$v) {_vm.$set(_vm.queryItems, \"contTypeCode\", $$v)},expression:\"queryItems.contTypeCode\"}},_vm._l((_vm.contTypeList),function(contType){return _c('a-select-option',{key:contType.contTypeCode},[_vm._v(\" \"+_vm._s(contType.contTypeName)+\" \")])}),1)],1),_c('ec-query-item',{attrs:{\"label\":\"申请单位\"}},[_c('select-picker',{attrs:{\"title\":\"选择申请单位\",\"placeholder\":\"请选择申请单位\",\"lazy\":false,\"search\":false,\"fetchData\":_vm.onFetchBusinessOrgList},model:{value:(_vm.queryItems.applyOrgCode),callback:function ($$v) {_vm.$set(_vm.queryItems, \"applyOrgCode\", $$v)},expression:\"queryItems.applyOrgCode\"}})],1)],1),_c('ec-divider')],1),_c('ec-panel-header',[_c('ec-panel-item',[_c('ec-panel-item-right',[_c('a-space',{attrs:{\"size\":15}},[_c('span',[_vm._v(\"重量单位：\"),_c('ec-select',{staticStyle:{\"width\":\"150px\"},attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},on:{\"select\":_vm.handleUnitParse},model:{value:(_vm.weightUnit),callback:function ($$v) {_vm.weightUnit=$$v},expression:\"weightUnit\"}},_vm._l((_vm.weightUnitList),function(weightUnit){return _c('a-select-option',{key:weightUnit.weightUnitCd},[_vm._v(\" \"+_vm._s(weightUnit.weightUnitName)+\" \")])}),1)],1)])],1)],1)],1),_c('ec-panel-body',{attrs:{\"height\":\"100%\"}},[_c('ec-table',{ref:\"table\",attrs:{\"border\":\"\",\"height\":\"100%\",\"auto\":false,\"pagination\":_vm.pagination,\"data\":_vm.tableData.rows,\"loading\":_vm.loading,\"highlight-current-row\":\"\"},on:{\"page-action\":_vm.handlePagination}},[_c('ec-table-col',{attrs:{\"title\":\"序号\",\"type\":\"seq\",\"width\":\"70\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"field\":\"tranYear\",\"title\":\"调拨年度\",\"align\":\"center\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"contTypeName\",\"title\":\"合同类型\",\"align\":\"left\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"procOrgName\",\"title\":\"加工单位\",\"align\":\"left\",\"min-width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"procPointOrgName\",\"title\":\"加工点\",\"align\":\"left\",\"min-width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"applyOrgName\",\"title\":\"申请单位\",\"align\":\"left\",\"min-width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"storeName\",\"title\":\"仓库\",\"align\":\"left\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"leafTypeName\",\"title\":\"烟叶类型\",\"align\":\"left\",\"min-width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"leafFormName\",\"title\":\"烟叶形态\",\"align\":\"left\",\"min-width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn _vm._l((_vm.leafFormList),function(leafFormObj){return _c('div',{key:leafFormObj.leafFormCode},[(row.leafFormCode === leafFormObj.leafFormCode)?_c('span',[_vm._v(\" \"+_vm._s(leafFormObj.leafFormName))]):_vm._e()])})}}])}),_c('ec-table-col',{attrs:{\"field\":\"totalWeight\",\"title\":\"合同总量\",\"align\":\"right\",\"min-width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"leftWeight\",\"title\":\"剩余合同量\",\"align\":\"right\",\"min-width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"applyNum\",\"title\":\"申请码包数量\",\"align\":\"right\",\"min-width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"applyWeight\",\"title\":\"申请量\",\"align\":\"right\",\"min-width\":\"150\"}}),_c('ec-table-col',{attrs:{\"title\":\"操作\",\"align\":\"center\",\"width\":\"150\",\"fixed\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.onDetail(row)}}},[_vm._v(\"详细\")])]}}])})],1)],1)],1),_c('apply-detail',{ref:\"ApplyDetail\"})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-drawer',{staticClass:\"ec-draw-form\",attrs:{\"title\":\"详细\",\"visible\":_vm.visible,\"size\":\"large\"},on:{\"close\":_vm.onclose}},[_c('ec-container',{attrs:{\"height\":\"100%\"}},[_c('ec-container-header',[_c('ec-panel-item',[_c('ec-panel-item-left',[_c('ec-header',{attrs:{\"title\":\"申请详细\",\"icon\":\"onetomany\",\"color-code\":\"008\"}})],1),_c('ec-panel-item-right',[_c('div',{staticClass:\"year\"},[_vm._v(\"调拨年度：\"+_vm._s(_vm.tranYear)+\"年；重量单位：\"+_vm._s(_vm.weightUnitName))])])],1)],1),_c('ec-container-body',[_c('ec-panel',[_c('ec-panel-body',[_c('ec-v-layout',[_c('ec-v-item',[_c('ec-table',{ref:\"table\",attrs:{\"border\":\"\",\"data\":_vm.tableData,\"loading\":_vm.loading,\"row-select\":\"\"}},[_c('ec-table-col',{attrs:{\"title\":\"序号\",\"type\":\"seq\",\"width\":\"70\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"field\":\"applyDate\",\"title\":\"申请日期\",\"align\":\"center\",\"width\":\"180\"}}),_c('ec-table-col',{attrs:{\"field\":\"contNo\",\"title\":\"合同号\",\"align\":\"center\",\"width\":\"180\"}}),_c('ec-table-col',{attrs:{\"field\":\"leafTypeName\",\"title\":\"烟叶类型\",\"align\":\"right\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"leafFormName\",\"title\":\"烟叶形态\",\"align\":\"right\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"packType\",\"title\":\"包装类型\",\"align\":\"left\",\"width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn _vm._l((_vm.packTypeList),function(packTypeObj){return _c('div',{key:packTypeObj.enumKey},[(row.packType === packTypeObj.enumKey)?_c('span',[_vm._v(\" \"+_vm._s(packTypeObj.name))]):_vm._e()])})}}])}),_c('ec-table-col',{attrs:{\"field\":\"spec\",\"title\":\"规格（KG/件）\",\"align\":\"right\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"applyNum\",\"title\":\"申请码包数量\",\"align\":\"right\",\"width\":\"150\"}}),_c('ec-table-col',{attrs:{\"field\":\"applyWeight\",\"title\":\"申请量\",\"align\":\"right\",\"width\":\"150\"}})],1)],1)],1)],1)],1)],1),_c('ec-container-footer',{attrs:{\"fixed\":\"\"}},[_c('a-space',[_c('a-button',{on:{\"click\":_vm.onclose}},[_vm._v(\"关闭\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ec-drawer title=\"详细\" :visible=\"visible\" size=\"large\" @close=\"onclose\" class=\"ec-draw-form\">\r\n    <ec-container height=\"100%\">\r\n      <ec-container-header>\r\n        <ec-panel-item>\r\n          <ec-panel-item-left>\r\n            <ec-header title=\"申请详细\" icon=\"onetomany\" color-code=\"008\" />\r\n          </ec-panel-item-left>\r\n          <ec-panel-item-right>\r\n            <div class=\"year\">调拨年度：{{ tranYear }}年；重量单位：{{ weightUnitName }}</div>\r\n          </ec-panel-item-right>\r\n        </ec-panel-item>\r\n      </ec-container-header>\r\n\r\n      <ec-container-body>\r\n        <ec-panel>\r\n          <ec-panel-body>\r\n            <ec-v-layout>\r\n              <ec-v-item>\r\n                <ec-table ref=\"table\" border :data=\"tableData\" :loading=\"loading\" row-select>\r\n                  <!-- show-footer :footer-method=\"footerMethod\" -->\r\n                  <ec-table-col title=\"序号\" type=\"seq\" width=\"70\" align=\"center\" />\r\n                  <ec-table-col field=\"applyDate\" title=\"申请日期\" align=\"center\" width=\"180\" />\r\n                  <ec-table-col field=\"contNo\" title=\"合同号\" align=\"center\" width=\"180\" />\r\n\r\n                  <ec-table-col field=\"leafTypeName\" title=\"烟叶类型\" align=\"right\" width=\"150\" />\r\n                  <ec-table-col field=\"leafFormName\" title=\"烟叶形态\" align=\"right\" width=\"150\" />\r\n                  <ec-table-col field=\"packType\" title=\"包装类型\" align=\"left\" width=\"150\">\r\n                    <template #default=\"{ row }\">\r\n                      <div v-for=\"packTypeObj in packTypeList\" :key=\"packTypeObj.enumKey\">\r\n                        <span v-if=\"row.packType === packTypeObj.enumKey\">\r\n                          {{ packTypeObj.name }}</span\r\n                        >\r\n                      </div>\r\n                    </template>\r\n                  </ec-table-col>\r\n                  <ec-table-col field=\"spec\" title=\"规格（KG/件）\" align=\"right\" width=\"150\" />\r\n\r\n                  <ec-table-col field=\"applyNum\" title=\"申请码包数量\" align=\"right\" width=\"150\" />\r\n                  <ec-table-col field=\"applyWeight\" title=\"申请量\" align=\"right\" width=\"150\" />\r\n                </ec-table>\r\n              </ec-v-item>\r\n            </ec-v-layout>\r\n          </ec-panel-body>\r\n        </ec-panel>\r\n      </ec-container-body>\r\n      <ec-container-footer fixed>\r\n        <a-space>\r\n          <a-button @click=\"onclose\">关闭</a-button>\r\n        </a-space>\r\n      </ec-container-footer>\r\n    </ec-container>\r\n  </ec-drawer>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ExecutionEnterManage',\r\n  components: {},\r\n  data() {\r\n    return {\r\n      visible: false,\r\n      queryItems: {\r\n        leafTypeCode: '10',\r\n        submitStateFlag: true,\r\n        busiYear: '',\r\n      },\r\n\r\n      loading: false,\r\n      leafTypeCd: '',\r\n      tranYear: '',\r\n      oldDataRow: [],\r\n      orgCode: '',\r\n\r\n      packTypeList: [],\r\n      weightUnitName: '',\r\n      weightUnit: '',\r\n      tableData: {\r\n        // 数据表格\r\n        // totalRows: 0,\r\n        rows: [],\r\n      },\r\n    };\r\n  },\r\n\r\n  created() {\r\n    const { appCode } = this.$router.history.current.query;\r\n    this.appCode = appCode || 'CM'; // 获取当前登入信息\r\n  },\r\n\r\n  methods: {\r\n    // 数据初始化\r\n    // 显示推窗\r\n    show(data) {\r\n      this.visible = true;\r\n      const tableData = data.tableData || [];\r\n      this.tableData = tableData;\r\n      this.packTypeList = data.packTypeList || [];\r\n      const selectedRow = data.selectedRow || {};\r\n      this.tranYear = selectedRow.tranYear;\r\n      this.weightUnitName = data.weightUnitObj.weightUnitName;\r\n      this.weightUnit = data.weightUnitObj.weightUnitCd;\r\n    },\r\n\r\n    // 合计数据的处理\r\n    sumNum(list, field) {\r\n      let count = 0;\r\n      list.forEach((item) => {\r\n        count += Number(item[field]);\r\n      });\r\n      return count.toFixed(2);\r\n    },\r\n    // 底部合计行\r\n    footerMethod({ columns, data }) {\r\n      return [\r\n        columns.map((column, columnIndex) => {\r\n          if (columnIndex === 0) {\r\n            return '合计';\r\n          }\r\n          if (['collectNum'].includes(column.property)) {\r\n            return this.sumNum(data, column.property);\r\n          }\r\n          return null;\r\n        }),\r\n      ];\r\n    },\r\n\r\n    // 取消\r\n    onclose() {\r\n      this.tableData = [];\r\n      this.visible = false;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.year {\r\n  font-size: 18px;\r\n  line-height: 22px;\r\n\r\n  color: #18191a;\r\n  font-weight: 700;\r\n  padding-top: 18px;\r\n  padding-right: 50px;\r\n  font-family: '微软雅黑 Bold', '微软雅黑', 'Microsoft YaHei', sans-serif;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApplyDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApplyDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ApplyDetail.vue?vue&type=template&id=051e0d76&scoped=true&\"\nimport script from \"./ApplyDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./ApplyDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ApplyDetail.vue?vue&type=style&index=0&id=051e0d76&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"051e0d76\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <ec-container height=\"100%\">\r\n    <ec-container-header>\r\n      <ec-panel-item>\r\n        <ec-panel-item-left>\r\n          <ec-header title=\"加工下线码包申请\" icon=\"onetomany\" color-code=\"008\" />\r\n        </ec-panel-item-left>\r\n      </ec-panel-item>\r\n    </ec-container-header>\r\n    <ec-container-body>\r\n      <ec-panel :auto=\"false\">\r\n        <ec-panel-toolbar>\r\n          <a-descriptions bordered :column=\"4\">\r\n            <a-descriptions-item label=\"调拨年度\">\r\n              {{ visibleTranYear }}\r\n            </a-descriptions-item>\r\n            <a-descriptions-item label=\"合同类型\">\r\n              {{ totalData.contTypeName }}</a-descriptions-item\r\n            >\r\n            <a-descriptions-item label=\"合同量\">\r\n              {{ totalData.totalWeight }}\r\n            </a-descriptions-item>\r\n\r\n            <a-descriptions-item label=\"剩余合同量\">\r\n              {{ totalData.leftWeight }}\r\n            </a-descriptions-item>\r\n            <a-descriptions-item label=\"申请码包数量\">\r\n              {{ totalData.applyNum }}\r\n            </a-descriptions-item>\r\n            <a-descriptions-item label=\"申请量\">\r\n              {{ totalData.applyWeight }}\r\n            </a-descriptions-item>\r\n            <a-descriptions-item label=\"\"> </a-descriptions-item>\r\n            <a-descriptions-item label=\"\"> </a-descriptions-item>\r\n          </a-descriptions>\r\n        </ec-panel-toolbar>\r\n\r\n        <ec-panel-toolbar>\r\n          <ec-query-panel :defaultFold=\"true\" @query=\"$refs.table.pageAction(1)\" @reset=\"onReset\">\r\n            <ec-query-item label=\"调拨年度\">\r\n              <a-input-number v-model=\"queryItems.tranYear\" :min=\"2000\" :max=\"2099\" />\r\n            </ec-query-item>\r\n            <ec-query-item label=\"合同类型\">\r\n              <ec-select placeholder=\"请选择\" v-model=\"queryItems.contTypeCode\">\r\n                <a-select-option v-for=\"contType in contTypeList\" :key=\"contType.contTypeCode\">\r\n                  {{ contType.contTypeName }}\r\n                </a-select-option>\r\n              </ec-select>\r\n            </ec-query-item>\r\n            <!-- 本级及下级单位 -->\r\n\r\n            <ec-query-item label=\"申请单位\">\r\n              <select-picker\r\n                title=\"选择申请单位\"\r\n                placeholder=\"请选择申请单位\"\r\n                :lazy=\"false\"\r\n                :search=\"false\"\r\n                :fetchData=\"onFetchBusinessOrgList\"\r\n                v-model=\"queryItems.applyOrgCode\"\r\n              />\r\n            </ec-query-item>\r\n\r\n            <template #inner>\r\n              <ec-query-item label=\"烟叶类型\">\r\n                <ec-select\r\n                  showSearch\r\n                  allowClear\r\n                  placeholder=\"请选择\"\r\n                  v-model=\"queryItems.leafTypeCode\"\r\n                >\r\n                  <a-select-option\r\n                    v-for=\"leafTypeEk in leafTypeList\"\r\n                    :key=\"leafTypeEk.leafTypeCode\"\r\n                  >\r\n                    {{ leafTypeEk.leafTypeName }}\r\n                  </a-select-option>\r\n                </ec-select>\r\n              </ec-query-item>\r\n\r\n              <ec-query-item label=\"烟叶形态\">\r\n                <ec-select placeholder=\"请选择\" v-model=\"queryItems.leafFormCode\">\r\n                  <a-select-option v-for=\"leafForm in leafFormList\" :key=\"leafForm.leafFormCode\">\r\n                    {{ leafForm.leafFormName }}\r\n                  </a-select-option>\r\n                </ec-select>\r\n              </ec-query-item>\r\n              <ec-query-item label=\"加工单位\">\r\n                <org-picker\r\n                  v-model=\"queryItems.procOrgCode\"\r\n                  placeholder=\"请选择\"\r\n                  @ok=\"handleStore()\"\r\n                />\r\n              </ec-query-item>\r\n              <ec-query-item label=\"仓库\">\r\n                <ec-select placeholder=\"请选择\" v-model=\"queryItems.storeCode\">\r\n                  <a-select-option v-for=\"storeObj in storeList\" :key=\"storeObj.storeCode\">\r\n                    {{ storeObj.storeName }}\r\n                  </a-select-option>\r\n                </ec-select>\r\n              </ec-query-item>\r\n            </template>\r\n          </ec-query-panel>\r\n          <ec-divider />\r\n        </ec-panel-toolbar>\r\n        <ec-panel-header>\r\n          <ec-panel-item>\r\n            <ec-panel-item-right>\r\n              <a-space :size=\"15\">\r\n                <span\r\n                  >重量单位：<ec-select\r\n                    showSearch\r\n                    allowClear\r\n                    placeholder=\"请选择\"\r\n                    v-model=\"weightUnit\"\r\n                    @select=\"handleUnitParse\"\r\n                    style=\"width: 150px\"\r\n                  >\r\n                    <a-select-option\r\n                      v-for=\"weightUnit in weightUnitList\"\r\n                      :key=\"weightUnit.weightUnitCd\"\r\n                    >\r\n                      {{ weightUnit.weightUnitName }}\r\n                    </a-select-option>\r\n                  </ec-select></span\r\n                >\r\n              </a-space>\r\n            </ec-panel-item-right>\r\n          </ec-panel-item>\r\n        </ec-panel-header>\r\n        <ec-panel-body height=\"100%\">\r\n          <ec-table\r\n            ref=\"table\"\r\n            border\r\n            height=\"100%\"\r\n            :auto=\"false\"\r\n            @page-action=\"handlePagination\"\r\n            :pagination=\"pagination\"\r\n            :data=\"tableData.rows\"\r\n            :loading=\"loading\"\r\n            highlight-current-row\r\n          >\r\n            <ec-table-col title=\"序号\" type=\"seq\" width=\"70\" align=\"center\" />\r\n            <ec-table-col field=\"tranYear\" title=\"调拨年度\" align=\"center\" width=\"150\" />\r\n            <ec-table-col field=\"contTypeName\" title=\"合同类型\" align=\"left\" width=\"150\" />\r\n            <ec-table-col field=\"procOrgName\" title=\"加工单位\" align=\"left\" min-width=\"150\" />\r\n            <ec-table-col field=\"procPointOrgName\" title=\"加工点\" align=\"left\" min-width=\"150\" />\r\n            <ec-table-col field=\"applyOrgName\" title=\"申请单位\" align=\"left\" min-width=\"150\" />\r\n\r\n            <ec-table-col field=\"storeName\" title=\"仓库\" align=\"left\" width=\"150\" />\r\n            <ec-table-col field=\"leafTypeName\" title=\"烟叶类型\" align=\"left\" min-width=\"150\" />\r\n            <ec-table-col field=\"leafFormName\" title=\"烟叶形态\" align=\"left\" min-width=\"150\">\r\n              <template #default=\"{ row }\">\r\n                <div v-for=\"leafFormObj in leafFormList\" :key=\"leafFormObj.leafFormCode\">\r\n                  <span v-if=\"row.leafFormCode === leafFormObj.leafFormCode\">\r\n                    {{ leafFormObj.leafFormName }}</span\r\n                  >\r\n                </div>\r\n              </template>\r\n\r\n              <!-- <a-select-option v-for=\"packType in packTypeList\" :key=\"packType.enumKey\">\r\n                      {{ packType.name }}\r\n                    </a-select-option> -->\r\n            </ec-table-col>\r\n            <ec-table-col field=\"totalWeight\" title=\"合同总量\" align=\"right\" min-width=\"150\" />\r\n            <ec-table-col field=\"leftWeight\" title=\"剩余合同量\" align=\"right\" min-width=\"150\" />\r\n            <ec-table-col field=\"applyNum\" title=\"申请码包数量\" align=\"right\" min-width=\"150\" />\r\n\r\n            <ec-table-col field=\"applyWeight\" title=\"申请量\" align=\"right\" min-width=\"150\" />\r\n\r\n            <ec-table-col title=\"操作\" align=\"center\" width=\"150\" fixed=\"right\">\r\n              <template #default=\"{ row }\">\r\n                <a-button type=\"link\" @click=\"onDetail(row)\">详细</a-button>\r\n              </template>\r\n            </ec-table-col>\r\n          </ec-table>\r\n        </ec-panel-body>\r\n      </ec-panel>\r\n\r\n      <apply-detail ref=\"ApplyDetail\"></apply-detail>\r\n    </ec-container-body>\r\n  </ec-container>\r\n</template>\r\n\r\n<script>\r\nimport ApplyDetail from './ApplyDetail.vue';\r\nimport { SelectPicker, OrgPicker } from '@euler-material/ecm-ui';\r\nimport { treeFormatList } from '@euler-material/ecm-utils';\r\nimport _ from 'lodash';\r\n\r\nexport default {\r\n  name: 'ExecutionManage',\r\n  components: {\r\n    ApplyDetail,\r\n    SelectPicker,\r\n    OrgPicker,\r\n  },\r\n  data() {\r\n    return {\r\n      objectData: {},\r\n      busiYear: '',\r\n      queryItems: {\r\n        tranYear: '',\r\n        contTypeCode: undefined,\r\n        applyOrgCode: undefined,\r\n        leafTypeCode: undefined,\r\n        leafFormCode: undefined,\r\n        procOrgCode: undefined,\r\n        storeCode: undefined,\r\n      },\r\n      defaultLeafFormCode: '',\r\n      weightUnit: 1,\r\n      areaUnit: 10000,\r\n      nowYear: '',\r\n      loading: false,\r\n      leafTypeCd: '',\r\n      leafTypeList: [],\r\n      oldLeafTypeList: [],\r\n      oldDataRow: [], // 拷贝的旧数据，单位切换的时候要在旧的数据上转换\r\n      oldTotalData: [], // 拷贝的旧上级数据，单位切换的时候要在旧的数据上转换\r\n      totalData: {}, // 合计的数据\r\n      isNullData: [],\r\n      leafTypeName: '',\r\n\r\n      weightUnitList: [\r\n        { weightUnitCd: 1, weightUnitName: '公斤', isSelected: false },\r\n        { weightUnitCd: 50, weightUnitName: '担', isSelected: false },\r\n        // { weightUnitCd: 500000, weightUnitName: '万担', isSelected: false },\r\n      ],\r\n\r\n      visibleTranYear: '',\r\n      leafFormList: [],\r\n      contTypeList: [],\r\n      storeList: [],\r\n      orgCodeList: [],\r\n      procOrgList: [],\r\n      enumMap: {},\r\n      packTypeList: [],\r\n      params: {},\r\n      // 商业单位\r\n      businessOrgList: [],\r\n      bizCode: '',\r\n      // 组织字段重置\r\n      replaceFields: {\r\n        pkey: 'parentBizCode',\r\n        title: 'orgName',\r\n        key: 'bizCode',\r\n        children: 'children',\r\n      },\r\n      pagination: {\r\n        pageNumber: 1,\r\n        pageSize: 10,\r\n        total: 0,\r\n      },\r\n      tableData: {\r\n        // 数据表格\r\n        // totalRows: 0,\r\n        rows: [],\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    appConfig() {\r\n      return this.$store.getters.getAppConfig;\r\n    },\r\n  },\r\n  async created() {\r\n    const { appCode } = this.$router.history.current.query;\r\n    this.appCode = appCode || 'CM'; // 获取当前登入信息\r\n\r\n    // 包装类型\r\n    const enumTypeCodes = ['PC_PACK_TYPE'];\r\n    const data = {\r\n      enumTypeCodes,\r\n    };\r\n    const res = await this.$apis.enum.index.getEnumType(data);\r\n    const enumMap = res?.enumMap || {};\r\n    const packTypeList = enumMap?.PC_PACK_TYPE || [];\r\n\r\n    this.packTypeList = packTypeList;\r\n    // 烟叶形态\r\n    const leafForm = await this.$apis.common.index.queryLeafForm({});\r\n    const leafFormList = leafForm?.rows || [];\r\n    if (leafFormList && leafFormList.length > 0) {\r\n      leafFormList.unshift({ leafFormCode: '', leafFormName: '全部' });\r\n      // this.queryItems.leafFormCode = applyStateList[0].enumKey;\r\n      leafFormList.some((item) => {\r\n        if (item.leafFormName === '片烟') {\r\n          this.queryItems.leafFormCode = item.leafFormCode;\r\n          this.defaultLeafFormCode = item.leafFormCode;\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n    this.leafFormList = leafFormList;\r\n    // 合同类型\r\n    const contType = await this.$apis.common.index.queryContType({ contTypeCode: '2' });\r\n    const contTypeList = contType?.rows || [];\r\n    if (contTypeList && contTypeList.length > 0) {\r\n      contTypeList.unshift({ contTypeCode: '', contTypeName: '全部' });\r\n      this.queryItems.contTypeCode = contTypeList[0].contTypeCode;\r\n    }\r\n    this.contTypeList = contTypeList;\r\n\r\n    this.bizCode = this.appConfig?.bizCode;\r\n    this.orgCode = this.appConfig?.orgCode; // todo 写死数据\r\n    this.orgName = this.appConfig?.orgName;\r\n    this.queryItems.tranYear = this.appConfig?.yearValueMap?.SM_YEAR;\r\n    this.nowYear = this.appConfig?.yearValueMap?.SM_YEAR;\r\n    this.visibleTranYear = this.appConfig?.yearValueMap?.SM_YEAR;\r\n\r\n    await this.handleQueryBusinessOrgList();\r\n\r\n    this.queryItems.applyOrgCode = this.bizCode;\r\n    this.handleStore();\r\n  },\r\n  methods: {\r\n    // 查询商业单位\r\n    async handleQueryBusinessOrgList() {\r\n      const params = {\r\n        busiYear: this.nowYear,\r\n        orgTypeEk: 'TOBACCO',\r\n        orgLevelEk: '6',\r\n        parentBizCode: this.bizCode,\r\n      };\r\n      const res = await this.$apis.common.index.queryTreeByCode(params);\r\n      this.businessOrgList = res.rows || [];\r\n    },\r\n    // 更新商业单位\r\n    onFetchBusinessOrgList() {\r\n      return new Promise((resolve) => {\r\n        const data = treeFormatList(this.businessOrgList, this.replaceFields);\r\n        resolve(data);\r\n      });\r\n    },\r\n\r\n    async handleStore() {\r\n      const data = {\r\n        bizCode: this.queryItems.procOrgCode,\r\n        busiYear: this.queryItems.tranYear,\r\n      };\r\n      const storeList = await this.$apis.common.index.queryStore(data);\r\n      this.storeList = storeList?.rows || [];\r\n    },\r\n    // 处理单位转换\r\n    handleUnitParse() {\r\n      //  列表的单位转换    totalWeight     leftWeight   applyWeight\r\n      const handleOlDataRow = JSON.parse(JSON.stringify(this.oldDataRow));\r\n      handleOlDataRow.forEach((item) => {\r\n        const itemObj = item;\r\n        itemObj.totalWeight = (item.totalWeight / this.weightUnit).toFixed(2);\r\n        itemObj.leftWeight = (item.leftWeight / this.weightUnit).toFixed(2);\r\n        itemObj.applyWeight = (item.applyWeight / this.weightUnit).toFixed(2);\r\n      });\r\n\r\n      const handleOldTotalData = JSON.parse(JSON.stringify(this.oldTotalData));\r\n\r\n      // 汇总数据\r\n      handleOldTotalData.totalWeight = (handleOldTotalData.totalWeight / this.weightUnit).toFixed(\r\n        2,\r\n      );\r\n      handleOldTotalData.leftWeight = (handleOldTotalData.leftWeight / this.weightUnit).toFixed(2);\r\n      handleOldTotalData.applyWeight = (handleOldTotalData.applyWeight / this.weightUnit).toFixed(\r\n        2,\r\n      );\r\n\r\n      this.totalData = handleOldTotalData;\r\n      this.tableData.rows = handleOlDataRow;\r\n    },\r\n\r\n    async handlePagination(pageNumber, pageSize) {\r\n      this.pagination.pageNumber = pageNumber;\r\n      this.pagination.pageSize = pageSize;\r\n      await this.handleGetLeafTypeList();\r\n    },\r\n\r\n    // 获取烟叶类型数据\r\n    async handleGetLeafTypeList() {\r\n      if (!this.leafTypeList?.length) {\r\n        const res = await this.$apis.common.index.queryLeafType({});\r\n        const rows = res?.rows || [];\r\n        this.oldLeafTypeList = _.cloneDeep(rows);\r\n        if (rows && rows.length > 0) {\r\n          rows.unshift({ leafTypeName: '全部', leafTypeCode: '' });\r\n        }\r\n        this.leafTypeList = rows;\r\n        this.leafTypeList.some((item) => {\r\n          if (item.leafTypeName === '烤烟') {\r\n            this.leafTypeCd = item.leafTypeCode;\r\n            this.queryItems.leafTypeCode = item.leafTypeCode;\r\n            this.leafTypeName = '烤烟';\r\n            return true;\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      }\r\n      if (!this.queryItems.leafTypeCode && this.leafTypeList?.length) {\r\n        const { leafTypeCode } = this.leafTypeList[0];\r\n        this.leafTypeCd = leafTypeCode;\r\n        this.queryItems.leafTypeCode = leafTypeCode;\r\n        this.leafTypeName = this.leafTypeList[0].leafTypeName;\r\n      }\r\n\r\n      // if (!this.orgCode) {\r\n      //   const orgObj = await this.$apis.bim.curOrg.get({});\r\n      //   this.bizCode = orgObj?.bizCode;\r\n      //   this.orgCode = orgObj?.orgUniqueCode; // todo 写死数据\r\n      //   this.orgName = orgObj?.orgName;\r\n      //   // this.orgName = '中国烟草总公司黑龙江省公司';\r\n      //   // this.orgCode = '11000001000000000003';\r\n      //   this.queryItems.applyOrgCode = this.bizCode;\r\n\r\n      //   this.orgCodeList = [this.orgCode];\r\n      // }\r\n      // if (!this.queryItems.tranYear > 0) {\r\n      //   // 获取年度\r\n      //   const data = {\r\n      //     bizCode: this.appConfig.bizCode, // todo 写死的数据\r\n      //     appCode: this.appCode || 'CM',\r\n      //     yearTypeCode: 'SM_YEAR',\r\n      //   };\r\n      //   const busiYearObj = await this.$apis.bpm.executionEnter.getBuYear(data);\r\n      //   this.queryItems.tranYear = busiYearObj?.yearValue;\r\n      //   this.nowYear = busiYearObj?.yearValue;\r\n      //   this.visibleTranYear = busiYearObj?.yearValue;\r\n      //   this.handleStore();\r\n      // }\r\n\r\n      // if (!this.businessOrgList?.length) {\r\n      //   await this.handleQueryBusinessOrgList();\r\n      // }\r\n      this.onQuery();\r\n    },\r\n\r\n    // 数据初始化\r\n    async onQuery() {\r\n      this.loading = true;\r\n\r\n      this.visibleTranYear = this.queryItems.tranYear;\r\n      const data = {\r\n        pageNo: this.pagination.pageNumber,\r\n        pageSize: this.pagination.pageSize,\r\n        tranYear: this.queryItems.tranYear,\r\n        contTypeCode: this.queryItems.contTypeCode,\r\n        applyOrgCode: this.queryItems.applyOrgCode,\r\n        leafTypeCode: this.queryItems.leafTypeCode,\r\n        leafFormCode: this.queryItems.leafFormCode,\r\n        procOrgCode: this.queryItems.procOrgCode,\r\n        storeCode: this.queryItems.storeCode,\r\n        applyType: 'PRODUCT_CP', // 写死\r\n      };\r\n      await this.$apis.pcm.buy.packApply\r\n        .query(data)\r\n        .then((res) => {\r\n          const rows = res.rows || [];\r\n          this.pagination.total = res.totalRows;\r\n          this.oldDataRow = JSON.parse(JSON.stringify(rows));\r\n          // this.tableData.rows = rows;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        })\r\n        .finally(() => {\r\n          this.loading = false;\r\n          this.selectedRows = [];\r\n        });\r\n\r\n      this.params = data;\r\n      const totalData = await this.$apis.pcm.buy.packApply.queryTotalData(data);\r\n      this.oldTotalData = JSON.parse(JSON.stringify(totalData));\r\n      this.handleUnitParse();\r\n    },\r\n\r\n    // 详细\r\n    async onDetail(row) {\r\n      const { params } = this;\r\n      params.applyOrgCode = row.applyOrgCode;\r\n      params.contNo = row.contNo;\r\n      const detailData = await this.$apis.pcm.buy.packApply.queryDetail(params);\r\n      const weightUnitObj = this.weightUnitList.find((res) => res.weightUnitCd === this.weightUnit);\r\n      // 处理详细里面的申请量单位\r\n      detailData.forEach((item) => {\r\n        const itemObj = item;\r\n        itemObj.applyWeight = (item.applyWeight / this.weightUnit).toFixed(2);\r\n      });\r\n      const data = {\r\n        tableData: detailData,\r\n        packTypeList: this.packTypeList,\r\n        selectedRow: row,\r\n        weightUnitObj,\r\n      };\r\n      this.$refs.ApplyDetail.show(data);\r\n    },\r\n\r\n    // 重置\r\n    onReset() {\r\n      this.queryItems.tranYear = this.nowYear;\r\n      this.queryItems.leafTypeCode = this.leafTypeCd;\r\n      // this.queryItems.applyOrgCode = this.orgCode;\r\n      this.queryItems.leafFormCode = this.defaultLeafFormCode;\r\n      this.queryItems.procOrgCode = [];\r\n      this.queryItems.applyState = undefined;\r\n      this.queryItems.storeCode = undefined;\r\n\r\n      this.queryItems.applyOrgCode = this.orgCode;\r\n      this.queryItems.procOrgCode = undefined;\r\n      this.queryItems.contTypeCode = undefined;\r\n      // this.storeList = [];\r\n      this.handleStore();\r\n\r\n      this.$refs.table.pageAction(1);\r\n    },\r\n\r\n    // 根据编码翻译对应的名称\r\n    handleLeafTypeName(typeCd) {\r\n      const leafType = this.leafTypeList.find((item) => item.leafTypeCode === typeCd);\r\n      return leafType?.leafTypeName;\r\n    },\r\n\r\n    // 选中所有列表\r\n    selectAllEvent({ checked, records }) {\r\n      console.log(`${checked}-选中所有records包含选中的所以对象----${JSON.stringify(records)}`);\r\n      this.selectedRows = records;\r\n    },\r\n\r\n    // 选中列表\r\n    selectRowChange({ checked, records }) {\r\n      console.log(\r\n        `${checked}-选择改变时会把records包含选中的所以对象----${JSON.stringify(records)}`,\r\n      );\r\n      this.selectedRows = records;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.year {\r\n  font-size: 18px;\r\n  line-height: 22px;\r\n\r\n  color: #18191a;\r\n  font-weight: 700;\r\n  padding-top: 18px;\r\n  padding-right: 50px;\r\n  font-family: '微软雅黑 Bold', '微软雅黑', 'Microsoft YaHei', sans-serif;\r\n}\r\n.paddingTop {\r\n  padding-top: 15px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=9a3cbcc6&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=9a3cbcc6&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9a3cbcc6\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&id=9a3cbcc6&prod&lang=less&scoped=true&\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ApplyDetail.vue?vue&type=style&index=0&id=051e0d76&prod&lang=less&scoped=true&\""],"sourceRoot":""}