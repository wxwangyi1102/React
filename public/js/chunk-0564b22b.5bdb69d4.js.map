{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack:///./src/views/apm/daily/thin/Index.vue?ab09","webpack:///./src/views/apm/daily/thin/AddModal/AddModal.vue?6b8e","webpack:///src/views/apm/daily/thin/AddModal/AddModal.vue","webpack:///./src/views/apm/daily/thin/AddModal/AddModal.vue?104b","webpack:///./src/views/apm/daily/thin/AddModal/AddModal.vue","webpack:///src/views/apm/daily/thin/Index.vue","webpack:///./src/views/apm/daily/thin/Index.vue?ee89","webpack:///./src/views/apm/daily/thin/Index.vue","webpack:///./src/views/apm/daily/thin/AddModal/AddModal.vue?f6b5"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","render","_vm","this","_h","$createElement","_c","_self","attrs","staticStyle","_v","_s","busiYear","on","queryHandle","resetHandle","onFetchIndustryOrgList","model","listQuery","callback","$$v","$set","expression","_l","item","enumKey","name","onAdd","ref","tableData","loading","pagination","footerMethod","handlePagination","scopedSlots","_u","fn","row","$event","onDetails","operateTypeList","weightUnitList","planMakeOrgList","industryOrgList","replaceFields","save","staticRenderFns","staticClass","isAdd","visible","cancel","ruleForm","rules","trigger","mode","activeMethod","activeRowMethod","type","addChange","fileList","fileUpload","_e","saveUpdate","components","SelectPicker","props","default","data","uploading","rowData","checked","SAVE_STORAGE","watch","handler","nVal","oVal","console","memberOrgCode","queryBaAdjustPcTAsSliceApprTpl","then","adjustmentType","materialWeight","materialProdWeight","materialBuyWeight","sliceWeight","sliceProdWeight","sliceSaleWeight","catch","computed","methods","resolve","that","uid","param","$ec","post","headers","finally","show","queryDetailPcTAsSliceApprTpl","asSliceApprTplId","localStorage","addPagePcTAsSliceApprTpl","baMaterialWeight","baMaterialProdWeight","baMaterialBuyWeight","baSliceWeight","baSliceProdWeight","baSliceSaleWeight","aaMaterialWeight","aaMaterialProdWeight","aaMaterialBuyWeight","aaSliceWeight","aaSliceProdWeight","aaSliceSaleWeight","sumNum","list","field","count","columns","includes","column","created","component","AddModal","pageNumber","pageSize","total","pkey","title","children","bizCode","handleQueryIndustryOrgList","params","orgTypeEk","orgLevelEk","parentBizCode","res","getTableData","pageNo","init","getEnumType","enumTypeCodes"],"mappings":"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","file":"js/chunk-0564b22b.5bdb69d4.js","sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-container',{attrs:{\"title\":\"薄片调拨计划量登记\",\"icon\":\"onetomany\",\"color-code\":\"001\"}},[_c('ec-container-body',[_c('ec-panel',[_c('ec-panel-toolbar',[_c('ec-panel-item',[_c('ec-panel-item-right',{staticStyle:{\"font-size\":\"16px\"}},[_vm._v(\"业务年度: \"+_vm._s(_vm.busiYear))])],1),_c('ec-panel-item',[_c('ec-query-panel',{attrs:{\"defaultFold\":true},on:{\"query\":_vm.queryHandle,\"reset\":_vm.resetHandle}},[_c('ec-query-item',{attrs:{\"label\":\"会员单位\"}},[_c('select-picker',{attrs:{\"title\":\"选择会员单位\",\"lazy\":false,\"search\":false,\"fetchData\":_vm.onFetchIndustryOrgList},model:{value:(_vm.listQuery.memberOrgCode),callback:function ($$v) {_vm.$set(_vm.listQuery, \"memberOrgCode\", $$v)},expression:\"listQuery.memberOrgCode\"}})],1),_c('ec-query-item',{attrs:{\"label\":\"操作类型\"}},[_c('ec-select',{attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.listQuery.operateType),callback:function ($$v) {_vm.$set(_vm.listQuery, \"operateType\", $$v)},expression:\"listQuery.operateType\"}},_vm._l((_vm.operateTypeList),function(item){return _c('a-select-option',{key:item.enumKey,attrs:{\"value\":item.enumKey}},[_vm._v(\" \"+_vm._s(item.name)+\" \")])}),1)],1),_c('ec-query-item',{attrs:{\"label\":\"计量单位\"}},[_c('ec-select',{attrs:{\"showSearch\":\"\",\"allowClear\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.listQuery.weightUnit),callback:function ($$v) {_vm.$set(_vm.listQuery, \"weightUnit\", $$v)},expression:\"listQuery.weightUnit\"}},_vm._l((_vm.weightUnitList),function(item){return _c('a-select-option',{key:item.enumKey},[_vm._v(\" \"+_vm._s(item.name)+\" \")])}),1)],1),_c('ec-query-item',{attrs:{\"label\":\"办理依据\"}},[_c('a-input',{attrs:{\"placeholder\":\"请输入\"},model:{value:(_vm.listQuery.remark),callback:function ($$v) {_vm.$set(_vm.listQuery, \"remark\", $$v)},expression:\"listQuery.remark\"}})],1)],1)],1),_c('ec-divider')],1),_c('ec-panel-body',[_c('ec-v-layout',[_c('ec-v-item',[_c('ec-panel-toolbar',[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onAdd}},[_vm._v(\"新增\")])],1)],1),_c('ec-v-item',[_c('ec-table',{ref:\"table\",attrs:{\"data\":_vm.tableData,\"loading\":_vm.loading,\"border\":\"\",\"pagination\":_vm.pagination,\"footer-method\":_vm.footerMethod,\"show-footer\":\"\"},on:{\"page-action\":_vm.handlePagination}},[_c('ec-table-col',{attrs:{\"title\":\"序号\",\"width\":\"80\",\"type\":\"seq\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"title\":\"录入日期\",\"field\":\"planDate\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"title\":\"会员单位\",\"field\":\"memberOrgCode\",\"align\":\"center\"}}),_c('ec-table-colgroup',{attrs:{\"title\":\"原料调入计划\"}},[_c('ec-table-col',{attrs:{\"title\":\"调入合计\",\"field\":\"materialWeight\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"title\":\"加工调入\",\"field\":\"materialProdWeight\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"title\":\"购销调入\",\"field\":\"materialBuyWeight\",\"align\":\"center\"}})],1),_c('ec-table-colgroup',{attrs:{\"title\":\"原料调出计划\"}},[_c('ec-table-col',{attrs:{\"title\":\"调出合计\",\"field\":\"sliceWeight\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"title\":\"加工调出\",\"field\":\"sliceProdWeight\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"title\":\"销售调出\",\"field\":\"sliceSaleWeight\",\"align\":\"center\"}})],1),_c('ec-table-col',{attrs:{\"title\":\"计划制定单位\",\"field\":\"planMakeOrg\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"title\":\"办理依据\",\"field\":\"remark\",\"align\":\"center\"}}),_c('ec-table-col',{attrs:{\"title\":\"操作\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-button',{attrs:{\"type\":\"link\"},on:{\"click\":function($event){return _vm.onDetails(row, 'range')}}},[_vm._v(\"详细\")])]}}])})],1)],1)],1)],1)],1),_c('add-modal',{ref:\"addModal\",attrs:{\"operateTypeList\":_vm.operateTypeList,\"weightUnitList\":_vm.weightUnitList,\"planMakeOrgList\":_vm.planMakeOrgList,\"industryOrgList\":_vm.industryOrgList,\"replaceFields\":_vm.replaceFields},on:{\"save\":_vm.save}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ec-drawer',{staticClass:\"ec-draw-form\",attrs:{\"title\":!_vm.isAdd ? '详细' : '新增',\"visible\":_vm.visible,\"size\":\"large\",\"is-confirm\":true},on:{\"close\":_vm.cancel}},[_c('ec-container',[_c('ec-container-body',[_c('ec-panel',{attrs:{\"title\":\"第一步: 选取供需方单位、操作类型\",\"color-code\":\"003\"}},[_c('ec-panel-item',[_c('ec-panel-item-right',{staticStyle:{\"font-size\":\"16px\"}},[_vm._v(\"业务年度: \"+_vm._s(_vm.busiYear))])],1),_c('ec-panel-item',[_c('ec-form',{ref:\"modelAddForm\",attrs:{\"model\":_vm.ruleForm,\"rules\":_vm.rules}},[_c('a-row',{attrs:{\"type\":\"flex\",\"gutter\":12}},[_c('a-col',{attrs:{\"span\":8}},[_c('a-form-model-item',{attrs:{\"label\":\"会员单位\",\"prop\":\"memberOrgCode\"}},[_c('select-picker',{attrs:{\"placeholder\":\"请选择会员单位\",\"title\":\"选择会员单位\",\"lazy\":false,\"search\":false,\"fetchData\":_vm.onFetchIndustryOrgList},model:{value:(_vm.ruleForm.memberOrgCode),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"memberOrgCode\", $$v)},expression:\"ruleForm.memberOrgCode\"}})],1)],1),_c('a-col',{attrs:{\"span\":8}},[_c('a-form-model-item',{attrs:{\"label\":\"操作类型\",\"prop\":\"operateType\"}},[_c('a-select',{attrs:{\"allowClear\":\"\",\"placeholder\":\"请选择操作类型\"},model:{value:(_vm.ruleForm.operateType),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"operateType\", $$v)},expression:\"ruleForm.operateType\"}},_vm._l((_vm.operateTypeList),function(item){return _c('a-select-option',{key:item.enumKey,attrs:{\"value\":item.enumKey}},[_vm._v(_vm._s(item.name))])}),1)],1)],1),_c('a-col',{attrs:{\"span\":8}},[_c('a-form-model-item',{attrs:{\"label\":\"计量单位\",\"prop\":\"weightUnit\"}},[_c('a-select',{attrs:{\"allowClear\":\"\",\"placeholder\":\"请选择计量单位\"},model:{value:(_vm.ruleForm.weightUnit),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"weightUnit\", $$v)},expression:\"ruleForm.weightUnit\"}},_vm._l((_vm.weightUnitList),function(item){return _c('a-select-option',{key:item.enumKey,attrs:{\"value\":item.enumKey}},[_vm._v(_vm._s(item.name))])}),1)],1)],1)],1),_c('a-row',{attrs:{\"type\":\"flex\",\"gutter\":12}},[_c('a-col',{attrs:{\"span\":8}},[_c('a-form-model-item',{attrs:{\"label\":\"办理依据\",\"prop\":\"remark\"}},[_c('a-input',{attrs:{\"placeholder\":\"请输入办理依据\",\"autocomplete\":\"off\"},model:{value:(_vm.ruleForm.remark),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"remark\", $$v)},expression:\"ruleForm.remark\"}})],1)],1),_c('a-col',{attrs:{\"span\":8}},[_c('a-form-model-item',{attrs:{\"label\":\"计划制定单位\",\"prop\":\"planMakeOrg\"}},[_c('a-select',{attrs:{\"allowClear\":\"\",\"placeholder\":\"请选择计划制定单位\"},model:{value:(_vm.ruleForm.planMakeOrg),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"planMakeOrg\", $$v)},expression:\"ruleForm.planMakeOrg\"}},_vm._l((_vm.planMakeOrgList),function(item){return _c('a-select-option',{key:item.enumKey,attrs:{\"value\":item.name}},[_vm._v(_vm._s(item.name))])}),1)],1)],1)],1)],1)],1)],1),_c('ec-panel',{attrs:{\"title\":\"步骤二: 录入/编辑数量\",\"color-code\":\"003\"}},[_c('ec-panel-item',[_c('ec-table',{ref:\"xTable\",attrs:{\"border\":\"\",\"auto\":\"\",\"height\":\"\",\"edit-config\":{ trigger: 'click', mode: 'row', activeMethod: _vm.activeRowMethod },\"data\":_vm.tableData,\"footer-method\":_vm.footerMethod}},[_c('ec-table-col',{attrs:{\"title\":\"\",\"field\":\"adjustmentType\"}}),_c('ec-table-colgroup',{attrs:{\"title\":\"原料调入计划\"}},[_c('ec-table-col',{attrs:{\"title\":\"调入合计\",\"field\":\"materialWeight\",\"align\":\"center\",\"edit-render\":{ name: 'input', attrs: { type: 'text' } }},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-input',{on:{\"change\":function($event){return _vm.addChange(row)}},model:{value:(row.materialWeight),callback:function ($$v) {_vm.$set(row, \"materialWeight\", $$v)},expression:\"row.materialWeight\"}})]}}])}),_c('ec-table-col',{attrs:{\"title\":\"加工调入\",\"field\":\"materialProdWeight\",\"align\":\"center\",\"edit-render\":{ name: 'input', attrs: { type: 'text' } }},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-input',{on:{\"change\":function($event){return _vm.addChange(row)}},model:{value:(row.materialProdWeight),callback:function ($$v) {_vm.$set(row, \"materialProdWeight\", $$v)},expression:\"row.materialProdWeight\"}})]}}])}),_c('ec-table-col',{attrs:{\"title\":\"购销调入\",\"field\":\"materialBuyWeight\",\"align\":\"center\",\"edit-render\":{ name: 'input', attrs: { type: 'text' } }},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-input',{on:{\"change\":function($event){return _vm.addChange(row)}},model:{value:(row.materialBuyWeight),callback:function ($$v) {_vm.$set(row, \"materialBuyWeight\", $$v)},expression:\"row.materialBuyWeight\"}})]}}])})],1),_c('ec-table-colgroup',{attrs:{\"title\":\"原料调出计划\"}},[_c('ec-table-col',{attrs:{\"title\":\"调出合计\",\"field\":\"sliceWeight\",\"align\":\"center\",\"edit-render\":{ name: 'input', attrs: { type: 'text' } }},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-input',{on:{\"change\":function($event){return _vm.addChange(row)}},model:{value:(row.sliceWeight),callback:function ($$v) {_vm.$set(row, \"sliceWeight\", $$v)},expression:\"row.sliceWeight\"}})]}}])}),_c('ec-table-col',{attrs:{\"title\":\"加工调出\",\"field\":\"sliceProdWeight\",\"align\":\"center\",\"edit-render\":{ name: 'input', attrs: { type: 'text' } }},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-input',{on:{\"change\":function($event){return _vm.addChange(row)}},model:{value:(row.sliceProdWeight),callback:function ($$v) {_vm.$set(row, \"sliceProdWeight\", $$v)},expression:\"row.sliceProdWeight\"}})]}}])}),_c('ec-table-col',{attrs:{\"title\":\"销售调出\",\"field\":\"sliceSaleWeight\",\"align\":\"center\",\"edit-render\":{ name: 'input', attrs: { type: 'text' } }},scopedSlots:_vm._u([{key:\"edit\",fn:function(ref){\nvar row = ref.row;\nreturn [_c('a-input',{on:{\"change\":function($event){return _vm.addChange(row)}},model:{value:(row.sliceSaleWeight),callback:function ($$v) {_vm.$set(row, \"sliceSaleWeight\", $$v)},expression:\"row.sliceSaleWeight\"}})]}}])})],1)],1)],1)],1),_c('ec-panel',{attrs:{\"title\":\"第三步: 上传凭据附件\",\"color-code\":\"003\"}},[_c('ec-panel-item',[_c('a-upload',{attrs:{\"fileList\":_vm.fileList,\"action\":\"/dts/plm/c/pcTAsSliceApprTpl/fileUploadPcTAsAttachFile/v1\",\"size\":5210},on:{\"change\":_vm.fileUpload},model:{value:(_vm.ruleForm.file),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"file\", $$v)},expression:\"ruleForm.file\"}},[_vm._v(\" 附件：\"),(_vm.isAdd)?_c('a-button',{attrs:{\"icon\":\"upload\"}},[_vm._v(\"上传文件\")]):_vm._e()],1),_c('p',{staticClass:\"tips\"},[_vm._v(\" 支持扩展名：.rar .zip .doc .docx .pdf .jpg .xls .xlsx 文件大小不超过50M \")])],1)],1)],1),(_vm.isAdd)?_c('ec-container-footer',{attrs:{\"fixed\":\"\"}},[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveUpdate}},[_vm._v(\"保存并新增\")]),_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.save}},[_vm._v(\"保存\")]),_c('a-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"关闭\")])],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ec-drawer\r\n    :title=\"!isAdd ? '详细' : '新增'\"\r\n    :visible=\"visible\"\r\n    size=\"large\"\r\n    @close=\"cancel\"\r\n    class=\"ec-draw-form\"\r\n    :is-confirm=\"true\"\r\n  >\r\n    <ec-container>\r\n      <ec-container-body>\r\n        <ec-panel title=\"第一步: 选取供需方单位、操作类型\" color-code=\"003\">\r\n          <ec-panel-item>\r\n            <ec-panel-item-right style=\"font-size: 16px\"\r\n              >业务年度: {{ busiYear }}</ec-panel-item-right\r\n            >\r\n          </ec-panel-item>\r\n          <ec-panel-item>\r\n            <ec-form ref=\"modelAddForm\" :model=\"ruleForm\" :rules=\"rules\">\r\n              <a-row type=\"flex\" :gutter=\"12\">\r\n                <a-col :span=\"8\">\r\n                  <a-form-model-item label=\"会员单位\" prop=\"memberOrgCode\">\r\n                    <select-picker\r\n                      v-model=\"ruleForm.memberOrgCode\"\r\n                      placeholder=\"请选择会员单位\"\r\n                      title=\"选择会员单位\"\r\n                      :lazy=\"false\"\r\n                      :search=\"false\"\r\n                      :fetchData=\"onFetchIndustryOrgList\"\r\n                    />\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col :span=\"8\">\r\n                  <a-form-model-item label=\"操作类型\" prop=\"operateType\">\r\n                    <a-select\r\n                      allowClear\r\n                      v-model=\"ruleForm.operateType\"\r\n                      placeholder=\"请选择操作类型\"\r\n                    >\r\n                      <a-select-option\r\n                        v-for=\"item in operateTypeList\"\r\n                        :key=\"item.enumKey\"\r\n                        :value=\"item.enumKey\"\r\n                        >{{ item.name }}</a-select-option\r\n                      >\r\n                    </a-select>\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col :span=\"8\">\r\n                  <a-form-model-item label=\"计量单位\" prop=\"weightUnit\">\r\n                    <a-select allowClear v-model=\"ruleForm.weightUnit\" placeholder=\"请选择计量单位\">\r\n                      <a-select-option\r\n                        v-for=\"item in weightUnitList\"\r\n                        :key=\"item.enumKey\"\r\n                        :value=\"item.enumKey\"\r\n                        >{{ item.name }}</a-select-option\r\n                      >\r\n                    </a-select>\r\n                  </a-form-model-item>\r\n                </a-col>\r\n              </a-row>\r\n              <a-row type=\"flex\" :gutter=\"12\">\r\n                <a-col :span=\"8\">\r\n                  <a-form-model-item label=\"办理依据\" prop=\"remark\">\r\n                    <a-input\r\n                      v-model=\"ruleForm.remark\"\r\n                      placeholder=\"请输入办理依据\"\r\n                      autocomplete=\"off\"\r\n                    />\r\n                  </a-form-model-item>\r\n                </a-col>\r\n                <a-col :span=\"8\">\r\n                  <a-form-model-item label=\"计划制定单位\" prop=\"planMakeOrg\">\r\n                    <a-select\r\n                      allowClear\r\n                      v-model=\"ruleForm.planMakeOrg\"\r\n                      placeholder=\"请选择计划制定单位\"\r\n                    >\r\n                      <a-select-option\r\n                        v-for=\"item in planMakeOrgList\"\r\n                        :key=\"item.enumKey\"\r\n                        :value=\"item.name\"\r\n                        >{{ item.name }}</a-select-option\r\n                      >\r\n                    </a-select>\r\n                  </a-form-model-item>\r\n                </a-col>\r\n              </a-row>\r\n            </ec-form>\r\n          </ec-panel-item>\r\n        </ec-panel>\r\n        <ec-panel title=\"步骤二: 录入/编辑数量\" color-code=\"003\">\r\n          <ec-panel-item>\r\n            <ec-table\r\n              ref=\"xTable\"\r\n              border\r\n              auto\r\n              height=\"\"\r\n              :edit-config=\"{ trigger: 'click', mode: 'row', activeMethod: activeRowMethod }\"\r\n              :data=\"tableData\"\r\n              :footer-method=\"footerMethod\"\r\n            >\r\n              <ec-table-col title=\"\" field=\"adjustmentType\"> </ec-table-col>\r\n              <ec-table-colgroup title=\"原料调入计划\">\r\n                <ec-table-col\r\n                  title=\"调入合计\"\r\n                  field=\"materialWeight\"\r\n                  align=\"center\"\r\n                  :edit-render=\"{ name: 'input', attrs: { type: 'text' } }\"\r\n                >\r\n                  <template #edit=\"{ row }\">\r\n                    <a-input\r\n                      v-model=\"row.materialWeight\"\r\n                      @change=\"addChange(row)\"\r\n                    ></a-input> </template\r\n                ></ec-table-col>\r\n                <ec-table-col\r\n                  title=\"加工调入\"\r\n                  field=\"materialProdWeight\"\r\n                  align=\"center\"\r\n                  :edit-render=\"{ name: 'input', attrs: { type: 'text' } }\"\r\n                >\r\n                  <template #edit=\"{ row }\">\r\n                    <a-input v-model=\"row.materialProdWeight\" @change=\"addChange(row)\"></a-input>\r\n                  </template>\r\n                </ec-table-col>\r\n                <ec-table-col\r\n                  title=\"购销调入\"\r\n                  field=\"materialBuyWeight\"\r\n                  align=\"center\"\r\n                  :edit-render=\"{ name: 'input', attrs: { type: 'text' } }\"\r\n                >\r\n                  <template #edit=\"{ row }\">\r\n                    <a-input\r\n                      v-model=\"row.materialBuyWeight\"\r\n                      @change=\"addChange(row)\"\r\n                    ></a-input> </template\r\n                ></ec-table-col>\r\n              </ec-table-colgroup>\r\n              <ec-table-colgroup title=\"原料调出计划\">\r\n                <ec-table-col\r\n                  title=\"调出合计\"\r\n                  field=\"sliceWeight\"\r\n                  align=\"center\"\r\n                  :edit-render=\"{ name: 'input', attrs: { type: 'text' } }\"\r\n                >\r\n                  <template #edit=\"{ row }\">\r\n                    <a-input\r\n                      v-model=\"row.sliceWeight\"\r\n                      @change=\"addChange(row)\"\r\n                    ></a-input> </template\r\n                ></ec-table-col>\r\n                <ec-table-col\r\n                  title=\"加工调出\"\r\n                  field=\"sliceProdWeight\"\r\n                  align=\"center\"\r\n                  :edit-render=\"{ name: 'input', attrs: { type: 'text' } }\"\r\n                >\r\n                  <template #edit=\"{ row }\">\r\n                    <a-input\r\n                      v-model=\"row.sliceProdWeight\"\r\n                      @change=\"addChange(row)\"\r\n                    ></a-input> </template\r\n                ></ec-table-col>\r\n                <ec-table-col\r\n                  title=\"销售调出\"\r\n                  field=\"sliceSaleWeight\"\r\n                  align=\"center\"\r\n                  :edit-render=\"{ name: 'input', attrs: { type: 'text' } }\"\r\n                >\r\n                  <template #edit=\"{ row }\">\r\n                    <a-input\r\n                      v-model=\"row.sliceSaleWeight\"\r\n                      @change=\"addChange(row)\"\r\n                    ></a-input> </template\r\n                ></ec-table-col>\r\n              </ec-table-colgroup>\r\n            </ec-table>\r\n          </ec-panel-item>\r\n        </ec-panel>\r\n        <ec-panel title=\"第三步: 上传凭据附件\" color-code=\"003\">\r\n          <ec-panel-item>\r\n            <a-upload\r\n              :fileList=\"fileList\"\r\n              action=\"/dts/plm/c/pcTAsSliceApprTpl/fileUploadPcTAsAttachFile/v1\"\r\n              @change=\"fileUpload\"\r\n              v-model=\"ruleForm.file\"\r\n              :size=\"5210\"\r\n            >\r\n              附件：<a-button icon=\"upload\" v-if=\"isAdd\">上传文件</a-button>\r\n            </a-upload>\r\n            <!-- <a-upload :file-list=\"fileList\" :remove=\"handleRemove\" :before-upload=\"beforeUpload\">\r\n              <a-button> <a-icon type=\"upload\" /> Select File </a-button>\r\n            </a-upload>\r\n            <a-button\r\n              type=\"primary\"\r\n              :disabled=\"fileList.length === 0\"\r\n              :loading=\"uploading\"\r\n              style=\"margin-top: 16px\"\r\n              @click=\"handleUpload\"\r\n            >\r\n              {{ uploading ? 'Uploading' : 'Start Upload' }}\r\n            </a-button> -->\r\n            <p class=\"tips\">\r\n              支持扩展名：.rar .zip .doc .docx .pdf .jpg .xls .xlsx 文件大小不超过50M\r\n            </p>\r\n          </ec-panel-item>\r\n        </ec-panel>\r\n      </ec-container-body>\r\n      <ec-container-footer fixed v-if=\"isAdd\">\r\n        <a-button type=\"primary\" @click=\"saveUpdate\">保存并新增</a-button>\r\n        <a-button type=\"primary\" @click=\"save\">保存</a-button>\r\n        <a-button @click=\"cancel\">关闭</a-button>\r\n      </ec-container-footer>\r\n    </ec-container>\r\n  </ec-drawer>\r\n</template>\r\n<script>\r\nimport { SelectPicker } from '@euler-material/ecm-ui';\r\nimport { treeFormatList } from '@euler-material/ecm-utils';\r\n\r\nexport default {\r\n  name: 'AdminOrgManageEdit',\r\n  components: {\r\n    SelectPicker,\r\n  },\r\n  props: {\r\n    operateTypeList: {\r\n      type: Array,\r\n    },\r\n    weightUnitList: {\r\n      type: Array,\r\n    },\r\n    planMakeOrgList: {\r\n      type: Array,\r\n    },\r\n    industryOrgList: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n    replaceFields: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      busiYear: new Date().getFullYear(),\r\n      fileList: [],\r\n      uploading: false,\r\n      rowData: '',\r\n      visible: false,\r\n      checked: false,\r\n      ruleForm: {},\r\n      rules: {\r\n        // memberOrgCode: { required: true, message: '请输入会员单位' },\r\n        // operateType: { required: true, message: '请输入操作类型' },\r\n        // planMakeOrg: { required: true, message: '请输入计量单位' },\r\n        // remark: { required: true, message: '请输入办理依据' },\r\n      },\r\n      tableData: [],\r\n      isAdd: true,\r\n      SAVE_STORAGE: '',\r\n    };\r\n  },\r\n  watch: {\r\n    'ruleForm.memberOrgCode': {\r\n      handler(nVal, oVal) {\r\n        if (!this.isAdd) {\r\n          return console.log('不用监听');\r\n        }\r\n        console.log(nVal, oVal);\r\n        if (nVal !== oVal) {\r\n          // 查询调整前量\r\n          const data = {\r\n            memberOrgCode: nVal[0],\r\n            busiYear: this.busiYear,\r\n          };\r\n          console.log(data);\r\n          this.$apis.apm.dailyThin\r\n            .queryBaAdjustPcTAsSliceApprTpl(data)\r\n            .then((res) => {\r\n              console.log(res);\r\n              this.tableData = [\r\n                {\r\n                  adjustmentType: '调整前量',\r\n                  materialWeight: res.baMaterialWeight || 0,\r\n                  materialProdWeight: res.baMaterialProdWeight || 0,\r\n                  materialBuyWeight: res.baMaterialBuyWeight || 0,\r\n                  sliceWeight: res.baSliceWeight || 0,\r\n                  sliceProdWeight: res.baSliceProdWeight || 0,\r\n                  sliceSaleWeight: res.baSliceSaleWeight || 0,\r\n                },\r\n                {\r\n                  adjustmentType: '本次调整量',\r\n                  materialWeight: 0,\r\n                  materialProdWeight: 0,\r\n                  materialBuyWeight: 0,\r\n                  sliceWeight: 0,\r\n                  sliceProdWeight: 0,\r\n                  sliceSaleWeight: 0,\r\n                },\r\n                {\r\n                  adjustmentType: '调整后量',\r\n                },\r\n              ];\r\n              this.addChange(this.tableData[1]);\r\n            })\r\n            .catch((err) => {\r\n              console.log(err);\r\n            });\r\n        }\r\n      },\r\n    },\r\n  },\r\n  computed: {},\r\n  methods: {\r\n    // 更新工业单位\r\n    onFetchIndustryOrgList() {\r\n      return new Promise((resolve) => {\r\n        const data = treeFormatList(this.industryOrgList, this.replaceFields);\r\n        resolve(data);\r\n      });\r\n    },\r\n    // 本次调整量录入\r\n    addChange(row) {\r\n      // console.log(row);\r\n      this.tableData[1] = { ...row };\r\n      this.$set(\r\n        this.tableData[2],\r\n        'materialWeight',\r\n        this.tableData[1].materialWeight\r\n          ? this.tableData[0].materialWeight + Number(this.tableData[1].materialWeight)\r\n          : this.tableData[0].materialWeight,\r\n      );\r\n      this.$set(\r\n        this.tableData[2],\r\n        'materialProdWeight',\r\n        this.tableData[1].materialProdWeight\r\n          ? this.tableData[0].materialProdWeight + Number(this.tableData[1].materialProdWeight)\r\n          : this.tableData[0].materialProdWeight,\r\n      );\r\n      this.$set(\r\n        this.tableData[2],\r\n        'materialBuyWeight',\r\n        this.tableData[1].materialBuyWeight\r\n          ? this.tableData[0].materialBuyWeight + Number(this.tableData[1].materialBuyWeight)\r\n          : this.tableData[0].materialBuyWeight,\r\n      );\r\n      this.$set(\r\n        this.tableData[2],\r\n        'sliceWeight',\r\n        this.tableData[1].sliceWeight\r\n          ? this.tableData[0].sliceWeight + Number(this.tableData[1].sliceWeight)\r\n          : this.tableData[0].sliceWeight,\r\n      );\r\n      this.$set(\r\n        this.tableData[2],\r\n        'sliceProdWeight',\r\n        this.tableData[1].sliceProdWeight\r\n          ? this.tableData[0].sliceProdWeight + Number(this.tableData[1].sliceProdWeight)\r\n          : this.tableData[0].sliceProdWeight,\r\n      );\r\n      this.$set(\r\n        this.tableData[2],\r\n        'sliceSaleWeight',\r\n        this.tableData[1].sliceSaleWeight\r\n          ? this.tableData[0].sliceSaleWeight + Number(this.tableData[1].sliceSaleWeight)\r\n          : this.tableData[0].sliceSaleWeight,\r\n      );\r\n      // console.log(this.tableData);\r\n    },\r\n    activeRowMethod({ row, rowIndex }) {\r\n      console.log(row);\r\n      if (this.isAdd) {\r\n        return rowIndex === 1;\r\n      }\r\n    },\r\n    // editDisabledEvent({ row, column }) {\r\n    //   console.log(row, column);\r\n    // },\r\n\r\n    async fileUpload(data) {\r\n      const that = this;\r\n      if (that._data.uploading) {\r\n        return;\r\n      }\r\n      const { uid } = data.file;\r\n      // 由于上传附件change事件会在上传中、完成、失败都调用，那么需要判断，如果是在上传中，就不能重复调用\r\n      if (uid && that._data.fileUid !== uid) {\r\n        this._data.fileUid = uid;\r\n        const param = new FormData();\r\n        param.append('file', data.file.originFileObj);\r\n        // param.append('moduleCode', 'PIM001001001');\r\n        // param.append('moduleName', '执行量录入');\r\n        // param.append('busiYear', that._data.nowYear);\r\n        // param.append('orgCode', that._data.orgCode);\r\n        that._data.uploading = true;\r\n        await $ec.http\r\n          .post('/dts/plm/c/pcTAsSliceApprTpl/fileUploadPcTAsAttachFile/v1', param, {\r\n            headers: {\r\n              'Content-Type': 'multipart/form-data',\r\n            },\r\n          })\r\n          .then((res) => {\r\n            console.log(res);\r\n            this.ruleForm.fileId = res.id;\r\n            if (!res.id) {\r\n              this.$message.error('上传失败');\r\n            } else {\r\n              this.$message.success('上传成功');\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          })\r\n          .finally(() => {\r\n            // 设置上传中的上传效果，同时使用该参数设置上传状态不可用，保证幂等性\r\n            that._data.uploading = false;\r\n          });\r\n        // 上传之后重新处理列表数据\r\n        // await that.handleFileInit('query');\r\n      }\r\n\r\n      // 文件上传\r\n      // fileUpload({ file }) {\r\n      //   console.log(file);\r\n      //   this.ruleForm.file = file;\r\n      //   const formData = new FormData();\r\n      //   formData.append('file', file.originFileObj);\r\n      //   const headers = { 'Content-Type': 'multipart/form-data' };\r\n      //   this.$apis.apm.dailyThin.fileUploadPcTAsAttachFile(formData, {\r\n      //     headers,\r\n      //   });\r\n      // $ec.http.send(`/dts/plm/c/pcTAsSliceApprTpl/fileUploadPcTAsAttachFile/v1`, formData, {\r\n      //   headers,\r\n      // });\r\n      // this.ruleForm.file = file;\r\n      // console.log(this.ruleForm.file);\r\n    },\r\n    // 显示推窗\r\n    show(row) {\r\n      // console.log('row', row);\r\n      this.visible = true;\r\n      console.log(1111111111);\r\n      // 判断是否新增\r\n      if (row) {\r\n        this.isAdd = false;\r\n        console.log(row.asSliceApprTplId);\r\n        // 请求详细信息\r\n        this.$apis.apm.dailyThin\r\n          .queryDetailPcTAsSliceApprTpl({ asSliceApprTplId: row.asSliceApprTplId })\r\n          .then((res) => {\r\n            console.log(res);\r\n            this.ruleForm = res;\r\n            this.tableData = [\r\n              {\r\n                adjustmentType: '调整前量',\r\n                materialWeight: res.baMaterialWeight,\r\n                materialProdWeight: res.baMaterialProdWeight,\r\n                materialBuyWeight: res.baMaterialBuyWeight,\r\n                sliceWeight: res.baSliceWeight,\r\n                sliceProdWeight: res.baSliceProdWeight,\r\n                sliceSaleWeight: res.baSliceSaleWeight,\r\n              },\r\n              {\r\n                adjustmentType: '本次调整量',\r\n                materialWeight: res.materialWeight,\r\n                materialProdWeight: res.materialProdWeight,\r\n                materialBuyWeight: res.materialBuyWeight,\r\n                sliceWeight: res.sliceWeight,\r\n                sliceProdWeight: res.sliceProdWeight,\r\n                sliceSaleWeight: res.sliceSaleWeight,\r\n              },\r\n              {\r\n                adjustmentType: '调整后量',\r\n                materialWeight: res.aaMaterialWeight,\r\n                materialProdWeight: res.aaMaterialProdWeight,\r\n                materialBuyWeight: res.aaMaterialBuyWeight,\r\n                sliceWeight: res.aaSliceWeight,\r\n                sliceProdWeight: res.aaSliceProdWeight,\r\n                sliceSaleWeight: res.aaSliceSaleWeight,\r\n              },\r\n            ];\r\n            console.log(this.tableData);\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n      } else {\r\n        // JSON.parse(localStorage.getItem('SAVE_STORAGE'))\r\n        //   ? (this.ruleForm = this.SAVE_STORAGE)\r\n        //   : (this.ruleForm = {});\r\n        console.log('这是新增');\r\n        this.tableData = [\r\n          {\r\n            adjustmentType: '调整前量',\r\n          },\r\n          {\r\n            adjustmentType: '本次调整量',\r\n          },\r\n          {\r\n            adjustmentType: '调整后量',\r\n          },\r\n        ];\r\n      }\r\n    },\r\n    // 保存本地\r\n    save() {\r\n      localStorage.setItem('SAVE_STORAGE', JSON.stringify(this.ruleForm));\r\n    },\r\n    // 保存并新增\r\n    saveUpdate() {\r\n      // 验证两个form表单\r\n      // const tasks = [this.$refs.ruleForm1.validate(), this.$refs.ruleForm2.validate()];\r\n      // Promise.all(tasks)\r\n      //   .then((validate) => {\r\n      //     console.log(validate);\r\n      //     this.$http.post('/pages', this.ruleForm).then((res) => {\r\n      //       console.log(res);\r\n      //       this.$message.success('操作成功！');\r\n      //       this.cancel();\r\n      //     });\r\n      //   })\r\n      //   .catch(() => {\r\n      //     this.$message.error('验证未通过');\r\n      //   });\r\n      // console.log(this.$refs.table);\r\n      // 如果只需要验证一个form表单\r\n      this.$refs.modelAddForm.validate((valid) => {\r\n        if (valid) {\r\n          // 1. 保存数据逻辑\r\n          // this.$http.post('/pages', this.form).then(res => {\r\n          //   this.$message.success('操作成功！')\r\n          //   this.formCancel()\r\n          // })\r\n          console.log('验证通过');\r\n          // this.formCancel();\r\n        } else {\r\n          console.log('验证未通过');\r\n        }\r\n      });\r\n      // console.log(this.ruleForm);\r\n      this.$apis.apm.dailyThin\r\n        .addPagePcTAsSliceApprTpl({\r\n          ...this.ruleForm,\r\n          memberOrgCode: this.ruleForm.memberOrgCode[0],\r\n          busiYear: this.busiYear,\r\n          baMaterialWeight: this.tableData[2].materialWeight,\r\n          baMaterialProdWeight: this.tableData[2].materialProdWeight,\r\n          baMaterialBuyWeight: this.tableData[2].materialBuyWeight,\r\n          baSliceWeight: this.tableData[2].sliceWeight,\r\n          baSliceProdWeight: this.tableData[2].sliceProdWeight,\r\n          baSliceSaleWeight: this.tableData[2].sliceSaleWeight,\r\n          aaMaterialWeight: this.tableData[2].materialWeight,\r\n          aaMaterialProdWeight: this.tableData[2].materialProdWeight,\r\n          aaMaterialBuyWeight: this.tableData[2].materialBuyWeight,\r\n          aaSliceWeight: this.tableData[2].sliceWeight,\r\n          aaSliceProdWeight: this.tableData[2].sliceProdWeight,\r\n          aaSliceSaleWeight: this.tableData[2].sliceSaleWeight,\r\n          materialWeight: this.tableData[1].materialWeight,\r\n          materialProdWeight: this.tableData[1].materialProdWeight,\r\n          materialBuyWeight: this.tableData[1].materialBuyWeight,\r\n          sliceWeight: this.tableData[1].sliceWeight,\r\n          sliceProdWeight: this.tableData[1].sliceProdWeight,\r\n          sliceSaleWeight: this.tableData[1].sliceSaleWeight,\r\n        })\r\n        .then((res) => {\r\n          console.log(res);\r\n        });\r\n    },\r\n    // 取消\r\n    cancel() {\r\n      this.visible = false;\r\n      this.isAdd = true;\r\n      // 清空form\r\n      this.$refs.modelAddForm.resetFields();\r\n    },\r\n    // 计算合计的数据\r\n    sumNum(list, field) {\r\n      let count = 0;\r\n      list.forEach((item) => {\r\n        count += Number(item[field]);\r\n      });\r\n      return count.toFixed(2);\r\n    },\r\n    // 底部的合计\r\n    footerMethod({ columns, data }) {\r\n      // console.log(columns, data);\r\n      return [\r\n        columns.map((column, columnIndex) => {\r\n          if (columnIndex === 0) {\r\n            return '合计';\r\n          }\r\n          if (\r\n            [\r\n              'materialWeight',\r\n              // 'materialProdWeight',\r\n              // 'materialBuyWeight',\r\n              // 'sliceWeight',\r\n              // 'sliceProdWeight',\r\n              // 'sliceSaleWeight',\r\n            ].includes(column.property)\r\n          ) {\r\n            return this.sumNum(data, column.property);\r\n          }\r\n          return null;\r\n        }),\r\n      ];\r\n    },\r\n  },\r\n  created() {},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.tips {\r\n  color: rgb(183, 177, 177);\r\n  text-indent: 2em;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddModal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddModal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddModal.vue?vue&type=template&id=229137a6&scoped=true&\"\nimport script from \"./AddModal.vue?vue&type=script&lang=js&\"\nexport * from \"./AddModal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AddModal.vue?vue&type=style&index=0&id=229137a6&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"229137a6\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <ec-container title=\"薄片调拨计划量登记\" icon=\"onetomany\" color-code=\"001\">\r\n    <ec-container-body>\r\n      <ec-panel>\r\n        <ec-panel-toolbar>\r\n          <ec-panel-item>\r\n            <ec-panel-item-right style=\"font-size: 16px\"\r\n              >业务年度: {{ busiYear }}</ec-panel-item-right\r\n            >\r\n          </ec-panel-item>\r\n          <ec-panel-item>\r\n            <ec-query-panel :defaultFold=\"true\" @query=\"queryHandle\" @reset=\"resetHandle\">\r\n              <ec-query-item label=\"会员单位\">\r\n                <select-picker\r\n                  title=\"选择会员单位\"\r\n                  :lazy=\"false\"\r\n                  :search=\"false\"\r\n                  :fetchData=\"onFetchIndustryOrgList\"\r\n                  v-model=\"listQuery.memberOrgCode\"\r\n                />\r\n              </ec-query-item>\r\n              <ec-query-item label=\"操作类型\">\r\n                <ec-select\r\n                  showSearch\r\n                  allowClear\r\n                  placeholder=\"请选择\"\r\n                  v-model=\"listQuery.operateType\"\r\n                >\r\n                  <!-- <a-select-option value=\"1\" title=\"启用\"> 启用 </a-select-option>\r\n                  <a-select-option value=\"0\" title=\"停用\"> 停用 </a-select-option> -->\r\n                  <a-select-option\r\n                    v-for=\"item in operateTypeList\"\r\n                    :key=\"item.enumKey\"\r\n                    :value=\"item.enumKey\"\r\n                  >\r\n                    {{ item.name }}\r\n                  </a-select-option>\r\n                </ec-select>\r\n              </ec-query-item>\r\n              <ec-query-item label=\"计量单位\">\r\n                <ec-select\r\n                  showSearch\r\n                  allowClear\r\n                  placeholder=\"请选择\"\r\n                  v-model=\"listQuery.weightUnit\"\r\n                >\r\n                  <!-- <a-select-option value=\"1\" title=\"启用\"> 启用 </a-select-option>\r\n                  <a-select-option value=\"0\" title=\"停用\"> 停用 </a-select-option> -->\r\n                  <a-select-option v-for=\"item in weightUnitList\" :key=\"item.enumKey\">\r\n                    {{ item.name }}\r\n                  </a-select-option>\r\n                </ec-select>\r\n              </ec-query-item>\r\n              <ec-query-item label=\"办理依据\">\r\n                <a-input v-model=\"listQuery.remark\" placeholder=\"请输入\" />\r\n              </ec-query-item>\r\n              <!-- <template #action>\r\n                <a-button type=\"primary\" @click=\"handleQuery\">查询</a-button>\r\n                <a-button @click=\"handleSeniorQuery\">高级</a-button>\r\n              </template> -->\r\n            </ec-query-panel>\r\n          </ec-panel-item>\r\n          <ec-divider />\r\n        </ec-panel-toolbar>\r\n\r\n        <ec-panel-body>\r\n          <ec-v-layout>\r\n            <ec-v-item>\r\n              <ec-panel-toolbar>\r\n                <a-button type=\"primary\" @click=\"onAdd\">新增</a-button>\r\n              </ec-panel-toolbar>\r\n            </ec-v-item>\r\n            <ec-v-item>\r\n              <ec-table\r\n                ref=\"table\"\r\n                :data=\"tableData\"\r\n                :loading=\"loading\"\r\n                border\r\n                @page-action=\"handlePagination\"\r\n                :pagination=\"pagination\"\r\n                :footer-method=\"footerMethod\"\r\n                show-footer\r\n              >\r\n                <!-- <ec-table-col width=\"80\" type=\"checkbox\" align=\"center\"></ec-table-col> -->\r\n                <ec-table-col title=\"序号\" width=\"80\" type=\"seq\" align=\"center\"></ec-table-col>\r\n                <ec-table-col title=\"录入日期\" field=\"planDate\" align=\"center\"></ec-table-col>\r\n                <ec-table-col title=\"会员单位\" field=\"memberOrgCode\" align=\"center\"></ec-table-col>\r\n                <ec-table-colgroup title=\"原料调入计划\">\r\n                  <ec-table-col\r\n                    title=\"调入合计\"\r\n                    field=\"materialWeight\"\r\n                    align=\"center\"\r\n                  ></ec-table-col>\r\n                  <ec-table-col\r\n                    title=\"加工调入\"\r\n                    field=\"materialProdWeight\"\r\n                    align=\"center\"\r\n                  ></ec-table-col>\r\n                  <ec-table-col\r\n                    title=\"购销调入\"\r\n                    field=\"materialBuyWeight\"\r\n                    align=\"center\"\r\n                  ></ec-table-col>\r\n                </ec-table-colgroup>\r\n                <ec-table-colgroup title=\"原料调出计划\">\r\n                  <ec-table-col title=\"调出合计\" field=\"sliceWeight\" align=\"center\"></ec-table-col>\r\n                  <ec-table-col\r\n                    title=\"加工调出\"\r\n                    field=\"sliceProdWeight\"\r\n                    align=\"center\"\r\n                  ></ec-table-col>\r\n                  <ec-table-col\r\n                    title=\"销售调出\"\r\n                    field=\"sliceSaleWeight\"\r\n                    align=\"center\"\r\n                  ></ec-table-col>\r\n                </ec-table-colgroup>\r\n                <ec-table-col\r\n                  title=\"计划制定单位\"\r\n                  field=\"planMakeOrg\"\r\n                  align=\"center\"\r\n                ></ec-table-col>\r\n                <ec-table-col title=\"办理依据\" field=\"remark\" align=\"center\"></ec-table-col>\r\n                <ec-table-col title=\"操作\" #default=\"{ row }\" align=\"center\">\r\n                  <a-button type=\"link\" @click=\"onDetails(row, 'range')\">详细</a-button>\r\n                </ec-table-col>\r\n              </ec-table>\r\n            </ec-v-item>\r\n          </ec-v-layout>\r\n        </ec-panel-body>\r\n      </ec-panel>\r\n      <add-modal\r\n        ref=\"addModal\"\r\n        @save=\"save\"\r\n        :operateTypeList=\"operateTypeList\"\r\n        :weightUnitList=\"weightUnitList\"\r\n        :planMakeOrgList=\"planMakeOrgList\"\r\n        :industryOrgList=\"industryOrgList\"\r\n        :replaceFields=\"replaceFields\"\r\n      ></add-modal>\r\n    </ec-container-body>\r\n  </ec-container>\r\n</template>\r\n\r\n<script>\r\nimport AddModal from './AddModal/AddModal.vue';\r\nimport { SelectPicker } from '@euler-material/ecm-ui';\r\nimport { treeFormatList } from '@euler-material/ecm-utils';\r\n\r\nexport default {\r\n  name: 'dailyThin',\r\n  components: {\r\n    AddModal,\r\n    SelectPicker,\r\n  },\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      operateTypeList: [],\r\n      weightUnitList: [],\r\n      planMakeOrgList: [\r\n        { enumKey: 'PLAN', name: '计划司' },\r\n        { enumKey: 'SCIENCE', name: '科技司' },\r\n      ],\r\n      loading: false,\r\n      listQuery: {},\r\n      pagination: {\r\n        pageNumber: 1,\r\n        pageSize: 10,\r\n        total: 0,\r\n      },\r\n      // 工业单位\r\n      industryOrgList: [],\r\n      // 组织字段重置\r\n      replaceFields: {\r\n        pkey: 'parentBizCode',\r\n        title: 'orgName',\r\n        key: 'bizCode',\r\n        children: 'children',\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    bizCode() {\r\n      return this.$store.getters.getAppConfig?.bizCode;\r\n    },\r\n    busiYear() {\r\n      return this.$store.getters.getAppConfig?.yearValueMap?.DAILY_YEAR;\r\n    },\r\n  },\r\n  created() {\r\n    this.init();\r\n    this.handleQueryIndustryOrgList();\r\n  },\r\n  methods: {\r\n    save() {\r\n      console.log(123456789);\r\n    },\r\n    // 查询工业单位\r\n    async handleQueryIndustryOrgList() {\r\n      const params = {\r\n        busiYear: this.busiYear,\r\n        orgTypeEk: 'INDUSTRY',\r\n        orgLevelEk: '3',\r\n        parentBizCode: this.bizCode,\r\n      };\r\n      const res = await this.$apis.bim.org.queryBy(params);\r\n      this.industryOrgList = res.rows || [];\r\n    },\r\n    // 更新工业单位\r\n    onFetchIndustryOrgList() {\r\n      return new Promise((resolve) => {\r\n        const data = treeFormatList(this.industryOrgList, this.replaceFields);\r\n        resolve(data);\r\n      });\r\n    },\r\n    // 新增\r\n    onAdd() {\r\n      console.log('新增');\r\n      this.$refs.addModal.show();\r\n    },\r\n    // 详细查询\r\n    onDetails(row) {\r\n      this.$refs.addModal.show(row);\r\n    },\r\n    // 重置\r\n    resetHandle() {\r\n      this.listQuery = {};\r\n    },\r\n    // 请求分页查询\r\n    async getTableData() {\r\n      console.log(this.listQuery);\r\n      try {\r\n        const res = await this.$apis.apm.dailyThin.queryPagePcTAsSliceApprTpl({\r\n          ...this.listQuery,\r\n          // memberOrgCode: this.listQuery.memberOrgCode[0] || null,\r\n          pageNo: this.pagination.pageNumber,\r\n          pageSize: this.pagination.pageSize,\r\n        });\r\n        console.log(res);\r\n        this.tableData = res.rows;\r\n        this.pagination.total = res.totalRows;\r\n      } catch (err) {\r\n        console.log('err', err);\r\n      }\r\n    },\r\n    handlePagination(pageNumber, pageSize) {\r\n      this.pagination.pageNumber = pageNumber;\r\n      this.pagination.pageSize = pageSize;\r\n    },\r\n    // 查询\r\n    queryHandle() {\r\n      console.log(66666666666666666666);\r\n      this.getTableData();\r\n    },\r\n    // 枚举接口\r\n    init() {\r\n      this.getEnumType();\r\n    },\r\n    getEnumType() {\r\n      this.$apis.enum.index\r\n        .getEnumType({\r\n          enumTypeCodes: ['OPERATE_TYPE', 'WEIGHT_UNIT'],\r\n        })\r\n        .then((res) => {\r\n          if (res) {\r\n            console.log(res.enumMap);\r\n            this.operateTypeList = res.enumMap.OPERATE_TYPE;\r\n            this.weightUnitList = res.enumMap.WEIGHT_UNIT;\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    // 计算合计的数据\r\n    sumNum(list, field) {\r\n      let count = 0;\r\n      list.forEach((item) => {\r\n        count += Number(item[field]);\r\n      });\r\n      return count.toFixed(2);\r\n    },\r\n    // 底部的合计\r\n    footerMethod({ columns, data }) {\r\n      // console.log(columns, data);\r\n      return [\r\n        columns.map((column, columnIndex) => {\r\n          if (columnIndex === 0) {\r\n            return '合计';\r\n          }\r\n          if (\r\n            [\r\n              'materialWeight',\r\n              'materialProdWeight',\r\n              'materialBuyWeight',\r\n              'sliceWeight',\r\n              'sliceProdWeight',\r\n              'sliceSaleWeight',\r\n            ].includes(column.property)\r\n          ) {\r\n            return this.sumNum(data, column.property);\r\n          }\r\n          return null;\r\n        }),\r\n      ];\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=064072d3&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddModal.vue?vue&type=style&index=0&id=229137a6&prod&scoped=true&lang=css&\""],"sourceRoot":""}